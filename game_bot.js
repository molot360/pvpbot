const { VK, Keyboard, } = require('vk-io');
const vk = new VK();
const users = require('./users.json');
const fs = require('fs');
const { HearManager } = require('@vk-io/hear');
const { SSL_OP_NETSCAPE_CA_DN_BUG } = require('constants');
const { on } = require('process');
const { ALL } = require('dns');
const { Console } = require('console');
vk.setOptions({
token:"69226fb08e5bbc9c33198fd74c3e7e858a5bbd801b921dd37725dee9f2e13f061378586dad76ea9358e50"
})
const bot = new HearManager()

vk.updates.on('message_new', bot.middleware)

setInterval(async () => {
  fs.writeFileSync("./users.json", JSON.stringify(users, null, "\t"))
}, 500);

vk.updates.on('message', (next, context) => {
  const user = users.filter(x => x.id === next.senderId)[0]
  if(user) {
    return context()
  }
  vk.api.users.get({ user_ids: next.senderId, name_case: 'nom' }).then((result) => {
    users.push({
      id: next.senderId,
      name: result[0].first_name + ' ' + result[0].last_name, 
      nick: "Игрок",
      ban: false,
      rate: 0,
      atk: 60,
      atklvl: 1,
      duelatk: 0,
      hp: 300,
      hplvl: 1,
      duelhp: 0,
      def: 25,
      deflvl: 1,
      dueldef: 0,
      control: 0,
      clas: {
        name: "Воин",
        id: 1
      },
      money: 10000,
      quest: 0,
      adm: false,
      predictionduel: false,
      predictduel: false,
      duel: false,
      steps: 0,
      timer: 0,
      cd11: 0,
      del11: -1,
      cd12: 0,
      del12: -1,
      cd13: 0,
      cd14: 0,
      cd15: 0,
      spikes: -1,
      cd16: 0,
      clinch: 0,
      cd21: 0,
      cd22: 0,
      nakopleniye: 0,
      el1: 0,
      burn: 0,
      el2: 0,
      el3: 0,
      cd31: 0,
      poison: 0,
      cd32: 0,
      cd33: 0,
      cd34: 0,
      invisible: false,
      cd35: 0,
      cd36: 0,
      porezka: 0,
      cd37: 0,
      poisoning: -1
  })
})
  return context()
})

vk.updates.hear(/^!get users.json$/i, msg => {
  const users = require('./users.json')
  console.log(users)
  })

vk.updates.on('message', (next, context) => {
  const user = users.filter(x => x.id === next.senderId)[0]
  var a = -user.atk
  var b = user.hp
  var c = user.def
  var ba = b / a
  var bac = ba * c
  var mathabs = bac + b
  var rate = Math.abs(mathabs).toFixed(0)
  user.rate = Number(rate)
  return context()
})

vk.updates.hear(/^!топ силы$/i, msg => {
  const users = require('./users.json')
  const you = users.filter(x => x.id === msg.senderId)[0]
  var top3users = users.sort((a, b)=> (a.rate > b.rate) ? 1 : -1).slice(0, 1000).reverse();
  let topuser1nick = top3users[0].nick
  let topuser1rate = top3users[0].rate
  let topuser2nick = top3users[1].nick
  let topuser2rate = top3users[1].rate
  let topuser3nick = top3users[2].nick
  let topuser3rate = top3users[2].rate
  msg.send(`1⃣ ${topuser1nick} — ${topuser1rate}🏆\n2⃣ ${topuser2nick} — ${topuser2rate}🏆\n3⃣ ${topuser3nick} — ${topuser3rate}🏆\n\nВаш рейтинг силы — ${you.rate}🏆`)
  })

const classes = [
    {
      name: 'Воин',
      id: 1,
    },
    {
      name: 'Маг',
      id: 2,
    },
    {
      name: 'Ассасин',
      id: 3,
    }
  ]

  vk.updates.hear(/^!дейлы$/i, async (context) => {
    const user = users.filter(x => x.id === context.senderId)[0]
    if(user.nick == "Игрок") return context.send (`Невозможное действие. Установите себе ник`)
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: `Ежедневные квесты:\n\n🔷Квест 1: зачистка локации от монстров\n⌛Время выполнения: 2 часа\n💰Награда: 5.000💵\n\n🔷Квест 2: разнос вестей\n⌛Время выполнения: 1 час\n💰Награда: 3.000💵\n\n🔷Квест 3: помощь новичкам\n⌛Время выполнения: 4 часа\n💰Hаграда: 9.000💵`,
      keyboard: Keyboard.builder()
      .inline()
        .textButton({
          label: "Зачистка локации",
          color: "secondary",
          payload: "project RQ"
          })
      .row ()
      .inline()
        .textButton({
          label: "Разнос вестей",
          color: "secondary",
          payload: "project RQ"
          })
      .row ()
      .inline()
        .textButton({
          label: "Помощь новичкам",
          color: "secondary",
          payload: "project RQ"
          })
        })

  vk.updates.hear(/^(.*) Зачистка локации$/i, async (context) => {
    if(context.$match[1] != '[club202302035|@eswep]') return
    if(context.messagePayload != "project RQ") return
    if(user.nick == "Игрок") return context.send (`Невозможное действие. Установите себе ник`)
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: `@id${user.id}(${user.nick}), вы начали зачистку локации\n⌛Время работы: 2 часа`,
      disable_mentions: 1,
    })
    function zachistkalocation() {
      user.money += 5000
      vk.api.messages.send({
        peer_id: context.peerId,
        message: `@id${user.id}(${user.nick}), вы завершили работу\n💰Hаграда: 5.000💵`,
        disable_mentions: 1,
      })
    }
    setTimeout(zachistkalocation, 7200000)
  })

  vk.updates.hear(/^(.*) Разнос вестей$/i, async (context) => {
    if(context.$match[1] != '[club202302035|@eswep]') return
    if(context.messagePayload != "project RQ") return
    if(user.nick == "Игрок") return context.send (`Невозможное действие. Установите себе ник`)
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: `@id${user.id}(${user.nick}), вы начали разносить вести по городу\n⌛Время работы: 1 час`,
      disable_mentions: 1,
    })
    function raznosvestei() {
      user.money += 3000
      vk.api.messages.send({
        peer_id: context.peerId,
        message: `@id${user.id}(${user.nick}), вы завершили работу\n💰Hаграда: 3.000💵`,
        disable_mentions: 1,
      })
    }
    setTimeout(raznosvestei, 3600000)
  })

  vk.updates.hear(/^(.*) Помощь новичкам$/i, async (context) => {
    if(context.$match[1] != '[club202302035|@eswep]') return
    if(context.messagePayload != "project RQ") return
    if(user.nick == "Игрок") return context.send (`Невозможное действие. Установите себе ник`)
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: `${user.nick}, вы начали помогать новичкам\n⌛Время работы: 4 часа`,
      disable_mentions: 1,
    })
    function helpbeginners() {
      user.money += 9000
      vk.api.messages.send({
        peer_id: context.peerId,
        message: `@id${user.id}(${user.nick}), вы завершили работу\n💰Hаграда: 9.000💵`,
        disable_mentions: 1,
      })
    }
    setTimeout(helpbeginners, 14400000)
  })
})

vk.updates.hear(/^!кв (.*)/i, msg => {
  const user = users.filter(x => x.id === msg.senderId)[0]
  const u = users.filter(x => x.id === msg.replyMessage.senderId)[0]
  if(user.id != 492815523) return msg.send ('У вас нет доступа к этой команде')
  u.quest = Number(msg.$match[1])
  msg.send(`Счётчик квестов "${u.nick}" изменён на ${u.atk}`)
})

vk.updates.hear(/^!атк (.*)/i, msg => {
  const user = users.filter(x => x.id === msg.senderId)[0]
  const u = users.filter(x => x.id === msg.replyMessage.senderId)[0]
  if(user.id != 492815523) return msg.send ('У вас нет доступа к этой команде')
  u.atk = Number(msg.$match[1])
  msg.send(`Атака "${u.nick}" изменена на ${u.atk}`)
})

vk.updates.hear(/^!хп (.*)/i, msg => {
  const user = users.filter(x => x.id === msg.senderId)[0]
  const u = users.filter(x => x.id === msg.replyMessage.senderId)[0]
  if(user.id != 492815523) return msg.send ('У вас нет доступа к этой команде')
  u.hp = Number(msg.$match[1])
  msg.send(`ХП "${u.nick}" изменены на ${u.hp}`)
})

vk.updates.hear(/^!деф (.*)/i, msg => {
  const user = users.filter(x => x.id === msg.senderId)[0]
  const u = users.filter(x => x.id === msg.replyMessage.senderId)[0]
  if(user.id != 492815523) return msg.send ('У вас нет доступа к этой команде')
  u.def = Number(msg.$match[1])
  msg.send(`Защита "${u.nick}" изменена на ${u.def}`)
})

vk.updates.hear(/^!атклвл (.*)/i, msg => {
  const user = users.filter(x => x.id === msg.senderId)[0]
  const u = users.filter(x => x.id === msg.replyMessage.senderId)[0]
  if(user.id != 492815523) return msg.send ('У вас нет доступа к этой команде')
  u.atklvl = Number(msg.$match[1])
  msg.send(`Уровень атаки "${u.nick}" изменён на ${u.atklvl}`)
})

vk.updates.hear(/^!хплвл (.*)/i, msg => {
  const user = users.filter(x => x.id === msg.senderId)[0]
  const u = users.filter(x => x.id === msg.replyMessage.senderId)[0]
  if(user.id != 492815523) return msg.send ('У вас нет доступа к этой команде')
  u.hplvl = Number(msg.$match[1])
  msg.send(`Уровень ХП "${u.nick}" изменён на ${u.hplvl}`)
})

vk.updates.hear(/^!дефлвл (.*)/i, msg => {
  const user = users.filter(x => x.id === msg.senderId)[0]
  const u = users.filter(x => x.id === msg.replyMessage.senderId)[0]
  if(user.id != 492815523) return msg.send ('У вас нет доступа к этой команде')
  u.deflvl = Number(msg.$match[1])
  msg.send(`Уровень защиты "${u.nick}" изменён на ${u.deflvl}`)
})
  
  vk.updates.hear(/^(.*) Классы$/i, msg => {
    const user = users.filter(x => x.id === msg.senderId)[0]
    if(msg.$match[1] != '[club202302035|@eswep]') return
    if(msg.messagePayload != "project RQ") return
    if(user.nick == "Игрок") return msg.send (`Невозможное действие. Установите себе ник`)
    msg.send(`${user.nick}, вот все существующие классы:\n1. Воин\n2. Маг\n3. Ассасин\nДля смены класса необходимо иметь 5000💵\n\nЧтобы сменить класс, введи: "!класс [номер класса]"`)
  })
  
  vk.updates.hear(/^!класс ([0-9]+)/i, msg => {
    const user = users.filter(x => x.id === msg.senderId)[0]
    num = Number(msg.$match[1])
    if(user.nick == "Игрок") return msg.send (`Невозможное действие. Установите себе ник`)
    if(num > 3 || num < 1) return msg.send(`Такого класса не существует`)
    if(user.money < 5000) return msg.send (`Не хватает ${1000 - user.money}💵 на смену класса`)
    clas = classes.filter(x => x.id === num)[0]
    user.clas.name = clas.name
    user.clas.id = clas.id
    user.money -= 5000
    msg.send(`${user.nick}, вы сменили класс на "${clas.name}"`)
  })
  
  vk.updates.hear(/^!ник (.*)/i, msg => {
    const user = users.filter(x => x.id === msg.senderId)[0]
    nick = msg.$match[1]
    if(nick.length > 20) return msg.send(`Ник не может быть длиннее 20 символов`)
    if(user.money < 1000) return msg.send (`Не хватает ${1000 - user.money}💵 на смену ника`)
    if(msg.$match[1] == "Игрок") return msg.send (`Недопустимый ник`)
    user.nick = nick
    user.money -= 1000
    msg.send(`Вы сменили никнейм на "${nick}"`)
  })

  vk.updates.hear(/^Адм/i, msg => {
    const u = users.filter(x => x.id === msg.replyMessage.senderId)[0]
    if(msg.senderId != 492815523) return msg.send ('У вас нет доступа к этой команде')
    u.adm = true
    msg.send(`Игрок @id${u.id}(${u.nick}) назначен администратором`)
  })

  vk.updates.hear(/^-Адм/i, msg => {
    const u = users.filter(x => x.id === msg.replyMessage.senderId)[0]
    if(msg.senderId != 492815523) return msg.send ('У вас нет доступа к этой команде')
    u.adm = false
    msg.send(`Игрок @id${u.id}(${u.nick}) больше не администратор`)
  })

  vk.updates.hear(/^!перевод ([0-9]+)/i, msg => {
    const user = users.filter(x => x.id === msg.senderId)[0]
    const u = users.filter(x => x.id === msg.replyMessage.senderId)[0]
    var finalplata2 = Number(msg.$match[1])
    if(user.money < finalplata2) return msg.send(`Недостаточно 💵`)
    user.money -= finalplata2
    u.money += finalplata2
    msg.send(`Игроку "${u.nick}" переведено ${finalplata2}💵`)
  })

  vk.updates.hear(/^!снять ([0-9]+)/i, msg => {
    const user = users.filter(x => x.id === msg.senderId)[0]
    const u = users.filter(x => x.id === msg.replyMessage.senderId)[0]
    if(user.adm == false) return msg.send (`У вас нет доступа к этой команде`)
    var finalplata2 = Number(msg.$match[1])
    if(user.money < finalplata2) return msg.send(`Недостаточно 💵`)
    u.money -= finalplata2
    msg.send(`Со счёта игрока "${u.nick}" снято ${finalplata2}💵`)
  })

  vk.updates.hear(/^!выдать ([0-9]+)/i, msg => {
    const user = users.filter(x => x.id === msg.senderId)[0]
    const u = users.filter(x => x.id === msg.replyMessage.senderId)[0]
    if(user.adm == false) return msg.send (`У вас нет доступа к этой команде`)
    var finalplata2 = Number(msg.$match[1])
    if(user.money < finalplata2) return msg.send(`Недостаточно 💵`)
    u.money += finalplata2
    msg.send(`Игроку "${u.nick}" выдано ${finalplata2}💵`)
  })

  vk.updates.on('chat_invite_user', (next, context) => {
    const user = users.filter(x => x.id === next.eventMemberId)[0]
    if(user.ban == true) {
      next.send('❗В беседу был приглашен забаненый пользователь❗\nОн будет исключён')
      vk.api.messages.removeChatUser({ chat_id: next.chatId, user_id: user.id })
    }
    return context()
  })
  
  vk.updates.hear(/^!бан$/i, msg => {
    const user = users.filter(x => x.id === msg.senderId)[0]
    if(user.adm = false) return msg.send('Нет доступа к этой команде')
    if(!msg.hasReplyMessage) return
    const u = users.filter(x => x.id === msg.replyMessage.senderId)[0]
    if(user.id == u.id) return msg.send('Нельзя выдать бан самому себе')
    u.ban = true
    vk.api.messages.send({
      peer_id: msg.peerId,
      message: `@id${u.id}(${u.name}), вы были забанены`,
      disable_mentions: 1
    })
    vk.api.messages.removeChatUser({ chat_id: msg.chatId, user_id: u.id })
  })
  
  vk.updates.hear(/^!снять бан$/i, msg => {
    const user = users.filter(x => x.id === msg.senderId)[0]
    if(user.adm = false) return msg.send('Нет доступа к этой команде')
    if(!msg.hasReplyMessage) return
    const u = users.filter(x => x.id === msg.replyMessage.senderId)[0]
    if(u.ban == false) return msg.send(`${u.name} не забанен(а)`)
    u.ban = false
    vk.api.messages.send({
      peer_id: msg.peerId,
      message: `@id${u.id}(${u.name}) был разбанен`,
      disable_mentions: 1
    })
  })

  vk.updates.hear(/^!обнулить/i, msg => {
    const user = users.filter(x => x.id === msg.senderId)[0]
    const u = users.filter(x => x.id === msg.replyMessage.senderId)[0]
    if(user.adm == false) return msg.send (`У вас нет доступа к этой команде`)
    u.rate = 175
		u.atk = 60
		u.atklvl = 1
		u.duelatk = 0
		u.hp = 300
		u.hplvl = 1
		u.duelhp = 0
		u.def = 25
		u.deflvl = 1
		u.dueldef = 0
		u.control = 0
		u.clas.name = "Воин"
    u.clas.id = 1
		u.money = 0,
		u.quest = 0
		u.adm = false
		u.predictionduel = false
		u.predictduel = false
		u.duel = false
		u.steps = 0
		u.timer = 0
		u.cd11 = 0
		u.del11 = -1
		u.cd12 = 0
		u.del12 = -1
    u.cd13 = 0
		u.d14 = 0
		u.cd15 = 0
		u.spikes = -1
		u.cd16 = 0
		u.clinch = -1
		u.cd21 = 0
		u.cd22 = 0
		u.nakopleniye = 0
		u.el1 = 0
		u.burn = 0
		u.el2 = 0
		u.el3 = 0
		u.cd31 = 0
		u.poison = 0
		u.cd32 = 0
		u.cd33 = 0
		u.cd34 = 0
		u.invisible = false
		u.cd35 = 0
		u.cd36 = 0
		u.porezka = 0
		u.cd37 = 0
		u.poisoning = -1
    msg.send(`Аккаунт @id${u.id}(${u.nick}) был обнулён`)
  })

  vk.updates.hear(/^!топ богачей$/i, msg => {
    const users = require('./users.json')
    const you = users.filter(x => x.id === msg.senderId)[0]
    var top3users = users.sort((a, b)=> (a.money > b.money) ? 1 : -1).slice(0, 1000).reverse();
    let topuser1nick = top3users[0].nick
    let topuser1money = top3users[0].money
    let topuser2nick = top3users[1].nick
    let topuser2money = top3users[1].money
    let topuser3nick = top3users[2].nick
    let topuser3money = top3users[2].money
    msg.send(`1⃣ ${topuser1nick} — ${topuser1money}💵\n2⃣ ${topuser2nick} — ${topuser2money}💵\n3⃣ ${topuser3nick} — ${topuser3money}💵\n\nВаш счёт — ${you.money}💵`)
    })

  vk.updates.hear(/^(.*) Профиль/i, msg => {
    const user = users.filter(x => x.id === msg.senderId)[0]
    if(msg.$match[1] != '[club202302035|@eswep]') return
    if(msg.messagePayload != "project RQ") return
    if(user.nick == "Игрок") return msg.send (`Невозможное действие. Установите себе ник`)
    var text = ''
    if(user.adm == true) text += `✅Администратор`
    msg.send(`📋Ваш профиль:\nНик: ${user.nick}\nКласс: ${user.clas.name}\n🏆Рейтинг силы: ${user.rate}\n❤Здоровье: ${user.hp}\n⚔Атака: ${user.atk}\n🛡Защита: ${user.def} (1🛡= -1⚔)\n💵Деньги: ${user.money}\n\n${text}`)
  })

  vk.updates.hear(/^!проф/i, msg => {
    const user = users.filter(x => x.id === msg.senderId)[0]
    const u = users.filter(x => x.id === msg.replyMessage.senderId)[0]
    if(user.nick == "Игрок") return msg.send (`Невозможное действие. Установите себе ник`)
    if(!msg.hasReplyMessage) return
      var text = ''
      if(u.adm == true) text += `✅Администратор`
      vk.api.messages.send({
        peer_id: msg.peerId,
        message: (`📋Профиль игрока @id${u.id}(${u.nick}):\nКласс: ${u.clas.name}\n🏆Рейтинг силы: ${u.rate}\n❤Здоровье: ${u.hp}\n⚔Атака: ${u.atk}\n🛡Защита: ${u.def}\n\n${text}`),
        disable_mentions: 1
      })
  })

  vk.updates.hear(/^(.*) Умения/i, msg => {
    const user = users.filter(x => x.id === msg.senderId)[0]
    if(msg.$match[1] != '[club202302035|@eswep]') return
    if(msg.messagePayload != "project RQ") return
    if(user.nick == "Игрок") return msg.send (`Невозможное действие. Установите себе ник`)
    if(user.clas.id == 1)
    msg.send ('Умения класса Воин:\n\n😈|Ярость: на 20% увеличивает своё здоровье и атаку на 6 ходов. Перезарядка: 13 ходов\n\n🛡|Щит: увеличивает свой показатель брони на 20% на 5 ходов. Перезарядка: 9 ходов\n\n🖤|Чёрное сердце: наносит урон противнику в размере 20% от своего здоровья. Перезарядка: 5 ходов\n\n❣|Жажда крови: наносит урон противнику, равный 10% от его текущего здоровья и исцеляет себе столько же. Перезарядка: 3 ходов\n\n☦|Кара: добивает противника, если у него остаётся меньше, чем 15% здоровья. Перезарядка: нет.\n\n⚙|Шипы: возвращает противнику 50% урона от его атак на следующие 4 хода. Перезарядка: 7 ходов\n\n⚔|Клинч: блокирует следующий ход противника если это контроль, а если это атака, то ещё и наносит (АТК) урона. Перезарядка: 7 ходов\n\nАТК|Атака: наносит урон, равный вашей атаке')                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
    if(user.clas.id == 2)
    msg.send ('Умения класса Маг:\n\n❄|Оковы льда: на 4 хода запрещает врагу использовать умения. Перезарядка: 10 ходов\n\n💥|Накопление энергии: после 3-ёх применений запрещает противнику использовать умения в течение 6 ходов. Наносит (АТК) урона.\n\n🔥|Огонь: наносит урон противнику, равный вашей атаке\n\n⚡|Молния: наносит урон противнику, равный вашей атаке\n\n💧|Вода: наносит урон противнику, равный вашей атаке\n\n🍃|Исцеляет вам здоровье в размере вашей атаки. Перезарядка: 3 хода\n\nАТК|наносит урон противнику, равный вашей атаке\n\nМаг имеет комбинации из трёх умений, зависящие от последнего умения 🔥, ⚡ или 💧\nЕсли 🔥 последний, то поджигает противника на 3 хода, нанося урон, равный 70% вашей атаки\nЕсли ⚡ последний, то наносит (АТК * 2) урона дополнительно\nЕсли 💧 последний, то контролирует противника на 4 хода')
    if(user.clas.id == 3)
    msg.send ('Умения класса Ассасин:\n\n🦠|Яд: заражает противника на 6 ходов, нанося урон, равный половине вашей атаки. Перезарядка: 12 ходов\n\n🔪|Смертельный удар: наносит урон противнику, равный АТК * 2. Если противник под действием яда, то наносится дополнительный урон, равный вашей атаке. Если противник атакован из невидимости, то урон от умения увеличивается в два раза. Перезарядка: 7 ходов\n\n💣|Отвлечение: запрещает противнику использовать умения на 4 хода. Перезарядка: 10 ходов\n\n👁‍🗨|Невидимость: позволяет уйти в невидимость на 2 хода и перезаряжает 🔪, 💣, 🗡. Перезарядка: 10 ходов\n\n🧬|Нарушение в ДНК: ассасин может исцелиться на последнем ходе действия яда, исцелив себе половину от чистого (без учёта брони и блокирующих умений) урона яда. Перезарядка: 13 ходов\n\n🗡|Сквозной удар: наносит противнику урон, равный вашей атаке и обнуляет его защиту на 4 хода. Перезарядка: 7 ходов\n\n💉|Отравление: ассасин отравляет себя на 5 ходов, нанося каждый ход урон, равный своей атаке, когда эффект закончится — он исцелит себе в 2 раза больше здоровья, чем нанесённый себе урон. Перезарядка: 9 ходов\n\nАТК|Атака: наносит противнику урон, равный вашей  атаке')
  })

  vk.updates.hear(/^(.*) Улучшения$/i, msg => {
    const user = users.filter(x => x.id === msg.senderId)[0]
    if(msg.$match[1] != '[club202302035|@eswep]') return
    if(msg.messagePayload != "project RQ") return
    var text1 = ''
    if(user.atklvl == 1) text1 = 12
    if(user.atklvl == 2) text1 = 15
    if(user.atklvl == 3) text1 = 18
    if(user.atklvl == 4) text1 = 25
    if(user.atklvl == 5) text1 = 30
    if(user.atklvl == 6) text1 = 37
    if(user.atklvl == 7) text1 = 45
    if(user.atklvl == 8) text1 = 56
    if(user.atklvl == 9) text1 = 69
    if(user.atklvl == 10) text1 = 84
    if(user.atklvl == 11) text1 = 0
    var text2 = ''
    if(user.hplvl == 1) text2 = 60
    if(user.hplvl == 2) text2 = 72
    if(user.hplvl == 3) text2 = 86
    if(user.hplvl == 4) text2 = 103
    if(user.hplvl == 5) text2 = 123
    if(user.hplvl == 6) text2 = 149
    if(user.hplvl == 7) text2 = 179
    if(user.hplvl == 8) text2 = 215
    if(user.hplvl == 9) text2 = 258
    if(user.hplvl == 10) text2 = 309
    if(user.hplvl == 11) text2 = 0
    var text3 = ''
    if(user.deflvl == 1) text3 = 5
    if(user.deflvl == 2) text3 = 6
    if(user.deflvl == 3) text3 = 7
    if(user.deflvl == 4) text3 = 9
    if(user.deflvl == 5) text3 = 10
    if(user.deflvl == 6) text3 = 12
    if(user.deflvl == 7) text3 = 15
    if(user.deflvl == 8) text3 = 18
    if(user.deflvl == 9) text3 = 22
    if(user.deflvl == 10) text3 = 26
    if(user.deflvl == 11) text3 = 0
      vk.api.messages.send({
        peer_id: msg.peerId,
        message: `Улучшения харатеристик:\n\nАТК: ${user.atk} (уровень: ${user.atklvl}) —> АТК +${text1} (уровень: ${user.atklvl + 1})\nХП: ${user.hp} (уровень: ${user.hplvl}) —> ХП +${text2} (уровень: ${user.hplvl + 1})\nДЕФ: ${user.def} (уровень: ${user.deflvl}) —> ДЕФ +${text3} (уровень: ${user.deflvl + 1})`,
        disable_mentions: 1,
        keyboard: Keyboard.builder()
        .inline()
          .textButton({
            label: "ХП+",
            color: "positive",
            payload: "project RQ"
            })
        .inline()
          .textButton({
            label: "АТК+",
            color: "negative",
            payload: "project RQ"
            })
        .inline()
          .textButton({
            label: "ДЕФ+",
            color: "primary",
            payload: "project RQ"
            })
          })
  })

  vk.updates.hear(/^(.*) ХП\+$/i, msg => {
    const user = users.filter(x => x.id === msg.senderId)[0]
    if(msg.$match[1] != '[club202302035|@eswep]') return
    if(msg.messagePayload != "project RQ") return
    if(user.nick == "Игрок") return msg.send (`Невозможное действие. Установите себе ник`)
    if(user.hplvl == 11) return msg.send('Здоровье на максимальном уровне')
    if(user.hplvl == 1) {
      if(user.money < 5000) return msg.send(`Недостаточно 💵`)
      user.hp += 60
      user.money -= 5000
      msg.send(`Здоровье повышено до ${user.hp}, с вашего счёта списано 5000💵`)
    }
    if(user.hplvl == 2) {
      if(user.money < 6500) return msg.send(`Недостаточно 💵`)
      user.hp += 72
      user.money -= 6500
      msg.send(`Здоровье повышено до ${user.hp}, с вашего счёта списано 6500💵`)
    }
    if(user.hplvl == 3) {
      if(user.money < 8000) return msg.send(`Недостаточно 💵`)
      user.hp += 86
      user.money -= 8000
      msg.send(`Здоровье повышено до ${user.hp}, с вашего счёта списано 8000💵`)
    }
    if(user.hplvl == 4) {
      if(user.money < 10000) return msg.send(`Недостаточно 💵`)
      user.hp += 103
      user.money -= 10000
      msg.send(`Здоровье повышено до ${user.hp}, с вашего счёта списано 10000💵`)
    }
    if(user.hplvl == 5) {
      if(user.money < 12000) return msg.send(`Недостаточно 💵`)
      user.hp += 124
      user.money -= 12000
      msg.send(`Здоровье повышено до ${user.hp}, с вашего счёта списано 12000💵`)
    }
    if(user.hplvl == 6) {
      if(user.money < 14000) return msg.send(`Недостаточно 💵`)
      user.hp += 149
      user.money -= 14000
      msg.send(`Здоровье повышено до ${user.hp}, с вашего счёта списано 14000💵`)
    }
    if(user.hplvl == 7) {
      if(user.money < 16500) return msg.send(`Недостаточно 💵`)
      user.hp += 179
      user.money -= 16500
      msg.send(`Здоровье повышено до ${user.hp}, с вашего счёта списано 16500💵`)
    }
    if(user.hplvl == 8) {
      if(user.money < 19000) return msg.send(`Недостаточно 💵`)
      user.hp += 215
      user.money -= 19000
      msg.send(`Здоровье повышено до ${user.hp}, с вашего счёта списано 19000💵`)
    }
    if(user.hplvl == 9) {
      if(user.money < 23000) return msg.send(`Недостаточно 💵`)
      user.hp += 258
      user.money -= 23000
      msg.send(`Здоровье повышено до ${user.hp}, с вашего счёта списано 23000💵`)
    }
    if(user.hplvl == 10) {
      if(user.money < 30000) return msg.send(`Недостаточно 💵`)
      user.hp += 309
      user.money -= 30000
      msg.send(`Здоровье повышено до ${user.hp}, с вашего счёта списано 30000💵`)
    }
    user.hplvl += 1
  })

  vk.updates.hear(/^(.*) АТК\+$/i, msg => {
    const user = users.filter(x => x.id === msg.senderId)[0]
    if(msg.$match[1] != '[club202302035|@eswep]') return
    if(msg.messagePayload != "project RQ") return
    if(user.nick == "Игрок") return msg.send (`Невозможное действие. Установите себе ник`)
    if(user.atklvl == 11) return msg.send('Атака на максимальном уровне')
    if(user.atklvl == 1) {
      if(user.money < 5000) return msg.send(`Недостаточно 💵`)
      user.atk += 12
      user.money -= 5000
      msg.send(`Атака повышена до ${user.atk}, с вашего счёта списано 5000💵`)
    }
    if(user.atklvl == 2) {
      if(user.money < 6500) return msg.send(`Недостаточно 💵`)
      user.atk += 15
      user.money -= 6500
      msg.send(`Атака повышена до ${user.atk}, с вашего счёта списано 6500💵`)
    }
    if(user.atklvl == 3) {
      if(user.money < 8000) return msg.send(`Недостаточно 💵`)
      user.atk += 18
      user.money -= 8000
      msg.send(`Атака повышена до ${user.atk}, с вашего счёта списано 8000💵`)
    }
    if(user.atklvl == 4) {
      if(user.money < 10000) return msg.send(`Недостаточно 💵`)
      user.atk += 25
      user.money -= 10000
      msg.send(`Атака повышена до ${user.atk}, с вашего счёта списано 10000💵`)
    }
    if(user.atklvl == 5) {
      if(user.money < 12000) return msg.send(`Недостаточно 💵`)
      user.atk += 30
      user.money -= 12000
      msg.send(`Атака повышена до ${user.atk}, с вашего счёта списано 12000💵`)
    }
    if(user.atklvl == 6) {
      if(user.money < 14000) return msg.send(`Недостаточно 💵`)
      user.atk += 37
      user.money -= 14000
      msg.send(`Атака повышена до ${user.atk}, с вашего счёта списано 14000💵`)
    }
    if(user.atklvl == 7) {
      if(user.money < 16500) return msg.send(`Недостаточно 💵`)
      user.atk += 45
      user.money -= 16500
      msg.send(`Атака повышена до ${user.atk}, с вашего счёта списано 16500💵`)
    }
    if(user.atklvl == 8) {
      if(user.money < 19000) return msg.send(`Недостаточно 💵`)
      user.atk += 56
      user.money -= 19000
      msg.send(`Атака повышена до ${user.atk}, с вашего счёта списано 19000💵`)
    }
    if(user.atklvl == 9) {
      if(user.money < 23000) return msg.send(`Недостаточно 💵`)
      user.atk += 69
      user.money -= 23000
      msg.send(`Атака повышена до ${user.atk}, с вашего счёта списано 23000💵`)
    }
    if(user.atklvl == 10) {
      if(user.money < 30000) return msg.send(`Недостаточно 💵`)
      user.atk += 84
      user.money -= 30000
      msg.send(`Атака повышена до ${user.atk}, с вашего счёта списано 30000💵`)
    }
    user.atklvl += 1
  })

  vk.updates.hear(/^(.*) ДЕФ\+$/i, msg => {
    const user = users.filter(x => x.id === msg.senderId)[0]
    if(msg.$match[1] != '[club202302035|@eswep]') return
    if(msg.messagePayload != "project RQ") return
    if(user.nick == "Игрок") return msg.send (`Невозможное действие. Установите себе ник`)
    if(user.deflvl == 11) return msg.send('Защита на максимальном уровне')
    if(user.deflvl == 1) {
      if(user.money < 5000) return msg.send(`Недостаточно 💵`)
      user.def += 5
      user.money -= 5000
      msg.send(`Защита повышена до ${user.def}, с вашего счёта списано 5000💵`)
    }
    if(user.deflvl == 2) {
      if(user.money < 6500) return msg.send(`Недостаточно 💵`)
      user.def += 6
      user.money -= 6500
      msg.send(`Защита повышена до ${user.def}, с вашего счёта списано 6500💵`)
    }
    if(user.deflvl == 3) {
      if(user.money < 8000) return msg.send(`Недостаточно 💵`)
      user.def += 7
      user.money -= 8000
      msg.send(`Защита повышена до ${user.def}, с вашего счёта списано 8000💵`)
    }
    if(user.deflvl == 4) {
      if(user.money < 10000) return msg.send(`Недостаточно 💵`)
      user.def += 9
      user.money -= 10000
      msg.send(`Защита повышена до ${user.def}, с вашего счёта списано 10000💵`)
    }
    if(user.deflvl == 5) {
      if(user.money < 12000) return msg.send(`Недостаточно 💵`)
      user.def += 10
      user.money -= 12000
      msg.send(`Защита повышена до ${user.def}, с вашего счёта списано 12000💵`)
    }
    if(user.deflvl == 6) {
      if(user.money < 14000) return msg.send(`Недостаточно 💵`)
      user.def += 12
      user.money -= 14000
      msg.send(`Защита повышена до ${user.def}, с вашего счёта списано 14000💵`)
    }
    if(user.deflvl == 7) {
      if(user.money < 16500) return msg.send(`Недостаточно 💵`)
      user.def += 15
      user.money -= 16500
      msg.send(`Защита повышена до ${user.def}, с вашего счёта списано 16500💵`)
    }
    if(user.deflvl == 8) {
      if(user.money < 19000) return msg.send(`Недостаточно 💵`)
      user.def += 18
      user.money -= 19000
      msg.send(`Защита повышена до ${user.def}, с вашего счёта списано 19000💵`)
    }
    if(user.deflvl == 9) {
      if(user.money < 23000) return msg.send(`Недостаточно 💵`)
      user.def += 22
      user.money -= 23000
      msg.send(`Защита повышена до ${user.def}, с вашего счёта списано 23000💵`)
    }
    if(user.deflvl == 10) {
      if(user.money < 30000) return msg.send(`Недостаточно 💵`)
      user.def += 26
      user.money -= 30000
      msg.send(`Защита повышена до ${user.def}, с вашего счёта списано 30000💵`)
    }
    user.deflvl += 1
  })

  vk.updates.hear(/^!д$/i, async (context) => {
    let user = users.filter(x => x.id === context.senderId)[0]
    let u = users.filter(x => x.id === context.replyMessage.senderId)[0]
    console.log(user.id)
    console.log(u.id)
    if(user.nick == "Игрок") return context.send (`Невозможное действие. Установите себе ник`)
    if(!context.hasReplyMessage) return context.send('Для вызова дуэли необходимо переслать сообщение')
    if(user.id == u.id) return context.send('Нельзя вызвать на дуэль себя')
    for (let i = 0; i < users.length; i++) {
      if(users[i].duel == true) return context.send (`Арена занята`)
    }
    u.predictionduel = true
    user.predictduel = true 
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: `@id${user.id}(${user.nick}) вызвал на дуэль @id${u.id}(${u.nick})`,
      disable_mentions: 1,
      keyboard: Keyboard.builder()
      .inline()
        .textButton({
          label: "⚔Принять",
          color: "positive",
          payload: "project RQ"
          })
      .inline()
        .textButton({
          label: "✋🏻Отклонить",
          color: "negative",
          payload: "project RQ"
          }),
        })
    if(u.duel != true || user.duel != true) {
      setTimeout(msg, 60000)
    }
    function msg() {
      u.predictionduel = false
      user.predictduel = false 
    }

    vk.updates.hear(/^(.*) ⚔Принять$/i, msg => {
      if(user.nick == "Игрок") return msg.send (`Невозможное действие. Установите себе ник`)
      if(msg.senderId != u.id) return msg.send (`Id`)
      if(u.predictionduel != true) return msg.send(`Pr`)
      if(msg.$match[1] != '[club202302035|@eswep]') return msg.send (`Тег`)
      if(msg.messagePayload != "project RQ") return msg.send (`Payload`)
      console.log(user.id)
      console.log(u.id)
      user.duel = true
      u.duel = true
      user.duelhp = user.hp
      user.duelatk = user.atk
      user.dueldef = user.def
      u.duelhp = u.hp
      u.duelatk = u.atk
      u.dueldef = u.def
      u.predictionduel = false
      user.predictduel = false
      user.predictionduel = false
      u.predictduel = false
      user.steps += 1
      if (user.clas.id == 1) {
        vk.api.messages.send({
          peer_id: msg.peerId,
          message: `@id${user.id}(${user.nick}) принял дуэль от @id${u.id}(${u.nick}). Первый ход делает @id${user.id}(${user.nick})`,
          disable_mentions: 1,
          keyboard: Keyboard.builder()
          .inline()
            .textButton({
              label: "😈",
              color: "primary",
              payload: "project RQ"
              })
          .inline()
            .textButton({
              label: "🛡",
              color: "primary",
              payload: "project RQ"
              })
          .inline()
            .textButton({
              label: "🖤",
              color: "negative",
              payload: "project RQ"
              })
          .inline()
            .textButton({
              label: "❣",
              color: "positive",
              payload: "project RQ"
              })
          .row()
          .inline()
            .textButton({
              label: "☦",
              color: "negative",
              payload: "project RQ"
              })
          .inline()
            .textButton({
              label: "⚙",
              color: "primary",
              payload: "project RQ"
              })
          .inline()
            .textButton({
              label: "⚔",
              color: "primary",
              payload: "project RQ"
              })
          .inline()
            .textButton({
              label: "АТК",
              color: "negative",
              payload: "project RQ"
              })
            })
      }
      if (user.clas.id == 2) {
        vk.api.messages.send({
          peer_id: msg.peerId,
          message: `@id${user.id}(${user.nick}) принял дуэль от @id${u.id}(${u.nick}). Первый ход делает @id${user.id}(${user.nick})`,
          disable_mentions: 1,
          keyboard: Keyboard.builder()
          .inline()
            .textButton({
              label: "❄",
              color: "primary",
              payload: "project RQ"
              })
          .inline()
            .textButton({
              label: "💥",
              color: "secondary",
              payload: "project RQ"
              })
          .inline()
            .textButton({
              label: "🍃",
              color: "positive",
              payload: "project RQ"
              })
          .inline()
            .textButton({
              label: "🔥",
              color: "negative",
              payload: "project RQ"
              })
          .row()
          .inline()
            .textButton({
              label: "💧",
              color: "negative",
              payload: "project RQ"
              })
          .inline()
            .textButton({
              label: "⚡",
              color: "negative",
              payload: "project RQ"
              })
          .inline()
            .textButton({
              label: "АТК",
              color: "negative",
              payload: "project RQ"
              })
            })
      }
      if (user.clas.id == 3) {
      vk.api.messages.send({
        peer_id: msg.peerId,
        message: `@id${user.id}(${user.nick}) принял дуэль от @id${u.id}(${u.nick}). Первый ход делает @id${user.id}(${user.nick})`,
        disable_mentions: 1,
        keyboard: Keyboard.builder()
        .inline()
          .textButton({
            label: "🦠",
            color: "negative",
            payload: "project RQ"
            })
        .inline()
          .textButton({
            label: "🔪",
            color: "negative",
            payload: "project RQ"
            })
        .inline()
          .textButton({
            label: "💣",
            color: "primary",
            payload: "project RQ"
            })
        .inline()
          .textButton({
            label: "👁‍🗨",
            color: "primary",
            payload: "project RQ"
            })
        .row()
        .inline()
          .textButton({
            label: "🧬",
            color: "positive",
            payload: "project RQ"
            })
        .inline()
          .textButton({
            label: "🗡",
            color: "secondary",
            payload: "project RQ"
            })
        .inline()
          .textButton({
            label: "💉",
            color: "positive",
            payload: "project RQ"
            })
        .inline()
          .textButton({
            label: "АТК",
            color: "negative",
            payload: "project RQ"
            })
          })
        }
    })
    
    vk.updates.hear(/^!с$/i, msg => {
      if(msg.senderId == u.id) {
        var constu = u
        u = user
        user = constu
      }
      if(user.duel != true) return
      if(u.duel != true) return
      var plata2 = user.money
      var procentplata = 10
      var resultplata2 = plata2 / 100 * procentplata
      let num27 = resultplata2
      var finalplata = num27.toFixed(0)
      var finalplata2 = Number(finalplata)
      user.money -= finalplata2
      u.money += finalplata2
      user.duel = false
      u.duel = false
      u.predictionduel = false
      user.predictduel = false
      user.steps = 0
      u.steps = 0
      user.timer = 0
      u.timer = 0
      user.duelhp = 0
      user.duelatk = 0
      user.dueldef = 0
      u.duelhp = 0
      u.duelatk = 0
      u.dueldef = 0
      user.cd11 = 0,
      user.del11 = -1,
      user.cd12 = 0,
      user.del12 = -1,
      user.cd13 = 0,
      user.cd14 = 0,
      user.cd15 = 0,
      user.spikes = -1,
      user.cd16 = 0,
      user.clinch = -1,
      user.cd21 = 0,
      user.cd22 = 0,
      user.nakopleniye = 0,
      user.el1 = 0,
      user.burn = 0,
      user.el2 = 0,
      user.el3 = 0,
      user.cd31 = 0,
      user.poison = 0,
      user.cd32 = 0,
      user.cd33 = 0,
      user.cd34 = 0,
      user.invisible = false,
      user.cd35 = 0,
      user.cd36 = 0,
      user.cd37 = 0,
      user.poisoning = -1
      u.cd11 = 0,
      u.del11 = -1,
      u.cd12 = 0,
      u.del12 = -1,
      u.cd13 = 0,
      u.cd14 = 0,
      u.cd15 = 0,
      u.spikes = -1,
      u.cd16 = 0,
      u.clinch = -1,
      u.cd21 = 0,
      u.cd22 = 0,
      u.nakopleniye = 0,
      u.el1 = 0,
      u.burn = 0,
      u.el2 = 0,
      u.el3 = 0,
      u.cd31 = 0,
      u.poison = 0,
      u.cd32 = 0,
      u.cd33 = 0,
      u.cd34 = 0,
      u.invisible = false,
      u.cd35 = 0,
      u.cd36 = 0,
      u.cd37 = 0,
      u.poisoning = -1
      msg.send(`${user.nick} сдался ${u.nick}. Со счёта ${user.nick} списано ${finalplata2}💵 и начислено на счёт ${u.nick}`)
      var constuser = user
      user = u
      u = constuser
    })

    vk.updates.hear(/^(.*) ✋🏻Отклонить$/i, msg => {
      if(user.nick == "Игрок") return msg.send (`Невозможное действие. Установите себе ник`)
      if(msg.senderId != user.id) return
      if(msg.$match[1] != '[club202302035|@eswep]') return
      if(msg.messagePayload != "project RQ") return
      msg.send(`@id${u.id}(${u.nick}) отклонил дуэль от @id${user.id}(${user.nick})`)
    })
  
  vk.updates.hear(/^(.*) 😈$/i, msg => {
    if(user.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(u.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(user.steps > 100 || u.steps > 100) {
      user.duel = false
      u.duel = false
      u.predictionduel = false
      user.predictduel = false
      user.steps = 0
      u.steps = 0
      user.timer = 0
      u.timer = 0
      user.duelhp = 0
      user.duelatk = 0
      user.dueldef = 0
      u.duelhp = 0
      u.duelatk = 0
      u.dueldef = 0
      user.cd11 = 0,
      user.del11 = -1,
      user.cd12 = 0,
      user.del12 = -1,
      user.cd13 = 0,
      user.cd14 = 0,
      user.cd15 = 0,
      user.spikes = -1,
      user.cd16 = 0,
      user.clinch = -1,
      user.cd21 = 0,
      user.cd22 = 0,
      user.nakopleniye = 0,
      user.el1 = 0,
      user.burn = 0,
      user.el2 = 0,
      user.el3 = 0,
      user.cd31 = 0,
      user.poison = 0,
      user.cd32 = 0,
      user.cd33 = 0,
      user.cd34 = 0,
      user.invisible = false,
      user.cd35 = 0,
      user.cd36 = 0,
      user.cd37 = 0,
      user.poisoning = -1
      u.cd11 = 0,
      u.del11 = -1,
      u.cd12 = 0,
      u.del12 = -1,
      u.cd13 = 0,
      u.cd14 = 0,
      u.cd15 = 0,
      u.spikes = -1,
      u.cd16 = 0,
      u.clinch = -1,
      u.cd21 = 0,
      u.cd22 = 0,
      u.nakopleniye = 0,
      u.el1 = 0,
      u.burn = 0,
      u.el2 = 0,
      u.el3 = 0,
      u.cd31 = 0,
      u.poison = 0,
      u.cd32 = 0,
      u.cd33 = 0,
      u.cd34 = 0,
      u.invisible = false,
      u.cd35 = 0,
      u.cd36 = 0,
      u.cd37 = 0,
      u.poisoning = -1
      return msg.send ('Ходы дуэли превысили 100. Победитель не определён')
    }
    if(msg.senderId == u.id) {
      var constu = u
      u = user
      user = constu
    }
    if(user.cd11 > 0) return msg.send(`Умение перезаряжается`)
    if(user.clas.id != 1) return msg.send (`Умение не принадлежит вашему классу`)
    if(msg.$match[1] != '[club202302035|@eswep]') return
    if(msg.messagePayload != "project RQ") return
    if(u.nakopleniye > 0) {
      if(u.control > 0) u.nakopleniye = 0
    }
    if (user.steps % 2 == 0) {
      return msg.send ('Сейчас не твой ход')
    }
    else {
      if(user.control > 0) {
        msg.send (`Невозможно применить умение`);
      }
      else{
        if(u.clinch > 0) {
          if(user.cd11 > 0) user.cd11 -= 1
          if(user.del11 > 0) user.del11 -= 1
          if(user.cd12 > 0) user.cd12 -= 1
          if(user.del12 > 0) user.del12 -= 1
          if(user.cd13 > 0) user.cd13 -= 1
          if(user.cd14 > 0) user.cd14 -= 1
          if(user.cd15 > 0) user.cd15 -= 1
          if(user.spikes > 0) user.spikes -= 1
          if(user.cd16 > 0) user.cd16 -= 1
          if(user.cd21 > 0) user.cd21 -= 1
          if(user.cd22 > 0) user.cd22 -= 1
          if(user.cd31 > 0) user.cd31 -= 1
          if(user.cd32 > 0) user.cd32 -= 1
          if(user.cd33 > 0) user.cd33 -= 1
          if(user.cd34 > 0) user.cd34 -= 1
          if(user.cd35 > 0) user.cd35 -= 1
          if(user.cd36 > 0) user.cd36 -= 1
          if(user.porezka > 0) user.porezka -= 1
          if(user.cd37 > 0) user.cd37 -= 1
          if(u.cd11 > 0) u.cd11 -= 1
          if(u.del11 > 0) u.del11 -= 1
          if(u.cd12 > 0) u.cd12 -= 1
          if(u.del12 > 0) u.del12 -= 1
          if(u.cd13 > 0) u.cd13 -= 1
          if(u.cd14 > 0) u.cd14 -= 1
          if(u.cd15 > 0) u.cd15 -= 1
          if(u.spikes > 0) u.spikes -= 1
          if(u.cd16 > 0) u.cd16 -= 1
          if(u.clinch > 0) u.clinch = -1
          if(u.cd21 > 0) u.cd21 -= 1
          if(u.cd22 > 0) u.cd22 -= 1
          if(u.cd31 > 0) u.cd31 -= 1
          if(u.cd32 > 0) u.cd32 -= 1
          if(u.cd33 > 0) u.cd33 -= 1
          if(u.cd34 > 0) u.cd34 -= 1
          if(u.cd35 > 0) u.cd35 -= 1
          if(u.cd36 > 0) u.cd36 -= 1
          if(u.porezka > 0) u.porezka -= 1
          if(u.cd37 > 0) u.cd37 -= 1
          if(user.burn > 0) user.burn -= 1
          if(u.burn > 0) u.burn -= 1
          if(user.poison > 0) user.poison -= 1
          if(u.poison > 0) u.poison -= 1
          if(user.poisoning > 0) user.poisoning -= 1
          if(u.poisoning > 0) u.poisoning -= 1
          var hp = user.hp
          var atk = user.atk
          var procent = 20
          var resulthp = hp / 100 * procent
          var resultatk = atk / 100 * procent
          user.duelhp += resulthp
          user.duelatk += resultatk
          user.del11 = 7
          user.cd11 = 13
          user.steps += 1
          u.steps += 1
          if (u.clas.id == 1) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `Здоровье и атака @id${user.id}(${user.nick}) увеличены до ❤${user.duelhp} ⚔${user.duelatk}. Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "😈",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🛡",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🖤",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "❣",
                  color: "positive",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "☦",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "⚙",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "⚔",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
          }
          if (u.clas.id == 2) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `Здоровье и атака @id${user.id}(${user.nick}) увеличены до ❤${user.duelhp} ⚔${user.duelatk}. Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "❄",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💥",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🍃",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔥",
                  color: "negative",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "💧",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "⚡",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
          }
          if (u.clas.id == 3) {
          vk.api.messages.send({
            peer_id: msg.peerId,
            message: `Здоровье и атака @id${user.id}(${user.nick}) увеличены до ❤${user.duelhp} ⚔${user.duelatk}. Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
            disable_mentions: 1,
            keyboard: Keyboard.builder()
            .inline()
              .textButton({
                label: "🦠",
                color: "negative",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "🔪",
                color: "negative",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "💣",
                color: "primary",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "👁‍🗨",
                color: "primary",
                payload: "project RQ"
                })
            .row()
            .inline()
              .textButton({
                label: "🧬",
                color: "positive",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "🗡",
                color: "secondary",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "💉",
                color: "positive",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "АТК",
                color: "negative",
                payload: "project RQ"
                })
              })
            }
          if(user.del11 == 0) {
            var hp = user.hp
            var atk = user.atk
            var procent = 20
            var resulthp = hp / 100 * procent
            var resultatk = atk / 100 * procent
            user.duelhp -= resulthp
            user.duelatk -= resultatk
            user.del11 = -1
             
          }
          if(u.del11 == 0) {
            var hp1 = u.hp
            var atk1 = u.atk
            var procent = 20
            var resulthp1 = hp1 / 100 * procent
            var resultatk1 = atk1 / 100 * procent
            u.duelhp -= resulthp1
            u.duelatk -= resultatk1
            u.del11 = -1
             
          }
          if(user.del12 == 0) {
            var def = user.def
            var procent = 20
            var resultdef = def / 100 * procent
            user.dueldef -= resultdef
            user.del12 = -1
             
          }
          if(u.del12 == 0) {
            var def1 = u.def
            var procent = 20
            var resultdef1 = def1 / 100 * procent
            u.dueldef -= resultdef1
            u.del12 = -1
             
          }
          if(user.spikes == 0) {
            user.spikes -= 1
             
          }
          if(u.spikes == 0) {
            u.spikes -= 1
             
          }
        }
        else {
          if(u.spikes > 0) {
            if(u.contol > 0) {
              if(user.cd11 > 0) user.cd11 -= 2
              if(user.del11 > 0) user.del11 -= 2
              if(user.cd12 > 0) user.cd12 -= 2
              if(user.del12 > 0) user.del12 -= 2
              if(user.cd13 > 0) user.cd13 -= 2
              if(user.cd14 > 0) user.cd14 -= 2
              if(user.cd15 > 0) user.cd15 -= 2
              if(user.spikes > 0) user.spikes -= 2
              if(user.cd16 > 0) user.cd16 -= 2
              if(user.cd21 > 0) user.cd21 -= 2
              if(user.cd22 > 0) user.cd22 -= 2
              if(user.cd31 > 0) user.cd31 -= 2
              if(user.cd32 > 0) user.cd32 -= 2
              if(user.cd33 > 0) user.cd33 -= 2
              if(user.cd34 > 0) user.cd34 -= 2
              if(user.cd35 > 0) user.cd35 -= 2
              if(user.cd36 > 0) user.cd36 -= 2
              if(user.porezka > 0) user.porezka -= 2
              if(user.cd37 > 0) user.cd37 -= 2
              if(u.cd11 > 0) u.cd11 -= 2
              if(u.del11 > 0) u.del11 -= 2
              if(u.cd12 > 0) u.cd12 -= 2
              if(u.del12 > 0) u.del12 -= 2
              if(u.cd13 > 0) u.cd13 -= 2
              if(u.cd14 > 0) u.cd14 -= 2
              if(u.cd15 > 0) u.cd15 -= 2
              if(u.spikes > 0) u.spikes -= 2
              if(u.cd16 > 0) u.cd16 -= 2
              if(u.clinch > 0) u.clinch = -1
              if(u.cd21 > 0) u.cd21 -= 2
              if(u.cd22 > 0) u.cd22 -= 2
              if(u.cd31 > 0) u.cd31 -= 2
              if(u.cd32 > 0) u.cd32 -= 2
              if(u.cd33 > 0) u.cd33 -= 2
              if(u.cd34 > 0) u.cd34 -= 2
              if(u.cd35 > 0) u.cd35 -= 2
              if(u.cd36 > 0) u.cd36 -= 2
              if(u.porezka > 0) u.porezka -= 2
              if(u.cd37 > 0) u.cd37 -= 2
              if(user.burn > 0) user.burn -= 2
              if(u.burn > 0) u.burn -= 2
              if(user.poison > 0) user.poison -= 2
              if(u.poison > 0) u.poison -= 2
              if(user.poisoning > 0) user.poisoning -= 2
              if(u.poisoning > 0) u.poisoning -= 2
              var hp = user.hp
              var atk = user.atk
              var procent = 20
              var resulthp = hp / 100 * procent
              var resultatk = atk / 100 * procent
              user.duelhp += resulthp
              user.duelatk += resultatk
              user.del11 = 7
              user.cd11 = 13
              if(u.control == 2) {
                user.steps += 1
                u.steps += 1
                u.control -= 2
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `Здоровье и атака @id${user.id}(${user.nick}) увеличены до ❤${user.duelhp} ⚔${user.duelatk}. Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `Здоровье и атака @id${user.id}(${user.nick}) увеличены до ❤${user.duelhp} ⚔${user.duelatk}. Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `Здоровье и атака @id${user.id}(${user.nick}) увеличены до ❤${user.duelhp} ⚔${user.duelatk}. Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
              }
              else {
                if(u.control > 2) {
                  user.steps += 2
                  u.steps += 2
                  u.control -= 2
                  if (user.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `Здоровье и атака @id${user.id}(${user.nick}) увеличены до ❤${user.duelhp} ⚔${user.duelatk}. Следующий ход делает @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `Здоровье и атака @id${user.id}(${user.nick}) увеличены до ❤${user.duelhp} ⚔${user.duelatk}. Следующий ход делает @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `Здоровье и атака @id${user.id}(${user.nick}) увеличены до ❤${user.duelhp} ⚔${user.duelatk}. Следующий ход делает @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                  }
                }
              }
              if(user.del11 == 0) {
                var hp = user.hp
                var atk = user.atk
                var procent = 20
                var resulthp = hp / 100 * procent
                var resultatk = atk / 100 * procent
                user.duelhp -= resulthp
                user.duelatk -= resultatk
                user.del11 = -1
                 
              }
              if(u.del11 == 0) {
                var hp1 = u.hp
                var atk1 = u.atk
                var procent = 20
                var resulthp1 = hp1 / 100 * procent
                var resultatk1 = atk1 / 100 * procent
                u.duelhp -= resulthp1
                u.duelatk -= resultatk1
                u.del11 = -1
                 
              }
              if(user.del12 == 0) {
                var def = user.def
                var procent = 20
                 var resultdef = def / 100 * procent
                user.dueldef -= resultdef
                user.del12 = -1
                 
              }
              if(u.del12 == 0) {
                var def1 = u.def
                var procent = 20
                var resultdef1 = def1 / 100 * procent
                u.dueldef -= resultdef1
                u.del12 = -1
                 
              }
              if(user.spikes == 0) {
                user.spikes -= 1
                 
              }
              if(u.spikes == 0) {
                u.spikes -= 1
                 
              }
            }
            else {
              if(user.cd11 > 0) user.cd11 -= 1
              if(user.del11 > 0) user.del11 -= 1
              if(user.cd12 > 0) user.cd12 -= 1
              if(user.del12 > 0) user.del12 -= 1
              if(user.cd13 > 0) user.cd13 -= 1
              if(user.cd14 > 0) user.cd14 -= 1
              if(user.cd15 > 0) user.cd15 -= 1
              if(user.spikes > 0) user.spikes -= 1
              if(user.cd16 > 0) user.cd16 -= 1
              if(user.cd21 > 0) user.cd21 -= 1
              if(user.cd22 > 0) user.cd22 -= 1
              if(user.cd31 > 0) user.cd31 -= 1
              if(user.cd32 > 0) user.cd32 -= 1
              if(user.cd33 > 0) user.cd33 -= 1
              if(user.cd34 > 0) user.cd34 -= 1
              if(user.cd35 > 0) user.cd35 -= 1
              if(user.cd36 > 0) user.cd36 -= 1
              if(user.porezka > 0) user.porezka -= 1
              if(user.cd37 > 0) user.cd37 -= 1
              if(u.cd11 > 0) u.cd11 -= 1
              if(u.del11 > 0) u.del11 -= 1
              if(u.cd12 > 0) u.cd12 -= 1
              if(u.del12 > 0) u.del12 -= 1
              if(u.cd13 > 0) u.cd13 -= 1
              if(u.cd14 > 0) u.cd14 -= 1
              if(u.cd15 > 0) u.cd15 -= 1
              if(u.spikes > 0) u.spikes -= 1
              if(u.cd16 > 0) u.cd16 -= 1
              if(u.clinch > 0) u.clinch = -1
              if(u.cd21 > 0) u.cd21 -= 1
              if(u.cd22 > 0) u.cd22 -= 1
              if(u.cd31 > 0) u.cd31 -= 1
              if(u.cd32 > 0) u.cd32 -= 1
              if(u.cd33 > 0) u.cd33 -= 1
              if(u.cd34 > 0) u.cd34 -= 1
              if(u.cd35 > 0) u.cd35 -= 1
              if(u.cd36 > 0) u.cd36 -= 1
              if(u.porezka > 0) u.porezka -= 1
              if(u.cd37 > 0) u.cd37 -= 1
              if(user.burn > 0) user.burn -= 1
              if(u.burn > 0) u.burn -= 1
              if(user.poison > 0) user.poison -= 1
              if(u.poison > 0) u.poison -= 1
              if(user.poisoning > 0) user.poisoning -= 1
              if(u.poisoning > 0) u.poisoning -= 1
              var hp = user.hp
              var atk = user.atk
              var procent = 20
              var resulthp = hp / 100 * procent
              var resultatk = atk / 100 * procent
              user.duelhp += resulthp
              user.duelatk += resultatk
              user.del11 = 7
              user.cd11 = 13
              user.steps += 1
              u.steps += 1
              if (u.clas.id == 1) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `Здоровье и атака @id${user.id}(${user.nick}) увеличены до ❤${user.duelhp} ⚔${user.duelatk}. Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "😈",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🛡",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🖤",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "❣",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "☦",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚙",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚔",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 2) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `Здоровье и атака @id${user.id}(${user.nick}) увеличены до ❤${user.duelhp} ⚔${user.duelatk}. Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "❄",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💥",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🍃",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔥",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "💧",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚡",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 3) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `Здоровье и атака @id${user.id}(${user.nick}) увеличены до ❤${user.duelhp} ⚔${user.duelatk}. Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "🦠",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔪",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💣",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "👁‍🗨",
                    color: "primary",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "🧬",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🗡",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💉",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
                }
              if(user.del11 == 0) {
                var hp = user.hp
                var atk = user.atk
                var procent = 20
                var resulthp = hp / 100 * procent
                var resultatk = atk / 100 * procent
                user.duelhp -= resulthp
                user.duelatk -= resultatk
                user.del11 = -1
                 
              }
              if(u.del11 == 0) {
                var hp1 = u.hp
                var atk1 = u.atk
                var procent = 20
                var resulthp1 = hp1 / 100 * procent
                var resultatk1 = atk1 / 100 * procent
                u.duelhp -= resulthp1
                u.duelatk -= resultatk1
                u.del11 = -1
                 
              }
              if(user.del12 == 0) {
                var def = user.def
                var procent = 20
                 var resultdef = def / 100 * procent
                user.dueldef -= resultdef
                user.del12 = -1
                 
              }
              if(u.del12 == 0) {
                var def1 = u.def
                var procent = 20
                var resultdef1 = def1 / 100 * procent
                u.dueldef -= resultdef1
                u.del12 = -1
                 
              }
              if(user.spikes == 0) {
                user.spikes -= 1
                 
              }
              if(u.spikes == 0) {
                u.spikes -= 1
                 
              }
            }
          }
          else {
            if(u.contol > 0) {
              if(user.cd11 > 0) user.cd11 -= 2
              if(user.del11 > 0) user.del11 -= 2
              if(user.cd12 > 0) user.cd12 -= 2
              if(user.del12 > 0) user.del12 -= 2
              if(user.cd13 > 0) user.cd13 -= 2
              if(user.cd14 > 0) user.cd14 -= 2
              if(user.cd15 > 0) user.cd15 -= 2
              if(user.spikes > 0) user.spikes -= 2
              if(user.cd16 > 0) user.cd16 -= 2
              if(user.cd21 > 0) user.cd21 -= 2
              if(user.cd22 > 0) user.cd22 -= 2
              if(user.cd31 > 0) user.cd31 -= 2
              if(user.cd32 > 0) user.cd32 -= 2
              if(user.cd33 > 0) user.cd33 -= 2
              if(user.cd34 > 0) user.cd34 -= 2
              if(user.cd35 > 0) user.cd35 -= 2
              if(user.cd36 > 0) user.cd36 -= 2
              if(user.porezka > 0) user.porezka -= 2
              if(user.cd37 > 0) user.cd37 -= 2
              if(u.cd11 > 0) u.cd11 -= 2
              if(u.del11 > 0) u.del11 -= 2
              if(u.cd12 > 0) u.cd12 -= 2
              if(u.del12 > 0) u.del12 -= 2
              if(u.cd13 > 0) u.cd13 -= 2
              if(u.cd14 > 0) u.cd14 -= 2
              if(u.cd15 > 0) u.cd15 -= 2
              if(u.spikes > 0) u.spikes -= 2
              if(u.cd16 > 0) u.cd16 -= 2
              if(u.clinch > 0) u.clinch = -1
              if(u.cd21 > 0) u.cd21 -= 2
              if(u.cd22 > 0) u.cd22 -= 2
              if(u.cd31 > 0) u.cd31 -= 2
              if(u.cd32 > 0) u.cd32 -= 2
              if(u.cd33 > 0) u.cd33 -= 2
              if(u.cd34 > 0) u.cd34 -= 2
              if(u.cd35 > 0) u.cd35 -= 2
              if(u.cd36 > 0) u.cd36 -= 2
              if(u.porezka > 0) u.porezka -= 2
              if(u.cd37 > 0) u.cd37 -= 2
              if(user.burn > 0) user.burn -= 2
              if(u.burn > 0) u.burn -= 2
              if(user.poison > 0) user.poison -= 2
              if(u.poison > 0) u.poison -= 2
              if(user.poisoning > 0) user.poisoning -= 2
              if(u.poisoning > 0) u.poisoning -= 2
              var hp = user.hp
              var atk = user.atk
              var procent = 20
              var resulthp = hp / 100 * procent
              var resultatk = atk / 100 * procent
              user.duelhp += resulthp
              user.duelatk += resultatk
              user.del11 = 7
              user.cd11 = 13
              if(u.control == 2) {
                user.steps += 1
                u.steps += 1
                u.control -= 2
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `Здоровье и атака @id${user.id}(${user.nick}) увеличены до ❤${user.duelhp} ⚔${user.duelatk}. Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `Здоровье и атака @id${user.id}(${user.nick}) увеличены до ❤${user.duelhp} ⚔${user.duelatk}. Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `Здоровье и атака @id${user.id}(${user.nick}) увеличены до ❤${user.duelhp} ⚔${user.duelatk}. Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
              }
              else {
                if(u.control > 2) {
                  user.steps += 2
                  u.steps += 2
                  u.control -= 2
                  if (user.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `Здоровье и атака @id${user.id}(${user.nick}) увеличены до ❤${user.duelhp} ⚔${user.duelatk}. Следующий ход делает @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `Здоровье и атака @id${user.id}(${user.nick}) увеличены до ❤${user.duelhp} ⚔${user.duelatk}. Следующий ход делает @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `Здоровье и атака @id${user.id}(${user.nick}) увеличены до ❤${user.duelhp} ⚔${user.duelatk}. Следующий ход делает @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
              }
              if(user.del11 == 0) {
                var hp = user.hp
                var atk = user.atk
                var procent = 20
                var resulthp = hp / 100 * procent
                var resultatk = atk / 100 * procent
                user.duelhp -= resulthp
                user.duelatk -= resultatk
                user.del11 = -1
                 
              }
              if(u.del11 == 0) {
                var hp1 = u.hp
                var atk1 = u.atk
                var procent = 20
                var resulthp1 = hp1 / 100 * procent
                var resultatk1 = atk1 / 100 * procent
                u.duelhp -= resulthp1
                u.duelatk -= resultatk1
                u.del11 = -1
                 
              }
              if(user.del12 == 0) {
                var def = user.def
                var procent = 20
                 var resultdef = def / 100 * procent
                user.dueldef -= resultdef
                user.del12 = -1
                 
              }
              if(u.del12 == 0) {
                var def1 = u.def
                var procent = 20
                var resultdef1 = def1 / 100 * procent
                u.dueldef -= resultdef1
                u.del12 = -1
                 
              }
              if(user.spikes == 0) {
                user.spikes -= 1
                 
              }
              if(u.spikes == 0) {
                u.spikes -= 1
                 
              }
            }
            else {
              if(user.cd11 > 0) user.cd11 -= 1
              if(user.del11 > 0) user.del11 -= 1
              if(user.cd12 > 0) user.cd12 -= 1
              if(user.del12 > 0) user.del12 -= 1
              if(user.cd13 > 0) user.cd13 -= 1
              if(user.cd14 > 0) user.cd14 -= 1
              if(user.cd15 > 0) user.cd15 -= 1
              if(user.spikes > 0) user.spikes -= 1
              if(user.cd16 > 0) user.cd16 -= 1
              if(user.cd21 > 0) user.cd21 -= 1
              if(user.cd22 > 0) user.cd22 -= 1
              if(user.cd31 > 0) user.cd31 -= 1
              if(user.cd32 > 0) user.cd32 -= 1
              if(user.cd33 > 0) user.cd33 -= 1
              if(user.cd34 > 0) user.cd34 -= 1
              if(user.cd35 > 0) user.cd35 -= 1
              if(user.cd36 > 0) user.cd36 -= 1
              if(user.porezka > 0) user.porezka -= 1
              if(user.cd37 > 0) user.cd37 -= 1
              if(u.cd11 > 0) u.cd11 -= 1
              if(u.del11 > 0) u.del11 -= 1
              if(u.cd12 > 0) u.cd12 -= 1
              if(u.del12 > 0) u.del12 -= 1
              if(u.cd13 > 0) u.cd13 -= 1
              if(u.cd14 > 0) u.cd14 -= 1
              if(u.cd15 > 0) u.cd15 -= 1
              if(u.spikes > 0) u.spikes -= 1
              if(u.cd16 > 0) u.cd16 -= 1
              if(u.clinch > 0) u.clinch = -1
              if(u.cd21 > 0) u.cd21 -= 1
              if(u.cd22 > 0) u.cd22 -= 1
              if(u.cd31 > 0) u.cd31 -= 1
              if(u.cd32 > 0) u.cd32 -= 1
              if(u.cd33 > 0) u.cd33 -= 1
              if(u.cd34 > 0) u.cd34 -= 1
              if(u.cd35 > 0) u.cd35 -= 1
              if(u.cd36 > 0) u.cd36 -= 1
              if(u.porezka > 0) u.porezka -= 1
              if(u.cd37 > 0) u.cd37 -= 1
              if(user.burn > 0) user.burn -= 1
              if(u.burn > 0) u.burn -= 1
              if(user.poison > 0) user.poison -= 1
              if(u.poison > 0) u.poison -= 1
              if(user.poisoning > 0) user.poisoning -= 1
              if(u.poisoning > 0) u.poisoning -= 1
              var hp = user.hp
              var atk = user.atk
              var procent = 20
              var resulthp = hp / 100 * procent
              var resultatk = atk / 100 * procent
              user.duelhp += resulthp
              user.duelatk += resultatk
              user.del11 = 7
              user.cd11 = 13
              user.steps += 1
              u.steps += 1
              if (u.clas.id == 1) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `Здоровье и атака @id${user.id}(${user.nick}) увеличены до ❤${user.duelhp} ⚔${user.duelatk}. Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "😈",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🛡",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🖤",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "❣",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "☦",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚙",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚔",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 2) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `Здоровье и атака @id${user.id}(${user.nick}) увеличены до ❤${user.duelhp} ⚔${user.duelatk}. Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "❄",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💥",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🍃",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔥",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "💧",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚡",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 3) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `Здоровье и атака @id${user.id}(${user.nick}) увеличены до ❤${user.duelhp} ⚔${user.duelatk}. Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "🦠",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔪",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💣",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "👁‍🗨",
                    color: "primary",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "🧬",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🗡",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💉",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
                }
              if(user.del11 == 0) {
                var hp = user.hp
                var atk = user.atk
                var procent = 20
                var resulthp = hp / 100 * procent
                var resultatk = atk / 100 * procent
                user.duelhp -= resulthp
                user.duelatk -= resultatk
                user.del11 = -1
                 
              }
              if(u.del11 == 0) {
                var hp1 = u.hp
                var atk1 = u.atk
                var procent = 20
                var resulthp1 = hp1 / 100 * procent
                var resultatk1 = atk1 / 100 * procent
                u.duelhp -= resulthp1
                u.duelatk -= resultatk1
                u.del11 = -1
                 
              }
              if(user.del12 == 0) {
                var def = user.def
                var procent = 20
                 var resultdef = def / 100 * procent
                user.dueldef -= resultdef
                user.del12 = -1
                 
              }
              if(u.del12 == 0) {
                var def1 = u.def
                var procent = 20
                var resultdef1 = def1 / 100 * procent
                u.dueldef -= resultdef1
                u.del12 = -1
                 
              }
              if(user.spikes == 0) {
                user.spikes -= 1
                 
              }
              if(u.spikes == 0) {
                u.spikes -= 1
                 
              }
            }
          }
        }
      }
    }
    if(user.poison > 0) {
      var procent50 = 50
      var poison50 = u.duelatk * procent50 / 100
      user.duelhp -= poison50
      msg.send(`"${user.nick}" получает ⚔${poison50} урона`)
    }
    if(user.poisoning > 0) {
      var result1 = user.duelatk - user.dueldef
      user.duelhp -= result1
      msg.send(`"${user.nick}" получает ⚔${result1} урона от отравления`)
    }
    if(u.poisoning > 0) {
      var result2 = u.duelatk - u.dueldef
      u.duelhp -= result2
      msg.send(`"${u.nick}" наносит себе ⚔${result2} урона`)
    }
    if(user.poisoning == 0) {
      user.poisoning = -1
      var atk3 = user.duelatk * 3
      var heal1 = atk3 * 2
      user.duelhp += heal1
      if (user.duelhp > user.hp) {
      user.duelhp = user.hp
      }
      msg.send(`"${user.nick}" восстанавливает 💚${heal1} здоровья`)
    }
    if(u.poisoning == 0) {
      u.poisoning = -1
      var atk3 = u.duelatk * 3
      var heal2 = atk3 * 2
      u.duelhp += heal2
      if (u.duelhp > u.hp) {
      u.duelhp = u.hp
      }
      msg.send(`"${u.nick}" восстанавливает 💚${heal2} здоровья`)
    }
    var constuser = user
    user = u
    u = constuser
  })

  vk.updates.hear(/^(.*) 🛡$/i, msg => {
    if(user.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(u.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(user.steps > 100 || u.steps > 100) {
      user.duel = false
      u.duel = false
      u.predictionduel = false
      user.predictduel = false
      user.steps = 0
      u.steps = 0
      user.timer = 0
      u.timer = 0
      user.duelhp = 0
      user.duelatk = 0
      user.dueldef = 0
      u.duelhp = 0
      u.duelatk = 0
      u.dueldef = 0
      user.cd11 = 0,
      user.del11 = -1,
      user.cd12 = 0,
      user.del12 = -1,
      user.cd13 = 0,
      user.cd14 = 0,
      user.cd15 = 0,
      user.spikes = -1,
      user.cd16 = 0,
      user.clinch = -1,
      user.cd21 = 0,
      user.cd22 = 0,
      user.nakopleniye = 0,
      user.el1 = 0,
      user.burn = 0,
      user.el2 = 0,
      user.el3 = 0,
      user.cd31 = 0,
      user.poison = 0,
      user.cd32 = 0,
      user.cd33 = 0,
      user.cd34 = 0,
      user.invisible = false,
      user.cd35 = 0,
      user.cd36 = 0,
      user.cd37 = 0,
      user.poisoning = -1
      u.cd11 = 0,
      u.del11 = -1,
      u.cd12 = 0,
      u.del12 = -1,
      u.cd13 = 0,
      u.cd14 = 0,
      u.cd15 = 0,
      u.spikes = -1,
      u.cd16 = 0,
      u.clinch = -1,
      u.cd21 = 0,
      u.cd22 = 0,
      u.nakopleniye = 0,
      u.el1 = 0,
      u.burn = 0,
      u.el2 = 0,
      u.el3 = 0,
      u.cd31 = 0,
      u.poison = 0,
      u.cd32 = 0,
      u.cd33 = 0,
      u.cd34 = 0,
      u.invisible = false,
      u.cd35 = 0,
      u.cd36 = 0,
      u.cd37 = 0,
      u.poisoning = -1
      return msg.send ('Ходы дуэли превысили 100. Победитель не определён')
    }
    if(msg.senderId == u.id) {
      var constu = u
      u = user
      user = constu
    }
    if(user.cd12 > 0) return msg.send(`Умение перезаряжается`)
    if(user.clas.id != 1) return msg.send (`Умение не принадлежит вашему классу`)
    if(msg.$match[1] != '[club202302035|@eswep]') return
    if(msg.messagePayload != "project RQ") return
    if(u.nakopleniye > 0) {
      if(u.control > 0) u.nakopleniye = 0
    }
    if (user.steps % 2 == 0) {
      return msg.send ('Сейчас не твой ход')
    }
    else {
      if(user.control > 0) {
        msg.send (`Невозможно применить умение`);
      }
      else{
        if(u.clinch > 0) {
          if(user.cd11 > 0) user.cd11 -= 1
          if(user.del11 > 0) user.del11 -= 1
          if(user.cd12 > 0) user.cd12 -= 1
          if(user.del12 > 0) user.del12 -= 1
          if(user.cd13 > 0) user.cd13 -= 1
          if(user.cd14 > 0) user.cd14 -= 1
          if(user.cd15 > 0) user.cd15 -= 1
          if(user.spikes > 0) user.spikes -= 1
          if(user.cd16 > 0) user.cd16 -= 1
          if(user.cd21 > 0) user.cd21 -= 1
          if(user.cd22 > 0) user.cd22 -= 1
          if(user.cd31 > 0) user.cd31 -= 1
          if(user.cd32 > 0) user.cd32 -= 1
          if(user.cd33 > 0) user.cd33 -= 1
          if(user.cd34 > 0) user.cd34 -= 1
          if(user.cd35 > 0) user.cd35 -= 1
          if(user.cd36 > 0) user.cd36 -= 1
          if(user.porezka > 0) user.porezka -= 1
          if(user.cd37 > 0) user.cd37 -= 1
          if(u.cd11 > 0) u.cd11 -= 1
          if(u.del11 > 0) u.del11 -= 1
          if(u.cd12 > 0) u.cd12 -= 1
          if(u.del12 > 0) u.del12 -= 1
          if(u.cd13 > 0) u.cd13 -= 1
          if(u.cd14 > 0) u.cd14 -= 1
          if(u.cd15 > 0) u.cd15 -= 1
          if(u.spikes > 0) u.spikes -= 1
          if(u.cd16 > 0) u.cd16 -= 1
          if(u.clinch > 0) u.clinch = -1
          if(u.cd21 > 0) u.cd21 -= 1
          if(u.cd22 > 0) u.cd22 -= 1
          if(u.cd31 > 0) u.cd31 -= 1
          if(u.cd32 > 0) u.cd32 -= 1
          if(u.cd33 > 0) u.cd33 -= 1
          if(u.cd34 > 0) u.cd34 -= 1
          if(u.cd35 > 0) u.cd35 -= 1
          if(u.cd36 > 0) u.cd36 -= 1
          if(u.porezka > 0) u.porezka -= 1
          if(u.cd37 > 0) u.cd37 -= 1
          if(user.burn > 0) user.burn -= 1
          if(u.burn > 0) u.burn -= 1
          if(user.poison > 0) user.poison -= 1
          if(u.poison > 0) u.poison -= 1
          if(user.poisoning > 0) user.poisoning -= 1
          if(u.poisoning > 0) u.poisoning -= 1
          var def = user.dueldef
          var procent = 20
           var resultdef = def / 100 * procent
          user.dueldef += resultdef
          user.del12 = 6
          user.cd12 = 9
          user.steps += 1
          u.steps += 1
          if (u.clas.id == 1) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `Защита @id${user.id}(${user.nick}) увеличена до 🛡"${user.dueldef}". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "😈",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🛡",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🖤",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "❣",
                  color: "positive",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "☦",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "⚙",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "⚔",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
          }
          if (u.clas.id == 2) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `Защита @id${user.id}(${user.nick}) увеличена до 🛡"${user.dueldef}". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "❄",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💥",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🍃",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔥",
                  color: "negative",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "💧",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "⚡",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
          }
          if (u.clas.id == 3) {
          vk.api.messages.send({
            peer_id: msg.peerId,
            message: `Защита @id${user.id}(${user.nick}) увеличена до 🛡"${user.dueldef}". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
            disable_mentions: 1,
            keyboard: Keyboard.builder()
            .inline()
              .textButton({
                label: "🦠",
                color: "negative",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "🔪",
                color: "negative",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "💣",
                color: "primary",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "👁‍🗨",
                color: "primary",
                payload: "project RQ"
                })
            .row()
            .inline()
              .textButton({
                label: "🧬",
                color: "positive",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "🗡",
                color: "secondary",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "💉",
                color: "positive",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "АТК",
                color: "negative",
                payload: "project RQ"
                })
              })
            }
          if(user.del11 == 0) {
            var hp = user.hp
            var atk = user.atk
            var procent = 20
            var resulthp = hp / 100 * procent
            var resultatk = atk / 100 * procent
            user.duelhp -= resulthp
            user.duelatk -= resultatk
            user.del11 = -1
             
          }
          if(u.del11 == 0) {
            var hp1 = u.hp
            var atk1 = u.atk
            var procent = 20
            var resulthp1 = hp1 / 100 * procent
            var resultatk1 = atk1 / 100 * procent
            u.duelhp -= resulthp1
            u.duelatk -= resultatk1
            u.del11 = -1
             
          }
          if(user.del12 == 0) {
            var def = user.def
            var procent = 20
             var resultdef = def / 100 * procent
            user.dueldef -= resultdef
            user.del12 = -1
             
          }
          if(u.del12 == 0) {
            var def1 = u.def
            var procent = 20
            var resultdef1 = def1 / 100 * procent
            u.dueldef -= resultdef1
            u.del12 = -1
             
          }
          if(user.spikes == 0) {
            user.spikes -= 1
             
          }
          if(u.spikes == 0) {
            u.spikes -= 1
             
          }
        }
        else {
          if(u.spikes > 0) {
            if(u.contol > 0) {
              if(user.cd11 > 0) user.cd11 -= 2
              if(user.del11 > 0) user.del11 -= 2
              if(user.cd12 > 0) user.cd12 -= 2
              if(user.del12 > 0) user.del12 -= 2
              if(user.cd13 > 0) user.cd13 -= 2
              if(user.cd14 > 0) user.cd14 -= 2
              if(user.cd15 > 0) user.cd15 -= 2
              if(user.spikes > 0) user.spikes -= 2
              if(user.cd16 > 0) user.cd16 -= 2
              if(user.cd21 > 0) user.cd21 -= 2
              if(user.cd22 > 0) user.cd22 -= 2
              if(user.cd31 > 0) user.cd31 -= 2
              if(user.cd32 > 0) user.cd32 -= 2
              if(user.cd33 > 0) user.cd33 -= 2
              if(user.cd34 > 0) user.cd34 -= 2
              if(user.cd35 > 0) user.cd35 -= 2
              if(user.cd36 > 0) user.cd36 -= 2
              if(user.porezka > 0) user.porezka -= 2
              if(user.cd37 > 0) user.cd37 -= 2
              if(u.cd11 > 0) u.cd11 -= 2
              if(u.del11 > 0) u.del11 -= 2
              if(u.cd12 > 0) u.cd12 -= 2
              if(u.del12 > 0) u.del12 -= 2
              if(u.cd13 > 0) u.cd13 -= 2
              if(u.cd14 > 0) u.cd14 -= 2
              if(u.cd15 > 0) u.cd15 -= 2
              if(u.spikes > 0) u.spikes -= 2
              if(u.cd16 > 0) u.cd16 -= 2
              if(u.clinch > 0) u.clinch = -1
              if(u.cd21 > 0) u.cd21 -= 2
              if(u.cd22 > 0) u.cd22 -= 2
              if(u.cd31 > 0) u.cd31 -= 2
              if(u.cd32 > 0) u.cd32 -= 2
              if(u.cd33 > 0) u.cd33 -= 2
              if(u.cd34 > 0) u.cd34 -= 2
              if(u.cd35 > 0) u.cd35 -= 2
              if(u.cd36 > 0) u.cd36 -= 2
              if(u.porezka > 0) u.porezka -= 2
              if(u.cd37 > 0) u.cd37 -= 2
              if(user.burn > 0) user.burn -= 2
              if(u.burn > 0) u.burn -= 2
              if(user.poison > 0) user.poison -= 2
              if(u.poison > 0) u.poison -= 2
              if(user.poisoning > 0) user.poisoning -= 2
              if(u.poisoning > 0) u.poisoning -= 2
              var def = user.dueldef
              var procent = 20
               var resultdef = def / 100 * procent
              user.dueldef += resultdef
              user.del12 = 6
              user.cd12 = 9
              if(u.control == 2) {
                user.steps += 1
                u.steps += 1
                u.control -= 2
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `Защита @id${user.id}(${user.nick}) увеличена до 🛡"${user.dueldef}". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `Защита @id${user.id}(${user.nick}) увеличена до 🛡"${user.dueldef}". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `Защита @id${user.id}(${user.nick}) увеличена до 🛡"${user.dueldef}". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
              }
              else {
                if(u.control > 2) {
                  user.steps += 2
                  u.steps += 2
                  u.control -= 2
                  if (user.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `Защита @id${user.id}(${user.nick}) увеличена до 🛡"${user.dueldef}". Следующий ход делает @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `Защита @id${user.id}(${user.nick}) увеличена до 🛡"${user.dueldef}". Следующий ход делает @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `Защита @id${user.id}(${user.nick}) увеличена до 🛡"${user.dueldef}". Следующий ход делает @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
              }
              if(user.del11 == 0) {
                var hp = user.hp
                var atk = user.atk
                var procent = 20
                var resulthp = hp / 100 * procent
                var resultatk = atk / 100 * procent
                user.duelhp -= resulthp
                user.duelatk -= resultatk
                user.del11 = -1
                 
              }
              if(u.del11 == 0) {
                var hp1 = u.hp
                var atk1 = u.atk
                var procent = 20
                var resulthp1 = hp1 / 100 * procent
                var resultatk1 = atk1 / 100 * procent
                u.duelhp -= resulthp1
                u.duelatk -= resultatk1
                u.del11 = -1
                 
              }
              if(user.del12 == 0) {
                var def = user.def
                var procent = 20
                 var resultdef = def / 100 * procent
                user.dueldef -= resultdef
                user.del12 = -1
                 
              }
              if(u.del12 == 0) {
                var def1 = u.def
                var procent = 20
                var resultdef1 = def1 / 100 * procent
                u.dueldef -= resultdef1
                u.del12 = -1
                 
              }
              if(user.spikes == 0) {
                user.spikes -= 1
                 
              }
              if(u.spikes == 0) {
                u.spikes -= 1
                 
              }
            }
            else {
              if(user.cd11 > 0) user.cd11 -= 1
              if(user.del11 > 0) user.del11 -= 1
              if(user.cd12 > 0) user.cd12 -= 1
              if(user.del12 > 0) user.del12 -= 1
              if(user.cd13 > 0) user.cd13 -= 1
              if(user.cd14 > 0) user.cd14 -= 1
              if(user.cd15 > 0) user.cd15 -= 1
              if(user.spikes > 0) user.spikes -= 1
              if(user.cd16 > 0) user.cd16 -= 1
              if(user.cd21 > 0) user.cd21 -= 1
              if(user.cd22 > 0) user.cd22 -= 1
              if(user.cd31 > 0) user.cd31 -= 1
              if(user.cd32 > 0) user.cd32 -= 1
              if(user.cd33 > 0) user.cd33 -= 1
              if(user.cd34 > 0) user.cd34 -= 1
              if(user.cd35 > 0) user.cd35 -= 1
              if(user.cd36 > 0) user.cd36 -= 1
              if(user.porezka > 0) user.porezka -= 1
              if(user.cd37 > 0) user.cd37 -= 1
              if(u.cd11 > 0) u.cd11 -= 1
              if(u.del11 > 0) u.del11 -= 1
              if(u.cd12 > 0) u.cd12 -= 1
              if(u.del12 > 0) u.del12 -= 1
              if(u.cd13 > 0) u.cd13 -= 1
              if(u.cd14 > 0) u.cd14 -= 1
              if(u.cd15 > 0) u.cd15 -= 1
              if(u.spikes > 0) u.spikes -= 1
              if(u.cd16 > 0) u.cd16 -= 1
              if(u.clinch > 0) u.clinch = -1
              if(u.cd21 > 0) u.cd21 -= 1
              if(u.cd22 > 0) u.cd22 -= 1
              if(u.cd31 > 0) u.cd31 -= 1
              if(u.cd32 > 0) u.cd32 -= 1
              if(u.cd33 > 0) u.cd33 -= 1
              if(u.cd34 > 0) u.cd34 -= 1
              if(u.cd35 > 0) u.cd35 -= 1
              if(u.cd36 > 0) u.cd36 -= 1
              if(u.porezka > 0) u.porezka -= 1
              if(u.cd37 > 0) u.cd37 -= 1
              if(user.burn > 0) user.burn -= 1
              if(u.burn > 0) u.burn -= 1
              if(user.poison > 0) user.poison -= 1
              if(u.poison > 0) u.poison -= 1
              if(user.poisoning > 0) user.poisoning -= 1
              if(u.poisoning > 0) u.poisoning -= 1
              var def = user.dueldef
              var procent = 20
               var resultdef = def / 100 * procent
              user.dueldef += resultdef
              user.del12 = 6
              user.cd12 = 9
              user.steps += 1
              u.steps += 1
              if (u.clas.id == 1) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `Защита @id${user.id}(${user.nick}) увеличена до 🛡"${user.dueldef}". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "😈",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🛡",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🖤",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "❣",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "☦",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚙",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚔",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 2) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `Защита @id${user.id}(${user.nick}) увеличена до 🛡"${user.dueldef}". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "❄",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💥",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🍃",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔥",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "💧",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚡",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 3) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `Защита @id${user.id}(${user.nick}) увеличена до 🛡"${user.dueldef}". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "🦠",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔪",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💣",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "👁‍🗨",
                    color: "primary",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "🧬",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🗡",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💉",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
                }
              if(user.del11 == 0) {
                var hp = user.hp
                var atk = user.atk
                var procent = 20
                var resulthp = hp / 100 * procent
                var resultatk = atk / 100 * procent
                user.duelhp -= resulthp
                user.duelatk -= resultatk
                user.del11 = -1
                 
              }
              if(u.del11 == 0) {
                var hp1 = u.hp
                var atk1 = u.atk
                var procent = 20
                var resulthp1 = hp1 / 100 * procent
                var resultatk1 = atk1 / 100 * procent
                u.duelhp -= resulthp1
                u.duelatk -= resultatk1
                u.del11 = -1
                 
              }
              if(user.del12 == 0) {
                var def = user.def
                var procent = 20
                 var resultdef = def / 100 * procent
                user.dueldef -= resultdef
                user.del12 = -1
                 
              }
              if(u.del12 == 0) {
                var def1 = u.def
                var procent = 20
                var resultdef1 = def1 / 100 * procent
                u.dueldef -= resultdef1
                u.del12 = -1
                 
              }
              if(user.spikes == 0) {
                user.spikes -= 1
                 
              }
              if(u.spikes == 0) {
                u.spikes -= 1
                 
              }
            }
          }
          else {
            if(u.contol > 0) {
              if(user.cd11 > 0) user.cd11 -= 2
              if(user.del11 > 0) user.del11 -= 2
              if(user.cd12 > 0) user.cd12 -= 2
              if(user.del12 > 0) user.del12 -= 2
              if(user.cd13 > 0) user.cd13 -= 2
              if(user.cd14 > 0) user.cd14 -= 2
              if(user.cd15 > 0) user.cd15 -= 2
              if(user.spikes > 0) user.spikes -= 2
              if(user.cd16 > 0) user.cd16 -= 2
              if(user.cd21 > 0) user.cd21 -= 2
              if(user.cd22 > 0) user.cd22 -= 2
              if(user.cd31 > 0) user.cd31 -= 2
              if(user.cd32 > 0) user.cd32 -= 2
              if(user.cd33 > 0) user.cd33 -= 2
              if(user.cd34 > 0) user.cd34 -= 2
              if(user.cd35 > 0) user.cd35 -= 2
              if(user.cd36 > 0) user.cd36 -= 2
              if(user.porezka > 0) user.porezka -= 2
              if(user.cd37 > 0) user.cd37 -= 2
              if(u.cd11 > 0) u.cd11 -= 2
              if(u.del11 > 0) u.del11 -= 2
              if(u.cd12 > 0) u.cd12 -= 2
              if(u.del12 > 0) u.del12 -= 2
              if(u.cd13 > 0) u.cd13 -= 2
              if(u.cd14 > 0) u.cd14 -= 2
              if(u.cd15 > 0) u.cd15 -= 2
              if(u.spikes > 0) u.spikes -= 2
              if(u.cd16 > 0) u.cd16 -= 2
              if(u.clinch > 0) u.clinch = -1
              if(u.cd21 > 0) u.cd21 -= 2
              if(u.cd22 > 0) u.cd22 -= 2
              if(u.cd31 > 0) u.cd31 -= 2
              if(u.cd32 > 0) u.cd32 -= 2
              if(u.cd33 > 0) u.cd33 -= 2
              if(u.cd34 > 0) u.cd34 -= 2
              if(u.cd35 > 0) u.cd35 -= 2
              if(u.cd36 > 0) u.cd36 -= 2
              if(u.porezka > 0) u.porezka -= 2
              if(u.cd37 > 0) u.cd37 -= 2
              if(user.burn > 0) user.burn -= 2
              if(u.burn > 0) u.burn -= 2
              if(user.poison > 0) user.poison -= 2
              if(u.poison > 0) u.poison -= 2
              if(user.poisoning > 0) user.poisoning -= 2
              if(u.poisoning > 0) u.poisoning -= 2
              var def = user.dueldef
              var procent = 20
               var resultdef = def / 100 * procent
              user.dueldef += resultdef
              user.del12 = 6
              user.cd12 = 9
              if(u.control == 2) {
                user.steps += 1
                u.steps += 1
                u.control -= 2
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `Защита @id${user.id}(${user.nick}) увеличена до 🛡"${user.dueldef}". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `Защита @id${user.id}(${user.nick}) увеличена до 🛡"${user.dueldef}". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `Защита @id${user.id}(${user.nick}) увеличена до 🛡"${user.dueldef}". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
              }
              else {
                if(u.control > 2) {
                  user.steps += 2
                  u.steps += 2
                  u.control -= 2
                  if (user.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `Защита @id${user.id}(${user.nick}) увеличена до 🛡"${user.dueldef}". Следующий ход делает @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `Защита @id${user.id}(${user.nick}) увеличена до 🛡"${user.dueldef}". Следующий ход делает @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `Защита @id${user.id}(${user.nick}) увеличена до 🛡"${user.dueldef}". Следующий ход делает @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
              }
              if(user.del11 == 0) {
                var hp = user.hp
                var atk = user.atk
                var procent = 20
                var resulthp = hp / 100 * procent
                var resultatk = atk / 100 * procent
                user.duelhp -= resulthp
                user.duelatk -= resultatk
                user.del11 = -1
                 
              }
              if(u.del11 == 0) {
                var hp1 = u.hp
                var atk1 = u.atk
                var procent = 20
                var resulthp1 = hp1 / 100 * procent
                var resultatk1 = atk1 / 100 * procent
                u.duelhp -= resulthp1
                u.duelatk -= resultatk1
                u.del11 = -1
                 
              }
              if(user.del12 == 0) {
                var def = user.def
                var procent = 20
                 var resultdef = def / 100 * procent
                user.dueldef -= resultdef
                user.del12 = -1
                 
              }
              if(u.del12 == 0) {
                var def1 = u.def
                var procent = 20
                var resultdef1 = def1 / 100 * procent
                u.dueldef -= resultdef1
                u.del12 = -1
                 
              }
              if(user.spikes == 0) {
                user.spikes -= 1
                 
              }
              if(u.spikes == 0) {
                u.spikes -= 1
                 
              }
            }
            else {
              if(user.cd11 > 0) user.cd11 -= 1
              if(user.del11 > 0) user.del11 -= 1
              if(user.cd12 > 0) user.cd12 -= 1
              if(user.del12 > 0) user.del12 -= 1
              if(user.cd13 > 0) user.cd13 -= 1
              if(user.cd14 > 0) user.cd14 -= 1
              if(user.cd15 > 0) user.cd15 -= 1
              if(user.spikes > 0) user.spikes -= 1
              if(user.cd16 > 0) user.cd16 -= 1
              if(user.cd21 > 0) user.cd21 -= 1
              if(user.cd22 > 0) user.cd22 -= 1
              if(user.cd31 > 0) user.cd31 -= 1
              if(user.cd32 > 0) user.cd32 -= 1
              if(user.cd33 > 0) user.cd33 -= 1
              if(user.cd34 > 0) user.cd34 -= 1
              if(user.cd35 > 0) user.cd35 -= 1
              if(user.cd36 > 0) user.cd36 -= 1
              if(user.porezka > 0) user.porezka -= 1
              if(user.cd37 > 0) user.cd37 -= 1
              if(u.cd11 > 0) u.cd11 -= 1
              if(u.del11 > 0) u.del11 -= 1
              if(u.cd12 > 0) u.cd12 -= 1
              if(u.del12 > 0) u.del12 -= 1
              if(u.cd13 > 0) u.cd13 -= 1
              if(u.cd14 > 0) u.cd14 -= 1
              if(u.cd15 > 0) u.cd15 -= 1
              if(u.spikes > 0) u.spikes -= 1
              if(u.cd16 > 0) u.cd16 -= 1
              if(u.clinch > 0) u.clinch = -1
              if(u.cd21 > 0) u.cd21 -= 1
              if(u.cd22 > 0) u.cd22 -= 1
              if(u.cd31 > 0) u.cd31 -= 1
              if(u.cd32 > 0) u.cd32 -= 1
              if(u.cd33 > 0) u.cd33 -= 1
              if(u.cd34 > 0) u.cd34 -= 1
              if(u.cd35 > 0) u.cd35 -= 1
              if(u.cd36 > 0) u.cd36 -= 1
              if(u.porezka > 0) u.porezka -= 1
              if(u.cd37 > 0) u.cd37 -= 1
              if(user.burn > 0) user.burn -= 1
              if(u.burn > 0) u.burn -= 1
              if(user.poison > 0) user.poison -= 1
              if(u.poison > 0) u.poison -= 1
              if(user.poisoning > 0) user.poisoning -= 1
              if(u.poisoning > 0) u.poisoning -= 1
              var def = user.dueldef
              var procent = 20
               var resultdef = def / 100 * procent
              user.dueldef += resultdef
              user.del12 = 6
              user.cd12 = 9
              user.steps += 1
              u.steps += 1
              if (u.clas.id == 1) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `Защита @id${user.id}(${user.nick}) увеличена до 🛡"${user.dueldef}". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "😈",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🛡",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🖤",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "❣",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "☦",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚙",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚔",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 2) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `Защита @id${user.id}(${user.nick}) увеличена до 🛡"${user.dueldef}". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "❄",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💥",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🍃",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔥",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "💧",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚡",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 3) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `Защита @id${user.id}(${user.nick}) увеличена до 🛡"${user.dueldef}". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "🦠",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔪",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💣",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "👁‍🗨",
                    color: "primary",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "🧬",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🗡",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💉",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
                }
              if(user.del11 == 0) {
                var hp = user.hp
                var atk = user.atk
                var procent = 20
                var resulthp = hp / 100 * procent
                var resultatk = atk / 100 * procent
                user.duelhp -= resulthp
                user.duelatk -= resultatk
                user.del11 = -1
                 
              }
              if(u.del11 == 0) {
                var hp1 = u.hp
                var atk1 = u.atk
                var procent = 20
                var resulthp1 = hp1 / 100 * procent
                var resultatk1 = atk1 / 100 * procent
                u.duelhp -= resulthp1
                u.duelatk -= resultatk1
                u.del11 = -1
                 
              }
              if(user.del12 == 0) {
                var def = user.def
                var procent = 20
                 var resultdef = def / 100 * procent
                user.dueldef -= resultdef
                user.del12 = -1
                 
              }
              if(u.del12 == 0) {
                var def1 = u.def
                var procent = 20
                var resultdef1 = def1 / 100 * procent
                u.dueldef -= resultdef1
                u.del12 = -1
                 
              }
              if(user.spikes == 0) {
                user.spikes -= 1
                 
              }
              if(u.spikes == 0) {
                u.spikes -= 1
                 
              }
            }
          }
        }
      }
    }
    if(user.poison > 0) {
      var procent50 = 50
      var poison50 = u.duelatk * procent50 / 100
      user.duelhp -= poison50
      msg.send(`"${user.nick}" получает ⚔${poison50} урона`)
    }
    if(user.poisoning > 0) {
      var result1 = user.duelatk - user.dueldef
      user.duelhp -= result1
      msg.send(`"${user.nick}" получает ⚔${result1} урона от отравления`)
    }
    if(u.poisoning > 0) {
      var result2 = u.duelatk - u.dueldef
      u.duelhp -= result2
      msg.send(`"${u.nick}" наносит себе ⚔${result2} урона`)
    }
    if(user.poisoning == 0) {
      user.poisoning = -1
      var atk3 = user.duelatk * 3
      var heal1 = atk3 * 2
      user.duelhp += heal1
      if (user.duelhp > user.hp) {
      user.duelhp = user.hp
      }
      msg.send(`"${user.nick}" восстанавливает 💚${heal1} здоровья`)
    }
    if(u.poisoning == 0) {
      u.poisoning = -1
      var atk3 = u.duelatk * 3
      var heal2 = atk3 * 2
      u.duelhp += heal2
      if (u.duelhp > u.hp) {
      u.duelhp = u.hp
      }
      msg.send(`"${u.nick}" восстанавливает 💚${heal2} здоровья`)
    }
    var constuser = user
    user = u
    u = constuser
  })

  vk.updates.hear(/^(.*) 🖤$/i, msg => {
    if(user.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(u.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(user.steps > 100 || u.steps > 100) {
      user.duel = false
      u.duel = false
      u.predictionduel = false
      user.predictduel = false
      user.steps = 0
      u.steps = 0
      user.timer = 0
      u.timer = 0
      user.duelhp = 0
      user.duelatk = 0
      user.dueldef = 0
      u.duelhp = 0
      u.duelatk = 0
      u.dueldef = 0
      user.cd11 = 0,
      user.del11 = -1,
      user.cd12 = 0,
      user.del12 = -1,
      user.cd13 = 0,
      user.cd14 = 0,
      user.cd15 = 0,
      user.spikes = -1,
      user.cd16 = 0,
      user.clinch = -1,
      user.cd21 = 0,
      user.cd22 = 0,
      user.nakopleniye = 0,
      user.el1 = 0,
      user.burn = 0,
      user.el2 = 0,
      user.el3 = 0,
      user.cd31 = 0,
      user.poison = 0,
      user.cd32 = 0,
      user.cd33 = 0,
      user.cd34 = 0,
      user.invisible = false,
      user.cd35 = 0,
      user.cd36 = 0,
      user.cd37 = 0,
      user.poisoning = -1
      u.cd11 = 0,
      u.del11 = -1,
      u.cd12 = 0,
      u.del12 = -1,
      u.cd13 = 0,
      u.cd14 = 0,
      u.cd15 = 0,
      u.spikes = -1,
      u.cd16 = 0,
      u.clinch = -1,
      u.cd21 = 0,
      u.cd22 = 0,
      u.nakopleniye = 0,
      u.el1 = 0,
      u.burn = 0,
      u.el2 = 0,
      u.el3 = 0,
      u.cd31 = 0,
      u.poison = 0,
      u.cd32 = 0,
      u.cd33 = 0,
      u.cd34 = 0,
      u.invisible = false,
      u.cd35 = 0,
      u.cd36 = 0,
      u.cd37 = 0,
      u.poisoning = -1
      return msg.send ('Ходы дуэли превысили 100. Победитель не определён')
    }
    if(msg.senderId == u.id) {
      var constu = u
      u = user
      user = constu
    }
    if(user.cd13 > 0) return msg.send(`Умение перезаряжается`)
    if(user.clas.id != 1) return msg.send (`Умение не принадлежит вашему классу`)
    if(msg.$match[1] != '[club202302035|@eswep]') return
    if(msg.messagePayload != "project RQ") return
    if(u.nakopleniye > 0) {
      if(u.control > 0) u.nakopleniye = 0
    }
    if (user.steps % 2 == 0) {
      return msg.send ('Сейчас не твой ход')
    }
    else {
      if(user.control > 0) {
        msg.send (`Невозможно применить умение`);
      }
      else{
        if(u.clinch > 0) {
          if(user.duelatk < u.dueldef) {
            if(user.cd11 > 0) user.cd11 -= 1
            if(user.del11 > 0) user.del11 -= 1
            if(user.cd12 > 0) user.cd12 -= 1
            if(user.del12 > 0) user.del12 -= 1
            if(user.cd13 > 0) user.cd13 -= 1
            if(user.cd14 > 0) user.cd14 -= 1
            if(user.cd15 > 0) user.cd15 -= 1
            if(user.spikes > 0) user.spikes -= 1
            if(user.cd16 > 0) user.cd16 -= 1
            if(user.cd21 > 0) user.cd21 -= 1
            if(user.cd22 > 0) user.cd22 -= 1
            if(user.cd31 > 0) user.cd31 -= 1
            if(user.cd32 > 0) user.cd32 -= 1
            if(user.cd33 > 0) user.cd33 -= 1
            if(user.cd34 > 0) user.cd34 -= 1
            if(user.cd35 > 0) user.cd35 -= 1
            if(user.cd36 > 0) user.cd36 -= 1
            if(user.porezka > 0) user.porezka -= 1
            if(user.cd37 > 0) user.cd37 -= 1
            if(u.cd11 > 0) u.cd11 -= 1
            if(u.del11 > 0) u.del11 -= 1
            if(u.cd12 > 0) u.cd12 -= 1
            if(u.del12 > 0) u.del12 -= 1
            if(u.cd13 > 0) u.cd13 -= 1
            if(u.cd14 > 0) u.cd14 -= 1
            if(u.cd15 > 0) u.cd15 -= 1
            if(u.spikes > 0) u.spikes -= 1
            if(u.cd16 > 0) u.cd16 -= 1
            if(u.clinch > 0) u.clinch = -1
            if(u.cd21 > 0) u.cd21 -= 1
            if(u.cd22 > 0) u.cd22 -= 1
            if(u.cd31 > 0) u.cd31 -= 1
            if(u.cd32 > 0) u.cd32 -= 1
            if(u.cd33 > 0) u.cd33 -= 1
            if(u.cd34 > 0) u.cd34 -= 1
            if(u.cd35 > 0) u.cd35 -= 1
            if(u.cd36 > 0) u.cd36 -= 1
            if(u.porezka > 0) u.porezka -= 1
            if(u.cd37 > 0) u.cd37 -= 1
            if(user.burn > 0) user.burn -= 1
            if(u.burn > 0) u.burn -= 1
            if(user.poison > 0) user.poison -= 1
            if(u.poison > 0) u.poison -= 1
            if(user.poisoning > 0) user.poisoning -= 1
            if(u.poisoning > 0) u.poisoning -= 1
            user.steps += 1
            u.steps += 1
            user.cd13 = 5
            if (u.clas.id == 1) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, так как активировал "клинч", @id${user.id}(${user.nick}) получает ⚔0 урона, так как атака @id${user.id}(${user.nick}) меньше защиты @id${u.id}(${u.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "😈",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🛡",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🖤",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "❣",
                    color: "positive",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "☦",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚙",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚔",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 2) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, так как активировал "клинч", @id${user.id}(${user.nick}) получает ⚔0 урона, так как атака @id${user.id}(${user.nick}) меньше защиты @id${u.id}(${u.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "❄",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💥",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🍃",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔥",
                    color: "negative",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "💧",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚡",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 3) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${u.id}(${u.nick}) не получает урона, так как активировал "клинч", @id${user.id}(${user.nick}) получает ⚔0 урона, так как атака @id${user.id}(${user.nick}) меньше защиты @id${u.id}(${u.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "🦠",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔪",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💣",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "👁‍🗨",
                  color: "primary",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "🧬",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🗡",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💉",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
              }
            if(user.del11 == 0) {
              var hp = user.hp
              var atk = user.atk
              var procent = 20
              var resulthp = hp / 100 * procent
              var resultatk = atk / 100 * procent
              user.duelhp -= resulthp
              user.duelatk -= resultatk
              user.del11 = -1
               
            }
            if(u.del11 == 0) {
              var hp1 = u.hp
              var atk1 = u.atk
              var procent = 20
              var resulthp1 = hp1 / 100 * procent
              var resultatk1 = atk1 / 100 * procent
              u.duelhp -= resulthp1
              u.duelatk -= resultatk1
              u.del11 = -1
               
            }
            if(user.del12 == 0) {
              var def = user.def
              var procent = 20
               var resultdef = def / 100 * procent
              user.dueldef -= resultdef
              user.del12 = -1
               
            }
            if(u.del12 == 0) {
              var def1 = u.def
              var procent = 20
              var resultdef1 = def1 / 100 * procent
              u.dueldef -= resultdef1
              u.del12 = -1
               
            }
            if(user.spikes == 0) {
              user.spikes -= 1
               
            }
            if(u.spikes == 0) {
              u.spikes -= 1
               
            }
          }
          else {
            var hp = user.hp
            var procent20 = 20
            var resulthp = hp / 100 * procent20
            var resulthpminusdef = resulthp - u.dueldef
            user.duelhp -= resulthpminusdef
            if(user.cd11 > 0) user.cd11 -= 1
            if(user.del11 > 0) user.del11 -= 1
            if(user.cd12 > 0) user.cd12 -= 1
            if(user.del12 > 0) user.del12 -= 1
            if(user.cd13 > 0) user.cd13 -= 1
            if(user.cd14 > 0) user.cd14 -= 1
            if(user.cd15 > 0) user.cd15 -= 1
            if(user.spikes > 0) user.spikes -= 1
            if(user.cd16 > 0) user.cd16 -= 1
            if(user.cd21 > 0) user.cd21 -= 1
            if(user.cd22 > 0) user.cd22 -= 1
            if(user.cd31 > 0) user.cd31 -= 1
            if(user.cd32 > 0) user.cd32 -= 1
            if(user.cd33 > 0) user.cd33 -= 1
            if(user.cd34 > 0) user.cd34 -= 1
            if(user.cd35 > 0) user.cd35 -= 1
            if(user.cd36 > 0) user.cd36 -= 1
            if(user.porezka > 0) user.porezka -= 1
            if(user.cd37 > 0) user.cd37 -= 1
            if(u.cd11 > 0) u.cd11 -= 1
            if(u.del11 > 0) u.del11 -= 1
            if(u.cd12 > 0) u.cd12 -= 1
            if(u.del12 > 0) u.del12 -= 1
            if(u.cd13 > 0) u.cd13 -= 1
            if(u.cd14 > 0) u.cd14 -= 1
            if(u.cd15 > 0) u.cd15 -= 1
            if(u.spikes > 0) u.spikes -= 1
            if(u.cd16 > 0) u.cd16 -= 1
            if(u.clinch > 0) u.clinch = -1
            if(u.cd21 > 0) u.cd21 -= 1
            if(u.cd22 > 0) u.cd22 -= 1
            if(u.cd31 > 0) u.cd31 -= 1
            if(u.cd32 > 0) u.cd32 -= 1
            if(u.cd33 > 0) u.cd33 -= 1
            if(u.cd34 > 0) u.cd34 -= 1
            if(u.cd35 > 0) u.cd35 -= 1
            if(u.cd36 > 0) u.cd36 -= 1
            if(u.porezka > 0) u.porezka -= 1
            if(u.cd37 > 0) u.cd37 -= 1
            if(user.burn > 0) user.burn -= 1
            if(u.burn > 0) u.burn -= 1
            if(user.poison > 0) user.poison -= 1
            if(u.poison > 0) u.poison -= 1
            if(user.poisoning > 0) user.poisoning -= 1
            if(u.poisoning > 0) u.poisoning -= 1
            user.cd13 = 5
            user.steps += 1
            u.steps += 1
            if (u.clas.id == 1) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, @id${user.id}(${user.nick}) получает ⚔${resulthpminusdef} урона, так как @id${u.id}(${u.nick}) активировал "клинч". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "😈",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🛡",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🖤",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "❣",
                    color: "positive",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "☦",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚙",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚔",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 2) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, @id${user.id}(${user.nick}) получает ⚔${resulthpminusdef} урона, так как @id${u.id}(${u.nick}) активировал "клинч". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "❄",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💥",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🍃",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔥",
                    color: "negative",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "💧",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚡",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 3) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${u.id}(${u.nick}) не получает урона, @id${user.id}(${user.nick}) получает ⚔${resulthpminusdef} урона, так как @id${u.id}(${u.nick}) активировал "клинч". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "🦠",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔪",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💣",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "👁‍🗨",
                  color: "primary",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "🧬",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🗡",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💉",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
              }
            if(user.duelhp < 1) {
              var plata2 = user.money
              var procentplata = 10
              var resultplata2 = plata2 / 100 * procentplata
              let num27 = resultplata2
              var finalplata = num27.toFixed(0)
              var finalplata2 = Number(finalplata)
              user.money -= finalplata2
              u.money += finalplata2
              user.duel = false
              u.duel = false
              u.predictionduel = false
              user.predictduel = false
              user.steps = 0
              u.steps = 0
              user.timer = 0
              u.timer = 0
              user.duelhp = 0
              user.duelatk = 0
              user.dueldef = 0
              u.duelhp = 0
              u.duelatk = 0
              u.dueldef = 0
              user.cd11 = 0,
              user.del11 = -1,
              user.cd12 = 0,
              user.del12 = -1,
              user.cd13 = 0,
              user.cd14 = 0,
              user.cd15 = 0,
              user.spikes = -1,
              user.cd16 = 0,
              user.clinch = -1,
              user.cd21 = 0,
              user.cd22 = 0,
              user.nakopleniye = 0,
              user.el1 = 0,
              user.burn = 0,
              user.el2 = 0,
              user.el3 = 0,
              user.cd31 = 0,
              user.poison = 0,
              user.cd32 = 0,
              user.cd33 = 0,
              user.cd34 = 0,
              user.invisible = false,
              user.cd35 = 0,
              user.cd36 = 0,
              user.cd37 = 0,
              user.poisoning = -1
              u.cd11 = 0,
              u.del11 = -1,
              u.cd12 = 0,
              u.del12 = -1,
              u.cd13 = 0,
              u.cd14 = 0,
              u.cd15 = 0,
              u.spikes = -1,
              u.cd16 = 0,
              u.clinch = -1,
              u.cd21 = 0,
              u.cd22 = 0,
              u.nakopleniye = 0,
              u.el1 = 0,
              u.burn = 0,
              u.el2 = 0,
              u.el3 = 0,
              u.cd31 = 0,
              u.poison = 0,
              u.cd32 = 0,
              u.cd33 = 0,
              u.cd34 = 0,
              u.invisible = false,
              u.cd35 = 0,
              u.cd36 = 0,
              u.cd37 = 0,
              u.poisoning = -1
              msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
              var constuser = user
              user = u
              u = constuser
            }
            else {
              if(u.duelhp < 1) {
                var plata2 = user.money
                var procentplata = 10
                var resultplata2 = plata2 / 100 * procentplata
                let num27 = resultplata2
                var finalplata = num27.toFixed(0)
                var finalplata2 = Number(finalplata)
                u.money -= finalplata2
                user.money += finalplata2
                user.duel = false
                u.duel = false
                u.predictionduel = false
                user.predictduel = false
                user.steps = 0
                u.steps = 0
                user.timer = 0
                u.timer = 0
                user.duelhp = 0
                user.duelatk = 0
                user.dueldef = 0
                u.duelhp = 0
                u.duelatk = 0
                u.dueldef = 0
                user.cd11 = 0,
                user.del11 = -1,
                user.cd12 = 0,
                user.del12 = -1,
                user.cd13 = 0,
                user.cd14 = 0,
                user.cd15 = 0,
                user.spikes = -1,
                user.cd16 = 0,
                user.clinch = -1,
                user.cd21 = 0,
                user.cd22 = 0,
                user.nakopleniye = 0,
                user.el1 = 0,
                user.burn = 0,
                user.el2 = 0,
                user.el3 = 0,
                user.cd31 = 0,
                user.poison = 0,
                user.cd32 = 0,
                user.cd33 = 0,
                user.cd34 = 0,
                user.invisible = false,
                user.cd35 = 0,
                user.cd36 = 0,
                user.cd37 = 0,
                user.poisoning = -1
                u.cd11 = 0,
                u.del11 = -1,
                u.cd12 = 0,
                u.del12 = -1,
                u.cd13 = 0,
                u.cd14 = 0,
                u.cd15 = 0,
                u.spikes = -1,
                u.cd16 = 0,
                u.clinch = -1,
                u.cd21 = 0,
                u.cd22 = 0,
                u.nakopleniye = 0,
                u.el1 = 0,
                u.burn = 0,
                u.el2 = 0,
                u.el3 = 0,
                u.cd31 = 0,
                u.poison = 0,
                u.cd32 = 0,
                u.cd33 = 0,
                u.cd34 = 0,
                u.invisible = false,
                u.cd35 = 0,
                u.cd36 = 0,
                u.cd37 = 0,
                u.poisoning = -1
                msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                var constuser = user
                user = u
                u = constuser
              }
            }
            if(user.del11 == 0) {
              var hp = user.hp
              var atk = user.atk
              var procent = 20
              var resulthp = hp / 100 * procent
              var resultatk = atk / 100 * procent
              user.duelhp -= resulthp
              user.duelatk -= resultatk
              user.del11 = -1
               
            }
            if(u.del11 == 0) {
              var hp1 = u.hp
              var atk1 = u.atk
              var procent = 20
              var resulthp1 = hp1 / 100 * procent
              var resultatk1 = atk1 / 100 * procent
              u.duelhp -= resulthp1
              u.duelatk -= resultatk1
              u.del11 = -1
               
            }
            if(user.del12 == 0) {
              var def = user.def
              var procent = 20
               var resultdef = def / 100 * procent
              user.dueldef -= resultdef
              user.del12 = -1
               
            }
            if(u.del12 == 0) {
              var def1 = u.def
              var procent = 20
              var resultdef1 = def1 / 100 * procent
              u.dueldef -= resultdef1
              u.del12 = -1
               
            }
            if(user.spikes == 0) {
              user.spikes -= 1
               
            }
            if(u.spikes == 0) {
              u.spikes -= 1
               
            }
          }
        }
        else {
          if(u.spikes > 0) {
            if(u.control > 0) {
              if(u.dueldef > user.duelatk) {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                user.cd13 = 5
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                  if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
              var hp = user.hp
              var procent = 20
              var resulthp = hp / 100 * procent
              var resulthpminusdef = resulthp - u.dueldef
              var procentspikes = 50
              var resultresulthpminusdefprocentspikes = resulthpminusdef / 100 * procentspikes
              u.duelhp -= resulthpminusdef
              user.duelhp -= resultresulthpminusdefprocentspikes
              if(user.cd11 > 0) user.cd11 -= 2
              if(user.del11 > 0) user.del11 -= 2
              if(user.cd12 > 0) user.cd12 -= 2
              if(user.del12 > 0) user.del12 -= 2
              if(user.cd13 > 0) user.cd13 -= 2
              if(user.cd14 > 0) user.cd14 -= 2
              if(user.cd15 > 0) user.cd15 -= 2
              if(user.spikes > 0) user.spikes -= 2
              if(user.cd16 > 0) user.cd16 -= 2
              if(user.cd21 > 0) user.cd21 -= 2
              if(user.cd22 > 0) user.cd22 -= 2
              if(user.cd31 > 0) user.cd31 -= 2
              if(user.cd32 > 0) user.cd32 -= 2
              if(user.cd33 > 0) user.cd33 -= 2
              if(user.cd34 > 0) user.cd34 -= 2
              if(user.cd35 > 0) user.cd35 -= 2
              if(user.cd36 > 0) user.cd36 -= 2
              if(user.porezka > 0) user.porezka -= 2
              if(user.cd37 > 0) user.cd37 -= 2
              if(u.cd11 > 0) u.cd11 -= 2
              if(u.del11 > 0) u.del11 -= 2
              if(u.cd12 > 0) u.cd12 -= 2
              if(u.del12 > 0) u.del12 -= 2
              if(u.cd13 > 0) u.cd13 -= 2
              if(u.cd14 > 0) u.cd14 -= 2
              if(u.cd15 > 0) u.cd15 -= 2
              if(u.spikes > 0) u.spikes -= 2
              if(u.cd16 > 0) u.cd16 -= 2
              if(u.clinch > 0) u.clinch = -1
              if(u.cd21 > 0) u.cd21 -= 2
              if(u.cd22 > 0) u.cd22 -= 2
              if(u.cd31 > 0) u.cd31 -= 2
              if(u.cd32 > 0) u.cd32 -= 2
              if(u.cd33 > 0) u.cd33 -= 2
              if(u.cd34 > 0) u.cd34 -= 2
              if(u.cd35 > 0) u.cd35 -= 2
              if(u.cd36 > 0) u.cd36 -= 2
              if(u.porezka > 0) u.porezka -= 2
              if(u.cd37 > 0) u.cd37 -= 2
              if(user.burn > 0) user.burn -= 2
              if(u.burn > 0) u.burn -= 2
              if(user.poison > 0) user.poison -= 2
              if(u.poison > 0) u.poison -= 2
              if(user.poisoning > 0) user.poisoning -= 2
              if(u.poisoning > 0) u.poisoning -= 2
              user.cd13 = 5
              if(u.control == 2) {
                user.steps += 1
                u.steps += 1
                u.control -= 2
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${resulthpminusdef} урона. ${user.nick}" получает ⚔${resultresulthpminusdefprocentspikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${resulthpminusdef} урона. ${user.nick}" получает ⚔${resultresulthpminusdefprocentspikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${resulthpminusdef} урона. ${user.nick}" получает ⚔${resultresulthpminusdefprocentspikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
              }
              else {
                if(u.control > 2) {
                  user.steps += 2
                  u.steps += 2
                  u.control -= 2
                  if (user.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${resulthpminusdef} урона. ${user.nick}" получает ⚔${resultresulthpminusdefprocentspikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${user.id}(${user.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${resulthpminusdef} урона. ${user.nick}" получает ⚔${resultresulthpminusdefprocentspikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${user.id}(${user.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${resulthpminusdef} урона. ${user.nick}" получает ⚔${resultresulthpminusdefprocentspikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${user.id}(${user.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
              }
                if(user.duelhp < 1) {
                  var plata2 = user.money
                  var procentplata = 10
                  var resultplata2 = plata2 / 100 * procentplata
                  let num27 = resultplata2
                  var finalplata = num27.toFixed(0)
                  var finalplata2 = Number(finalplata)
                  user.money -= finalplata2
                  u.money += finalplata2
                  user.duel = false
                  u.duel = false
                  u.predictionduel = false
                  user.predictduel = false
                  user.steps = 0
                  u.steps = 0
                  user.timer = 0
                  u.timer = 0
                  user.duelhp = 0
                  user.duelatk = 0
                  user.dueldef = 0
                  u.duelhp = 0
                  u.duelatk = 0
                  u.dueldef = 0
                  user.cd11 = 0,
                  user.del11 = -1,
                  user.cd12 = 0,
                  user.del12 = -1,
                  user.cd13 = 0,
                  user.cd14 = 0,
                  user.cd15 = 0,
                  user.spikes = -1,
                  user.cd16 = 0,
                  user.clinch = -1,
                  user.cd21 = 0,
                  user.cd22 = 0,
                  user.nakopleniye = 0,
                  user.el1 = 0,
                  user.burn = 0,
                  user.el2 = 0,
                  user.el3 = 0,
                  user.cd31 = 0,
                  user.poison = 0,
                  user.cd32 = 0,
                  user.cd33 = 0,
                  user.cd34 = 0,
                  user.invisible = false,
                  user.cd35 = 0,
                  user.cd36 = 0,
                  user.cd37 = 0,
                  user.poisoning = -1
                  u.cd11 = 0,
                  u.del11 = -1,
                  u.cd12 = 0,
                  u.del12 = -1,
                  u.cd13 = 0,
                  u.cd14 = 0,
                  u.cd15 = 0,
                  u.spikes = -1,
                  u.cd16 = 0,
                  u.clinch = -1,
                  u.cd21 = 0,
                  u.cd22 = 0,
                  u.nakopleniye = 0,
                  u.el1 = 0,
                  u.burn = 0,
                  u.el2 = 0,
                  u.el3 = 0,
                  u.cd31 = 0,
                  u.poison = 0,
                  u.cd32 = 0,
                  u.cd33 = 0,
                  u.cd34 = 0,
                  u.invisible = false,
                  u.cd35 = 0,
                  u.cd36 = 0,
                  u.cd37 = 0,
                  u.poisoning = -1
                  msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                  var constuser = user
                  user = u
                  u = constuser
                }
                else {
                  if(u.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    u.money -= finalplata2
                    user.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                }
              if(user.del11 == 0) {
                var hp = user.hp
                var atk = user.atk
                var procent = 20
                var resulthp = hp / 100 * procent
                var resultatk = atk / 100 * procent
                user.duelhp -= resulthp
                user.duelatk -= resultatk
                user.del11 = -1
                 
              }
              if(u.del11 == 0) {
                var hp1 = u.hp
                var atk1 = u.atk
                var procent = 20
                var resulthp1 = hp1 / 100 * procent
                var resultatk1 = atk1 / 100 * procent
                u.duelhp -= resulthp1
                u.duelatk -= resultatk1
                u.del11 = -1
                 
              }
              if(user.del12 == 0) {
                var def = user.def
                var procent = 20
                 var resultdef = def / 100 * procent
                user.dueldef -= resultdef
                user.del12 = -1
                 
              }
              if(u.del12 == 0) {
                var def1 = u.def
                var procent = 20
                var resultdef1 = def1 / 100 * procent
                u.dueldef -= resultdef1
                u.del12 = -1
                 
              }
              if(user.spikes == 0) {
                user.spikes -= 1
                 
              }
              if(u.spikes == 0) {
                u.spikes -= 1
                 
              }
              }
            }
            else {
              if(u.dueldef > user.duelatk) {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                user.cd13 = 5
                user.steps += 1
                u.steps += 1
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
              var hp = user.hp
              var procent = 20
              var resulthp = hp / 100 * procent
              var resulthpminusdef = resulthp - u.dueldef
              var procentspikes = 50
              var resultresulthpminusdefprocentspikes = resulthpminusdef / 100 * procentspikes
              u.duelhp -= resulthpminusdef
              user.duelhp -= resultresulthpminusdefprocentspikes
              if(user.cd11 > 0) user.cd11 -= 2
              if(user.del11 > 0) user.del11 -= 2
              if(user.cd12 > 0) user.cd12 -= 2
              if(user.del12 > 0) user.del12 -= 2
              if(user.cd13 > 0) user.cd13 -= 2
              if(user.cd14 > 0) user.cd14 -= 2
              if(user.cd15 > 0) user.cd15 -= 2
              if(user.spikes > 0) user.spikes -= 2
              if(user.cd16 > 0) user.cd16 -= 2
              if(user.cd21 > 0) user.cd21 -= 2
              if(user.cd22 > 0) user.cd22 -= 2
              if(user.cd31 > 0) user.cd31 -= 2
              if(user.cd32 > 0) user.cd32 -= 2
              if(user.cd33 > 0) user.cd33 -= 2
              if(user.cd34 > 0) user.cd34 -= 2
              if(user.cd35 > 0) user.cd35 -= 2
              if(user.cd36 > 0) user.cd36 -= 2
              if(user.porezka > 0) user.porezka -= 2
              if(user.cd37 > 0) user.cd37 -= 2
              if(u.cd11 > 0) u.cd11 -= 2
              if(u.del11 > 0) u.del11 -= 2
              if(u.cd12 > 0) u.cd12 -= 2
              if(u.del12 > 0) u.del12 -= 2
              if(u.cd13 > 0) u.cd13 -= 2
              if(u.cd14 > 0) u.cd14 -= 2
              if(u.cd15 > 0) u.cd15 -= 2
              if(u.spikes > 0) u.spikes -= 2
              if(u.cd16 > 0) u.cd16 -= 2
              if(u.clinch > 0) u.clinch = -1
              if(u.cd21 > 0) u.cd21 -= 2
              if(u.cd22 > 0) u.cd22 -= 2
              if(u.cd31 > 0) u.cd31 -= 2
              if(u.cd32 > 0) u.cd32 -= 2
              if(u.cd33 > 0) u.cd33 -= 2
              if(u.cd34 > 0) u.cd34 -= 2
              if(u.cd35 > 0) u.cd35 -= 2
              if(u.cd36 > 0) u.cd36 -= 2
              if(u.porezka > 0) u.porezka -= 2
              if(u.cd37 > 0) u.cd37 -= 2
              if(user.burn > 0) user.burn -= 2
              if(u.burn > 0) u.burn -= 2
              if(user.poison > 0) user.poison -= 2
              if(u.poison > 0) u.poison -= 2
              if(user.poisoning > 0) user.poisoning -= 2
              if(u.poisoning > 0) u.poisoning -= 2
              user.cd13 = 5
              user.steps += 1
              u.steps += 1
              if (u.clas.id == 1) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${resulthpminusdef} урона. ${user.nick}" получает ⚔${resultresulthpminusdefprocentspikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "😈",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🛡",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🖤",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "❣",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "☦",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚙",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚔",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 2) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${resulthpminusdef} урона. ${user.nick}" получает ⚔${resultresulthpminusdefprocentspikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "❄",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💥",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🍃",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔥",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "💧",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚡",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 3) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) получает ⚔${resulthpminusdef} урона. ${user.nick}" получает ⚔${resultresulthpminusdefprocentspikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "🦠",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔪",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💣",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "👁‍🗨",
                    color: "primary",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "🧬",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🗡",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💉",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
                }
                if(user.duelhp < 1) {
                  var plata2 = user.money
                  var procentplata = 10
                  var resultplata2 = plata2 / 100 * procentplata
                  let num27 = resultplata2
                  var finalplata = num27.toFixed(0)
                  var finalplata2 = Number(finalplata)
                  user.money -= finalplata2
                  u.money += finalplata2
                  user.duel = false
                  u.duel = false
                  u.predictionduel = false
                  user.predictduel = false
                  user.steps = 0
                  u.steps = 0
                  user.timer = 0
                  u.timer = 0
                  user.duelhp = 0
                  user.duelatk = 0
                  user.dueldef = 0
                  u.duelhp = 0
                  u.duelatk = 0
                  u.dueldef = 0
                  user.cd11 = 0,
                  user.del11 = -1,
                  user.cd12 = 0,
                  user.del12 = -1,
                  user.cd13 = 0,
                  user.cd14 = 0,
                  user.cd15 = 0,
                  user.spikes = -1,
                  user.cd16 = 0,
                  user.clinch = -1,
                  user.cd21 = 0,
                  user.cd22 = 0,
                  user.nakopleniye = 0,
                  user.el1 = 0,
                  user.burn = 0,
                  user.el2 = 0,
                  user.el3 = 0,
                  user.cd31 = 0,
                  user.poison = 0,
                  user.cd32 = 0,
                  user.cd33 = 0,
                  user.cd34 = 0,
                  user.invisible = false,
                  user.cd35 = 0,
                  user.cd36 = 0,
                  user.cd37 = 0,
                  user.poisoning = -1
                  u.cd11 = 0,
                  u.del11 = -1,
                  u.cd12 = 0,
                  u.del12 = -1,
                  u.cd13 = 0,
                  u.cd14 = 0,
                  u.cd15 = 0,
                  u.spikes = -1,
                  u.cd16 = 0,
                  u.clinch = -1,
                  u.cd21 = 0,
                  u.cd22 = 0,
                  u.nakopleniye = 0,
                  u.el1 = 0,
                  u.burn = 0,
                  u.el2 = 0,
                  u.el3 = 0,
                  u.cd31 = 0,
                  u.poison = 0,
                  u.cd32 = 0,
                  u.cd33 = 0,
                  u.cd34 = 0,
                  u.invisible = false,
                  u.cd35 = 0,
                  u.cd36 = 0,
                  u.cd37 = 0,
                  u.poisoning = -1
                  msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                  var constuser = user
                  user = u
                  u = constuser
                }
                else {
                  if(u.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    u.money -= finalplata2
                    user.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                }
              if(user.del11 == 0) {
                var hp = user.hp
                var atk = user.atk
                var procent = 20
                var resulthp = hp / 100 * procent
                var resultatk = atk / 100 * procent
                user.duelhp -= resulthp
                user.duelatk -= resultatk
                user.del11 = -1
                 
              }
              if(u.del11 == 0) {
                var hp1 = u.hp
                var atk1 = u.atk
                var procent = 20
                var resulthp1 = hp1 / 100 * procent
                var resultatk1 = atk1 / 100 * procent
                u.duelhp -= resulthp1
                u.duelatk -= resultatk1
                u.del11 = -1
                 
              }
              if(user.del12 == 0) {
                var def = user.def
                var procent = 20
                 var resultdef = def / 100 * procent
                user.dueldef -= resultdef
                user.del12 = -1
                 
              }
              if(u.del12 == 0) {
                var def1 = u.def
                var procent = 20
                var resultdef1 = def1 / 100 * procent
                u.dueldef -= resultdef1
                u.del12 = -1
                 
              }
              if(user.spikes == 0) {
                user.spikes -= 1
                 
              }
              if(u.spikes == 0) {
                u.spikes -= 1
                 
              }
              }
            }
          }
          else {
            if(u.control > 0) {
              if(u.dueldef > user.duelatk) {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                user.cd13 = 5
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
                var hp = user.hp
                var procent = 20
                var resulthp = hp / 100 * procent
                var resulthpminusdef = resulthp - u.dueldef
                u.duelhp -= resulthpminusdef
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                user.cd13 = 5
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${resulthpminusdef} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${resulthpminusdef} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${resulthpminusdef} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) получает ⚔${resulthpminusdef} урона. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) получает ⚔${resulthpminusdef} урона. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${resulthpminusdef} урона. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                  if(user.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    user.money -= finalplata2
                    u.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                  else {
                    if(u.duelhp < 1) {
                      var plata2 = user.money
                      var procentplata = 10
                      var resultplata2 = plata2 / 100 * procentplata
                      let num27 = resultplata2
                      var finalplata = num27.toFixed(0)
                      var finalplata2 = Number(finalplata)
                      u.money -= finalplata2
                      user.money += finalplata2
                      user.duel = false
                      u.duel = false
                      u.predictionduel = false
                      user.predictduel = false
                      user.steps = 0
                      u.steps = 0
                      user.timer = 0
                      u.timer = 0
                      user.duelhp = 0
                      user.duelatk = 0
                      user.dueldef = 0
                      u.duelhp = 0
                      u.duelatk = 0
                      u.dueldef = 0
                      user.cd11 = 0,
                      user.del11 = -1,
                      user.cd12 = 0,
                      user.del12 = -1,
                      user.cd13 = 0,
                      user.cd14 = 0,
                      user.cd15 = 0,
                      user.spikes = -1,
                      user.cd16 = 0,
                      user.clinch = -1,
                      user.cd21 = 0,
                      user.cd22 = 0,
                      user.nakopleniye = 0,
                      user.el1 = 0,
                      user.burn = 0,
                      user.el2 = 0,
                      user.el3 = 0,
                      user.cd31 = 0,
                      user.poison = 0,
                      user.cd32 = 0,
                      user.cd33 = 0,
                      user.cd34 = 0,
                      user.invisible = false,
                      user.cd35 = 0,
                      user.cd36 = 0,
                      user.cd37 = 0,
                      user.poisoning = -1
                      u.cd11 = 0,
                      u.del11 = -1,
                      u.cd12 = 0,
                      u.del12 = -1,
                      u.cd13 = 0,
                      u.cd14 = 0,
                      u.cd15 = 0,
                      u.spikes = -1,
                      u.cd16 = 0,
                      u.clinch = -1,
                      u.cd21 = 0,
                      u.cd22 = 0,
                      u.nakopleniye = 0,
                      u.el1 = 0,
                      u.burn = 0,
                      u.el2 = 0,
                      u.el3 = 0,
                      u.cd31 = 0,
                      u.poison = 0,
                      u.cd32 = 0,
                      u.cd33 = 0,
                      u.cd34 = 0,
                      u.invisible = false,
                      u.cd35 = 0,
                      u.cd36 = 0,
                      u.cd37 = 0,
                      u.poisoning = -1
                      msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                      var constuser = user
                      user = u
                      u = constuser
                    }
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
            }
            else {
              if(u.dueldef > user.duelatk) {
                if(user.cd11 > 0) user.cd11 -= 1
                if(user.del11 > 0) user.del11 -= 1
                if(user.cd12 > 0) user.cd12 -= 1
                if(user.del12 > 0) user.del12 -= 1
                if(user.cd13 > 0) user.cd13 -= 1
                if(user.cd14 > 0) user.cd14 -= 1
                if(user.cd15 > 0) user.cd15 -= 1
                if(user.spikes > 0) user.spikes -= 1
                if(user.cd16 > 0) user.cd16 -= 1
                if(user.cd21 > 0) user.cd21 -= 1
                if(user.cd22 > 0) user.cd22 -= 1
                if(user.cd31 > 0) user.cd31 -= 1
                if(user.cd32 > 0) user.cd32 -= 1
                if(user.cd33 > 0) user.cd33 -= 1
                if(user.cd34 > 0) user.cd34 -= 1
                if(user.cd35 > 0) user.cd35 -= 1
                if(user.cd36 > 0) user.cd36 -= 1
                if(user.porezka > 0) user.porezka -= 1
                if(user.cd37 > 0) user.cd37 -= 1
                if(u.cd11 > 0) u.cd11 -= 1
                if(u.del11 > 0) u.del11 -= 1
                if(u.cd12 > 0) u.cd12 -= 1
                if(u.del12 > 0) u.del12 -= 1
                if(u.cd13 > 0) u.cd13 -= 1
                if(u.cd14 > 0) u.cd14 -= 1
                if(u.cd15 > 0) u.cd15 -= 1
                if(u.spikes > 0) u.spikes -= 1
                if(u.cd16 > 0) u.cd16 -= 1
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 1
                if(u.cd22 > 0) u.cd22 -= 1
                if(u.cd31 > 0) u.cd31 -= 1
                if(u.cd32 > 0) u.cd32 -= 1
                if(u.cd33 > 0) u.cd33 -= 1
                if(u.cd34 > 0) u.cd34 -= 1
                if(u.cd35 > 0) u.cd35 -= 1
                if(u.cd36 > 0) u.cd36 -= 1
                if(u.porezka > 0) u.porezka -= 1
                if(u.cd37 > 0) u.cd37 -= 1
                if(user.burn > 0) user.burn -= 1
                if(u.burn > 0) u.burn -= 1
                if(user.poison > 0) user.poison -= 1
                if(u.poison > 0) u.poison -= 1
                if(user.poisoning > 0) user.poisoning -= 1
                if(u.poisoning > 0) u.poisoning -= 1
                user.cd13 = 5
                user.steps += 1
                u.steps += 1
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
                var hp = user.hp
                var procent = 20
                var resulthp = hp / 100 * procent
                var resulthpminusdef = resulthp - u.dueldef
                u.duelhp -= resulthpminusdef
                if(user.cd11 > 0) user.cd11 -= 1
                if(user.del11 > 0) user.del11 -= 1
                if(user.cd12 > 0) user.cd12 -= 1
                if(user.del12 > 0) user.del12 -= 1
                if(user.cd13 > 0) user.cd13 -= 1
                if(user.cd14 > 0) user.cd14 -= 1
                if(user.cd15 > 0) user.cd15 -= 1
                if(user.spikes > 0) user.spikes -= 1
                if(user.cd16 > 0) user.cd16 -= 1
                if(user.cd21 > 0) user.cd21 -= 1
                if(user.cd22 > 0) user.cd22 -= 1
                if(user.cd31 > 0) user.cd31 -= 1
                if(user.cd32 > 0) user.cd32 -= 1
                if(user.cd33 > 0) user.cd33 -= 1
                if(user.cd34 > 0) user.cd34 -= 1
                if(user.cd35 > 0) user.cd35 -= 1
                if(user.cd36 > 0) user.cd36 -= 1
                if(user.porezka > 0) user.porezka -= 1
                if(user.cd37 > 0) user.cd37 -= 1
                if(u.cd11 > 0) u.cd11 -= 1
                if(u.del11 > 0) u.del11 -= 1
                if(u.cd12 > 0) u.cd12 -= 1
                if(u.del12 > 0) u.del12 -= 1
                if(u.cd13 > 0) u.cd13 -= 1
                if(u.cd14 > 0) u.cd14 -= 1
                if(u.cd15 > 0) u.cd15 -= 1
                if(u.spikes > 0) u.spikes -= 1
                if(u.cd16 > 0) u.cd16 -= 1
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 1
                if(u.cd22 > 0) u.cd22 -= 1
                if(u.cd31 > 0) u.cd31 -= 1
                if(u.cd32 > 0) u.cd32 -= 1
                if(u.cd33 > 0) u.cd33 -= 1
                if(u.cd34 > 0) u.cd34 -= 1
                if(u.cd35 > 0) u.cd35 -= 1
                if(u.cd36 > 0) u.cd36 -= 1
                if(u.porezka > 0) u.porezka -= 1
                if(u.cd37 > 0) u.cd37 -= 1
                if(user.burn > 0) user.burn -= 1
                if(u.burn > 0) u.burn -= 1
                if(user.poison > 0) user.poison -= 1
                if(u.poison > 0) u.poison -= 1
                if(user.poisoning > 0) user.poisoning -= 1
                if(u.poisoning > 0) u.poisoning -= 1
                user.cd13 = 5
                user.steps += 1
                u.steps += 1
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${resulthpminusdef} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${resulthpminusdef} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${resulthpminusdef} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
                  if(user.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    user.money -= finalplata2
                    u.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                  else {
                    if(u.duelhp < 1) {
                      var plata2 = user.money
                      var procentplata = 10
                      var resultplata2 = plata2 / 100 * procentplata
                      let num27 = resultplata2
                      var finalplata = num27.toFixed(0)
                      var finalplata2 = Number(finalplata)
                      u.money -= finalplata2
                      user.money += finalplata2
                      user.duel = false
                      u.duel = false
                      u.predictionduel = false
                      user.predictduel = false
                      user.steps = 0
                      u.steps = 0
                      user.timer = 0
                      u.timer = 0
                      user.duelhp = 0
                      user.duelatk = 0
                      user.dueldef = 0
                      u.duelhp = 0
                      u.duelatk = 0
                      u.dueldef = 0
                      user.cd11 = 0,
                      user.del11 = -1,
                      user.cd12 = 0,
                      user.del12 = -1,
                      user.cd13 = 0,
                      user.cd14 = 0,
                      user.cd15 = 0,
                      user.spikes = -1,
                      user.cd16 = 0,
                      user.clinch = -1,
                      user.cd21 = 0,
                      user.cd22 = 0,
                      user.nakopleniye = 0,
                      user.el1 = 0,
                      user.burn = 0,
                      user.el2 = 0,
                      user.el3 = 0,
                      user.cd31 = 0,
                      user.poison = 0,
                      user.cd32 = 0,
                      user.cd33 = 0,
                      user.cd34 = 0,
                      user.invisible = false,
                      user.cd35 = 0,
                      user.cd36 = 0,
                      user.cd37 = 0,
                      user.poisoning = -1
                      u.cd11 = 0,
                      u.del11 = -1,
                      u.cd12 = 0,
                      u.del12 = -1,
                      u.cd13 = 0,
                      u.cd14 = 0,
                      u.cd15 = 0,
                      u.spikes = -1,
                      u.cd16 = 0,
                      u.clinch = -1,
                      u.cd21 = 0,
                      u.cd22 = 0,
                      u.nakopleniye = 0,
                      u.el1 = 0,
                      u.burn = 0,
                      u.el2 = 0,
                      u.el3 = 0,
                      u.cd31 = 0,
                      u.poison = 0,
                      u.cd32 = 0,
                      u.cd33 = 0,
                      u.cd34 = 0,
                      u.invisible = false,
                      u.cd35 = 0,
                      u.cd36 = 0,
                      u.cd37 = 0,
                      u.poisoning = -1
                      msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                      var constuser = user
                      user = u
                      u = constuser
                    }
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
            }
          }
        }
      }
    }
    if(user.poison > 0) {
      var procent50 = 50
      var poison50 = u.duelatk * procent50 / 100
      user.duelhp -= poison50
      msg.send(`"${user.nick}" получает ⚔${poison50} урона`)
    }
    if(user.poisoning > 0) {
      var result1 = user.duelatk - user.dueldef
      user.duelhp -= result1
      msg.send(`"${user.nick}" получает ⚔${result1} урона от отравления`)
    }
    if(u.poisoning > 0) {
      var result2 = u.duelatk - u.dueldef
      u.duelhp -= result2
      msg.send(`"${u.nick}" наносит себе ⚔${result2} урона`)
    }
    if(user.poisoning == 0) {
      user.poisoning = -1
      var atk3 = user.duelatk * 3
      var heal1 = atk3 * 2
      user.duelhp += heal1
      if (user.duelhp > user.hp) {
      user.duelhp = user.hp
      }
      msg.send(`"${user.nick}" восстанавливает 💚${heal1} здоровья`)
    }
    if(u.poisoning == 0) {
      u.poisoning = -1
      var atk3 = u.duelatk * 3
      var heal2 = atk3 * 2
      u.duelhp += heal2
      if (u.duelhp > u.hp) {
      u.duelhp = u.hp
      }
      msg.send(`"${u.nick}" восстанавливает 💚${heal2} здоровья`)
    }
    var constuser = user
    user = u
    u = constuser
  })

  vk.updates.hear(/^(.*) ❣$/i, msg => {
    if(user.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(u.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(user.steps > 100 || u.steps > 100) {
      user.duel = false
      u.duel = false
      u.predictionduel = false
      user.predictduel = false
      user.steps = 0
      u.steps = 0
      user.timer = 0
      u.timer = 0
      user.duelhp = 0
      user.duelatk = 0
      user.dueldef = 0
      u.duelhp = 0
      u.duelatk = 0
      u.dueldef = 0
      user.cd11 = 0,
      user.del11 = -1,
      user.cd12 = 0,
      user.del12 = -1,
      user.cd13 = 0,
      user.cd14 = 0,
      user.cd15 = 0,
      user.spikes = -1,
      user.cd16 = 0,
      user.clinch = -1,
      user.cd21 = 0,
      user.cd22 = 0,
      user.nakopleniye = 0,
      user.el1 = 0,
      user.burn = 0,
      user.el2 = 0,
      user.el3 = 0,
      user.cd31 = 0,
      user.poison = 0,
      user.cd32 = 0,
      user.cd33 = 0,
      user.cd34 = 0,
      user.invisible = false,
      user.cd35 = 0,
      user.cd36 = 0,
      user.cd37 = 0,
      user.poisoning = -1
      u.cd11 = 0,
      u.del11 = -1,
      u.cd12 = 0,
      u.del12 = -1,
      u.cd13 = 0,
      u.cd14 = 0,
      u.cd15 = 0,
      u.spikes = -1,
      u.cd16 = 0,
      u.clinch = -1,
      u.cd21 = 0,
      u.cd22 = 0,
      u.nakopleniye = 0,
      u.el1 = 0,
      u.burn = 0,
      u.el2 = 0,
      u.el3 = 0,
      u.cd31 = 0,
      u.poison = 0,
      u.cd32 = 0,
      u.cd33 = 0,
      u.cd34 = 0,
      u.invisible = false,
      u.cd35 = 0,
      u.cd36 = 0,
      u.cd37 = 0,
      u.poisoning = -1
      return msg.send ('Ходы дуэли превысили 100. Победитель не определён')
    }
    if(msg.$match[1] != '[club202302035|@eswep]') return
    if(msg.messagePayload != "project RQ") return
    if(msg.senderId == u.id) {
      var constu = u
      u = user
      user = constu
    }
    if(u.nakopleniye > 0) {
      if(u.control > 0) u.nakopleniye = 0
    }
    if (user.steps % 2 == 0) {
      return msg.send ('Сейчас не твой ход')
    }
    else {
      if(user.control > 0) {
        msg.send (`Невозможно применить умение`);
      }
      else{
        if(u.clinch > 0) {
          if(user.duelatk < u.dueldef) {
            if(user.cd11 > 0) user.cd11 -= 1
            if(user.del11 > 0) user.del11 -= 1
            if(user.cd12 > 0) user.cd12 -= 1
            if(user.del12 > 0) user.del12 -= 1
            if(user.cd13 > 0) user.cd13 -= 1
            if(user.cd14 > 0) user.cd14 -= 1
            if(user.cd15 > 0) user.cd15 -= 1
            if(user.spikes > 0) user.spikes -= 1
            if(user.cd16 > 0) user.cd16 -= 1
            if(user.cd21 > 0) user.cd21 -= 1
            if(user.cd22 > 0) user.cd22 -= 1
            if(user.cd31 > 0) user.cd31 -= 1
            if(user.cd32 > 0) user.cd32 -= 1
            if(user.cd33 > 0) user.cd33 -= 1
            if(user.cd34 > 0) user.cd34 -= 1
            if(user.cd35 > 0) user.cd35 -= 1
            if(user.cd36 > 0) user.cd36 -= 1
            if(user.porezka > 0) user.porezka -= 1
            if(user.cd37 > 0) user.cd37 -= 1
            if(u.cd11 > 0) u.cd11 -= 1
            if(u.del11 > 0) u.del11 -= 1
            if(u.cd12 > 0) u.cd12 -= 1
            if(u.del12 > 0) u.del12 -= 1
            if(u.cd13 > 0) u.cd13 -= 1
            if(u.cd14 > 0) u.cd14 -= 1
            if(u.cd15 > 0) u.cd15 -= 1
            if(u.spikes > 0) u.spikes -= 1
            if(u.cd16 > 0) u.cd16 -= 1
            if(u.clinch > 0) u.clinch = -1
            if(u.cd21 > 0) u.cd21 -= 1
            if(u.cd22 > 0) u.cd22 -= 1
            if(u.cd31 > 0) u.cd31 -= 1
            if(u.cd32 > 0) u.cd32 -= 1
            if(u.cd33 > 0) u.cd33 -= 1
            if(u.cd34 > 0) u.cd34 -= 1
            if(u.cd35 > 0) u.cd35 -= 1
            if(u.cd36 > 0) u.cd36 -= 1
            if(u.porezka > 0) u.porezka -= 1
            if(u.cd37 > 0) u.cd37 -= 1
            if(user.burn > 0) user.burn -= 1
            if(u.burn > 0) u.burn -= 1
            if(user.poison > 0) user.poison -= 1
            if(u.poison > 0) u.poison -= 1
            if(user.poisoning > 0) user.poisoning -= 1
            if(u.poisoning > 0) u.poisoning -= 1
            user.cd14 = 3
            user.steps += 1
            u.steps += 1
            if (u.clas.id == 1) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, так как активировал "клинч", @id${user.id}(${user.nick}) получает ⚔0 урона, так как атака @id${user.id}(${user.nick}) меньше защиты @id${u.id}(${u.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "😈",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🛡",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🖤",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "❣",
                    color: "positive",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "☦",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚙",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚔",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 2) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, так как активировал "клинч", @id${user.id}(${user.nick}) получает ⚔0 урона, так как атака @id${user.id}(${user.nick}) меньше защиты @id${u.id}(${u.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "❄",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💥",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🍃",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔥",
                    color: "negative",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "💧",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚡",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 3) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${u.id}(${u.nick}) не получает урона, так как активировал "клинч", @id${user.id}(${user.nick}) получает ⚔0 урона, так как атака @id${user.id}(${user.nick}) меньше защиты @id${u.id}(${u.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "🦠",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔪",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💣",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "👁‍🗨",
                  color: "primary",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "🧬",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🗡",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💉",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
            }
            if(user.del11 == 0) {
              var hp = user.hp
              var atk = user.atk
              var procent = 20
              var resulthp = hp / 100 * procent
              var resultatk = atk / 100 * procent
              user.duelhp -= resulthp
              user.duelatk -= resultatk
              user.del11 = -1
               
            }
            if(u.del11 == 0) {
              var hp1 = u.hp
              var atk1 = u.atk
              var procent = 20
              var resulthp1 = hp1 / 100 * procent
              var resultatk1 = atk1 / 100 * procent
              u.duelhp -= resulthp1
              u.duelatk -= resultatk1
              u.del11 = -1
               
            }
            if(user.del12 == 0) {
              var def = user.def
              var procent = 20
               var resultdef = def / 100 * procent
              user.dueldef -= resultdef
              user.del12 = -1
               
            }
            if(u.del12 == 0) {
              var def1 = u.def
              var procent = 20
              var resultdef1 = def1 / 100 * procent
              u.dueldef -= resultdef1
              u.del12 = -1
               
            }
            if(user.spikes == 0) {
              user.spikes -= 1
               
            }
            if(u.spikes == 0) {
              u.spikes -= 1
               
            }
          }
          else {
            var atk = user.duelatk
            var result = atk
            user.duelhp -= result
            if(user.cd11 > 0) user.cd11 -= 1
            if(user.del11 > 0) user.del11 -= 1
            if(user.cd12 > 0) user.cd12 -= 1
            if(user.del12 > 0) user.del12 -= 1
            if(user.cd13 > 0) user.cd13 -= 1
            if(user.cd14 > 0) user.cd14 -= 1
            if(user.cd15 > 0) user.cd15 -= 1
            if(user.spikes > 0) user.spikes -= 1
            if(user.cd16 > 0) user.cd16 -= 1
            if(user.cd21 > 0) user.cd21 -= 1
            if(user.cd22 > 0) user.cd22 -= 1
            if(user.cd31 > 0) user.cd31 -= 1
            if(user.cd32 > 0) user.cd32 -= 1
            if(user.cd33 > 0) user.cd33 -= 1
            if(user.cd34 > 0) user.cd34 -= 1
            if(user.cd35 > 0) user.cd35 -= 1
            if(user.cd36 > 0) user.cd36 -= 1
            if(user.porezka > 0) user.porezka -= 1
            if(user.cd37 > 0) user.cd37 -= 1
            if(u.cd11 > 0) u.cd11 -= 1
            if(u.del11 > 0) u.del11 -= 1
            if(u.cd12 > 0) u.cd12 -= 1
            if(u.del12 > 0) u.del12 -= 1
            if(u.cd13 > 0) u.cd13 -= 1
            if(u.cd14 > 0) u.cd14 -= 1
            if(u.cd15 > 0) u.cd15 -= 1
            if(u.spikes > 0) u.spikes -= 1
            if(u.cd16 > 0) u.cd16 -= 1
            if(u.clinch > 0) u.clinch = -1
            if(u.cd21 > 0) u.cd21 -= 1
            if(u.cd22 > 0) u.cd22 -= 1
            if(u.cd31 > 0) u.cd31 -= 1
            if(u.cd32 > 0) u.cd32 -= 1
            if(u.cd33 > 0) u.cd33 -= 1
            if(u.cd34 > 0) u.cd34 -= 1
            if(u.cd35 > 0) u.cd35 -= 1
            if(u.cd36 > 0) u.cd36 -= 1
            if(u.porezka > 0) u.porezka -= 1
            if(u.cd37 > 0) u.cd37 -= 1
            if(user.burn > 0) user.burn -= 1
            if(u.burn > 0) u.burn -= 1
            if(user.poison > 0) user.poison -= 1
            if(u.poison > 0) u.poison -= 1
            if(user.poisoning > 0) user.poisoning -= 1
            if(u.poisoning > 0) u.poisoning -= 1
            user.cd14 = 3
            user.steps += 1
            u.steps += 1
            if (u.clas.id == 1) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, @id${user.id}(${user.nick}) получает ⚔${result} урона, так как @id${u.id}(${u.nick}) активировал "клинч". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "😈",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🛡",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🖤",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "❣",
                    color: "positive",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "☦",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚙",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚔",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 2) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, @id${user.id}(${user.nick}) получает ⚔${result} урона, так как @id${u.id}(${u.nick}) активировал "клинч". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "❄",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💥",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🍃",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔥",
                    color: "negative",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "💧",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚡",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 3) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${u.id}(${u.nick}) не получает урона, @id${user.id}(${user.nick}) получает ⚔${result} урона, так как @id${u.id}(${u.nick}) активировал "клинч". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "🦠",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔪",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💣",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "👁‍🗨",
                  color: "primary",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "🧬",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🗡",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💉",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
            }
            if(user.duelhp < 1) {
              var plata2 = user.money
              var procentplata = 10
              var resultplata2 = plata2 / 100 * procentplata
              let num27 = resultplata2
              var finalplata = num27.toFixed(0)
              var finalplata2 = Number(finalplata)
              user.money -= finalplata2
              u.money += finalplata2
              user.duel = false
              u.duel = false
              u.predictionduel = false
              user.predictduel = false
              user.steps = 0
              u.steps = 0
              user.timer = 0
              u.timer = 0
              user.duelhp = 0
              user.duelatk = 0
              user.dueldef = 0
              u.duelhp = 0
              u.duelatk = 0
              u.dueldef = 0
              user.cd11 = 0,
              user.del11 = -1,
              user.cd12 = 0,
              user.del12 = -1,
              user.cd13 = 0,
              user.cd14 = 0,
              user.cd15 = 0,
              user.spikes = -1,
              user.cd16 = 0,
              user.clinch = -1,
              user.cd21 = 0,
              user.cd22 = 0,
              user.nakopleniye = 0,
              user.el1 = 0,
              user.burn = 0,
              user.el2 = 0,
              user.el3 = 0,
              user.cd31 = 0,
              user.poison = 0,
              user.cd32 = 0,
              user.cd33 = 0,
              user.cd34 = 0,
              user.invisible = false,
              user.cd35 = 0,
              user.cd36 = 0,
              user.cd37 = 0,
              user.poisoning = -1
              u.cd11 = 0,
              u.del11 = -1,
              u.cd12 = 0,
              u.del12 = -1,
              u.cd13 = 0,
              u.cd14 = 0,
              u.cd15 = 0,
              u.spikes = -1,
              u.cd16 = 0,
              u.clinch = -1,
              u.cd21 = 0,
              u.cd22 = 0,
              u.nakopleniye = 0,
              u.el1 = 0,
              u.burn = 0,
              u.el2 = 0,
              u.el3 = 0,
              u.cd31 = 0,
              u.poison = 0,
              u.cd32 = 0,
              u.cd33 = 0,
              u.cd34 = 0,
              u.invisible = false,
              u.cd35 = 0,
              u.cd36 = 0,
              u.cd37 = 0,
              u.poisoning = -1
              msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
              var constuser = user
              user = u
              u = constuser
            }
            else {
              if(u.duelhp < 1) {
                var plata2 = user.money
                var procentplata = 10
                var resultplata2 = plata2 / 100 * procentplata
                let num27 = resultplata2
                var finalplata = num27.toFixed(0)
                var finalplata2 = Number(finalplata)
                u.money -= finalplata2
                user.money += finalplata2
                user.duel = false
                u.duel = false
                u.predictionduel = false
                user.predictduel = false
                user.steps = 0
                u.steps = 0
                user.timer = 0
                u.timer = 0
                user.duelhp = 0
                user.duelatk = 0
                user.dueldef = 0
                u.duelhp = 0
                u.duelatk = 0
                u.dueldef = 0
                user.cd11 = 0,
                user.del11 = -1,
                user.cd12 = 0,
                user.del12 = -1,
                user.cd13 = 0,
                user.cd14 = 0,
                user.cd15 = 0,
                user.spikes = -1,
                user.cd16 = 0,
                user.clinch = -1,
                user.cd21 = 0,
                user.cd22 = 0,
                user.nakopleniye = 0,
                user.el1 = 0,
                user.burn = 0,
                user.el2 = 0,
                user.el3 = 0,
                user.cd31 = 0,
                user.poison = 0,
                user.cd32 = 0,
                user.cd33 = 0,
                user.cd34 = 0,
                user.invisible = false,
                user.cd35 = 0,
                user.cd36 = 0,
                user.cd37 = 0,
                user.poisoning = -1
                u.cd11 = 0,
                u.del11 = -1,
                u.cd12 = 0,
                u.del12 = -1,
                u.cd13 = 0,
                u.cd14 = 0,
                u.cd15 = 0,
                u.spikes = -1,
                u.cd16 = 0,
                u.clinch = -1,
                u.cd21 = 0,
                u.cd22 = 0,
                u.nakopleniye = 0,
                u.el1 = 0,
                u.burn = 0,
                u.el2 = 0,
                u.el3 = 0,
                u.cd31 = 0,
                u.poison = 0,
                u.cd32 = 0,
                u.cd33 = 0,
                u.cd34 = 0,
                u.invisible = false,
                u.cd35 = 0,
                u.cd36 = 0,
                u.cd37 = 0,
                u.poisoning = -1
                msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                var constuser = user
                user = u
                u = constuser
              }
            }
            if(user.del11 == 0) {
              var hp = user.hp
              var atk = user.atk
              var procent = 20
              var resulthp = hp / 100 * procent
              var resultatk = atk / 100 * procent
              user.duelhp -= resulthp
              user.duelatk -= resultatk
              user.del11 = -1
               
            }
            if(u.del11 == 0) {
              var hp1 = u.hp
              var atk1 = u.atk
              var procent = 20
              var resulthp1 = hp1 / 100 * procent
              var resultatk1 = atk1 / 100 * procent
              u.duelhp -= resulthp1
              u.duelatk -= resultatk1
              u.del11 = -1
               
            }
            if(user.del12 == 0) {
              var def = user.def
              var procent = 20
               var resultdef = def / 100 * procent
              user.dueldef -= resultdef
              user.del12 = -1
               
            }
            if(u.del12 == 0) {
              var def1 = u.def
              var procent = 20
              var resultdef1 = def1 / 100 * procent
              u.dueldef -= resultdef1
              u.del12 = -1
               
            }
            if(user.spikes == 0) {
              user.spikes -= 1
               
            }
            if(u.spikes == 0) {
              u.spikes -= 1
               
            }
          }
        }
        else {
          if(u.spikes > 0) {
            if(u.control > 0) {
              if(u.dueldef > user.duelatk) {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                user.cd14 = 3
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
              var uduelhp = u.duelhp
              var procent10 = 10
              var resultheal = uduelhp / 100 * procent10
              var resultdamage = resultheal
              if(resultheal > user.hp - user.duelhp) {
                user.duelhp = user.hp
              }
              else{
                user.duelhp += resultheal
              }
              u.duelhp -= resultdamage
              var spikes = resultdamage / 2
              user.duelhp -= spikes
              if(user.cd11 > 0) user.cd11 -= 2
              if(user.del11 > 0) user.del11 -= 2
              if(user.cd12 > 0) user.cd12 -= 2
              if(user.del12 > 0) user.del12 -= 2
              if(user.cd13 > 0) user.cd13 -= 2
              if(user.cd14 > 0) user.cd14 -= 2
              if(user.cd15 > 0) user.cd15 -= 2
              if(user.spikes > 0) user.spikes -= 2
              if(user.cd16 > 0) user.cd16 -= 2
              if(user.cd21 > 0) user.cd21 -= 2
              if(user.cd22 > 0) user.cd22 -= 2
              if(user.cd31 > 0) user.cd31 -= 2
              if(user.cd32 > 0) user.cd32 -= 2
              if(user.cd33 > 0) user.cd33 -= 2
              if(user.cd34 > 0) user.cd34 -= 2
              if(user.cd35 > 0) user.cd35 -= 2
              if(user.cd36 > 0) user.cd36 -= 2
              if(user.porezka > 0) user.porezka -= 2
              if(user.cd37 > 0) user.cd37 -= 2
              if(u.cd11 > 0) u.cd11 -= 2
              if(u.del11 > 0) u.del11 -= 2
              if(u.cd12 > 0) u.cd12 -= 2
              if(u.del12 > 0) u.del12 -= 2
              if(u.cd13 > 0) u.cd13 -= 2
              if(u.cd14 > 0) u.cd14 -= 2
              if(u.cd15 > 0) u.cd15 -= 2
              if(u.spikes > 0) u.spikes -= 2
              if(u.cd16 > 0) u.cd16 -= 2
              if(u.clinch > 0) u.clinch = -1
              if(u.cd21 > 0) u.cd21 -= 2
              if(u.cd22 > 0) u.cd22 -= 2
              if(u.cd31 > 0) u.cd31 -= 2
              if(u.cd32 > 0) u.cd32 -= 2
              if(u.cd33 > 0) u.cd33 -= 2
              if(u.cd34 > 0) u.cd34 -= 2
              if(u.cd35 > 0) u.cd35 -= 2
              if(u.cd36 > 0) u.cd36 -= 2
              if(u.porezka > 0) u.porezka -= 2
              if(u.cd37 > 0) u.cd37 -= 2
              if(user.burn > 0) user.burn -= 2
              if(u.burn > 0) u.burn -= 2
              if(user.poison > 0) user.poison -= 2
              if(u.poison > 0) u.poison -= 2
              if(user.poisoning > 0) user.poisoning -= 2
              if(u.poisoning > 0) u.poisoning -= 2
              user.cd14 = 3
              if(u.control == 2) {
                user.steps += 1
                u.steps += 1
                u.control -= 2
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${resultdamage} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". @id${user.id}(${user.nick}) исцеляет ${resultheal}💚. Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${resultdamage} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы".  @id${user.id}(${user.nick}) исцеляет ${resultheal}💚. Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${resultdamage} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы".  @id${user.id}(${user.nick}) исцеляет ${resultheal}💚. Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                }
              }
              else {
                if(u.control > 2) {
                  user.steps += 2
                  u.steps += 2
                  u.control -= 2
                  if (user.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${resultdamage} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы".  @id${user.id}(${user.nick}) исцеляет ${resultheal}💚. Следующим ходит — @id${user.id}(${user.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${resultdamage} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы".  @id${user.id}(${user.nick}) исцеляет ${resultheal}💚. Следующим ходит — @id${user.id}(${user.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${resultdamage} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы".  @id${user.id}(${user.nick}) исцеляет ${resultheal}💚. Следующим ходит — @id${user.id}(${user.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                  }
                }
              }
              if(user.duelhp < 1) {
                var plata2 = user.money
                var procentplata = 10
                var resultplata2 = plata2 / 100 * procentplata
                let num27 = resultplata2
                var finalplata = num27.toFixed(0)
                var finalplata2 = Number(finalplata)
                user.money -= finalplata2
                u.money += finalplata2
                user.duel = false
                u.duel = false
                u.predictionduel = false
                user.predictduel = false
                user.steps = 0
                u.steps = 0
                user.timer = 0
                u.timer = 0
                user.duelhp = 0
                user.duelatk = 0
                user.dueldef = 0
                u.duelhp = 0
                u.duelatk = 0
                u.dueldef = 0
                user.cd11 = 0,
                user.del11 = -1,
                user.cd12 = 0,
                user.del12 = -1,
                user.cd13 = 0,
                user.cd14 = 0,
                user.cd15 = 0,
                user.spikes = -1,
                user.cd16 = 0,
                user.clinch = -1,
                user.cd21 = 0,
                user.cd22 = 0,
                user.nakopleniye = 0,
                user.el1 = 0,
                user.burn = 0,
                user.el2 = 0,
                user.el3 = 0,
                user.cd31 = 0,
                user.poison = 0,
                user.cd32 = 0,
                user.cd33 = 0,
                user.cd34 = 0,
                user.invisible = false,
                user.cd35 = 0,
                user.cd36 = 0,
                user.cd37 = 0,
                user.poisoning = -1
                u.cd11 = 0,
                u.del11 = -1,
                u.cd12 = 0,
                u.del12 = -1,
                u.cd13 = 0,
                u.cd14 = 0,
                u.cd15 = 0,
                u.spikes = -1,
                u.cd16 = 0,
                u.clinch = -1,
                u.cd21 = 0,
                u.cd22 = 0,
                u.nakopleniye = 0,
                u.el1 = 0,
                u.burn = 0,
                u.el2 = 0,
                u.el3 = 0,
                u.cd31 = 0,
                u.poison = 0,
                u.cd32 = 0,
                u.cd33 = 0,
                u.cd34 = 0,
                u.invisible = false,
                u.cd35 = 0,
                u.cd36 = 0,
                u.cd37 = 0,
                u.poisoning = -1
                msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                var constuser = user
                user = u
                u = constuser
              }
              else {
                if(u.duelhp < 1) {
                  var plata2 = user.money
                  var procentplata = 10
                  var resultplata2 = plata2 / 100 * procentplata
                  let num27 = resultplata2
                  var finalplata = num27.toFixed(0)
                  var finalplata2 = Number(finalplata)
                  u.money -= finalplata2
                  user.money += finalplata2
                  user.duel = false
                  u.duel = false
                  u.predictionduel = false
                  user.predictduel = false
                  user.steps = 0
                  u.steps = 0
                  user.timer = 0
                  u.timer = 0
                  user.duelhp = 0
                  user.duelatk = 0
                  user.dueldef = 0
                  u.duelhp = 0
                  u.duelatk = 0
                  u.dueldef = 0
                  user.cd11 = 0,
                  user.del11 = -1,
                  user.cd12 = 0,
                  user.del12 = -1,
                  user.cd13 = 0,
                  user.cd14 = 0,
                  user.cd15 = 0,
                  user.spikes = -1,
                  user.cd16 = 0,
                  user.clinch = -1,
                  user.cd21 = 0,
                  user.cd22 = 0,
                  user.nakopleniye = 0,
                  user.el1 = 0,
                  user.burn = 0,
                  user.el2 = 0,
                  user.el3 = 0,
                  user.cd31 = 0,
                  user.poison = 0,
                  user.cd32 = 0,
                  user.cd33 = 0,
                  user.cd34 = 0,
                  user.invisible = false,
                  user.cd35 = 0,
                  user.cd36 = 0,
                  user.cd37 = 0,
                  user.poisoning = -1
                  u.cd11 = 0,
                  u.del11 = -1,
                  u.cd12 = 0,
                  u.del12 = -1,
                  u.cd13 = 0,
                  u.cd14 = 0,
                  u.cd15 = 0,
                  u.spikes = -1,
                  u.cd16 = 0,
                  u.clinch = -1,
                  u.cd21 = 0,
                  u.cd22 = 0,
                  u.nakopleniye = 0,
                  u.el1 = 0,
                  u.burn = 0,
                  u.el2 = 0,
                  u.el3 = 0,
                  u.cd31 = 0,
                  u.poison = 0,
                  u.cd32 = 0,
                  u.cd33 = 0,
                  u.cd34 = 0,
                  u.invisible = false,
                  u.cd35 = 0,
                  u.cd36 = 0,
                  u.cd37 = 0,
                  u.poisoning = -1
                  msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                  var constuser = user
                  user = u
                  u = constuser
                }
              }
              if(user.del11 == 0) {
                var hp = user.hp
                var atk = user.atk
                var procent = 20
                var resulthp = hp / 100 * procent
                var resultatk = atk / 100 * procent
                user.duelhp -= resulthp
                user.duelatk -= resultatk
                user.del11 = -1
                 
              }
              if(u.del11 == 0) {
                var hp1 = u.hp
                var atk1 = u.atk
                var procent = 20
                var resulthp1 = hp1 / 100 * procent
                var resultatk1 = atk1 / 100 * procent
                u.duelhp -= resulthp1
                u.duelatk -= resultatk1
                u.del11 = -1
                 
              }
              if(user.del12 == 0) {
                var def = user.def
                var procent = 20
                 var resultdef = def / 100 * procent
                user.dueldef -= resultdef
                user.del12 = -1
                 
              }
              if(u.del12 == 0) {
                var def1 = u.def
                var procent = 20
                var resultdef1 = def1 / 100 * procent
                u.dueldef -= resultdef1
                u.del12 = -1
                 
              }
              if(user.spikes == 0) {
                user.spikes -= 1
                 
              }
              if(u.spikes == 0) {
                u.spikes -= 1
                 
              }
              }
            }
            else {
              if(user.duelatk < u.dueldef) {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                user.cd14 = 3
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
              var uduelhp = u.duelhp
              var procent10 = 10
              var resultheal = uduelhp / 100 * procent10
              var resultdamage = resultheal
              if(resultheal > user.hp - user.duelhp) {
                user.duelhp = user.hp
              }
              else{
                user.duelhp += resultheal
              }
              u.duelhp -= resultdamage
              var spikes = resultdamage / 2
              user.duelhp -= spikes
              if(user.cd11 > 0) user.cd11 -= 1
              if(user.del11 > 0) user.del11 -= 1
              if(user.cd12 > 0) user.cd12 -= 1
              if(user.del12 > 0) user.del12 -= 1
              if(user.cd13 > 0) user.cd13 -= 1
              if(user.cd14 > 0) user.cd14 -= 1
              if(user.cd15 > 0) user.cd15 -= 1
              if(user.spikes > 0) user.spikes -= 1
              if(user.cd16 > 0) user.cd16 -= 1
              if(user.cd21 > 0) user.cd21 -= 1
              if(user.cd22 > 0) user.cd22 -= 1
              if(user.cd31 > 0) user.cd31 -= 1
              if(user.cd32 > 0) user.cd32 -= 1
              if(user.cd33 > 0) user.cd33 -= 1
              if(user.cd34 > 0) user.cd34 -= 1
              if(user.cd35 > 0) user.cd35 -= 1
              if(user.cd36 > 0) user.cd36 -= 1
              if(user.porezka > 0) user.porezka -= 1
              if(user.cd37 > 0) user.cd37 -= 1
              if(u.cd11 > 0) u.cd11 -= 1
              if(u.del11 > 0) u.del11 -= 1
              if(u.cd12 > 0) u.cd12 -= 1
              if(u.del12 > 0) u.del12 -= 1
              if(u.cd13 > 0) u.cd13 -= 1
              if(u.cd14 > 0) u.cd14 -= 1
              if(u.cd15 > 0) u.cd15 -= 1
              if(u.spikes > 0) u.spikes -= 1
              if(u.cd16 > 0) u.cd16 -= 1
              if(u.clinch > 0) u.clinch = -1
              if(u.cd21 > 0) u.cd21 -= 1
              if(u.cd22 > 0) u.cd22 -= 1
              if(u.cd31 > 0) u.cd31 -= 1
              if(u.cd32 > 0) u.cd32 -= 1
              if(u.cd33 > 0) u.cd33 -= 1
              if(u.cd34 > 0) u.cd34 -= 1
              if(u.cd35 > 0) u.cd35 -= 1
              if(u.cd36 > 0) u.cd36 -= 1
              if(u.porezka > 0) u.porezka -= 1
              if(u.cd37 > 0) u.cd37 -= 1
              if(user.burn > 0) user.burn -= 1
              if(u.burn > 0) u.burn -= 1
              if(user.poison > 0) user.poison -= 1
              if(u.poison > 0) u.poison -= 1
              if(user.poisoning > 0) user.poisoning -= 1
              if(u.poisoning > 0) u.poisoning -= 1
              user.cd14 = 3
              user.steps += 1
              u.steps += 1
              if (u.clas.id == 1) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${resultdamage} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы".  @id${user.id}(${user.nick}) исцеляет ${resultheal}💚. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "😈",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🛡",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🖤",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "❣",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "☦",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚙",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚔",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 2) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${resultdamage} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы".  @id${user.id}(${user.nick}) исцеляет ${resultheal}💚. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "❄",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💥",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🍃",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔥",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "💧",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚡",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 3) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) получает ⚔${resultdamage} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы".  @id${user.id}(${user.nick}) исцеляет ${resultheal}💚. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "🦠",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔪",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💣",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "👁‍🗨",
                    color: "primary",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "🧬",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🗡",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💉",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
                }
                if(user.duelhp < 1) {
                  var plata2 = user.money
                  var procentplata = 10
                  var resultplata2 = plata2 / 100 * procentplata
                  let num27 = resultplata2
                  var finalplata = num27.toFixed(0)
                  var finalplata2 = Number(finalplata)
                  user.money -= finalplata2
                  u.money += finalplata2
                  user.duel = false
                  u.duel = false
                  u.predictionduel = false
                  user.predictduel = false
                  user.steps = 0
                  u.steps = 0
                  user.timer = 0
                  u.timer = 0
                  user.duelhp = 0
                  user.duelatk = 0
                  user.dueldef = 0
                  u.duelhp = 0
                  u.duelatk = 0
                  u.dueldef = 0
                  user.cd11 = 0,
                  user.del11 = -1,
                  user.cd12 = 0,
                  user.del12 = -1,
                  user.cd13 = 0,
                  user.cd14 = 0,
                  user.cd15 = 0,
                  user.spikes = -1,
                  user.cd16 = 0,
                  user.clinch = -1,
                  user.cd21 = 0,
                  user.cd22 = 0,
                  user.nakopleniye = 0,
                  user.el1 = 0,
                  user.burn = 0,
                  user.el2 = 0,
                  user.el3 = 0,
                  user.cd31 = 0,
                  user.poison = 0,
                  user.cd32 = 0,
                  user.cd33 = 0,
                  user.cd34 = 0,
                  user.invisible = false,
                  user.cd35 = 0,
                  user.cd36 = 0,
                  user.cd37 = 0,
                  user.poisoning = -1
                  u.cd11 = 0,
                  u.del11 = -1,
                  u.cd12 = 0,
                  u.del12 = -1,
                  u.cd13 = 0,
                  u.cd14 = 0,
                  u.cd15 = 0,
                  u.spikes = -1,
                  u.cd16 = 0,
                  u.clinch = -1,
                  u.cd21 = 0,
                  u.cd22 = 0,
                  u.nakopleniye = 0,
                  u.el1 = 0,
                  u.burn = 0,
                  u.el2 = 0,
                  u.el3 = 0,
                  u.cd31 = 0,
                  u.poison = 0,
                  u.cd32 = 0,
                  u.cd33 = 0,
                  u.cd34 = 0,
                  u.invisible = false,
                  u.cd35 = 0,
                  u.cd36 = 0,
                  u.cd37 = 0,
                  u.poisoning = -1
                  msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                  var constuser = user
                  user = u
                  u = constuser
                }
                else {
                  if(u.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    u.money -= finalplata2
                    user.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                }
              if(user.del11 == 0) {
                var hp = user.hp
                var atk = user.atk
                var procent = 20
                var resulthp = hp / 100 * procent
                var resultatk = atk / 100 * procent
                user.duelhp -= resulthp
                user.duelatk -= resultatk
                user.del11 = -1
                 
              }
              if(u.del11 == 0) {
                var hp1 = u.hp
                var atk1 = u.atk
                var procent = 20
                var resulthp1 = hp1 / 100 * procent
                var resultatk1 = atk1 / 100 * procent
                u.duelhp -= resulthp1
                u.duelatk -= resultatk1
                u.del11 = -1
                 
              }
              if(user.del12 == 0) {
                var def = user.def
                var procent = 20
                 var resultdef = def / 100 * procent
                user.dueldef -= resultdef
                user.del12 = -1
                 
              }
              if(u.del12 == 0) {
                var def1 = u.def
                var procent = 20
                var resultdef1 = def1 / 100 * procent
                u.dueldef -= resultdef1
                u.del12 = -1
                 
              }
              if(user.spikes == 0) {
                user.spikes -= 1
                 
              }
              if(u.spikes == 0) {
                u.spikes -= 1
                 
              }
            }
          }
          }
          else {
            if(u.control > 0) {
              if(u.dueldef > user.duelatk) {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                user.cd14 = 3
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
                var uduelhp = u.duelhp
                var procent10 = 10
                var resultheal = uduelhp / 100 * procent10
                var resultdamage = resultheal
                if(resultheal > user.hp - user.duelhp) {
                  user.duelhp = user.hp
                }
                else{
                  user.duelhp += resultheal
                }
                u.duelhp -= resultdamage
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                user.cd14 = 3 
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${resultdamage} урона.  @id${user.id}(${user.nick}) исцеляет ${resultheal}💚. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${resultdamage} урона.  @id${user.id}(${user.nick}) исцеляет ${resultheal}💚. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${resultdamage} урона.  @id${user.id}(${user.nick}) исцеляет ${resultheal}💚. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) получает ⚔${resultdamage} урона.  @id${user.id}(${user.nick}) исцеляет ${resultheal}💚. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) получает ⚔${resultdamage} урона.  @id${user.id}(${user.nick}) исцеляет ${resultheal}💚. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${resultdamage} урона.  @id${user.id}(${user.nick}) исцеляет ${resultheal}💚. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                  if(user.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    user.money -= finalplata2
                    u.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                  else {
                    if(u.duelhp < 1) {
                      var plata2 = user.money
                      var procentplata = 10
                      var resultplata2 = plata2 / 100 * procentplata
                      let num27 = resultplata2
                      var finalplata = num27.toFixed(0)
                      var finalplata2 = Number(finalplata)
                      u.money -= finalplata2
                      user.money += finalplata2
                      user.duel = false
                      u.duel = false
                      u.predictionduel = false
                      user.predictduel = false
                      user.steps = 0
                      u.steps = 0
                      user.timer = 0
                      u.timer = 0
                      user.duelhp = 0
                      user.duelatk = 0
                      user.dueldef = 0
                      u.duelhp = 0
                      u.duelatk = 0
                      u.dueldef = 0
                      user.cd11 = 0,
                      user.del11 = -1,
                      user.cd12 = 0,
                      user.del12 = -1,
                      user.cd13 = 0,
                      user.cd14 = 0,
                      user.cd15 = 0,
                      user.spikes = -1,
                      user.cd16 = 0,
                      user.clinch = -1,
                      user.cd21 = 0,
                      user.cd22 = 0,
                      user.nakopleniye = 0,
                      user.el1 = 0,
                      user.burn = 0,
                      user.el2 = 0,
                      user.el3 = 0,
                      user.cd31 = 0,
                      user.poison = 0,
                      user.cd32 = 0,
                      user.cd33 = 0,
                      user.cd34 = 0,
                      user.invisible = false,
                      user.cd35 = 0,
                      user.cd36 = 0,
                      user.cd37 = 0,
                      user.poisoning = -1
                      u.cd11 = 0,
                      u.del11 = -1,
                      u.cd12 = 0,
                      u.del12 = -1,
                      u.cd13 = 0,
                      u.cd14 = 0,
                      u.cd15 = 0,
                      u.spikes = -1,
                      u.cd16 = 0,
                      u.clinch = -1,
                      u.cd21 = 0,
                      u.cd22 = 0,
                      u.nakopleniye = 0,
                      u.el1 = 0,
                      u.burn = 0,
                      u.el2 = 0,
                      u.el3 = 0,
                      u.cd31 = 0,
                      u.poison = 0,
                      u.cd32 = 0,
                      u.cd33 = 0,
                      u.cd34 = 0,
                      u.invisible = false,
                      u.cd35 = 0,
                      u.cd36 = 0,
                      u.cd37 = 0,
                      u.poisoning = -1
                      msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                      var constuser = user
                      user = u
                      u = constuser
                    }
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
            }
            else {
              if(u.dueldef > user.duelatk) {
                if(user.cd11 > 0) user.cd11 -= 1
                if(user.del11 > 0) user.del11 -= 1
                if(user.cd12 > 0) user.cd12 -= 1
                if(user.del12 > 0) user.del12 -= 1
                if(user.cd13 > 0) user.cd13 -= 1
                if(user.cd14 > 0) user.cd14 -= 1
                if(user.cd15 > 0) user.cd15 -= 1
                if(user.spikes > 0) user.spikes -= 1
                if(user.cd16 > 0) user.cd16 -= 1
                if(user.cd21 > 0) user.cd21 -= 1
                if(user.cd22 > 0) user.cd22 -= 1
                if(user.cd31 > 0) user.cd31 -= 1
                if(user.cd32 > 0) user.cd32 -= 1
                if(user.cd33 > 0) user.cd33 -= 1
                if(user.cd34 > 0) user.cd34 -= 1
                if(user.cd35 > 0) user.cd35 -= 1
                if(user.cd36 > 0) user.cd36 -= 1
                if(user.porezka > 0) user.porezka -= 1
                if(user.cd37 > 0) user.cd37 -= 1
                if(u.cd11 > 0) u.cd11 -= 1
                if(u.del11 > 0) u.del11 -= 1
                if(u.cd12 > 0) u.cd12 -= 1
                if(u.del12 > 0) u.del12 -= 1
                if(u.cd13 > 0) u.cd13 -= 1
                if(u.cd14 > 0) u.cd14 -= 1
                if(u.cd15 > 0) u.cd15 -= 1
                if(u.spikes > 0) u.spikes -= 1
                if(u.cd16 > 0) u.cd16 -= 1
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 1
                if(u.cd22 > 0) u.cd22 -= 1
                if(u.cd31 > 0) u.cd31 -= 1
                if(u.cd32 > 0) u.cd32 -= 1
                if(u.cd33 > 0) u.cd33 -= 1
                if(u.cd34 > 0) u.cd34 -= 1
                if(u.cd35 > 0) u.cd35 -= 1
                if(u.cd36 > 0) u.cd36 -= 1
                if(u.porezka > 0) u.porezka -= 1
                if(u.cd37 > 0) u.cd37 -= 1
                if(user.burn > 0) user.burn -= 1
                if(u.burn > 0) u.burn -= 1
                if(user.poison > 0) user.poison -= 1
                if(u.poison > 0) u.poison -= 1
                if(user.poisoning > 0) user.poisoning -= 1
                if(u.poisoning > 0) u.poisoning -= 1
                user.cd14 = 3
                user.steps += 1
                u.steps += 1
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
                var uduelhp = u.duelhp
                var procent10 = 10
                var resultheal = uduelhp / 100 * procent10
                var resultdamage = resultheal
                if(resultheal > user.hp - user.duelhp) {
                  user.duelhp = user.hp
                }
                else{
                  user.duelhp += resultheal
                }
                u.duelhp -= resultdamage
                if(user.cd11 > 0) user.cd11 -= 1
                if(user.del11 > 0) user.del11 -= 1
                if(user.cd12 > 0) user.cd12 -= 1
                if(user.del12 > 0) user.del12 -= 1
                if(user.cd13 > 0) user.cd13 -= 1
                if(user.cd14 > 0) user.cd14 -= 1
                if(user.cd15 > 0) user.cd15 -= 1
                if(user.spikes > 0) user.spikes -= 1
                if(user.cd16 > 0) user.cd16 -= 1
                if(user.cd21 > 0) user.cd21 -= 1
                if(user.cd22 > 0) user.cd22 -= 1
                if(user.cd31 > 0) user.cd31 -= 1
                if(user.cd32 > 0) user.cd32 -= 1
                if(user.cd33 > 0) user.cd33 -= 1
                if(user.cd34 > 0) user.cd34 -= 1
                if(user.cd35 > 0) user.cd35 -= 1
                if(user.cd36 > 0) user.cd36 -= 1
                if(user.porezka > 0) user.porezka -= 1
                if(user.cd37 > 0) user.cd37 -= 1
                if(u.cd11 > 0) u.cd11 -= 1
                if(u.del11 > 0) u.del11 -= 1
                if(u.cd12 > 0) u.cd12 -= 1
                if(u.del12 > 0) u.del12 -= 1
                if(u.cd13 > 0) u.cd13 -= 1
                if(u.cd14 > 0) u.cd14 -= 1
                if(u.cd15 > 0) u.cd15 -= 1
                if(u.spikes > 0) u.spikes -= 1
                if(u.cd16 > 0) u.cd16 -= 1
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 1
                if(u.cd22 > 0) u.cd22 -= 1
                if(u.cd31 > 0) u.cd31 -= 1
                if(u.cd32 > 0) u.cd32 -= 1
                if(u.cd33 > 0) u.cd33 -= 1
                if(u.cd34 > 0) u.cd34 -= 1
                if(u.cd35 > 0) u.cd35 -= 1
                if(u.cd36 > 0) u.cd36 -= 1
                if(u.porezka > 0) u.porezka -= 1
                if(u.cd37 > 0) u.cd37 -= 1
                if(user.burn > 0) user.burn -= 1
                if(u.burn > 0) u.burn -= 1
                if(user.poison > 0) user.poison -= 1
                if(u.poison > 0) u.poison -= 1
                if(user.poisoning > 0) user.poisoning -= 1
                if(u.poisoning > 0) u.poisoning -= 1
                user.cd14 = 3
                user.steps += 1
                u.steps += 1
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${resultdamage} урона. @id${user.id}(${user.nick}) исцеляет ${resultheal}💚. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${resultdamage} урона.  @id${user.id}(${user.nick}) исцеляет ${resultheal}💚. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${resultdamage} урона.  @id${user.id}(${user.nick}) исцеляет ${resultheal}💚. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
                  if(user.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    user.money -= finalplata2
                    u.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                  else {
                    if(u.duelhp < 1) {
                      var plata2 = user.money
                      var procentplata = 10
                      var resultplata2 = plata2 / 100 * procentplata
                      let num27 = resultplata2
                      var finalplata = num27.toFixed(0)
                      var finalplata2 = Number(finalplata)
                      u.money -= finalplata2
                      user.money += finalplata2
                      user.duel = false
                      u.duel = false
                      u.predictionduel = false
                      user.predictduel = false
                      user.steps = 0
                      u.steps = 0
                      user.timer = 0
                      u.timer = 0
                      user.duelhp = 0
                      user.duelatk = 0
                      user.dueldef = 0
                      u.duelhp = 0
                      u.duelatk = 0
                      u.dueldef = 0
                      user.cd11 = 0,
                      user.del11 = -1,
                      user.cd12 = 0,
                      user.del12 = -1,
                      user.cd13 = 0,
                      user.cd14 = 0,
                      user.cd15 = 0,
                      user.spikes = -1,
                      user.cd16 = 0,
                      user.clinch = -1,
                      user.cd21 = 0,
                      user.cd22 = 0,
                      user.nakopleniye = 0,
                      user.el1 = 0,
                      user.burn = 0,
                      user.el2 = 0,
                      user.el3 = 0,
                      user.cd31 = 0,
                      user.poison = 0,
                      user.cd32 = 0,
                      user.cd33 = 0,
                      user.cd34 = 0,
                      user.invisible = false,
                      user.cd35 = 0,
                      user.cd36 = 0,
                      user.cd37 = 0,
                      user.poisoning = -1
                      u.cd11 = 0,
                      u.del11 = -1,
                      u.cd12 = 0,
                      u.del12 = -1,
                      u.cd13 = 0,
                      u.cd14 = 0,
                      u.cd15 = 0,
                      u.spikes = -1,
                      u.cd16 = 0,
                      u.clinch = -1,
                      u.cd21 = 0,
                      u.cd22 = 0,
                      u.nakopleniye = 0,
                      u.el1 = 0,
                      u.burn = 0,
                      u.el2 = 0,
                      u.el3 = 0,
                      u.cd31 = 0,
                      u.poison = 0,
                      u.cd32 = 0,
                      u.cd33 = 0,
                      u.cd34 = 0,
                      u.invisible = false,
                      u.cd35 = 0,
                      u.cd36 = 0,
                      u.cd37 = 0,
                      u.poisoning = -1
                      msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                      var constuser = user
                      user = u
                      u = constuser
                    }
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
            }
          }
        }
      }
    }
  if(user.poison > 0) {
    var procent50 = 50
    var poison50 = u.duelatk * procent50 / 100
    user.duelhp -= poison50
    msg.send(`"${user.nick}" получает ⚔${poison50} урона`)
  }
  if(user.poisoning > 0) {
    var result1 = user.duelatk - user.dueldef
    user.duelhp -= result1
    msg.send(`"${user.nick}" получает ⚔${result1} урона от отравления`)
  }
  if(u.poisoning > 0) {
    var result2 = u.duelatk - u.dueldef
    u.duelhp -= result2
    msg.send(`"${u.nick}" наносит себе ⚔${result2} урона`)
  }
  if(user.poisoning == 0) {
    user.poisoning = -1
    var atk3 = user.duelatk * 3
    var heal1 = atk3 * 2
    user.duelhp += heal1
    if (user.duelhp > user.hp) {
    user.duelhp = user.hp
    }
    msg.send(`"${user.nick}" восстанавливает 💚${heal1} здоровья`)
  }
  if(u.poisoning == 0) {
    u.poisoning = -1
    var atk3 = u.duelatk * 3
    var heal2 = atk3 * 2
    u.duelhp += heal2
    if (u.duelhp > u.hp) {
    u.duelhp = u.hp
    }
    msg.send(`"${u.nick}" восстанавливает 💚${heal2} здоровья`)
  }
    var constuser = user
    user = u
    u = constuser
  })

  vk.updates.hear(/^(.*) ☦$/i, msg => {
    if(user.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(u.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(user.steps > 100 || u.steps > 100) {
      user.duel = false
      u.duel = false
      u.predictionduel = false
      user.predictduel = false
      user.steps = 0
      u.steps = 0
      user.timer = 0
      u.timer = 0
      user.duelhp = 0
      user.duelatk = 0
      user.dueldef = 0
      u.duelhp = 0
      u.duelatk = 0
      u.dueldef = 0
      user.cd11 = 0,
      user.del11 = -1,
      user.cd12 = 0,
      user.del12 = -1,
      user.cd13 = 0,
      user.cd14 = 0,
      user.cd15 = 0,
      user.spikes = -1,
      user.cd16 = 0,
      user.clinch = -1,
      user.cd21 = 0,
      user.cd22 = 0,
      user.nakopleniye = 0,
      user.el1 = 0,
      user.burn = 0,
      user.el2 = 0,
      user.el3 = 0,
      user.cd31 = 0,
      user.poison = 0,
      user.cd32 = 0,
      user.cd33 = 0,
      user.cd34 = 0,
      user.invisible = false,
      user.cd35 = 0,
      user.cd36 = 0,
      user.cd37 = 0,
      user.poisoning = -1
      u.cd11 = 0,
      u.del11 = -1,
      u.cd12 = 0,
      u.del12 = -1,
      u.cd13 = 0,
      u.cd14 = 0,
      u.cd15 = 0,
      u.spikes = -1,
      u.cd16 = 0,
      u.clinch = -1,
      u.cd21 = 0,
      u.cd22 = 0,
      u.nakopleniye = 0,
      u.el1 = 0,
      u.burn = 0,
      u.el2 = 0,
      u.el3 = 0,
      u.cd31 = 0,
      u.poison = 0,
      u.cd32 = 0,
      u.cd33 = 0,
      u.cd34 = 0,
      u.invisible = false,
      u.cd35 = 0,
      u.cd36 = 0,
      u.cd37 = 0,
      u.poisoning = -1
      return msg.send ('Ходы дуэли превысили 100. Победитель не определён')
    }
    if(msg.senderId == u.id) {
      var constu = u
      u = user
      user = constu
    }
    if(user.clas.id != 1) return msg.send (`Умение не принадлежит вашему классу`)
    if(msg.$match[1] != '[club202302035|@eswep]') return
    if(msg.messagePayload != "project RQ") return
    if(u.nakopleniye > 0) {
      if(u.control > 0) u.nakopleniye = 0
    }
    if (user.steps % 2 == 0) {
      return msg.send ('Сейчас не твой ход')
    }
    else {
      if(user.control > 0) {
        msg.send (`Невозможно применить умение`);
      }
      else{
        var uhp = u.hp
        var procent = 15
        var kara = uhp / 100 * procent
        if(u.duelhp > kara) {
          return msg.send(`Здоровье @id${u.id}(${u.nick}) больше 15%, невозможно использовать кару`)
        }
        else {
          u.duelhp -= kara
          msg.send(`@id${user.id}(${user.nick}) применяет "кару" на @id${u.id}(${u.nick}) и наносит ⚔"${kara}" урона`)
          if(user.duelhp < 1) {
            var plata2 = user.money
            var procentplata = 10
            var resultplata2 = plata2 / 100 * procentplata
            let num27 = resultplata2
            var finalplata = num27.toFixed(0)
            var finalplata2 = Number(finalplata)
            user.money -= finalplata2
            u.money += finalplata2
            user.duel = false
            u.duel = false
            u.predictionduel = false
            user.predictduel = false
            user.steps = 0
            u.steps = 0
            user.timer = 0
            u.timer = 0
            user.duelhp = 0
            user.duelatk = 0
            user.dueldef = 0
            u.duelhp = 0
            u.duelatk = 0
            u.dueldef = 0
            user.cd11 = 0,
            user.del11 = -1,
            user.cd12 = 0,
            user.del12 = -1,
            user.cd13 = 0,
            user.cd14 = 0,
            user.cd15 = 0,
            user.spikes = -1,
            user.cd16 = 0,
            user.clinch = -1,
            user.cd21 = 0,
            user.cd22 = 0,
            user.nakopleniye = 0,
            user.el1 = 0,
            user.burn = 0,
            user.el2 = 0,
            user.el3 = 0,
            user.cd31 = 0,
            user.poison = 0,
            user.cd32 = 0,
            user.cd33 = 0,
            user.cd34 = 0,
            user.invisible = false,
            user.cd35 = 0,
            user.cd36 = 0,
            user.cd37 = 0,
            user.poisoning = -1
            u.cd11 = 0,
            u.del11 = -1,
            u.cd12 = 0,
            u.del12 = -1,
            u.cd13 = 0,
            u.cd14 = 0,
            u.cd15 = 0,
            u.spikes = -1,
            u.cd16 = 0,
            u.clinch = -1,
            u.cd21 = 0,
            u.cd22 = 0,
            u.nakopleniye = 0,
            u.el1 = 0,
            u.burn = 0,
            u.el2 = 0,
            u.el3 = 0,
            u.cd31 = 0,
            u.poison = 0,
            u.cd32 = 0,
            u.cd33 = 0,
            u.cd34 = 0,
            u.invisible = false,
            u.cd35 = 0,
            u.cd36 = 0,
            u.cd37 = 0,
            u.poisoning = -1
            msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
            var constuser = user
            user = u
            u = constuser
          }
          else {
            if(u.duelhp < 1) {
              var plata2 = user.money
              var procentplata = 10
              var resultplata2 = plata2 / 100 * procentplata
              let num27 = resultplata2
              var finalplata = num27.toFixed(0)
              var finalplata2 = Number(finalplata)
              u.money -= finalplata2
              user.money += finalplata2
              user.duel = false
              u.duel = false
              u.predictionduel = false
              user.predictduel = false
              user.steps = 0
              u.steps = 0
              user.timer = 0
              u.timer = 0
              user.duelhp = 0
              user.duelatk = 0
              user.dueldef = 0
              u.duelhp = 0
              u.duelatk = 0
              u.dueldef = 0
              user.cd11 = 0,
              user.del11 = -1,
              user.cd12 = 0,
              user.del12 = -1,
              user.cd13 = 0,
              user.cd14 = 0,
              user.cd15 = 0,
              user.spikes = -1,
              user.cd16 = 0,
              user.clinch = -1,
              user.cd21 = 0,
              user.cd22 = 0,
              user.nakopleniye = 0,
              user.el1 = 0,
              user.burn = 0,
              user.el2 = 0,
              user.el3 = 0,
              user.cd31 = 0,
              user.poison = 0,
              user.cd32 = 0,
              user.cd33 = 0,
              user.cd34 = 0,
              user.invisible = false,
              user.cd35 = 0,
              user.cd36 = 0,
              user.cd37 = 0,
              user.poisoning = -1
              u.cd11 = 0,
              u.del11 = -1,
              u.cd12 = 0,
              u.del12 = -1,
              u.cd13 = 0,
              u.cd14 = 0,
              u.cd15 = 0,
              u.spikes = -1,
              u.cd16 = 0,
              u.clinch = -1,
              u.cd21 = 0,
              u.cd22 = 0,
              u.nakopleniye = 0,
              u.el1 = 0,
              u.burn = 0,
              u.el2 = 0,
              u.el3 = 0,
              u.cd31 = 0,
              u.poison = 0,
              u.cd32 = 0,
              u.cd33 = 0,
              u.cd34 = 0,
              u.invisible = false,
              u.cd35 = 0,
              u.cd36 = 0,
              u.cd37 = 0,
              u.poisoning = -1
              msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
              var constuser = user
              user = u
              u = constuser
            }
          }
        }
      }
    }
    var constuser = user
    user = u
    u = constuser
  })

  vk.updates.hear(/^(.*) ⚙$/i, msg => {
    if(user.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(u.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(user.steps > 100 || u.steps > 100) {
      user.duel = false
      u.duel = false
      u.predictionduel = false
      user.predictduel = false
      user.steps = 0
      u.steps = 0
      user.timer = 0
      u.timer = 0
      user.duelhp = 0
      user.duelatk = 0
      user.dueldef = 0
      u.duelhp = 0
      u.duelatk = 0
      u.dueldef = 0
      user.cd11 = 0,
      user.del11 = -1,
      user.cd12 = 0,
      user.del12 = -1,
      user.cd13 = 0,
      user.cd14 = 0,
      user.cd15 = 0,
      user.spikes = -1,
      user.cd16 = 0,
      user.clinch = -1,
      user.cd21 = 0,
      user.cd22 = 0,
      user.nakopleniye = 0,
      user.el1 = 0,
      user.burn = 0,
      user.el2 = 0,
      user.el3 = 0,
      user.cd31 = 0,
      user.poison = 0,
      user.cd32 = 0,
      user.cd33 = 0,
      user.cd34 = 0,
      user.invisible = false,
      user.cd35 = 0,
      user.cd36 = 0,
      user.cd37 = 0,
      user.poisoning = -1
      u.cd11 = 0,
      u.del11 = -1,
      u.cd12 = 0,
      u.del12 = -1,
      u.cd13 = 0,
      u.cd14 = 0,
      u.cd15 = 0,
      u.spikes = -1,
      u.cd16 = 0,
      u.clinch = -1,
      u.cd21 = 0,
      u.cd22 = 0,
      u.nakopleniye = 0,
      u.el1 = 0,
      u.burn = 0,
      u.el2 = 0,
      u.el3 = 0,
      u.cd31 = 0,
      u.poison = 0,
      u.cd32 = 0,
      u.cd33 = 0,
      u.cd34 = 0,
      u.invisible = false,
      u.cd35 = 0,
      u.cd36 = 0,
      u.cd37 = 0,
      u.poisoning = -1
      return msg.send ('Ходы дуэли превысили 100. Победитель не определён')
    }
    if(msg.senderId == u.id) {
      var constu = u
      u = user
      user = constu
    }
    if(user.cd15 > 0) return msg.send(`Умение перезаряжается`)
    if(user.clas.id != 1) return msg.send (`Умение не принадлежит вашему классу`)
    if(msg.$match[1] != '[club202302035|@eswep]') return
    if(msg.messagePayload != "project RQ") return
    if(u.nakopleniye > 0) {
      if(u.control > 0) u.nakopleniye = 0
    }
    if (user.steps % 2 == 0) {
      return msg.send ('Сейчас не твой ход')
    }
    else {
      if(user.control > 0) {
        msg.send (`Невозможно применить умение`);
      }
      else{
        if(u.clinch > 0) {
          if(user.cd11 > 0) user.cd11 -= 1
          if(user.del11 > 0) user.del11 -= 1
          if(user.cd12 > 0) user.cd12 -= 1
          if(user.del12 > 0) user.del12 -= 1
          if(user.cd13 > 0) user.cd13 -= 1
          if(user.cd14 > 0) user.cd14 -= 1
          if(user.cd15 > 0) user.cd15 -= 1
          if(user.spikes > 0) user.spikes -= 1
          if(user.cd16 > 0) user.cd16 -= 1
          if(user.cd21 > 0) user.cd21 -= 1
          if(user.cd22 > 0) user.cd22 -= 1
          if(user.cd31 > 0) user.cd31 -= 1
          if(user.cd32 > 0) user.cd32 -= 1
          if(user.cd33 > 0) user.cd33 -= 1
          if(user.cd34 > 0) user.cd34 -= 1
          if(user.cd35 > 0) user.cd35 -= 1
          if(user.cd36 > 0) user.cd36 -= 1
          if(user.porezka > 0) user.porezka -= 1
          if(user.cd37 > 0) user.cd37 -= 1
          if(u.cd11 > 0) u.cd11 -= 1
          if(u.del11 > 0) u.del11 -= 1
          if(u.cd12 > 0) u.cd12 -= 1
          if(u.del12 > 0) u.del12 -= 1
          if(u.cd13 > 0) u.cd13 -= 1
          if(u.cd14 > 0) u.cd14 -= 1
          if(u.cd15 > 0) u.cd15 -= 1
          if(u.spikes > 0) u.spikes -= 1
          if(u.cd16 > 0) u.cd16 -= 1
          if(u.clinch > 0) u.clinch = -1
          if(u.cd21 > 0) u.cd21 -= 1
          if(u.cd22 > 0) u.cd22 -= 1
          if(u.cd31 > 0) u.cd31 -= 1
          if(u.cd32 > 0) u.cd32 -= 1
          if(u.cd33 > 0) u.cd33 -= 1
          if(u.cd34 > 0) u.cd34 -= 1
          if(u.cd35 > 0) u.cd35 -= 1
          if(u.cd36 > 0) u.cd36 -= 1
          if(u.porezka > 0) u.porezka -= 1
          if(u.cd37 > 0) u.cd37 -= 1
          if(user.burn > 0) user.burn -= 1
          if(u.burn > 0) u.burn -= 1
          if(user.poison > 0) user.poison -= 1
          if(u.poison > 0) u.poison -= 1
          if(user.poisoning > 0) user.poisoning -= 1
          if(u.poisoning > 0) u.poisoning -= 1
          user.spikes = 4
          user.cd15 = 7
          user.steps += 1
          u.steps += 1
          if (u.clas.id == 1) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${user.id}(${user.nick}) активировал "шипы". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "😈",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🛡",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🖤",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "❣",
                  color: "positive",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "☦",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "⚙",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "⚔",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
          }
          if (u.clas.id == 2) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${user.id}(${user.nick}) активировал "шипы". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "❄",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💥",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🍃",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔥",
                  color: "negative",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "💧",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "⚡",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
          }
          if (u.clas.id == 3) {
          vk.api.messages.send({
            peer_id: msg.peerId,
            message: `@id${user.id}(${user.nick}) активировал "шипы". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
            disable_mentions: 1,
            keyboard: Keyboard.builder()
            .inline()
              .textButton({
                label: "🦠",
                color: "negative",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "🔪",
                color: "negative",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "💣",
                color: "primary",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "👁‍🗨",
                color: "primary",
                payload: "project RQ"
                })
            .row()
            .inline()
              .textButton({
                label: "🧬",
                color: "positive",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "🗡",
                color: "secondary",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "💉",
                color: "positive",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "АТК",
                color: "negative",
                payload: "project RQ"
                })
              })
            }
          if(user.del11 == 0) {
            var hp = user.hp
            var atk = user.atk
            var procent = 20
            var resulthp = hp / 100 * procent
            var resultatk = atk / 100 * procent
            user.duelhp -= resulthp
            user.duelatk -= resultatk
            user.del11 = -1
             
          }
          if(u.del11 == 0) {
            var hp1 = u.hp
            var atk1 = u.atk
            var procent = 20
            var resulthp1 = hp1 / 100 * procent
            var resultatk1 = atk1 / 100 * procent
            u.duelhp -= resulthp1
            u.duelatk -= resultatk1
            u.del11 = -1
             
          }
          if(user.del12 == 0) {
            var def = user.def
            var procent = 20
             var resultdef = def / 100 * procent
            user.dueldef -= resultdef
            user.del12 = -1
             
          }
          if(u.del12 == 0) {
            var def1 = u.def
            var procent = 20
            var resultdef1 = def1 / 100 * procent
            u.dueldef -= resultdef1
            u.del12 = -1
             
          }
          if(user.spikes == 0) {
            user.spikes -= 1
             
          }
          if(u.spikes == 0) {
            u.spikes -= 1
             
          }
        }
        else {
          if(u.spikes > 0) {
            if(u.contol > 0) {
              if(user.cd11 > 0) user.cd11 -= 2
              if(user.del11 > 0) user.del11 -= 2
              if(user.cd12 > 0) user.cd12 -= 2
              if(user.del12 > 0) user.del12 -= 2
              if(user.cd13 > 0) user.cd13 -= 2
              if(user.cd14 > 0) user.cd14 -= 2
              if(user.cd15 > 0) user.cd15 -= 2
              if(user.spikes > 0) user.spikes -= 2
              if(user.cd16 > 0) user.cd16 -= 2
              if(user.cd21 > 0) user.cd21 -= 2
              if(user.cd22 > 0) user.cd22 -= 2
              if(user.cd31 > 0) user.cd31 -= 2
              if(user.cd32 > 0) user.cd32 -= 2
              if(user.cd33 > 0) user.cd33 -= 2
              if(user.cd34 > 0) user.cd34 -= 2
              if(user.cd35 > 0) user.cd35 -= 2
              if(user.cd36 > 0) user.cd36 -= 2
              if(user.porezka > 0) user.porezka -= 2
              if(user.cd37 > 0) user.cd37 -= 2
              if(u.cd11 > 0) u.cd11 -= 2
              if(u.del11 > 0) u.del11 -= 2
              if(u.cd12 > 0) u.cd12 -= 2
              if(u.del12 > 0) u.del12 -= 2
              if(u.cd13 > 0) u.cd13 -= 2
              if(u.cd14 > 0) u.cd14 -= 2
              if(u.cd15 > 0) u.cd15 -= 2
              if(u.spikes > 0) u.spikes -= 2
              if(u.cd16 > 0) u.cd16 -= 2
              if(u.clinch > 0) u.clinch = -1
              if(u.cd21 > 0) u.cd21 -= 2
              if(u.cd22 > 0) u.cd22 -= 2
              if(u.cd31 > 0) u.cd31 -= 2
              if(u.cd32 > 0) u.cd32 -= 2
              if(u.cd33 > 0) u.cd33 -= 2
              if(u.cd34 > 0) u.cd34 -= 2
              if(u.cd35 > 0) u.cd35 -= 2
              if(u.cd36 > 0) u.cd36 -= 2
              if(u.porezka > 0) u.porezka -= 2
              if(u.cd37 > 0) u.cd37 -= 2
              if(user.burn > 0) user.burn -= 2
              if(u.burn > 0) u.burn -= 2
              if(user.poison > 0) user.poison -= 2
              if(u.poison > 0) u.poison -= 2
              if(user.poisoning > 0) user.poisoning -= 2
              if(u.poisoning > 0) u.poisoning -= 2
              user.spikes = 4
              user.cd15 = 7
              if(u.control == 2) {
                user.steps += 1
                u.steps += 1
                u.control -= 2
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${user.id}(${user.nick}) активировал "шипы". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${user.id}(${user.nick}) активировал "шипы". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${user.id}(${user.nick}) активировал "шипы". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
              }
              else {
                if(u.control > 2) {
                  user.steps += 2
                  u.steps += 2
                  u.control -= 2
                  if (user.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${user.id}(${user.nick}) активировал "шипы". Следующий ход делает @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${user.id}(${user.nick}) активировал "шипы". Следующий ход делает @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${user.id}(${user.nick}) активировал "шипы". Следующий ход делает @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
              }
              if(user.del11 == 0) {
                var hp = user.hp
                var atk = user.atk
                var procent = 20
                var resulthp = hp / 100 * procent
                var resultatk = atk / 100 * procent
                user.duelhp -= resulthp
                user.duelatk -= resultatk
                user.del11 = -1
                 
              }
              if(u.del11 == 0) {
                var hp1 = u.hp
                var atk1 = u.atk
                var procent = 20
                var resulthp1 = hp1 / 100 * procent
                var resultatk1 = atk1 / 100 * procent
                u.duelhp -= resulthp1
                u.duelatk -= resultatk1
                u.del11 = -1
                 
              }
              if(user.del12 == 0) {
                var def = user.def
                var procent = 20
                 var resultdef = def / 100 * procent
                user.dueldef -= resultdef
                user.del12 = -1
                 
              }
              if(u.del12 == 0) {
                var def1 = u.def
                var procent = 20
                var resultdef1 = def1 / 100 * procent
                u.dueldef -= resultdef1
                u.del12 = -1
                 
              }
              if(user.spikes == 0) {
                user.spikes -= 1
                 
              }
              if(u.spikes == 0) {
                u.spikes -= 1
                 
              }
            }
            else {
              if(user.cd11 > 0) user.cd11 -= 1
              if(user.del11 > 0) user.del11 -= 1
              if(user.cd12 > 0) user.cd12 -= 1
              if(user.del12 > 0) user.del12 -= 1
              if(user.cd13 > 0) user.cd13 -= 1
              if(user.cd14 > 0) user.cd14 -= 1
              if(user.cd15 > 0) user.cd15 -= 1
              if(user.spikes > 0) user.spikes -= 1
              if(user.cd16 > 0) user.cd16 -= 1
              if(user.cd21 > 0) user.cd21 -= 1
              if(user.cd22 > 0) user.cd22 -= 1
              if(user.cd31 > 0) user.cd31 -= 1
              if(user.cd32 > 0) user.cd32 -= 1
              if(user.cd33 > 0) user.cd33 -= 1
              if(user.cd34 > 0) user.cd34 -= 1
              if(user.cd35 > 0) user.cd35 -= 1
              if(user.cd36 > 0) user.cd36 -= 1
              if(user.porezka > 0) user.porezka -= 1
              if(user.cd37 > 0) user.cd37 -= 1
              if(u.cd11 > 0) u.cd11 -= 1
              if(u.del11 > 0) u.del11 -= 1
              if(u.cd12 > 0) u.cd12 -= 1
              if(u.del12 > 0) u.del12 -= 1
              if(u.cd13 > 0) u.cd13 -= 1
              if(u.cd14 > 0) u.cd14 -= 1
              if(u.cd15 > 0) u.cd15 -= 1
              if(u.spikes > 0) u.spikes -= 1
              if(u.cd16 > 0) u.cd16 -= 1
              if(u.clinch > 0) u.clinch = -1
              if(u.cd21 > 0) u.cd21 -= 1
              if(u.cd22 > 0) u.cd22 -= 1
              if(u.cd31 > 0) u.cd31 -= 1
              if(u.cd32 > 0) u.cd32 -= 1
              if(u.cd33 > 0) u.cd33 -= 1
              if(u.cd34 > 0) u.cd34 -= 1
              if(u.cd35 > 0) u.cd35 -= 1
              if(u.cd36 > 0) u.cd36 -= 1
              if(u.porezka > 0) u.porezka -= 1
              if(u.cd37 > 0) u.cd37 -= 1
              if(user.burn > 0) user.burn -= 1
              if(u.burn > 0) u.burn -= 1
              if(user.poison > 0) user.poison -= 1
              if(u.poison > 0) u.poison -= 1
              if(user.poisoning > 0) user.poisoning -= 1
              if(u.poisoning > 0) u.poisoning -= 1
              user.spikes = 4
              user.cd15 = 7
              user.steps += 1
              u.steps += 1
              if (u.clas.id == 1) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${user.id}(${user.nick}) активировал "шипы". Следующий ход делает @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "😈",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🛡",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🖤",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "❣",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "☦",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚙",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚔",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 2) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${user.id}(${user.nick}) активировал "шипы". Следующий ход делает @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "❄",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💥",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🍃",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔥",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "💧",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚡",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 3) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${user.id}(${user.nick}) активировал "шипы". Следующий ход делает @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "🦠",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔪",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💣",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "👁‍🗨",
                    color: "primary",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "🧬",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🗡",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💉",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
                }
              if(user.del11 == 0) {
                var hp = user.hp
                var atk = user.atk
                var procent = 20
                var resulthp = hp / 100 * procent
                var resultatk = atk / 100 * procent
                user.duelhp -= resulthp
                user.duelatk -= resultatk
                user.del11 = -1
                 
              }
              if(u.del11 == 0) {
                var hp1 = u.hp
                var atk1 = u.atk
                var procent = 20
                var resulthp1 = hp1 / 100 * procent
                var resultatk1 = atk1 / 100 * procent
                u.duelhp -= resulthp1
                u.duelatk -= resultatk1
                u.del11 = -1
                 
              }
              if(user.del12 == 0) {
                var def = user.def
                var procent = 20
                 var resultdef = def / 100 * procent
                user.dueldef -= resultdef
                user.del12 = -1
                 
              }
              if(u.del12 == 0) {
                var def1 = u.def
                var procent = 20
                var resultdef1 = def1 / 100 * procent
                u.dueldef -= resultdef1
                u.del12 = -1
                 
              }
              if(user.spikes == 0) {
                user.spikes -= 1
                 
              }
              if(u.spikes == 0) {
                u.spikes -= 1
                 
              }
            }
          }
          else {
            if(u.contol > 0) {
              if(user.cd11 > 0) user.cd11 -= 2
              if(user.del11 > 0) user.del11 -= 2
              if(user.cd12 > 0) user.cd12 -= 2
              if(user.del12 > 0) user.del12 -= 2
              if(user.cd13 > 0) user.cd13 -= 2
              if(user.cd14 > 0) user.cd14 -= 2
              if(user.cd15 > 0) user.cd15 -= 2
              if(user.spikes > 0) user.spikes -= 2
              if(user.cd16 > 0) user.cd16 -= 2
              if(user.cd21 > 0) user.cd21 -= 2
              if(user.cd22 > 0) user.cd22 -= 2
              if(user.cd31 > 0) user.cd31 -= 2
              if(user.cd32 > 0) user.cd32 -= 2
              if(user.cd33 > 0) user.cd33 -= 2
              if(user.cd34 > 0) user.cd34 -= 2
              if(user.cd35 > 0) user.cd35 -= 2
              if(user.cd36 > 0) user.cd36 -= 2
              if(user.porezka > 0) user.porezka -= 2
              if(user.cd37 > 0) user.cd37 -= 2
              if(u.cd11 > 0) u.cd11 -= 2
              if(u.del11 > 0) u.del11 -= 2
              if(u.cd12 > 0) u.cd12 -= 2
              if(u.del12 > 0) u.del12 -= 2
              if(u.cd13 > 0) u.cd13 -= 2
              if(u.cd14 > 0) u.cd14 -= 2
              if(u.cd15 > 0) u.cd15 -= 2
              if(u.spikes > 0) u.spikes -= 2
              if(u.cd16 > 0) u.cd16 -= 2
              if(u.clinch > 0) u.clinch = -1
              if(u.cd21 > 0) u.cd21 -= 2
              if(u.cd22 > 0) u.cd22 -= 2
              if(u.cd31 > 0) u.cd31 -= 2
              if(u.cd32 > 0) u.cd32 -= 2
              if(u.cd33 > 0) u.cd33 -= 2
              if(u.cd34 > 0) u.cd34 -= 2
              if(u.cd35 > 0) u.cd35 -= 2
              if(u.cd36 > 0) u.cd36 -= 2
              if(u.porezka > 0) u.porezka -= 2
              if(u.cd37 > 0) u.cd37 -= 2
              if(user.burn > 0) user.burn -= 2
              if(u.burn > 0) u.burn -= 2
              if(user.poison > 0) user.poison -= 2
              if(u.poison > 0) u.poison -= 2
              if(user.poisoning > 0) user.poisoning -= 2
              if(u.poisoning > 0) u.poisoning -= 2
              user.spikes = 4
              user.cd15 = 7
              if(u.control == 2) {
                user.steps += 1
                u.steps += 1
                u.control -= 2
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${user.id}(${user.nick}) активировал "шипы". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${user.id}(${user.nick}) активировал "шипы". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${user.id}(${user.nick}) активировал "шипы". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
              }
              else {
                if(u.control > 2) {
                  user.steps += 2
                  u.steps += 2
                  u.control -= 2
                  if (user.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${user.id}(${user.nick}) активировал "шипы". Следующий ход делает @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${user.id}(${user.nick}) активировал "шипы". Следующий ход делает @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${user.id}(${user.nick}) активировал "шипы". Следующий ход делает @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
              }
              if(user.del11 == 0) {
                var hp = user.hp
                var atk = user.atk
                var procent = 20
                var resulthp = hp / 100 * procent
                var resultatk = atk / 100 * procent
                user.duelhp -= resulthp
                user.duelatk -= resultatk
                user.del11 = -1
                 
              }
              if(u.del11 == 0) {
                var hp1 = u.hp
                var atk1 = u.atk
                var procent = 20
                var resulthp1 = hp1 / 100 * procent
                var resultatk1 = atk1 / 100 * procent
                u.duelhp -= resulthp1
                u.duelatk -= resultatk1
                u.del11 = -1
                 
              }
              if(user.del12 == 0) {
                var def = user.def
                var procent = 20
                 var resultdef = def / 100 * procent
                user.dueldef -= resultdef
                user.del12 = -1
                 
              }
              if(u.del12 == 0) {
                var def1 = u.def
                var procent = 20
                var resultdef1 = def1 / 100 * procent
                u.dueldef -= resultdef1
                u.del12 = -1
                 
              }
              if(user.spikes == 0) {
                user.spikes -= 1
                 
              }
              if(u.spikes == 0) {
                u.spikes -= 1
                 
              }
            }
            else {
              if(user.cd11 > 0) user.cd11 -= 1
              if(user.del11 > 0) user.del11 -= 1
              if(user.cd12 > 0) user.cd12 -= 1
              if(user.del12 > 0) user.del12 -= 1
              if(user.cd13 > 0) user.cd13 -= 1
              if(user.cd14 > 0) user.cd14 -= 1
              if(user.cd15 > 0) user.cd15 -= 1
              if(user.spikes > 0) user.spikes -= 1
              if(user.cd16 > 0) user.cd16 -= 1
              if(user.cd21 > 0) user.cd21 -= 1
              if(user.cd22 > 0) user.cd22 -= 1
              if(user.cd31 > 0) user.cd31 -= 1
              if(user.cd32 > 0) user.cd32 -= 1
              if(user.cd33 > 0) user.cd33 -= 1
              if(user.cd34 > 0) user.cd34 -= 1
              if(user.cd35 > 0) user.cd35 -= 1
              if(user.cd36 > 0) user.cd36 -= 1
              if(user.porezka > 0) user.porezka -= 1
              if(user.cd37 > 0) user.cd37 -= 1
              if(u.cd11 > 0) u.cd11 -= 1
              if(u.del11 > 0) u.del11 -= 1
              if(u.cd12 > 0) u.cd12 -= 1
              if(u.del12 > 0) u.del12 -= 1
              if(u.cd13 > 0) u.cd13 -= 1
              if(u.cd14 > 0) u.cd14 -= 1
              if(u.cd15 > 0) u.cd15 -= 1
              if(u.spikes > 0) u.spikes -= 1
              if(u.cd16 > 0) u.cd16 -= 1
              if(u.clinch > 0) u.clinch = -1
              if(u.cd21 > 0) u.cd21 -= 1
              if(u.cd22 > 0) u.cd22 -= 1
              if(u.cd31 > 0) u.cd31 -= 1
              if(u.cd32 > 0) u.cd32 -= 1
              if(u.cd33 > 0) u.cd33 -= 1
              if(u.cd34 > 0) u.cd34 -= 1
              if(u.cd35 > 0) u.cd35 -= 1
              if(u.cd36 > 0) u.cd36 -= 1
              if(u.porezka > 0) u.porezka -= 1
              if(u.cd37 > 0) u.cd37 -= 1
              if(user.burn > 0) user.burn -= 1
              if(u.burn > 0) u.burn -= 1
              if(user.poison > 0) user.poison -= 1
              if(u.poison > 0) u.poison -= 1
              if(user.poisoning > 0) user.poisoning -= 1
              if(u.poisoning > 0) u.poisoning -= 1
              user.spikes = 4
              user.cd15 = 7
              user.steps += 1
              u.steps += 1
              if (u.clas.id == 1) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${user.id}(${user.nick}) активировал "шипы". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "😈",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🛡",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🖤",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "❣",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "☦",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚙",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚔",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 2) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${user.id}(${user.nick}) активировал "шипы". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "❄",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💥",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🍃",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔥",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "💧",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚡",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 3) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${user.id}(${user.nick}) активировал "шипы". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "🦠",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔪",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💣",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "👁‍🗨",
                    color: "primary",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "🧬",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🗡",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💉",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
              }
              if(user.del11 == 0) {
                var hp = user.hp
                var atk = user.atk
                var procent = 20
                var resulthp = hp / 100 * procent
                var resultatk = atk / 100 * procent
                user.duelhp -= resulthp
                user.duelatk -= resultatk
                user.del11 = -1
                 
              }
              if(u.del11 == 0) {
                var hp1 = u.hp
                var atk1 = u.atk
                var procent = 20
                var resulthp1 = hp1 / 100 * procent
                var resultatk1 = atk1 / 100 * procent
                u.duelhp -= resulthp1
                u.duelatk -= resultatk1
                u.del11 = -1
                 
              }
              if(user.del12 == 0) {
                var def = user.def
                var procent = 20
                 var resultdef = def / 100 * procent
                user.dueldef -= resultdef
                user.del12 = -1
                 
              }
              if(u.del12 == 0) {
                var def1 = u.def
                var procent = 20
                var resultdef1 = def1 / 100 * procent
                u.dueldef -= resultdef1
                u.del12 = -1
                 
              }
              if(user.spikes == 0) {
                user.spikes -= 1
                 
              }
              if(u.spikes == 0) {
                u.spikes -= 1
                 
              }
            }
          }
        }
      }
    }
    if(user.poison > 0) {
      var procent50 = 50
      var poison50 = u.duelatk * procent50 / 100
      user.duelhp -= poison50
      msg.send(`"${user.nick}" получает ⚔${poison50} урона`)
    }
    if(user.poisoning > 0) {
      var result1 = user.duelatk - user.dueldef
      user.duelhp -= result1
      msg.send(`"${user.nick}" получает ⚔${result1} урона от отравления`)
    }
    if(u.poisoning > 0) {
      var result2 = u.duelatk - u.dueldef
      u.duelhp -= result2
      msg.send(`"${u.nick}" наносит себе ⚔${result2} урона`)
    }
    if(user.poisoning == 0) {
      user.poisoning = -1
      var atk3 = user.duelatk * 3
      var heal1 = atk3 * 2
      user.duelhp += heal1
      if (user.duelhp > user.hp) {
      user.duelhp = user.hp
      }
      msg.send(`"${user.nick}" восстанавливает 💚${heal1} здоровья`)
    }
    if(u.poisoning == 0) {
      u.poisoning = -1
      var atk3 = u.duelatk * 3
      var heal2 = atk3 * 2
      u.duelhp += heal2
      if (u.duelhp > u.hp) {
      u.duelhp = u.hp
      }
      msg.send(`"${u.nick}" восстанавливает 💚${heal2} здоровья`)
    }
    var constuser = user
    user = u
    u = constuser
  })

  vk.updates.hear(/^(.*) ⚔$/i, msg => {
    if(user.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(u.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(user.steps > 100 || u.steps > 100) {
      user.duel = false
      u.duel = false
      u.predictionduel = false
      user.predictduel = false
      user.steps = 0
      u.steps = 0
      user.timer = 0
      u.timer = 0
      user.duelhp = 0
      user.duelatk = 0
      user.dueldef = 0
      u.duelhp = 0
      u.duelatk = 0
      u.dueldef = 0
      user.cd11 = 0,
      user.del11 = -1,
      user.cd12 = 0,
      user.del12 = -1,
      user.cd13 = 0,
      user.cd14 = 0,
      user.cd15 = 0,
      user.spikes = -1,
      user.cd16 = 0,
      user.clinch = -1,
      user.cd21 = 0,
      user.cd22 = 0,
      user.nakopleniye = 0,
      user.el1 = 0,
      user.burn = 0,
      user.el2 = 0,
      user.el3 = 0,
      user.cd31 = 0,
      user.poison = 0,
      user.cd32 = 0,
      user.cd33 = 0,
      user.cd34 = 0,
      user.invisible = false,
      user.cd35 = 0,
      user.cd36 = 0,
      user.cd37 = 0,
      user.poisoning = -1
      u.cd11 = 0,
      u.del11 = -1,
      u.cd12 = 0,
      u.del12 = -1,
      u.cd13 = 0,
      u.cd14 = 0,
      u.cd15 = 0,
      u.spikes = -1,
      u.cd16 = 0,
      u.clinch = -1,
      u.cd21 = 0,
      u.cd22 = 0,
      u.nakopleniye = 0,
      u.el1 = 0,
      u.burn = 0,
      u.el2 = 0,
      u.el3 = 0,
      u.cd31 = 0,
      u.poison = 0,
      u.cd32 = 0,
      u.cd33 = 0,
      u.cd34 = 0,
      u.invisible = false,
      u.cd35 = 0,
      u.cd36 = 0,
      u.cd37 = 0,
      u.poisoning = -1
      return msg.send ('Ходы дуэли превысили 100. Победитель не определён')
    }
    if(msg.senderId == u.id) {
      var constu = u
      u = user
      user = constu
    }
    if(user.cd16 > 0) return msg.send(`Умение перезаряжается`)
    if(user.clas.id != 1) return msg.send (`Умение не принадлежит вашему классу`)
    if(msg.$match[1] != '[club202302035|@eswep]') return
    if(msg.messagePayload != "project RQ") return
    if(u.nakopleniye > 0) {
      if(u.control > 0) u.nakopleniye = 0
    }
    if (user.steps % 2 == 0) {
      return msg.send ('Сейчас не твой ход')
    }
    else {
      if(user.control > 0) {
        msg.send (`Невозможно применить умение`);
      }
      else{
        if(user.cd11 > 0) user.cd11 -= 1
        if(user.del11 > 0) user.del11 -= 1
        if(user.cd12 > 0) user.cd12 -= 1
        if(user.del12 > 0) user.del12 -= 1
        if(user.cd13 > 0) user.cd13 -= 1
        if(user.cd14 > 0) user.cd14 -= 1
        if(user.cd15 > 0) user.cd15 -= 1
        if(user.spikes > 0) user.spikes -= 1
        if(user.cd16 > 0) user.cd16 -= 1
        if(user.cd21 > 0) user.cd21 -= 1
        if(user.cd22 > 0) user.cd22 -= 1
        if(user.cd31 > 0) user.cd31 -= 1
        if(user.cd32 > 0) user.cd32 -= 1
        if(user.cd33 > 0) user.cd33 -= 1
        if(user.cd34 > 0) user.cd34 -= 1
        if(user.cd35 > 0) user.cd35 -= 1
        if(user.cd36 > 0) user.cd36 -= 1
        if(user.porezka > 0) user.porezka -= 1
        if(user.cd37 > 0) user.cd37 -= 1
        if(u.cd11 > 0) u.cd11 -= 1
        if(u.del11 > 0) u.del11 -= 1
        if(u.cd12 > 0) u.cd12 -= 1
        if(u.del12 > 0) u.del12 -= 1
        if(u.cd13 > 0) u.cd13 -= 1
        if(u.cd14 > 0) u.cd14 -= 1
        if(u.cd15 > 0) u.cd15 -= 1
        if(u.spikes > 0) u.spikes -= 1
        if(u.cd16 > 0) u.cd16 -= 1
        if(u.clinch > 0) u.clinch = -1
        if(u.cd21 > 0) u.cd21 -= 1
        if(u.cd22 > 0) u.cd22 -= 1
        if(u.cd31 > 0) u.cd31 -= 1
        if(u.cd32 > 0) u.cd32 -= 1
        if(u.cd33 > 0) u.cd33 -= 1
        if(u.cd34 > 0) u.cd34 -= 1
        if(u.cd35 > 0) u.cd35 -= 1
        if(u.cd36 > 0) u.cd36 -= 1
        if(u.porezka > 0) u.porezka -= 1
        if(u.cd37 > 0) u.cd37 -= 1
        if(user.burn > 0) user.burn -= 1
        if(u.burn > 0) u.burn -= 1
        if(user.poison > 0) user.poison -= 1
        if(u.poison > 0) u.poison -= 1
        if(user.poisoning > 0) user.poisoning -= 1
        if(u.poisoning > 0) u.poisoning -= 1
        user.clinch = 1
        user.cd16 = 7
        user.steps += 1
        u.steps += 1
        if (u.clas.id == 1) {
          vk.api.messages.send({
            peer_id: msg.peerId,
            message: `@id${user.id}(${user.nick}) активировал "клинч". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
            disable_mentions: 1,
            keyboard: Keyboard.builder()
            .inline()
              .textButton({
                label: "😈",
                color: "primary",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "🛡",
                color: "primary",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "🖤",
                color: "negative",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "❣",
                color: "positive",
                payload: "project RQ"
                })
            .row()
            .inline()
              .textButton({
                label: "☦",
                color: "negative",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "⚙",
                color: "primary",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "⚔",
                color: "primary",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "АТК",
                color: "negative",
                payload: "project RQ"
                })
              })
        }
        if (u.clas.id == 2) {
          vk.api.messages.send({
            peer_id: msg.peerId,
            message: `@id${user.id}(${user.nick}) активировал "клинч". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
            disable_mentions: 1,
            keyboard: Keyboard.builder()
            .inline()
              .textButton({
                label: "❄",
                color: "primary",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "💥",
                color: "secondary",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "🍃",
                color: "positive",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "🔥",
                color: "negative",
                payload: "project RQ"
                })
            .row()
            .inline()
              .textButton({
                label: "💧",
                color: "negative",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "⚡",
                color: "negative",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "АТК",
                color: "negative",
                payload: "project RQ"
                })
              })
        }
        if (u.clas.id == 3) {
        vk.api.messages.send({
          peer_id: msg.peerId,
          message: `@id${user.id}(${user.nick}) активировал "клинч". Следующий ход делает @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
          disable_mentions: 1,
          keyboard: Keyboard.builder()
          .inline()
            .textButton({
              label: "🦠",
              color: "negative",
              payload: "project RQ"
              })
          .inline()
            .textButton({
              label: "🔪",
              color: "negative",
              payload: "project RQ"
              })
          .inline()
            .textButton({
              label: "💣",
              color: "primary",
              payload: "project RQ"
              })
          .inline()
            .textButton({
              label: "👁‍🗨",
              color: "primary",
              payload: "project RQ"
              })
          .row()
          .inline()
            .textButton({
              label: "🧬",
              color: "positive",
              payload: "project RQ"
              })
          .inline()
            .textButton({
              label: "🗡",
              color: "secondary",
              payload: "project RQ"
              })
          .inline()
            .textButton({
              label: "💉",
              color: "positive",
              payload: "project RQ"
              })
          .inline()
            .textButton({
              label: "АТК",
              color: "negative",
              payload: "project RQ"
              })
            })
        }
        if(user.del11 == 0) {
          var hp = user.hp
          var atk = user.atk
          var procent = 20
          var resulthp = hp / 100 * procent
          var resultatk = atk / 100 * procent
          user.duelhp -= resulthp
          user.duelatk -= resultatk
          user.del11 = -1
           
        }
        if(u.del11 == 0) {
          var hp1 = u.hp
          var atk1 = u.atk
          var procent = 20
          var resulthp1 = hp1 / 100 * procent
          var resultatk1 = atk1 / 100 * procent
          u.duelhp -= resulthp1
          u.duelatk -= resultatk1
          u.del11 = -1
           
        }
        if(user.del12 == 0) {
          var def = user.def
          var procent = 20
           var resultdef = def / 100 * procent
          user.dueldef -= resultdef
          user.del12 = -1
           
        }
        if(u.del12 == 0) {
          var def1 = u.def
          var procent = 20
          var resultdef1 = def1 / 100 * procent
          u.dueldef -= resultdef1
          u.del12 = -1
           
        }
        if(user.spikes == 0) {
          user.spikes -= 1
           
        }
        if(u.spikes == 0) {
          u.spikes -= 1
           
        }
      }
    }
    if(user.poison > 0) {
      var procent50 = 50
      var poison50 = u.duelatk * procent50 / 100
      user.duelhp -= poison50
      msg.send(`"${user.nick}" получает ⚔${poison50} урона`)
    }
    if(user.poisoning > 0) {
      var result1 = user.duelatk - user.dueldef
      user.duelhp -= result1
      msg.send(`"${user.nick}" получает ⚔${result1} урона от отравления`)
    }
    if(u.poisoning > 0) {
      var result2 = u.duelatk - u.dueldef
      u.duelhp -= result2
      msg.send(`"${u.nick}" наносит себе ⚔${result2} урона`)
    }
    if(user.poisoning == 0) {
      user.poisoning = -1
      var atk3 = user.duelatk * 3
      var heal1 = atk3 * 2
      user.duelhp += heal1
      if (user.duelhp > user.hp) {
      user.duelhp = user.hp
      }
      msg.send(`"${user.nick}" восстанавливает 💚${heal1} здоровья`)
    }
    if(u.poisoning == 0) {
      u.poisoning = -1
      var atk3 = u.duelatk * 3
      var heal2 = atk3 * 2
      u.duelhp += heal2
      if (u.duelhp > u.hp) {
      u.duelhp = u.hp
      }
      msg.send(`"${u.nick}" восстанавливает 💚${heal2} здоровья`)
    }
    var constuser = user
    user = u
    u = constuser
  })

  vk.updates.hear(/^(.*) АТК$/i, msg => {
    if(user.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(u.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(user.steps > 100 || u.steps > 100) {
      user.duel = false
      u.duel = false
      u.predictionduel = false
      user.predictduel = false
      user.steps = 0
      u.steps = 0
      user.timer = 0
      u.timer = 0
      user.duelhp = 0
      user.duelatk = 0
      user.dueldef = 0
      u.duelhp = 0
      u.duelatk = 0
      u.dueldef = 0
      user.cd11 = 0,
      user.del11 = -1,
      user.cd12 = 0,
      user.del12 = -1,
      user.cd13 = 0,
      user.cd14 = 0,
      user.cd15 = 0,
      user.spikes = -1,
      user.cd16 = 0,
      user.clinch = -1,
      user.cd21 = 0,
      user.cd22 = 0,
      user.nakopleniye = 0,
      user.el1 = 0,
      user.burn = 0,
      user.el2 = 0,
      user.el3 = 0,
      user.cd31 = 0,
      user.poison = 0,
      user.cd32 = 0,
      user.cd33 = 0,
      user.cd34 = 0,
      user.invisible = false,
      user.cd35 = 0,
      user.cd36 = 0,
      user.cd37 = 0,
      user.poisoning = -1
      u.cd11 = 0,
      u.del11 = -1,
      u.cd12 = 0,
      u.del12 = -1,
      u.cd13 = 0,
      u.cd14 = 0,
      u.cd15 = 0,
      u.spikes = -1,
      u.cd16 = 0,
      u.clinch = -1,
      u.cd21 = 0,
      u.cd22 = 0,
      u.nakopleniye = 0,
      u.el1 = 0,
      u.burn = 0,
      u.el2 = 0,
      u.el3 = 0,
      u.cd31 = 0,
      u.poison = 0,
      u.cd32 = 0,
      u.cd33 = 0,
      u.cd34 = 0,
      u.invisible = false,
      u.cd35 = 0,
      u.cd36 = 0,
      u.cd37 = 0,
      u.poisoning = -1
      return msg.send ('Ходы дуэли превысили 100. Победитель не определён')
    }
    if(msg.$match[1] != '[club202302035|@eswep]') return
    if(msg.messagePayload != "project RQ") return
    if(msg.senderId == u.id) {
      var constu = u
      u = user
      user = constu
    }
    if(u.nakopleniye > 0) {
      if(u.control > 0) u.nakopleniye = 0
    }
    if (user.steps % 2 == 0) {
      return msg.send ('Сейчас не твой ход')
    }
    else {
      if(user.control > 0) {
        msg.send (`Невозможно применить умение`);
      }
      else{
        if(u.clinch > 0) {
          if(user.duelatk < u.dueldef) {
            if(user.cd11 > 0) user.cd11 -= 1
            if(user.del11 > 0) user.del11 -= 1
            if(user.cd12 > 0) user.cd12 -= 1
            if(user.del12 > 0) user.del12 -= 1
            if(user.cd13 > 0) user.cd13 -= 1
            if(user.cd14 > 0) user.cd14 -= 1
            if(user.cd15 > 0) user.cd15 -= 1
            if(user.spikes > 0) user.spikes -= 1
            if(user.cd16 > 0) user.cd16 -= 1
            if(user.cd21 > 0) user.cd21 -= 1
            if(user.cd22 > 0) user.cd22 -= 1
            if(user.cd31 > 0) user.cd31 -= 1
            if(user.cd32 > 0) user.cd32 -= 1
            if(user.cd33 > 0) user.cd33 -= 1
            if(user.cd34 > 0) user.cd34 -= 1
            if(user.cd35 > 0) user.cd35 -= 1
            if(user.cd36 > 0) user.cd36 -= 1
            if(user.porezka > 0) user.porezka -= 1
            if(user.cd37 > 0) user.cd37 -= 1
            if(u.cd11 > 0) u.cd11 -= 1
            if(u.del11 > 0) u.del11 -= 1
            if(u.cd12 > 0) u.cd12 -= 1
            if(u.del12 > 0) u.del12 -= 1
            if(u.cd13 > 0) u.cd13 -= 1
            if(u.cd14 > 0) u.cd14 -= 1
            if(u.cd15 > 0) u.cd15 -= 1
            if(u.spikes > 0) u.spikes -= 1
            if(u.cd16 > 0) u.cd16 -= 1
            if(u.clinch > 0) u.clinch = -1
            if(u.cd21 > 0) u.cd21 -= 1
            if(u.cd22 > 0) u.cd22 -= 1
            if(u.cd31 > 0) u.cd31 -= 1
            if(u.cd32 > 0) u.cd32 -= 1
            if(u.cd33 > 0) u.cd33 -= 1
            if(u.cd34 > 0) u.cd34 -= 1
            if(u.cd35 > 0) u.cd35 -= 1
            if(u.cd36 > 0) u.cd36 -= 1
            if(u.porezka > 0) u.porezka -= 1
            if(u.cd37 > 0) u.cd37 -= 1
            if(user.burn > 0) user.burn -= 1
            if(u.burn > 0) u.burn -= 1
            if(user.poison > 0) user.poison -= 1
            if(u.poison > 0) u.poison -= 1
            if(user.poisoning > 0) user.poisoning -= 1
            if(u.poisoning > 0) u.poisoning -= 1
            user.steps += 1
            u.steps += 1
            if (u.clas.id == 1) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, так как активировал "клинч", @id${user.id}(${user.nick}) получает ⚔0 урона, так как атака @id${user.id}(${user.nick}) меньше защиты @id${u.id}(${u.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "😈",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🛡",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🖤",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "❣",
                    color: "positive",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "☦",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚙",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚔",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 2) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, так как активировал "клинч", @id${user.id}(${user.nick}) получает ⚔0 урона, так как атака @id${user.id}(${user.nick}) меньше защиты @id${u.id}(${u.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "❄",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💥",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🍃",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔥",
                    color: "negative",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "💧",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚡",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 3) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${u.id}(${u.nick}) не получает урона, так как активировал "клинч", @id${user.id}(${user.nick}) получает ⚔0 урона, так как атака @id${user.id}(${user.nick}) меньше защиты @id${u.id}(${u.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "🦠",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔪",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💣",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "👁‍🗨",
                  color: "primary",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "🧬",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🗡",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💉",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
            }
            if(user.del11 == 0) {
              var hp = user.hp
              var atk = user.atk
              var procent = 20
              var resulthp = hp / 100 * procent
              var resultatk = atk / 100 * procent
              user.duelhp -= resulthp
              user.duelatk -= resultatk
              user.del11 = -1
               
            }
            if(u.del11 == 0) {
              var hp1 = u.hp
              var atk1 = u.atk
              var procent = 20
              var resulthp1 = hp1 / 100 * procent
              var resultatk1 = atk1 / 100 * procent
              u.duelhp -= resulthp1
              u.duelatk -= resultatk1
              u.del11 = -1
               
            }
            if(user.del12 == 0) {
              var def = user.def
              var procent = 20
               var resultdef = def / 100 * procent
              user.dueldef -= resultdef
              user.del12 = -1
               
            }
            if(u.del12 == 0) {
              var def1 = u.def
              var procent = 20
              var resultdef1 = def1 / 100 * procent
              u.dueldef -= resultdef1
              u.del12 = -1
               
            }
            if(user.spikes == 0) {
              user.spikes -= 1
               
            }
            if(u.spikes == 0) {
              u.spikes -= 1
               
            }
          }
          else {
            var atk = user.duelatk
            var udef = u.dueldef
            var result = atk - udef
            user.duelhp -= result
            if(user.cd11 > 0) user.cd11 -= 1
            if(user.del11 > 0) user.del11 -= 1
            if(user.cd12 > 0) user.cd12 -= 1
            if(user.del12 > 0) user.del12 -= 1
            if(user.cd13 > 0) user.cd13 -= 1
            if(user.cd14 > 0) user.cd14 -= 1
            if(user.cd15 > 0) user.cd15 -= 1
            if(user.spikes > 0) user.spikes -= 1
            if(user.cd16 > 0) user.cd16 -= 1
            if(user.cd21 > 0) user.cd21 -= 1
            if(user.cd22 > 0) user.cd22 -= 1
            if(user.cd31 > 0) user.cd31 -= 1
            if(user.cd32 > 0) user.cd32 -= 1
            if(user.cd33 > 0) user.cd33 -= 1
            if(user.cd34 > 0) user.cd34 -= 1
            if(user.cd35 > 0) user.cd35 -= 1
            if(user.cd36 > 0) user.cd36 -= 1
            if(user.porezka > 0) user.porezka -= 1
            if(user.cd37 > 0) user.cd37 -= 1
            if(u.cd11 > 0) u.cd11 -= 1
            if(u.del11 > 0) u.del11 -= 1
            if(u.cd12 > 0) u.cd12 -= 1
            if(u.del12 > 0) u.del12 -= 1
            if(u.cd13 > 0) u.cd13 -= 1
            if(u.cd14 > 0) u.cd14 -= 1
            if(u.cd15 > 0) u.cd15 -= 1
            if(u.spikes > 0) u.spikes -= 1
            if(u.cd16 > 0) u.cd16 -= 1
            if(u.clinch > 0) u.clinch = -1
            if(u.cd21 > 0) u.cd21 -= 1
            if(u.cd22 > 0) u.cd22 -= 1
            if(u.cd31 > 0) u.cd31 -= 1
            if(u.cd32 > 0) u.cd32 -= 1
            if(u.cd33 > 0) u.cd33 -= 1
            if(u.cd34 > 0) u.cd34 -= 1
            if(u.cd35 > 0) u.cd35 -= 1
            if(u.cd36 > 0) u.cd36 -= 1
            if(u.porezka > 0) u.porezka -= 1
            if(u.cd37 > 0) u.cd37 -= 1
            if(user.burn > 0) user.burn -= 1
            if(u.burn > 0) u.burn -= 1
            if(user.poison > 0) user.poison -= 1
            if(u.poison > 0) u.poison -= 1
            if(user.poisoning > 0) user.poisoning -= 1
            if(u.poisoning > 0) u.poisoning -= 1
            user.steps += 1
            u.steps += 1
            if (u.clas.id == 1) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, @id${user.id}(${user.nick}) получает ⚔${result} урона, так как @id${u.id}(${u.nick}) активировал "клинч". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "😈",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🛡",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🖤",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "❣",
                    color: "positive",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "☦",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚙",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚔",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 2) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, @id${user.id}(${user.nick}) получает ⚔${result} урона, так как @id${u.id}(${u.nick}) активировал "клинч". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "❄",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💥",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🍃",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔥",
                    color: "negative",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "💧",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚡",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 3) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${u.id}(${u.nick}) не получает урона, @id${user.id}(${user.nick}) получает ⚔${result} урона, так как @id${u.id}(${u.nick}) активировал "клинч". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "🦠",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔪",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💣",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "👁‍🗨",
                  color: "primary",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "🧬",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🗡",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💉",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
            }
            if(user.duelhp < 1) {
              var plata2 = user.money
              var procentplata = 10
              var resultplata2 = plata2 / 100 * procentplata
              let num27 = resultplata2
              var finalplata = num27.toFixed(0)
              var finalplata2 = Number(finalplata)
              user.money -= finalplata2
              u.money += finalplata2
              user.duel = false
              u.duel = false
              u.predictionduel = false
              user.predictduel = false
              user.steps = 0
              u.steps = 0
              user.timer = 0
              u.timer = 0
              user.duelhp = 0
              user.duelatk = 0
              user.dueldef = 0
              u.duelhp = 0
              u.duelatk = 0
              u.dueldef = 0
              user.cd11 = 0,
              user.del11 = -1,
              user.cd12 = 0,
              user.del12 = -1,
              user.cd13 = 0,
              user.cd14 = 0,
              user.cd15 = 0,
              user.spikes = -1,
              user.cd16 = 0,
              user.clinch = -1,
              user.cd21 = 0,
              user.cd22 = 0,
              user.nakopleniye = 0,
              user.el1 = 0,
              user.burn = 0,
              user.el2 = 0,
              user.el3 = 0,
              user.cd31 = 0,
              user.poison = 0,
              user.cd32 = 0,
              user.cd33 = 0,
              user.cd34 = 0,
              user.invisible = false,
              user.cd35 = 0,
              user.cd36 = 0,
              user.cd37 = 0,
              user.poisoning = -1
              u.cd11 = 0,
              u.del11 = -1,
              u.cd12 = 0,
              u.del12 = -1,
              u.cd13 = 0,
              u.cd14 = 0,
              u.cd15 = 0,
              u.spikes = -1,
              u.cd16 = 0,
              u.clinch = -1,
              u.cd21 = 0,
              u.cd22 = 0,
              u.nakopleniye = 0,
              u.el1 = 0,
              u.burn = 0,
              u.el2 = 0,
              u.el3 = 0,
              u.cd31 = 0,
              u.poison = 0,
              u.cd32 = 0,
              u.cd33 = 0,
              u.cd34 = 0,
              u.invisible = false,
              u.cd35 = 0,
              u.cd36 = 0,
              u.cd37 = 0,
              u.poisoning = -1
              msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
              var constuser = user
              user = u
              u = constuser
            }
            else {
              if(u.duelhp < 1) {
                var plata2 = user.money
                var procentplata = 10
                var resultplata2 = plata2 / 100 * procentplata
                let num27 = resultplata2
                var finalplata = num27.toFixed(0)
                var finalplata2 = Number(finalplata)
                u.money -= finalplata2
                user.money += finalplata2
                user.duel = false
                u.duel = false
                u.predictionduel = false
                user.predictduel = false
                user.steps = 0
                u.steps = 0
                user.timer = 0
                u.timer = 0
                user.duelhp = 0
                user.duelatk = 0
                user.dueldef = 0
                u.duelhp = 0
                u.duelatk = 0
                u.dueldef = 0
                user.cd11 = 0,
                user.del11 = -1,
                user.cd12 = 0,
                user.del12 = -1,
                user.cd13 = 0,
                user.cd14 = 0,
                user.cd15 = 0,
                user.spikes = -1,
                user.cd16 = 0,
                user.clinch = -1,
                user.cd21 = 0,
                user.cd22 = 0,
                user.nakopleniye = 0,
                user.el1 = 0,
                user.burn = 0,
                user.el2 = 0,
                user.el3 = 0,
                user.cd31 = 0,
                user.poison = 0,
                user.cd32 = 0,
                user.cd33 = 0,
                user.cd34 = 0,
                user.invisible = false,
                user.cd35 = 0,
                user.cd36 = 0,
                user.cd37 = 0,
                user.poisoning = -1
                u.cd11 = 0,
                u.del11 = -1,
                u.cd12 = 0,
                u.del12 = -1,
                u.cd13 = 0,
                u.cd14 = 0,
                u.cd15 = 0,
                u.spikes = -1,
                u.cd16 = 0,
                u.clinch = -1,
                u.cd21 = 0,
                u.cd22 = 0,
                u.nakopleniye = 0,
                u.el1 = 0,
                u.burn = 0,
                u.el2 = 0,
                u.el3 = 0,
                u.cd31 = 0,
                u.poison = 0,
                u.cd32 = 0,
                u.cd33 = 0,
                u.cd34 = 0,
                u.invisible = false,
                u.cd35 = 0,
                u.cd36 = 0,
                u.cd37 = 0,
                u.poisoning = -1
                msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                var constuser = user
                user = u
                u = constuser
              }
            }
            if(user.del11 == 0) {
              var hp = user.hp
              var atk = user.atk
              var procent = 20
              var resulthp = hp / 100 * procent
              var resultatk = atk / 100 * procent
              user.duelhp -= resulthp
              user.duelatk -= resultatk
              user.del11 = -1
               
            }
            if(u.del11 == 0) {
              var hp1 = u.hp
              var atk1 = u.atk
              var procent = 20
              var resulthp1 = hp1 / 100 * procent
              var resultatk1 = atk1 / 100 * procent
              u.duelhp -= resulthp1
              u.duelatk -= resultatk1
              u.del11 = -1
               
            }
            if(user.del12 == 0) {
              var def = user.def
              var procent = 20
               var resultdef = def / 100 * procent
              user.dueldef -= resultdef
              user.del12 = -1
               
            }
            if(u.del12 == 0) {
              var def1 = u.def
              var procent = 20
              var resultdef1 = def1 / 100 * procent
              u.dueldef -= resultdef1
              u.del12 = -1
               
            }
            if(user.spikes == 0) {
              user.spikes -= 1
               
            }
            if(u.spikes == 0) {
              u.spikes -= 1
               
            }
          }
        }
        else {
          if(u.spikes > 0) {
            if(u.control > 0) {
              if(u.dueldef > user.duelatk) {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
              var atk = user.duelatk
              var udef = u.dueldef
              var result = atk - udef
              var spikes = result / 2
              u.duelhp -= result
              user.duelhp -= spikes
              if(user.cd11 > 0) user.cd11 -= 2
              if(user.del11 > 0) user.del11 -= 2
              if(user.cd12 > 0) user.cd12 -= 2
              if(user.del12 > 0) user.del12 -= 2
              if(user.cd13 > 0) user.cd13 -= 2
              if(user.cd14 > 0) user.cd14 -= 2
              if(user.cd15 > 0) user.cd15 -= 2
              if(user.spikes > 0) user.spikes -= 2
              if(user.cd16 > 0) user.cd16 -= 2
              if(user.cd21 > 0) user.cd21 -= 2
              if(user.cd22 > 0) user.cd22 -= 2
              if(user.cd31 > 0) user.cd31 -= 2
              if(user.cd32 > 0) user.cd32 -= 2
              if(user.cd33 > 0) user.cd33 -= 2
              if(user.cd34 > 0) user.cd34 -= 2
              if(user.cd35 > 0) user.cd35 -= 2
              if(user.cd36 > 0) user.cd36 -= 2
              if(user.porezka > 0) user.porezka -= 2
              if(user.cd37 > 0) user.cd37 -= 2
              if(u.cd11 > 0) u.cd11 -= 2
              if(u.del11 > 0) u.del11 -= 2
              if(u.cd12 > 0) u.cd12 -= 2
              if(u.del12 > 0) u.del12 -= 2
              if(u.cd13 > 0) u.cd13 -= 2
              if(u.cd14 > 0) u.cd14 -= 2
              if(u.cd15 > 0) u.cd15 -= 2
              if(u.spikes > 0) u.spikes -= 2
              if(u.cd16 > 0) u.cd16 -= 2
              if(u.clinch > 0) u.clinch = -1
              if(u.cd21 > 0) u.cd21 -= 2
              if(u.cd22 > 0) u.cd22 -= 2
              if(u.cd31 > 0) u.cd31 -= 2
              if(u.cd32 > 0) u.cd32 -= 2
              if(u.cd33 > 0) u.cd33 -= 2
              if(u.cd34 > 0) u.cd34 -= 2
              if(u.cd35 > 0) u.cd35 -= 2
              if(u.cd36 > 0) u.cd36 -= 2
              if(u.porezka > 0) u.porezka -= 2
              if(u.cd37 > 0) u.cd37 -= 2
              if(user.burn > 0) user.burn -= 2
              if(u.burn > 0) u.burn -= 2
              if(user.poison > 0) user.poison -= 2
              if(u.poison > 0) u.poison -= 2
              if(user.poisoning > 0) user.poisoning -= 2
              if(u.poisoning > 0) u.poisoning -= 2
              if(u.control == 2) {
                user.steps += 1
                u.steps += 1
                u.control -= 2
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                }
              }
              else {
                if(u.control > 2) {
                  user.steps += 2
                  u.steps += 2
                  u.control -= 2
                  if (user.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${user.id}(${user.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${user.id}(${user.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${user.id}(${user.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                  }
                }
              }
              if(user.duelhp < 1) {
                var plata2 = user.money
                var procentplata = 10
                var resultplata2 = plata2 / 100 * procentplata
                let num27 = resultplata2
                var finalplata = num27.toFixed(0)
                var finalplata2 = Number(finalplata)
                user.money -= finalplata2
                u.money += finalplata2
                user.duel = false
                u.duel = false
                u.predictionduel = false
                user.predictduel = false
                user.steps = 0
                u.steps = 0
                user.timer = 0
                u.timer = 0
                user.duelhp = 0
                user.duelatk = 0
                user.dueldef = 0
                u.duelhp = 0
                u.duelatk = 0
                u.dueldef = 0
                user.cd11 = 0,
                user.del11 = -1,
                user.cd12 = 0,
                user.del12 = -1,
                user.cd13 = 0,
                user.cd14 = 0,
                user.cd15 = 0,
                user.spikes = -1,
                user.cd16 = 0,
                user.clinch = -1,
                user.cd21 = 0,
                user.cd22 = 0,
                user.nakopleniye = 0,
                user.el1 = 0,
                user.burn = 0,
                user.el2 = 0,
                user.el3 = 0,
                user.cd31 = 0,
                user.poison = 0,
                user.cd32 = 0,
                user.cd33 = 0,
                user.cd34 = 0,
                user.invisible = false,
                user.cd35 = 0,
                user.cd36 = 0,
                user.cd37 = 0,
                user.poisoning = -1
                u.cd11 = 0,
                u.del11 = -1,
                u.cd12 = 0,
                u.del12 = -1,
                u.cd13 = 0,
                u.cd14 = 0,
                u.cd15 = 0,
                u.spikes = -1,
                u.cd16 = 0,
                u.clinch = -1,
                u.cd21 = 0,
                u.cd22 = 0,
                u.nakopleniye = 0,
                u.el1 = 0,
                u.burn = 0,
                u.el2 = 0,
                u.el3 = 0,
                u.cd31 = 0,
                u.poison = 0,
                u.cd32 = 0,
                u.cd33 = 0,
                u.cd34 = 0,
                u.invisible = false,
                u.cd35 = 0,
                u.cd36 = 0,
                u.cd37 = 0,
                u.poisoning = -1
                msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                var constuser = user
                user = u
                u = constuser
              }
              else {
                if(u.duelhp < 1) {
                  var plata2 = user.money
                  var procentplata = 10
                  var resultplata2 = plata2 / 100 * procentplata
                  let num27 = resultplata2
                  var finalplata = num27.toFixed(0)
                  var finalplata2 = Number(finalplata)
                  u.money -= finalplata2
                  user.money += finalplata2
                  user.duel = false
                  u.duel = false
                  u.predictionduel = false
                  user.predictduel = false
                  user.steps = 0
                  u.steps = 0
                  user.timer = 0
                  u.timer = 0
                  user.duelhp = 0
                  user.duelatk = 0
                  user.dueldef = 0
                  u.duelhp = 0
                  u.duelatk = 0
                  u.dueldef = 0
                  user.cd11 = 0,
                  user.del11 = -1,
                  user.cd12 = 0,
                  user.del12 = -1,
                  user.cd13 = 0,
                  user.cd14 = 0,
                  user.cd15 = 0,
                  user.spikes = -1,
                  user.cd16 = 0,
                  user.clinch = -1,
                  user.cd21 = 0,
                  user.cd22 = 0,
                  user.nakopleniye = 0,
                  user.el1 = 0,
                  user.burn = 0,
                  user.el2 = 0,
                  user.el3 = 0,
                  user.cd31 = 0,
                  user.poison = 0,
                  user.cd32 = 0,
                  user.cd33 = 0,
                  user.cd34 = 0,
                  user.invisible = false,
                  user.cd35 = 0,
                  user.cd36 = 0,
                  user.cd37 = 0,
                  user.poisoning = -1
                  u.cd11 = 0,
                  u.del11 = -1,
                  u.cd12 = 0,
                  u.del12 = -1,
                  u.cd13 = 0,
                  u.cd14 = 0,
                  u.cd15 = 0,
                  u.spikes = -1,
                  u.cd16 = 0,
                  u.clinch = -1,
                  u.cd21 = 0,
                  u.cd22 = 0,
                  u.nakopleniye = 0,
                  u.el1 = 0,
                  u.burn = 0,
                  u.el2 = 0,
                  u.el3 = 0,
                  u.cd31 = 0,
                  u.poison = 0,
                  u.cd32 = 0,
                  u.cd33 = 0,
                  u.cd34 = 0,
                  u.invisible = false,
                  u.cd35 = 0,
                  u.cd36 = 0,
                  u.cd37 = 0,
                  u.poisoning = -1
                  msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                  var constuser = user
                  user = u
                  u = constuser
                }
              }
              if(user.del11 == 0) {
                var hp = user.hp
                var atk = user.atk
                var procent = 20
                var resulthp = hp / 100 * procent
                var resultatk = atk / 100 * procent
                user.duelhp -= resulthp
                user.duelatk -= resultatk
                user.del11 = -1
                 
              }
              if(u.del11 == 0) {
                var hp1 = u.hp
                var atk1 = u.atk
                var procent = 20
                var resulthp1 = hp1 / 100 * procent
                var resultatk1 = atk1 / 100 * procent
                u.duelhp -= resulthp1
                u.duelatk -= resultatk1
                u.del11 = -1
                 
              }
              if(user.del12 == 0) {
                var def = user.def
                var procent = 20
                 var resultdef = def / 100 * procent
                user.dueldef -= resultdef
                user.del12 = -1
                 
              }
              if(u.del12 == 0) {
                var def1 = u.def
                var procent = 20
                var resultdef1 = def1 / 100 * procent
                u.dueldef -= resultdef1
                u.del12 = -1
                 
              }
              if(user.spikes == 0) {
                user.spikes -= 1
                 
              }
              if(u.spikes == 0) {
                u.spikes -= 1
                 
              }
              }
            }
            else {
              if(user.duelatk < u.dueldef) {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
              var atk = user.duelatk
              var udef = u.dueldef
              var result = atk - udef
              var spikes = result / 2
              u.duelhp -= result
              user.duelhp -= spikes
              if(user.cd11 > 0) user.cd11 -= 1
              if(user.del11 > 0) user.del11 -= 1
              if(user.cd12 > 0) user.cd12 -= 1
              if(user.del12 > 0) user.del12 -= 1
              if(user.cd13 > 0) user.cd13 -= 1
              if(user.cd14 > 0) user.cd14 -= 1
              if(user.cd15 > 0) user.cd15 -= 1
              if(user.spikes > 0) user.spikes -= 1
              if(user.cd16 > 0) user.cd16 -= 1
              if(user.cd21 > 0) user.cd21 -= 1
              if(user.cd22 > 0) user.cd22 -= 1
              if(user.cd31 > 0) user.cd31 -= 1
              if(user.cd32 > 0) user.cd32 -= 1
              if(user.cd33 > 0) user.cd33 -= 1
              if(user.cd34 > 0) user.cd34 -= 1
              if(user.cd35 > 0) user.cd35 -= 1
              if(user.cd36 > 0) user.cd36 -= 1
              if(user.porezka > 0) user.porezka -= 1
              if(user.cd37 > 0) user.cd37 -= 1
              if(u.cd11 > 0) u.cd11 -= 1
              if(u.del11 > 0) u.del11 -= 1
              if(u.cd12 > 0) u.cd12 -= 1
              if(u.del12 > 0) u.del12 -= 1
              if(u.cd13 > 0) u.cd13 -= 1
              if(u.cd14 > 0) u.cd14 -= 1
              if(u.cd15 > 0) u.cd15 -= 1
              if(u.spikes > 0) u.spikes -= 1
              if(u.cd16 > 0) u.cd16 -= 1
              if(u.clinch > 0) u.clinch = -1
              if(u.cd21 > 0) u.cd21 -= 1
              if(u.cd22 > 0) u.cd22 -= 1
              if(u.cd31 > 0) u.cd31 -= 1
              if(u.cd32 > 0) u.cd32 -= 1
              if(u.cd33 > 0) u.cd33 -= 1
              if(u.cd34 > 0) u.cd34 -= 1
              if(u.cd35 > 0) u.cd35 -= 1
              if(u.cd36 > 0) u.cd36 -= 1
              if(u.porezka > 0) u.porezka -= 1
              if(u.cd37 > 0) u.cd37 -= 1
              if(user.burn > 0) user.burn -= 1
              if(u.burn > 0) u.burn -= 1
              if(user.poison > 0) user.poison -= 1
              if(u.poison > 0) u.poison -= 1
              if(user.poisoning > 0) user.poisoning -= 1
              if(u.poisoning > 0) u.poisoning -= 1
              user.steps += 1
              u.steps += 1
              if (u.clas.id == 1) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "😈",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🛡",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🖤",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "❣",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "☦",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚙",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚔",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 2) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "❄",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💥",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🍃",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔥",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "💧",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚡",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 3) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "🦠",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔪",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💣",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "👁‍🗨",
                    color: "primary",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "🧬",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🗡",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💉",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
                }
                if(user.duelhp < 1) {
                  var plata2 = user.money
                  var procentplata = 10
                  var resultplata2 = plata2 / 100 * procentplata
                  let num27 = resultplata2
                  var finalplata = num27.toFixed(0)
                  var finalplata2 = Number(finalplata)
                  user.money -= finalplata2
                  u.money += finalplata2
                  user.duel = false
                  u.duel = false
                  u.predictionduel = false
                  user.predictduel = false
                  user.steps = 0
                  u.steps = 0
                  user.timer = 0
                  u.timer = 0
                  user.duelhp = 0
                  user.duelatk = 0
                  user.dueldef = 0
                  u.duelhp = 0
                  u.duelatk = 0
                  u.dueldef = 0
                  user.cd11 = 0,
                  user.del11 = -1,
                  user.cd12 = 0,
                  user.del12 = -1,
                  user.cd13 = 0,
                  user.cd14 = 0,
                  user.cd15 = 0,
                  user.spikes = -1,
                  user.cd16 = 0,
                  user.clinch = -1,
                  user.cd21 = 0,
                  user.cd22 = 0,
                  user.nakopleniye = 0,
                  user.el1 = 0,
                  user.burn = 0,
                  user.el2 = 0,
                  user.el3 = 0,
                  user.cd31 = 0,
                  user.poison = 0,
                  user.cd32 = 0,
                  user.cd33 = 0,
                  user.cd34 = 0,
                  user.invisible = false,
                  user.cd35 = 0,
                  user.cd36 = 0,
                  user.cd37 = 0,
                  user.poisoning = -1
                  u.cd11 = 0,
                  u.del11 = -1,
                  u.cd12 = 0,
                  u.del12 = -1,
                  u.cd13 = 0,
                  u.cd14 = 0,
                  u.cd15 = 0,
                  u.spikes = -1,
                  u.cd16 = 0,
                  u.clinch = -1,
                  u.cd21 = 0,
                  u.cd22 = 0,
                  u.nakopleniye = 0,
                  u.el1 = 0,
                  u.burn = 0,
                  u.el2 = 0,
                  u.el3 = 0,
                  u.cd31 = 0,
                  u.poison = 0,
                  u.cd32 = 0,
                  u.cd33 = 0,
                  u.cd34 = 0,
                  u.invisible = false,
                  u.cd35 = 0,
                  u.cd36 = 0,
                  u.cd37 = 0,
                  u.poisoning = -1
                  msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                  var constuser = user
                  user = u
                  u = constuser
                }
                else {
                  if(u.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    u.money -= finalplata2
                    user.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                }
              if(user.del11 == 0) {
                var hp = user.hp
                var atk = user.atk
                var procent = 20
                var resulthp = hp / 100 * procent
                var resultatk = atk / 100 * procent
                user.duelhp -= resulthp
                user.duelatk -= resultatk
                user.del11 = -1
                 
              }
              if(u.del11 == 0) {
                var hp1 = u.hp
                var atk1 = u.atk
                var procent = 20
                var resulthp1 = hp1 / 100 * procent
                var resultatk1 = atk1 / 100 * procent
                u.duelhp -= resulthp1
                u.duelatk -= resultatk1
                u.del11 = -1
                 
              }
              if(user.del12 == 0) {
                var def = user.def
                var procent = 20
                 var resultdef = def / 100 * procent
                user.dueldef -= resultdef
                user.del12 = -1
                 
              }
              if(u.del12 == 0) {
                var def1 = u.def
                var procent = 20
                var resultdef1 = def1 / 100 * procent
                u.dueldef -= resultdef1
                u.del12 = -1
                 
              }
              if(user.spikes == 0) {
                user.spikes -= 1
                 
              }
              if(u.spikes == 0) {
                u.spikes -= 1
                 
              }
            }
          }
          }
          else {
            if(u.control > 0) {
              if(u.dueldef > user.duelatk) {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
                var atk = user.duelatk
                var udef = u.dueldef
                var result = atk - udef
                u.duelhp -= result
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                  if(user.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    user.money -= finalplata2
                    u.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                  else {
                    if(u.duelhp < 1) {
                      var plata2 = user.money
                      var procentplata = 10
                      var resultplata2 = plata2 / 100 * procentplata
                      let num27 = resultplata2
                      var finalplata = num27.toFixed(0)
                      var finalplata2 = Number(finalplata)
                      u.money -= finalplata2
                      user.money += finalplata2
                      user.duel = false
                      u.duel = false
                      u.predictionduel = false
                      user.predictduel = false
                      user.steps = 0
                      u.steps = 0
                      user.timer = 0
                      u.timer = 0
                      user.duelhp = 0
                      user.duelatk = 0
                      user.dueldef = 0
                      u.duelhp = 0
                      u.duelatk = 0
                      u.dueldef = 0
                      user.cd11 = 0,
                      user.del11 = -1,
                      user.cd12 = 0,
                      user.del12 = -1,
                      user.cd13 = 0,
                      user.cd14 = 0,
                      user.cd15 = 0,
                      user.spikes = -1,
                      user.cd16 = 0,
                      user.clinch = -1,
                      user.cd21 = 0,
                      user.cd22 = 0,
                      user.nakopleniye = 0,
                      user.el1 = 0,
                      user.burn = 0,
                      user.el2 = 0,
                      user.el3 = 0,
                      user.cd31 = 0,
                      user.poison = 0,
                      user.cd32 = 0,
                      user.cd33 = 0,
                      user.cd34 = 0,
                      user.invisible = false,
                      user.cd35 = 0,
                      user.cd36 = 0,
                      user.cd37 = 0,
                      user.poisoning = -1
                      u.cd11 = 0,
                      u.del11 = -1,
                      u.cd12 = 0,
                      u.del12 = -1,
                      u.cd13 = 0,
                      u.cd14 = 0,
                      u.cd15 = 0,
                      u.spikes = -1,
                      u.cd16 = 0,
                      u.clinch = -1,
                      u.cd21 = 0,
                      u.cd22 = 0,
                      u.nakopleniye = 0,
                      u.el1 = 0,
                      u.burn = 0,
                      u.el2 = 0,
                      u.el3 = 0,
                      u.cd31 = 0,
                      u.poison = 0,
                      u.cd32 = 0,
                      u.cd33 = 0,
                      u.cd34 = 0,
                      u.invisible = false,
                      u.cd35 = 0,
                      u.cd36 = 0,
                      u.cd37 = 0,
                      u.poisoning = -1
                      msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                      var constuser = user
                      user = u
                      u = constuser
                    }
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
            }
            else {
              if(u.dueldef > user.duelatk) {
                if(user.cd11 > 0) user.cd11 -= 1
                if(user.del11 > 0) user.del11 -= 1
                if(user.cd12 > 0) user.cd12 -= 1
                if(user.del12 > 0) user.del12 -= 1
                if(user.cd13 > 0) user.cd13 -= 1
                if(user.cd14 > 0) user.cd14 -= 1
                if(user.cd15 > 0) user.cd15 -= 1
                if(user.spikes > 0) user.spikes -= 1
                if(user.cd16 > 0) user.cd16 -= 1
                if(user.cd21 > 0) user.cd21 -= 1
                if(user.cd22 > 0) user.cd22 -= 1
                if(user.cd31 > 0) user.cd31 -= 1
                if(user.cd32 > 0) user.cd32 -= 1
                if(user.cd33 > 0) user.cd33 -= 1
                if(user.cd34 > 0) user.cd34 -= 1
                if(user.cd35 > 0) user.cd35 -= 1
                if(user.cd36 > 0) user.cd36 -= 1
                if(user.porezka > 0) user.porezka -= 1
                if(user.cd37 > 0) user.cd37 -= 1
                if(u.cd11 > 0) u.cd11 -= 1
                if(u.del11 > 0) u.del11 -= 1
                if(u.cd12 > 0) u.cd12 -= 1
                if(u.del12 > 0) u.del12 -= 1
                if(u.cd13 > 0) u.cd13 -= 1
                if(u.cd14 > 0) u.cd14 -= 1
                if(u.cd15 > 0) u.cd15 -= 1
                if(u.spikes > 0) u.spikes -= 1
                if(u.cd16 > 0) u.cd16 -= 1
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 1
                if(u.cd22 > 0) u.cd22 -= 1
                if(u.cd31 > 0) u.cd31 -= 1
                if(u.cd32 > 0) u.cd32 -= 1
                if(u.cd33 > 0) u.cd33 -= 1
                if(u.cd34 > 0) u.cd34 -= 1
                if(u.cd35 > 0) u.cd35 -= 1
                if(u.cd36 > 0) u.cd36 -= 1
                if(u.porezka > 0) u.porezka -= 1
                if(u.cd37 > 0) u.cd37 -= 1
                if(user.burn > 0) user.burn -= 1
                if(u.burn > 0) u.burn -= 1
                if(user.poison > 0) user.poison -= 1
                if(u.poison > 0) u.poison -= 1
                if(user.poisoning > 0) user.poisoning -= 1
                if(u.poisoning > 0) u.poisoning -= 1
                user.steps += 1
                u.steps += 1
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
                var atk = user.duelatk
                var udef = u.dueldef
                var result = atk - udef
                u.duelhp -= result
                if(user.cd11 > 0) user.cd11 -= 1
                if(user.del11 > 0) user.del11 -= 1
                if(user.cd12 > 0) user.cd12 -= 1
                if(user.del12 > 0) user.del12 -= 1
                if(user.cd13 > 0) user.cd13 -= 1
                if(user.cd14 > 0) user.cd14 -= 1
                if(user.cd15 > 0) user.cd15 -= 1
                if(user.spikes > 0) user.spikes -= 1
                if(user.cd16 > 0) user.cd16 -= 1
                if(user.cd21 > 0) user.cd21 -= 1
                if(user.cd22 > 0) user.cd22 -= 1
                if(user.cd31 > 0) user.cd31 -= 1
                if(user.cd32 > 0) user.cd32 -= 1
                if(user.cd33 > 0) user.cd33 -= 1
                if(user.cd34 > 0) user.cd34 -= 1
                if(user.cd35 > 0) user.cd35 -= 1
                if(user.cd36 > 0) user.cd36 -= 1
                if(user.porezka > 0) user.porezka -= 1
                if(user.cd37 > 0) user.cd37 -= 1
                if(u.cd11 > 0) u.cd11 -= 1
                if(u.del11 > 0) u.del11 -= 1
                if(u.cd12 > 0) u.cd12 -= 1
                if(u.del12 > 0) u.del12 -= 1
                if(u.cd13 > 0) u.cd13 -= 1
                if(u.cd14 > 0) u.cd14 -= 1
                if(u.cd15 > 0) u.cd15 -= 1
                if(u.spikes > 0) u.spikes -= 1
                if(u.cd16 > 0) u.cd16 -= 1
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 1
                if(u.cd22 > 0) u.cd22 -= 1
                if(u.cd31 > 0) u.cd31 -= 1
                if(u.cd32 > 0) u.cd32 -= 1
                if(u.cd33 > 0) u.cd33 -= 1
                if(u.cd34 > 0) u.cd34 -= 1
                if(u.cd35 > 0) u.cd35 -= 1
                if(u.cd36 > 0) u.cd36 -= 1
                if(u.porezka > 0) u.porezka -= 1
                if(u.cd37 > 0) u.cd37 -= 1
                if(user.burn > 0) user.burn -= 1
                if(u.burn > 0) u.burn -= 1
                if(user.poison > 0) user.poison -= 1
                if(u.poison > 0) u.poison -= 1
                if(user.poisoning > 0) user.poisoning -= 1
                if(u.poisoning > 0) u.poisoning -= 1
                user.steps += 1
                u.steps += 1
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
                  if(user.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    user.money -= finalplata2
                    u.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                  else {
                    if(u.duelhp < 1) {
                      var plata2 = user.money
                      var procentplata = 10
                      var resultplata2 = plata2 / 100 * procentplata
                      let num27 = resultplata2
                      var finalplata = num27.toFixed(0)
                      var finalplata2 = Number(finalplata)
                      u.money -= finalplata2
                      user.money += finalplata2
                      user.duel = false
                      u.duel = false
                      u.predictionduel = false
                      user.predictduel = false
                      user.steps = 0
                      u.steps = 0
                      user.timer = 0
                      u.timer = 0
                      user.duelhp = 0
                      user.duelatk = 0
                      user.dueldef = 0
                      u.duelhp = 0
                      u.duelatk = 0
                      u.dueldef = 0
                      user.cd11 = 0,
                      user.del11 = -1,
                      user.cd12 = 0,
                      user.del12 = -1,
                      user.cd13 = 0,
                      user.cd14 = 0,
                      user.cd15 = 0,
                      user.spikes = -1,
                      user.cd16 = 0,
                      user.clinch = -1,
                      user.cd21 = 0,
                      user.cd22 = 0,
                      user.nakopleniye = 0,
                      user.el1 = 0,
                      user.burn = 0,
                      user.el2 = 0,
                      user.el3 = 0,
                      user.cd31 = 0,
                      user.poison = 0,
                      user.cd32 = 0,
                      user.cd33 = 0,
                      user.cd34 = 0,
                      user.invisible = false,
                      user.cd35 = 0,
                      user.cd36 = 0,
                      user.cd37 = 0,
                      user.poisoning = -1
                      u.cd11 = 0,
                      u.del11 = -1,
                      u.cd12 = 0,
                      u.del12 = -1,
                      u.cd13 = 0,
                      u.cd14 = 0,
                      u.cd15 = 0,
                      u.spikes = -1,
                      u.cd16 = 0,
                      u.clinch = -1,
                      u.cd21 = 0,
                      u.cd22 = 0,
                      u.nakopleniye = 0,
                      u.el1 = 0,
                      u.burn = 0,
                      u.el2 = 0,
                      u.el3 = 0,
                      u.cd31 = 0,
                      u.poison = 0,
                      u.cd32 = 0,
                      u.cd33 = 0,
                      u.cd34 = 0,
                      u.invisible = false,
                      u.cd35 = 0,
                      u.cd36 = 0,
                      u.cd37 = 0,
                      u.poisoning = -1
                      msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                      var constuser = user
                      user = u
                      u = constuser
                    }
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
            }
          }
        }
      }
    }
  if(user.poison > 0) {
    var procent50 = 50
    var poison50 = u.duelatk * procent50 / 100
    user.duelhp -= poison50
    msg.send(`"${user.nick}" получает ⚔${poison50} урона`)
  }
  if(user.poisoning > 0) {
    var result1 = user.duelatk - user.dueldef
    user.duelhp -= result1
    msg.send(`"${user.nick}" получает ⚔${result1} урона от отравления`)
  }
  if(u.poisoning > 0) {
    var result2 = u.duelatk - u.dueldef
    u.duelhp -= result2
    msg.send(`"${u.nick}" наносит себе ⚔${result2} урона`)
  }
  if(user.poisoning == 0) {
    user.poisoning = -1
    var atk3 = user.duelatk * 3
    var heal1 = atk3 * 2
    user.duelhp += heal1
    if (user.duelhp > user.hp) {
    user.duelhp = user.hp
    }
    msg.send(`"${user.nick}" восстанавливает 💚${heal1} здоровья`)
  }
  if(u.poisoning == 0) {
    u.poisoning = -1
    var atk3 = u.duelatk * 3
    var heal2 = atk3 * 2
    u.duelhp += heal2
    if (u.duelhp > u.hp) {
    u.duelhp = u.hp
    }
    msg.send(`"${u.nick}" восстанавливает 💚${heal2} здоровья`)
  }
    var constuser = user
    user = u
    u = constuser
  })

  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы мага------------------------------------------------------------------------------------------------------

  vk.updates.hear(/^(.*) ❄$/i, msg => {
    if(user.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(u.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(user.steps > 100 || u.steps > 100) {
      user.duel = false
      u.duel = false
      u.predictionduel = false
      user.predictduel = false
      user.steps = 0
      u.steps = 0
      user.timer = 0
      u.timer = 0
      user.duelhp = 0
      user.duelatk = 0
      user.dueldef = 0
      u.duelhp = 0
      u.duelatk = 0
      u.dueldef = 0
      user.cd11 = 0,
      user.del11 = -1,
      user.cd12 = 0,
      user.del12 = -1,
      user.cd13 = 0,
      user.cd14 = 0,
      user.cd15 = 0,
      user.spikes = -1,
      user.cd16 = 0,
      user.clinch = -1,
      user.cd21 = 0,
      user.cd22 = 0,
      user.nakopleniye = 0,
      user.el1 = 0,
      user.burn = 0,
      user.el2 = 0,
      user.el3 = 0,
      user.cd31 = 0,
      user.poison = 0,
      user.cd32 = 0,
      user.cd33 = 0,
      user.cd34 = 0,
      user.invisible = false,
      user.cd35 = 0,
      user.cd36 = 0,
      user.cd37 = 0,
      user.poisoning = -1
      u.cd11 = 0,
      u.del11 = -1,
      u.cd12 = 0,
      u.del12 = -1,
      u.cd13 = 0,
      u.cd14 = 0,
      u.cd15 = 0,
      u.spikes = -1,
      u.cd16 = 0,
      u.clinch = -1,
      u.cd21 = 0,
      u.cd22 = 0,
      u.nakopleniye = 0,
      u.el1 = 0,
      u.burn = 0,
      u.el2 = 0,
      u.el3 = 0,
      u.cd31 = 0,
      u.poison = 0,
      u.cd32 = 0,
      u.cd33 = 0,
      u.cd34 = 0,
      u.invisible = false,
      u.cd35 = 0,
      u.cd36 = 0,
      u.cd37 = 0,
      u.poisoning = -1
      return msg.send ('Ходы дуэли превысили 100. Победитель не определён')
    }
    if(msg.senderId == u.id) {
      var constu = u
      u = user
      user = constu
    }
    if(user.cd21 > 0) return msg.send (`Умение перезаряжается`)
    if(user.clas.id != 2) return msg.send (`Умение не принадлежит вашему классу`)
    if(msg.$match[1] != '[club202302035|@eswep]') return
    if(msg.messagePayload != "project RQ") return
    if(u.nakopleniye > 0) {
      if(u.control > 0) u.nakopleniye = 0
    }
    if (user.steps % 2 == 0) {
      return msg.send ('Сейчас не твой ход')
    }
    else {
      if(user.control > 0) {
        msg.send (`Невозможно применить умение`);
      }
      else{
        if(u.clinch > 0) {
          if(user.cd11 > 0) user.cd11 -= 1
          if(user.del11 > 0) user.del11 -= 1
          if(user.cd12 > 0) user.cd12 -= 1
          if(user.del12 > 0) user.del12 -= 1
          if(user.cd13 > 0) user.cd13 -= 1
          if(user.cd14 > 0) user.cd14 -= 1
          if(user.cd15 > 0) user.cd15 -= 1
          if(user.spikes > 0) user.spikes -= 1
          if(user.cd16 > 0) user.cd16 -= 1
          if(user.cd21 > 0) user.cd21 -= 1
          if(user.cd22 > 0) user.cd22 -= 1
          if(user.cd31 > 0) user.cd31 -= 1
          if(user.cd32 > 0) user.cd32 -= 1
          if(user.cd33 > 0) user.cd33 -= 1
          if(user.cd34 > 0) user.cd34 -= 1
          if(user.cd35 > 0) user.cd35 -= 1
          if(user.cd36 > 0) user.cd36 -= 1
          if(user.porezka > 0) user.porezka -= 1
          if(user.cd37 > 0) user.cd37 -= 1
          if(u.cd11 > 0) u.cd11 -= 1
          if(u.del11 > 0) u.del11 -= 1
          if(u.cd12 > 0) u.cd12 -= 1
          if(u.del12 > 0) u.del12 -= 1
          if(u.cd13 > 0) u.cd13 -= 1
          if(u.cd14 > 0) u.cd14 -= 1
          if(u.cd15 > 0) u.cd15 -= 1
          if(u.spikes > 0) u.spikes -= 1
          if(u.cd16 > 0) u.cd16 -= 1
          if(u.clinch > 0) u.clinch = -1
          if(u.cd21 > 0) u.cd21 -= 1
          if(u.cd22 > 0) u.cd22 -= 1
          if(u.cd31 > 0) u.cd31 -= 1
          if(u.cd32 > 0) u.cd32 -= 1
          if(u.cd33 > 0) u.cd33 -= 1
          if(u.cd34 > 0) u.cd34 -= 1
          if(u.cd35 > 0) u.cd35 -= 1
          if(u.cd36 > 0) u.cd36 -= 1
          if(u.porezka > 0) u.porezka -= 1
          if(u.cd37 > 0) u.cd37 -= 1
          if(user.burn > 0) user.burn -= 1
          if(u.burn > 0) u.burn -= 1
          if(user.poison > 0) user.poison -= 1
          if(u.poison > 0) u.poison -= 1
          if(user.poisoning > 0) user.poisoning -= 1
          if(u.poisoning > 0) u.poisoning -= 1
          user.steps += 1
          u.steps += 1
          if (u.clas.id == 1) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `Умение заблокировано, так как у @id${u.id}(${u.nick}) активирван "клинч"\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "😈",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🛡",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🖤",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "❣",
                  color: "positive",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "☦",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "⚙",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "⚔",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
          }
          if (u.clas.id == 2) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `Умение заблокировано, так как у @id${u.id}(${u.nick}) активирван "клинч"\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "❄",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💥",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🍃",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔥",
                  color: "negative",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "💧",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "⚡",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
          }
          if (u.clas.id == 3) {
          vk.api.messages.send({
            peer_id: msg.peerId,
            message: `Умение заблокировано, так как у @id${u.id}(${u.nick}) активирван "клинч"\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
            disable_mentions: 1,
            keyboard: Keyboard.builder()
            .inline()
              .textButton({
                label: "🦠",
                color: "negative",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "🔪",
                color: "negative",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "💣",
                color: "primary",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "👁‍🗨",
                color: "primary",
                payload: "project RQ"
                })
            .row()
            .inline()
              .textButton({
                label: "🧬",
                color: "positive",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "🗡",
                color: "secondary",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "💉",
                color: "positive",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "АТК",
                color: "negative",
                payload: "project RQ"
                })
              })
          }
        }
        else {
          if(user.cd11 > 0) user.cd11 -= 1
          if(user.del11 > 0) user.del11 -= 1
          if(user.cd12 > 0) user.cd12 -= 1
          if(user.del12 > 0) user.del12 -= 1
          if(user.cd13 > 0) user.cd13 -= 1
          if(user.cd14 > 0) user.cd14 -= 1
          if(user.cd15 > 0) user.cd15 -= 1
          if(user.spikes > 0) user.spikes -= 1
          if(user.cd16 > 0) user.cd16 -= 1
          if(user.cd21 > 0) user.cd21 -= 1
          if(user.cd22 > 0) user.cd22 -= 1
          if(user.cd31 > 0) user.cd31 -= 1
          if(user.cd32 > 0) user.cd32 -= 1
          if(user.cd33 > 0) user.cd33 -= 1
          if(user.cd34 > 0) user.cd34 -= 1
          if(user.cd35 > 0) user.cd35 -= 1
          if(user.cd36 > 0) user.cd36 -= 1
          if(user.porezka > 0) user.porezka -= 1
          if(user.cd37 > 0) user.cd37 -= 1
          if(u.cd11 > 0) u.cd11 -= 1
          if(u.del11 > 0) u.del11 -= 1
          if(u.cd12 > 0) u.cd12 -= 1
          if(u.del12 > 0) u.del12 -= 1
          if(u.cd13 > 0) u.cd13 -= 1
          if(u.cd14 > 0) u.cd14 -= 1
          if(u.cd15 > 0) u.cd15 -= 1
          if(u.spikes > 0) u.spikes -= 1
          if(u.cd16 > 0) u.cd16 -= 1
          if(u.clinch > 0) u.clinch = -1
          if(u.cd21 > 0) u.cd21 -= 1
          if(u.cd22 > 0) u.cd22 -= 1
          if(u.cd31 > 0) u.cd31 -= 1
          if(u.cd32 > 0) u.cd32 -= 1
          if(u.cd33 > 0) u.cd33 -= 1
          if(u.cd34 > 0) u.cd34 -= 1
          if(u.cd35 > 0) u.cd35 -= 1
          if(u.cd36 > 0) u.cd36 -= 1
          if(u.porezka > 0) u.porezka -= 1
          if(u.cd37 > 0) u.cd37 -= 1
          if(user.burn > 0) user.burn -= 1
          if(u.burn > 0) u.burn -= 1
          if(user.poison > 0) user.poison -= 1
          if(u.poison > 0) u.poison -= 1
          if(user.poisoning > 0) user.poisoning -= 1
          if(u.poisoning > 0) u.poisoning -= 1
          u.control += 4
          user.cd21 = 10
          if (user.clas.id == 1) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${u.id}(${u.nick}) заморожен на 4 хода. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "😈",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🛡",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🖤",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "❣",
                  color: "positive",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "☦",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "⚙",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "⚔",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
          }
          if (user.clas.id == 2) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${u.id}(${u.nick}) заморожен на 4 хода. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "❄",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💥",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🍃",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔥",
                  color: "negative",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "💧",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "⚡",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
          }
          if (user.clas.id == 3) {
          vk.api.messages.send({
            peer_id: msg.peerId,
            message: `@id${u.id}(${u.nick}) заморожен на 4 хода. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
            disable_mentions: 1,
            keyboard: Keyboard.builder()
            .inline()
              .textButton({
                label: "🦠",
                color: "negative",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "🔪",
                color: "negative",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "💣",
                color: "primary",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "👁‍🗨",
                color: "primary",
                payload: "project RQ"
                })
            .row()
            .inline()
              .textButton({
                label: "🧬",
                color: "positive",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "🗡",
                color: "secondary",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "💉",
                color: "positive",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "АТК",
                color: "negative",
                payload: "project RQ"
                })
              })
            }
        }
      }
    }
    if(user.poison > 0) {
      var procent50 = 50
      var poison50 = u.duelatk * procent50 / 100
      user.duelhp -= poison50
      msg.send(`"${user.nick}" получает ⚔${poison50} урона`)
    }
    if(user.poisoning > 0) {
      var result1 = user.duelatk - user.dueldef
      user.duelhp -= result1
      msg.send(`"${user.nick}" получает ⚔${result1} урона от отравления`)
    }
    if(u.poisoning > 0) {
      var result2 = u.duelatk - u.dueldef
      u.duelhp -= result2
      msg.send(`"${u.nick}" наносит себе ⚔${result2} урона`)
    }
    if(user.poisoning == 0) {
      user.poisoning = -1
      var atk3 = user.duelatk * 3
      var heal1 = atk3 * 2
      user.duelhp += heal1
      if (user.duelhp > user.hp) {
      user.duelhp = user.hp
      }
      msg.send(`"${user.nick}" восстанавливает 💚${heal1} здоровья`)
    }
    if(u.poisoning == 0) {
      u.poisoning = -1
      var atk3 = u.duelatk * 3
      var heal2 = atk3 * 2
      u.duelhp += heal2
      if (u.duelhp > u.hp) {
      u.duelhp = u.hp
      }
      msg.send(`"${u.nick}" восстанавливает 💚${heal2} здоровья`)
    }
    var constuser = user
    user = u
    u = constuser
  })

  vk.updates.hear(/^(.*) 🍃$/i, msg => {
    if(user.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(u.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(user.steps > 100 || u.steps > 100) {
      user.duel = false
      u.duel = false
      u.predictionduel = false
      user.predictduel = false
      user.steps = 0
      u.steps = 0
      user.timer = 0
      u.timer = 0
      user.duelhp = 0
      user.duelatk = 0
      user.dueldef = 0
      u.duelhp = 0
      u.duelatk = 0
      u.dueldef = 0
      user.cd11 = 0,
      user.del11 = -1,
      user.cd12 = 0,
      user.del12 = -1,
      user.cd13 = 0,
      user.cd14 = 0,
      user.cd15 = 0,
      user.spikes = -1,
      user.cd16 = 0,
      user.clinch = -1,
      user.cd21 = 0,
      user.cd22 = 0,
      user.nakopleniye = 0,
      user.el1 = 0,
      user.burn = 0,
      user.el2 = 0,
      user.el3 = 0,
      user.cd31 = 0,
      user.poison = 0,
      user.cd32 = 0,
      user.cd33 = 0,
      user.cd34 = 0,
      user.invisible = false,
      user.cd35 = 0,
      user.cd36 = 0,
      user.cd37 = 0,
      user.poisoning = -1
      u.cd11 = 0,
      u.del11 = -1,
      u.cd12 = 0,
      u.del12 = -1,
      u.cd13 = 0,
      u.cd14 = 0,
      u.cd15 = 0,
      u.spikes = -1,
      u.cd16 = 0,
      u.clinch = -1,
      u.cd21 = 0,
      u.cd22 = 0,
      u.nakopleniye = 0,
      u.el1 = 0,
      u.burn = 0,
      u.el2 = 0,
      u.el3 = 0,
      u.cd31 = 0,
      u.poison = 0,
      u.cd32 = 0,
      u.cd33 = 0,
      u.cd34 = 0,
      u.invisible = false,
      u.cd35 = 0,
      u.cd36 = 0,
      u.cd37 = 0,
      u.poisoning = -1
      return msg.send ('Ходы дуэли превысили 100. Победитель не определён')
    }
    if(msg.senderId == u.id) {
      var constu = u
      u = user
      user = constu
    }
    if(user.cd22 > 0) return msg.send (`Умение перезаряжается`)
    if(user.clas.id != 2) return msg.send (`Умение не принадлежит вашему классу`)
    if(msg.$match[1] != '[club202302035|@eswep]') return
    if(msg.messagePayload != "project RQ") return
    if(u.nakopleniye > 0) {
      if(u.control > 0) u.nakopleniye = 0
    }
    if (user.steps % 2 == 0) {
      return msg.send ('Сейчас не твой ход')
    }
    else {
      if(user.control > 0) {
        msg.send (`Невозможно применить умение`);
      }
      else{
        if(user.duelatk > stopheal) {
          var stopheal = user.hp - user.duelhp
          if(u.control > 0) {
            if(user.cd11 > 0) user.cd11 -= 1
            if(user.del11 > 0) user.del11 -= 1
            if(user.cd12 > 0) user.cd12 -= 1
            if(user.del12 > 0) user.del12 -= 1
            if(user.cd13 > 0) user.cd13 -= 1
            if(user.cd14 > 0) user.cd14 -= 1
            if(user.cd15 > 0) user.cd15 -= 1
            if(user.spikes > 0) user.spikes -= 1
            if(user.cd16 > 0) user.cd16 -= 1
            if(user.cd21 > 0) user.cd21 -= 1
            if(user.cd22 > 0) user.cd22 -= 1
            if(user.cd31 > 0) user.cd31 -= 1
            if(user.cd32 > 0) user.cd32 -= 1
            if(user.cd33 > 0) user.cd33 -= 1
            if(user.cd34 > 0) user.cd34 -= 1
            if(user.cd35 > 0) user.cd35 -= 1
            if(user.cd36 > 0) user.cd36 -= 1
            if(user.porezka > 0) user.porezka -= 1
            if(user.cd37 > 0) user.cd37 -= 1
            if(u.cd11 > 0) u.cd11 -= 1
            if(u.del11 > 0) u.del11 -= 1
            if(u.cd12 > 0) u.cd12 -= 1
            if(u.del12 > 0) u.del12 -= 1
            if(u.cd13 > 0) u.cd13 -= 1
            if(u.cd14 > 0) u.cd14 -= 1
            if(u.cd15 > 0) u.cd15 -= 1
            if(u.spikes > 0) u.spikes -= 1
            if(u.cd16 > 0) u.cd16 -= 1
            if(u.clinch > 0) u.clinch = -1
            if(u.cd21 > 0) u.cd21 -= 1
            if(u.cd22 > 0) u.cd22 -= 1
            if(u.cd31 > 0) u.cd31 -= 1
            if(u.cd32 > 0) u.cd32 -= 1
            if(u.cd33 > 0) u.cd33 -= 1
            if(u.cd34 > 0) u.cd34 -= 1
            if(u.cd35 > 0) u.cd35 -= 1
            if(u.cd36 > 0) u.cd36 -= 1
            if(u.porezka > 0) u.porezka -= 1
            if(u.cd37 > 0) u.cd37 -= 1
            if(user.burn > 0) user.burn -= 1
            if(u.burn > 0) u.burn -= 1
            if(user.poison > 0) user.poison -= 1
            if(u.poison > 0) u.poison -= 1
            if(user.poisoning > 0) user.poisoning -= 1
            if(u.poisoning > 0) u.poisoning -= 1
            user.duelhp = user.hp
            user.cd22 = 5
            if(u.control == 2) {
              user.steps += 1
              u.steps += 1
              u.control -= 2
              if (u.clas.id == 1) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${user.id}(${user.nick}) восстанавливает себе 💚"${stopheal}" здоровья. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "😈",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🛡",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🖤",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "❣",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "☦",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚙",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚔",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 2) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${user.id}(${user.nick}) восстанавливает себе 💚"${stopheal}" здоровья. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "❄",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💥",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🍃",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔥",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "💧",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚡",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 3) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${user.id}(${user.nick}) восстанавливает себе 💚"${stopheal}" здоровья. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "🦠",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔪",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💣",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "👁‍🗨",
                    color: "primary",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "🧬",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🗡",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💉",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
              }
            }
            else {
              if(u.control > 2) {
                user.steps += 2
                u.steps += 2
                u.control -= 2
                if (user.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${user.id}(${user.nick}) восстанавливает себе 💚"${stopheal}" здоровья. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (user.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${user.id}(${user.nick}) восстанавливает себе 💚"${stopheal}" здоровья. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (user.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${user.id}(${user.nick}) восстанавливает себе 💚"${stopheal}" здоровья. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                }
              }
            }
          }
          else {
            if(user.cd11 > 0) user.cd11 -= 1
            if(user.del11 > 0) user.del11 -= 1
            if(user.cd12 > 0) user.cd12 -= 1
            if(user.del12 > 0) user.del12 -= 1
            if(user.cd13 > 0) user.cd13 -= 1
            if(user.cd14 > 0) user.cd14 -= 1
            if(user.cd15 > 0) user.cd15 -= 1
            if(user.spikes > 0) user.spikes -= 1
            if(user.cd16 > 0) user.cd16 -= 1
            if(user.cd21 > 0) user.cd21 -= 1
            if(user.cd22 > 0) user.cd22 -= 1
            if(user.cd31 > 0) user.cd31 -= 1
            if(user.cd32 > 0) user.cd32 -= 1
            if(user.cd33 > 0) user.cd33 -= 1
            if(user.cd34 > 0) user.cd34 -= 1
            if(user.cd35 > 0) user.cd35 -= 1
            if(user.cd36 > 0) user.cd36 -= 1
            if(user.porezka > 0) user.porezka -= 1
            if(user.cd37 > 0) user.cd37 -= 1
            if(u.cd11 > 0) u.cd11 -= 1
            if(u.del11 > 0) u.del11 -= 1
            if(u.cd12 > 0) u.cd12 -= 1
            if(u.del12 > 0) u.del12 -= 1
            if(u.cd13 > 0) u.cd13 -= 1
            if(u.cd14 > 0) u.cd14 -= 1
            if(u.cd15 > 0) u.cd15 -= 1
            if(u.spikes > 0) u.spikes -= 1
            if(u.cd16 > 0) u.cd16 -= 1
            if(u.clinch > 0) u.clinch = -1
            if(u.cd21 > 0) u.cd21 -= 1
            if(u.cd22 > 0) u.cd22 -= 1
            if(u.cd31 > 0) u.cd31 -= 1
            if(u.cd32 > 0) u.cd32 -= 1
            if(u.cd33 > 0) u.cd33 -= 1
            if(u.cd34 > 0) u.cd34 -= 1
            if(u.cd35 > 0) u.cd35 -= 1
            if(u.cd36 > 0) u.cd36 -= 1
            if(u.porezka > 0) u.porezka -= 1
            if(u.cd37 > 0) u.cd37 -= 1
            if(user.burn > 0) user.burn -= 1
            if(u.burn > 0) u.burn -= 1
            if(user.poison > 0) user.poison -= 1
            if(u.poison > 0) u.poison -= 1
            if(user.poisoning > 0) user.poisoning -= 1
            if(u.poisoning > 0) u.poisoning -= 1
            user.steps += 1
            u.steps += 1
            user.duelhp = user.hp
            user.cd22 = 5
            if (u.clas.id == 1) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${user.id}(${user.nick}) восстанавливает себе 💚"${stopheal}" здоровья. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "😈",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🛡",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🖤",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "❣",
                    color: "positive",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "☦",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚙",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚔",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 2) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${user.id}(${user.nick}) восстанавливает себе 💚"${stopheal}" здоровья. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "❄",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💥",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🍃",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔥",
                    color: "negative",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "💧",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚡",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 3) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${user.id}(${user.nick}) восстанавливает себе 💚"${stopheal}" здоровья. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "🦠",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔪",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💣",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "👁‍🗨",
                  color: "primary",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "🧬",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🗡",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💉",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
              }
          }
        }
        else{
          if(u.control > 0) {
            if(user.cd11 > 0) user.cd11 -= 1
            if(user.del11 > 0) user.del11 -= 1
            if(user.cd12 > 0) user.cd12 -= 1
            if(user.del12 > 0) user.del12 -= 1
            if(user.cd13 > 0) user.cd13 -= 1
            if(user.cd14 > 0) user.cd14 -= 1
            if(user.cd15 > 0) user.cd15 -= 1
            if(user.spikes > 0) user.spikes -= 1
            if(user.cd16 > 0) user.cd16 -= 1
            if(user.cd21 > 0) user.cd21 -= 1
            if(user.cd22 > 0) user.cd22 -= 1
            if(user.cd31 > 0) user.cd31 -= 1
            if(user.cd32 > 0) user.cd32 -= 1
            if(user.cd33 > 0) user.cd33 -= 1
            if(user.cd34 > 0) user.cd34 -= 1
            if(user.cd35 > 0) user.cd35 -= 1
            if(user.cd36 > 0) user.cd36 -= 1
            if(user.porezka > 0) user.porezka -= 1
            if(user.cd37 > 0) user.cd37 -= 1
            if(u.cd11 > 0) u.cd11 -= 1
            if(u.del11 > 0) u.del11 -= 1
            if(u.cd12 > 0) u.cd12 -= 1
            if(u.del12 > 0) u.del12 -= 1
            if(u.cd13 > 0) u.cd13 -= 1
            if(u.cd14 > 0) u.cd14 -= 1
            if(u.cd15 > 0) u.cd15 -= 1
            if(u.spikes > 0) u.spikes -= 1
            if(u.cd16 > 0) u.cd16 -= 1
            if(u.clinch > 0) u.clinch = -1
            if(u.cd21 > 0) u.cd21 -= 1
            if(u.cd22 > 0) u.cd22 -= 1
            if(u.cd31 > 0) u.cd31 -= 1
            if(u.cd32 > 0) u.cd32 -= 1
            if(u.cd33 > 0) u.cd33 -= 1
            if(u.cd34 > 0) u.cd34 -= 1
            if(u.cd35 > 0) u.cd35 -= 1
            if(u.cd36 > 0) u.cd36 -= 1
            if(u.porezka > 0) u.porezka -= 1
            if(u.cd37 > 0) u.cd37 -= 1
            if(user.burn > 0) user.burn -= 1
            if(u.burn > 0) u.burn -= 1
            if(user.poison > 0) user.poison -= 1
            if(u.poison > 0) u.poison -= 1
            if(user.poisoning > 0) user.poisoning -= 1
            if(u.poisoning > 0) u.poisoning -= 1
            user.duelhp += user.duelatk
            user.cd22 = 5
            if(u.control == 2) {
              user.steps += 1
              u.steps += 1
              u.control -= 2
              if (u.clas.id == 1) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${user.id}(${user.nick}) восстанавливает себе 💚"${user.duelatk}" здоровья. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "😈",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🛡",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🖤",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "❣",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "☦",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚙",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚔",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 2) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${user.id}(${user.nick}) восстанавливает себе 💚"${user.duelatk}" здоровья. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "❄",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💥",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🍃",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔥",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "💧",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚡",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 3) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${user.id}(${user.nick}) восстанавливает себе 💚"${user.duelatk}" здоровья. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "🦠",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔪",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💣",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "👁‍🗨",
                    color: "primary",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "🧬",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🗡",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💉",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
                }
            }
            else {
              if(u.control > 2) {
                user.steps += 2
                u.steps += 2
                u.control -= 2
                if (user.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${user.id}(${user.nick}) восстанавливает себе 💚"${user.duelatk}" здоровья. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (user.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${user.id}(${user.nick}) восстанавливает себе 💚"${user.duelatk}" здоровья. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (user.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${user.id}(${user.nick}) восстанавливает себе 💚"${user.duelatk}" здоровья. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
              }
            }
          }
          else {
            if(user.cd11 > 0) user.cd11 -= 1
            if(user.del11 > 0) user.del11 -= 1
            if(user.cd12 > 0) user.cd12 -= 1
            if(user.del12 > 0) user.del12 -= 1
            if(user.cd13 > 0) user.cd13 -= 1
            if(user.cd14 > 0) user.cd14 -= 1
            if(user.cd15 > 0) user.cd15 -= 1
            if(user.spikes > 0) user.spikes -= 1
            if(user.cd16 > 0) user.cd16 -= 1
            if(user.cd21 > 0) user.cd21 -= 1
            if(user.cd22 > 0) user.cd22 -= 1
            if(user.cd31 > 0) user.cd31 -= 1
            if(user.cd32 > 0) user.cd32 -= 1
            if(user.cd33 > 0) user.cd33 -= 1
            if(user.cd34 > 0) user.cd34 -= 1
            if(user.cd35 > 0) user.cd35 -= 1
            if(user.cd36 > 0) user.cd36 -= 1
            if(user.porezka > 0) user.porezka -= 1
            if(user.cd37 > 0) user.cd37 -= 1
            if(u.cd11 > 0) u.cd11 -= 1
            if(u.del11 > 0) u.del11 -= 1
            if(u.cd12 > 0) u.cd12 -= 1
            if(u.del12 > 0) u.del12 -= 1
            if(u.cd13 > 0) u.cd13 -= 1
            if(u.cd14 > 0) u.cd14 -= 1
            if(u.cd15 > 0) u.cd15 -= 1
            if(u.spikes > 0) u.spikes -= 1
            if(u.cd16 > 0) u.cd16 -= 1
            if(u.clinch > 0) u.clinch = -1
            if(u.cd21 > 0) u.cd21 -= 1
            if(u.cd22 > 0) u.cd22 -= 1
            if(u.cd31 > 0) u.cd31 -= 1
            if(u.cd32 > 0) u.cd32 -= 1
            if(u.cd33 > 0) u.cd33 -= 1
            if(u.cd34 > 0) u.cd34 -= 1
            if(u.cd35 > 0) u.cd35 -= 1
            if(u.cd36 > 0) u.cd36 -= 1
            if(u.porezka > 0) u.porezka -= 1
            if(u.cd37 > 0) u.cd37 -= 1
            if(user.burn > 0) user.burn -= 1
            if(u.burn > 0) u.burn -= 1
            if(user.poison > 0) user.poison -= 1
            if(u.poison > 0) u.poison -= 1
            if(user.poisoning > 0) user.poisoning -= 1
            if(u.poisoning > 0) u.poisoning -= 1
            user.steps += 1
            u.steps += 1
            user.duelhp += user.duelatk
            user.cd22 = 5
            if (u.clas.id == 1) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${user.id}(${user.nick}) восстанавливает себе 💚"${user.duelatk}" здоровья. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "😈",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🛡",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🖤",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "❣",
                    color: "positive",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "☦",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚙",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚔",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 2) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${user.id}(${user.nick}) восстанавливает себе 💚"${user.duelatk}" здоровья. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "❄",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💥",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🍃",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔥",
                    color: "negative",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "💧",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚡",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 3) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${user.id}(${user.nick}) восстанавливает себе 💚"${user.duelatk}" здоровья. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "🦠",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔪",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💣",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "👁‍🗨",
                  color: "primary",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "🧬",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🗡",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💉",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
            } 
          }
        }
      }
    }
    if(user.poison > 0) {
      var procent50 = 50
      var poison50 = u.duelatk * procent50 / 100
      user.duelhp -= poison50
      msg.send(`"${user.nick}" получает ⚔${poison50} урона`)
    }
    if(user.poisoning > 0) {
      var result1 = user.duelatk - user.dueldef
      user.duelhp -= result1
      msg.send(`"${user.nick}" получает ⚔${result1} урона от отравления`)
    }
    if(u.poisoning > 0) {
      var result2 = u.duelatk - u.dueldef
      u.duelhp -= result2
      msg.send(`"${u.nick}" наносит себе ⚔${result2} урона`)
    }
    if(user.poisoning == 0) {
      user.poisoning = -1
      var atk3 = user.duelatk * 3
      var heal1 = atk3 * 2
      user.duelhp += heal1
      if (user.duelhp > user.hp) {
      user.duelhp = user.hp
      }
      msg.send(`"${user.nick}" восстанавливает 💚${heal1} здоровья`)
    }
    if(u.poisoning == 0) {
      u.poisoning = -1
      var atk3 = u.duelatk * 3
      var heal2 = atk3 * 2
      u.duelhp += heal2
      if (u.duelhp > u.hp) {
      u.duelhp = u.hp
      }
      msg.send(`"${u.nick}" восстанавливает 💚${heal2} здоровья`)
    }
    var constuser = user
    user = u
    u = constuser
  })

  vk.updates.hear(/^(.*) 💥$/i, msg => {
    if(user.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(u.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(user.steps > 100 || u.steps > 100) {
      user.duel = false
      u.duel = false
      u.predictionduel = false
      user.predictduel = false
      user.steps = 0
      u.steps = 0
      user.timer = 0
      u.timer = 0
      user.duelhp = 0
      user.duelatk = 0
      user.dueldef = 0
      u.duelhp = 0
      u.duelatk = 0
      u.dueldef = 0
      user.cd11 = 0,
      user.del11 = -1,
      user.cd12 = 0,
      user.del12 = -1,
      user.cd13 = 0,
      user.cd14 = 0,
      user.cd15 = 0,
      user.spikes = -1,
      user.cd16 = 0,
      user.clinch = -1,
      user.cd21 = 0,
      user.cd22 = 0,
      user.nakopleniye = 0,
      user.el1 = 0,
      user.burn = 0,
      user.el2 = 0,
      user.el3 = 0,
      user.cd31 = 0,
      user.poison = 0,
      user.cd32 = 0,
      user.cd33 = 0,
      user.cd34 = 0,
      user.invisible = false,
      user.cd35 = 0,
      user.cd36 = 0,
      user.cd37 = 0,
      user.poisoning = -1
      u.cd11 = 0,
      u.del11 = -1,
      u.cd12 = 0,
      u.del12 = -1,
      u.cd13 = 0,
      u.cd14 = 0,
      u.cd15 = 0,
      u.spikes = -1,
      u.cd16 = 0,
      u.clinch = -1,
      u.cd21 = 0,
      u.cd22 = 0,
      u.nakopleniye = 0,
      u.el1 = 0,
      u.burn = 0,
      u.el2 = 0,
      u.el3 = 0,
      u.cd31 = 0,
      u.poison = 0,
      u.cd32 = 0,
      u.cd33 = 0,
      u.cd34 = 0,
      u.invisible = false,
      u.cd35 = 0,
      u.cd36 = 0,
      u.cd37 = 0,
      u.poisoning = -1
      return msg.send ('Ходы дуэли превысили 100. Победитель не определён')
    }
    if(msg.senderId == u.id) {
      var constu = u
      u = user
      user = constu
    }
    if(user.clas.id != 2) return msg.send (`Умение не принадлежит вашему классу`)
    if(msg.$match[1] != '[club202302035|@eswep]') return
    if(msg.messagePayload != "project RQ") return
    if(u.nakopleniye > 0) {
      if(u.control > 0) u.nakopleniye = 0
    }
    if (user.steps % 2 == 0) {
      return msg.send ('Сейчас не твой ход')
    }
    else {
      if(user.control > 0) {
        msg.send (`Невозможно применить умение`);
      }
      else{
        if(u.clinch > 0) {
          if(user.duelatk < u.dueldef) {
            if(user.cd11 > 0) user.cd11 -= 1
            if(user.del11 > 0) user.del11 -= 1
            if(user.cd12 > 0) user.cd12 -= 1
            if(user.del12 > 0) user.del12 -= 1
            if(user.cd13 > 0) user.cd13 -= 1
            if(user.cd14 > 0) user.cd14 -= 1
            if(user.cd15 > 0) user.cd15 -= 1
            if(user.spikes > 0) user.spikes -= 1
            if(user.cd16 > 0) user.cd16 -= 1
            if(user.cd21 > 0) user.cd21 -= 1
            if(user.cd22 > 0) user.cd22 -= 1
            if(user.cd31 > 0) user.cd31 -= 1
            if(user.cd32 > 0) user.cd32 -= 1
            if(user.cd33 > 0) user.cd33 -= 1
            if(user.cd34 > 0) user.cd34 -= 1
            if(user.cd35 > 0) user.cd35 -= 1
            if(user.cd36 > 0) user.cd36 -= 1
            if(user.porezka > 0) user.porezka -= 1
            if(user.cd37 > 0) user.cd37 -= 1
            if(u.cd11 > 0) u.cd11 -= 1
            if(u.del11 > 0) u.del11 -= 1
            if(u.cd12 > 0) u.cd12 -= 1
            if(u.del12 > 0) u.del12 -= 1
            if(u.cd13 > 0) u.cd13 -= 1
            if(u.cd14 > 0) u.cd14 -= 1
            if(u.cd15 > 0) u.cd15 -= 1
            if(u.spikes > 0) u.spikes -= 1
            if(u.cd16 > 0) u.cd16 -= 1
            if(u.clinch > 0) u.clinch = -1
            if(u.cd21 > 0) u.cd21 -= 1
            if(u.cd22 > 0) u.cd22 -= 1
            if(u.cd31 > 0) u.cd31 -= 1
            if(u.cd32 > 0) u.cd32 -= 1
            if(u.cd33 > 0) u.cd33 -= 1
            if(u.cd34 > 0) u.cd34 -= 1
            if(u.cd35 > 0) u.cd35 -= 1
            if(u.cd36 > 0) u.cd36 -= 1
            if(u.porezka > 0) u.porezka -= 1
            if(u.cd37 > 0) u.cd37 -= 1
            if(user.burn > 0) user.burn -= 1
            if(u.burn > 0) u.burn -= 1
            if(user.poison > 0) user.poison -= 1
            if(u.poison > 0) u.poison -= 1
            if(user.poisoning > 0) user.poisoning -= 1
            if(u.poisoning > 0) u.poisoning -= 1
            user.steps += 1
            u.steps += 1
            if (u.clas.id == 1) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, так как активировал "клинч", @id${user.id}(${user.nick}) получает ⚔0 урона, так как атака @id${user.id}(${user.nick}) меньше защиты @id${u.id}(${u.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "😈",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🛡",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🖤",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "❣",
                    color: "positive",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "☦",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚙",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚔",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 2) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, так как активировал "клинч", @id${user.id}(${user.nick}) получает ⚔0 урона, так как атака @id${user.id}(${user.nick}) меньше защиты @id${u.id}(${u.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "❄",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💥",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🍃",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔥",
                    color: "negative",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "💧",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚡",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 3) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${u.id}(${u.nick}) не получает урона, так как активировал "клинч", @id${user.id}(${user.nick}) получает ⚔0 урона, так как атака @id${user.id}(${user.nick}) меньше защиты @id${u.id}(${u.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "🦠",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔪",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💣",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "👁‍🗨",
                  color: "primary",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "🧬",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🗡",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💉",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
              }
            if(user.del11 == 0) {
              var hp = user.hp
              var atk = user.atk
              var procent = 20
              var resulthp = hp / 100 * procent
              var resultatk = atk / 100 * procent
              user.duelhp -= resulthp
              user.duelatk -= resultatk
              user.del11 = -1
               
            }
            if(u.del11 == 0) {
              var hp1 = u.hp
              var atk1 = u.atk
              var procent = 20
              var resulthp1 = hp1 / 100 * procent
              var resultatk1 = atk1 / 100 * procent
              u.duelhp -= resulthp1
              u.duelatk -= resultatk1
              u.del11 = -1
               
            }
            if(user.del12 == 0) {
              var def = user.def
              var procent = 20
               var resultdef = def / 100 * procent
              user.dueldef -= resultdef
              user.del12 = -1
               
            }
            if(u.del12 == 0) {
              var def1 = u.def
              var procent = 20
              var resultdef1 = def1 / 100 * procent
              u.dueldef -= resultdef1
              u.del12 = -1
               
            }
            if(user.spikes == 0) {
              user.spikes -= 1
               
            }
            if(u.spikes == 0) {
              u.spikes -= 1
               
            }
          }
          else {
            var atk = user.duelatk
            var udef = u.dueldef
            var result = atk - udef
            user.duelhp -= result
            if(user.cd11 > 0) user.cd11 -= 1
            if(user.del11 > 0) user.del11 -= 1
            if(user.cd12 > 0) user.cd12 -= 1
            if(user.del12 > 0) user.del12 -= 1
            if(user.cd13 > 0) user.cd13 -= 1
            if(user.cd14 > 0) user.cd14 -= 1
            if(user.cd15 > 0) user.cd15 -= 1
            if(user.spikes > 0) user.spikes -= 1
            if(user.cd16 > 0) user.cd16 -= 1
            if(user.cd21 > 0) user.cd21 -= 1
            if(user.cd22 > 0) user.cd22 -= 1
            if(user.cd31 > 0) user.cd31 -= 1
            if(user.cd32 > 0) user.cd32 -= 1
            if(user.cd33 > 0) user.cd33 -= 1
            if(user.cd34 > 0) user.cd34 -= 1
            if(user.cd35 > 0) user.cd35 -= 1
            if(user.cd36 > 0) user.cd36 -= 1
            if(user.porezka > 0) user.porezka -= 1
            if(user.cd37 > 0) user.cd37 -= 1
            if(u.cd11 > 0) u.cd11 -= 1
            if(u.del11 > 0) u.del11 -= 1
            if(u.cd12 > 0) u.cd12 -= 1
            if(u.del12 > 0) u.del12 -= 1
            if(u.cd13 > 0) u.cd13 -= 1
            if(u.cd14 > 0) u.cd14 -= 1
            if(u.cd15 > 0) u.cd15 -= 1
            if(u.spikes > 0) u.spikes -= 1
            if(u.cd16 > 0) u.cd16 -= 1
            if(u.clinch > 0) u.clinch = -1
            if(u.cd21 > 0) u.cd21 -= 1
            if(u.cd22 > 0) u.cd22 -= 1
            if(u.cd31 > 0) u.cd31 -= 1
            if(u.cd32 > 0) u.cd32 -= 1
            if(u.cd33 > 0) u.cd33 -= 1
            if(u.cd34 > 0) u.cd34 -= 1
            if(u.cd35 > 0) u.cd35 -= 1
            if(u.cd36 > 0) u.cd36 -= 1
            if(u.porezka > 0) u.porezka -= 1
            if(u.cd37 > 0) u.cd37 -= 1
            if(user.burn > 0) user.burn -= 1
            if(u.burn > 0) u.burn -= 1
            if(user.poison > 0) user.poison -= 1
            if(u.poison > 0) u.poison -= 1
            if(user.poisoning > 0) user.poisoning -= 1
            if(u.poisoning > 0) u.poisoning -= 1
            user.steps += 1
            u.steps += 1
            if (u.clas.id == 1) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, @id${user.id}(${user.nick}) получает ⚔${result} урона, так как @id${u.id}(${u.nick}) активировал "клинч". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "😈",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🛡",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🖤",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "❣",
                    color: "positive",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "☦",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚙",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚔",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 2) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, @id${user.id}(${user.nick}) получает ⚔${result} урона, так как @id${u.id}(${u.nick}) активировал "клинч". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "❄",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💥",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🍃",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔥",
                    color: "negative",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "💧",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚡",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 3) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${u.id}(${u.nick}) не получает урона, @id${user.id}(${user.nick}) получает ⚔${result} урона, так как @id${u.id}(${u.nick}) активировал "клинч". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "🦠",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔪",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💣",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "👁‍🗨",
                  color: "primary",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "🧬",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🗡",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💉",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
              }
              if(user.duelhp < 1) {
                var plata2 = user.money
                var procentplata = 10
                var resultplata2 = plata2 / 100 * procentplata
                let num27 = resultplata2
                var finalplata = num27.toFixed(0)
                var finalplata2 = Number(finalplata)
                user.money -= finalplata2
                u.money += finalplata2
                user.duel = false
                u.duel = false
                u.predictionduel = false
                user.predictduel = false
                user.steps = 0
                u.steps = 0
                user.timer = 0
                u.timer = 0
                user.duelhp = 0
                user.duelatk = 0
                user.dueldef = 0
                u.duelhp = 0
                u.duelatk = 0
                u.dueldef = 0
                user.cd11 = 0,
                user.del11 = -1,
                user.cd12 = 0,
                user.del12 = -1,
                user.cd13 = 0,
                user.cd14 = 0,
                user.cd15 = 0,
                user.spikes = -1,
                user.cd16 = 0,
                user.clinch = -1,
                user.cd21 = 0,
                user.cd22 = 0,
                user.nakopleniye = 0,
                user.el1 = 0,
                user.burn = 0,
                user.el2 = 0,
                user.el3 = 0,
                user.cd31 = 0,
                user.poison = 0,
                user.cd32 = 0,
                user.cd33 = 0,
                user.cd34 = 0,
                user.invisible = false,
                user.cd35 = 0,
                user.cd36 = 0,
                user.cd37 = 0,
                user.poisoning = -1
                u.cd11 = 0,
                u.del11 = -1,
                u.cd12 = 0,
                u.del12 = -1,
                u.cd13 = 0,
                u.cd14 = 0,
                u.cd15 = 0,
                u.spikes = -1,
                u.cd16 = 0,
                u.clinch = -1,
                u.cd21 = 0,
                u.cd22 = 0,
                u.nakopleniye = 0,
                u.el1 = 0,
                u.burn = 0,
                u.el2 = 0,
                u.el3 = 0,
                u.cd31 = 0,
                u.poison = 0,
                u.cd32 = 0,
                u.cd33 = 0,
                u.cd34 = 0,
                u.invisible = false,
                u.cd35 = 0,
                u.cd36 = 0,
                u.cd37 = 0,
                u.poisoning = -1
                msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                var constuser = user
                user = u
                u = constuser
              }
              else {
                if(u.duelhp < 1) {
                  var plata2 = user.money
                  var procentplata = 10
                  var resultplata2 = plata2 / 100 * procentplata
                  let num27 = resultplata2
                  var finalplata = num27.toFixed(0)
                  var finalplata2 = Number(finalplata)
                  u.money -= finalplata2
                  user.money += finalplata2
                  user.duel = false
                  u.duel = false
                  u.predictionduel = false
                  user.predictduel = false
                  user.steps = 0
                  u.steps = 0
                  user.timer = 0
                  u.timer = 0
                  user.duelhp = 0
                  user.duelatk = 0
                  user.dueldef = 0
                  u.duelhp = 0
                  u.duelatk = 0
                  u.dueldef = 0
                  user.cd11 = 0,
                  user.del11 = -1,
                  user.cd12 = 0,
                  user.del12 = -1,
                  user.cd13 = 0,
                  user.cd14 = 0,
                  user.cd15 = 0,
                  user.spikes = -1,
                  user.cd16 = 0,
                  user.clinch = -1,
                  user.cd21 = 0,
                  user.cd22 = 0,
                  user.nakopleniye = 0,
                  user.el1 = 0,
                  user.burn = 0,
                  user.el2 = 0,
                  user.el3 = 0,
                  user.cd31 = 0,
                  user.poison = 0,
                  user.cd32 = 0,
                  user.cd33 = 0,
                  user.cd34 = 0,
                  user.invisible = false,
                  user.cd35 = 0,
                  user.cd36 = 0,
                  user.cd37 = 0,
                  user.poisoning = -1
                  u.cd11 = 0,
                  u.del11 = -1,
                  u.cd12 = 0,
                  u.del12 = -1,
                  u.cd13 = 0,
                  u.cd14 = 0,
                  u.cd15 = 0,
                  u.spikes = -1,
                  u.cd16 = 0,
                  u.clinch = -1,
                  u.cd21 = 0,
                  u.cd22 = 0,
                  u.nakopleniye = 0,
                  u.el1 = 0,
                  u.burn = 0,
                  u.el2 = 0,
                  u.el3 = 0,
                  u.cd31 = 0,
                  u.poison = 0,
                  u.cd32 = 0,
                  u.cd33 = 0,
                  u.cd34 = 0,
                  u.invisible = false,
                  u.cd35 = 0,
                  u.cd36 = 0,
                  u.cd37 = 0,
                  u.poisoning = -1
                  msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                  var constuser = user
                  user = u
                  u = constuser
                }
              }
            if(user.del11 == 0) {
              var hp = user.hp
              var atk = user.atk
              var procent = 20
              var resulthp = hp / 100 * procent
              var resultatk = atk / 100 * procent
              user.duelhp -= resulthp
              user.duelatk -= resultatk
              user.del11 = -1
               
            }
            if(u.del11 == 0) {
              var hp1 = u.hp
              var atk1 = u.atk
              var procent = 20
              var resulthp1 = hp1 / 100 * procent
              var resultatk1 = atk1 / 100 * procent
              u.duelhp -= resulthp1
              u.duelatk -= resultatk1
              u.del11 = -1
               
            }
            if(user.del12 == 0) {
              var def = user.def
              var procent = 20
               var resultdef = def / 100 * procent
              user.dueldef -= resultdef
              user.del12 = -1
               
            }
            if(u.del12 == 0) {
              var def1 = u.def
              var procent = 20
              var resultdef1 = def1 / 100 * procent
              u.dueldef -= resultdef1
              u.del12 = -1
               
            }
            if(user.spikes == 0) {
              user.spikes -= 1
               
            }
            if(u.spikes == 0) {
              u.spikes -= 1
               
            }
          }
        }
        else {
          if(u.spikes > 0) {
            if(u.control > 0) {
              if(u.dueldef > user.duelatk) {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                user.nakopleniye += 1
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
              var atk = user.duelatk
              var udef = u.dueldef
              var result = atk - udef
              var spikes = result / 2
              u.duelhp -= result
              user.duelhp -= spikes
              user.nakopleniye += 1
              if(user.cd11 > 0) user.cd11 -= 2
              if(user.del11 > 0) user.del11 -= 2
              if(user.cd12 > 0) user.cd12 -= 2
              if(user.del12 > 0) user.del12 -= 2
              if(user.cd13 > 0) user.cd13 -= 2
              if(user.cd14 > 0) user.cd14 -= 2
              if(user.cd15 > 0) user.cd15 -= 2
              if(user.spikes > 0) user.spikes -= 2
              if(user.cd16 > 0) user.cd16 -= 2
              if(user.cd21 > 0) user.cd21 -= 2
              if(user.cd22 > 0) user.cd22 -= 2
              if(user.cd31 > 0) user.cd31 -= 2
              if(user.cd32 > 0) user.cd32 -= 2
              if(user.cd33 > 0) user.cd33 -= 2
              if(user.cd34 > 0) user.cd34 -= 2
              if(user.cd35 > 0) user.cd35 -= 2
              if(user.cd36 > 0) user.cd36 -= 2
              if(user.porezka > 0) user.porezka -= 2
              if(user.cd37 > 0) user.cd37 -= 2
              if(u.cd11 > 0) u.cd11 -= 2
              if(u.del11 > 0) u.del11 -= 2
              if(u.cd12 > 0) u.cd12 -= 2
              if(u.del12 > 0) u.del12 -= 2
              if(u.cd13 > 0) u.cd13 -= 2
              if(u.cd14 > 0) u.cd14 -= 2
              if(u.cd15 > 0) u.cd15 -= 2
              if(u.spikes > 0) u.spikes -= 2
              if(u.cd16 > 0) u.cd16 -= 2
              if(u.clinch > 0) u.clinch = -1
              if(u.cd21 > 0) u.cd21 -= 2
              if(u.cd22 > 0) u.cd22 -= 2
              if(u.cd31 > 0) u.cd31 -= 2
              if(u.cd32 > 0) u.cd32 -= 2
              if(u.cd33 > 0) u.cd33 -= 2
              if(u.cd34 > 0) u.cd34 -= 2
              if(u.cd35 > 0) u.cd35 -= 2
              if(u.cd36 > 0) u.cd36 -= 2
              if(u.porezka > 0) u.porezka -= 2
              if(u.cd37 > 0) u.cd37 -= 2
              if(user.burn > 0) user.burn -= 2
              if(u.burn > 0) u.burn -= 2
              if(user.poison > 0) user.poison -= 2
              if(u.poison > 0) u.poison -= 2
              if(user.poisoning > 0) user.poisoning -= 2
              if(u.poisoning > 0) u.poisoning -= 2
              if(u.control == 2) {
                user.steps += 1
                u.steps += 1
                u.control -= 2
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
              }
              else {
                if(u.control > 2) {
                  user.steps += 2
                  u.steps += 2
                  u.control -= 2
                  if (user.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${user.id}(${user.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${user.id}(${user.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${user.id}(${user.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
              }
                if(user.duelhp < 1) {
                  var plata2 = user.money
                  var procentplata = 10
                  var resultplata2 = plata2 / 100 * procentplata
                  let num27 = resultplata2
                  var finalplata = num27.toFixed(0)
                  var finalplata2 = Number(finalplata)
                  user.money -= finalplata2
                  u.money += finalplata2
                  user.duel = false
                  u.duel = false
                  u.predictionduel = false
                  user.predictduel = false
                  user.steps = 0
                  u.steps = 0
                  user.timer = 0
                  u.timer = 0
                  user.duelhp = 0
                  user.duelatk = 0
                  user.dueldef = 0
                  u.duelhp = 0
                  u.duelatk = 0
                  u.dueldef = 0
                  user.cd11 = 0,
                  user.del11 = -1,
                  user.cd12 = 0,
                  user.del12 = -1,
                  user.cd13 = 0,
                  user.cd14 = 0,
                  user.cd15 = 0,
                  user.spikes = -1,
                  user.cd16 = 0,
                  user.clinch = -1,
                  user.cd21 = 0,
                  user.cd22 = 0,
                  user.nakopleniye = 0,
                  user.el1 = 0,
                  user.burn = 0,
                  user.el2 = 0,
                  user.el3 = 0,
                  user.cd31 = 0,
                  user.poison = 0,
                  user.cd32 = 0,
                  user.cd33 = 0,
                  user.cd34 = 0,
                  user.invisible = false,
                  user.cd35 = 0,
                  user.cd36 = 0,
                  user.cd37 = 0,
                  user.poisoning = -1
                  u.cd11 = 0,
                  u.del11 = -1,
                  u.cd12 = 0,
                  u.del12 = -1,
                  u.cd13 = 0,
                  u.cd14 = 0,
                  u.cd15 = 0,
                  u.spikes = -1,
                  u.cd16 = 0,
                  u.clinch = -1,
                  u.cd21 = 0,
                  u.cd22 = 0,
                  u.nakopleniye = 0,
                  u.el1 = 0,
                  u.burn = 0,
                  u.el2 = 0,
                  u.el3 = 0,
                  u.cd31 = 0,
                  u.poison = 0,
                  u.cd32 = 0,
                  u.cd33 = 0,
                  u.cd34 = 0,
                  u.invisible = false,
                  u.cd35 = 0,
                  u.cd36 = 0,
                  u.cd37 = 0,
                  u.poisoning = -1
                  msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                  var constuser = user
                  user = u
                  u = constuser
                }
                else {
                  if(u.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    u.money -= finalplata2
                    user.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                }
              if(user.del11 == 0) {
                var hp = user.hp
                var atk = user.atk
                var procent = 20
                var resulthp = hp / 100 * procent
                var resultatk = atk / 100 * procent
                user.duelhp -= resulthp
                user.duelatk -= resultatk
                user.del11 = -1
                 
              }
              if(u.del11 == 0) {
                var hp1 = u.hp
                var atk1 = u.atk
                var procent = 20
                var resulthp1 = hp1 / 100 * procent
                var resultatk1 = atk1 / 100 * procent
                u.duelhp -= resulthp1
                u.duelatk -= resultatk1
                u.del11 = -1
                 
              }
              if(user.del12 == 0) {
                var def = user.def
                var procent = 20
                 var resultdef = def / 100 * procent
                user.dueldef -= resultdef
                user.del12 = -1
                 
              }
              if(u.del12 == 0) {
                var def1 = u.def
                var procent = 20
                var resultdef1 = def1 / 100 * procent
                u.dueldef -= resultdef1
                u.del12 = -1
                 
              }
              if(user.spikes == 0) {
                user.spikes -= 1
                 
              }
              if(u.spikes == 0) {
                u.spikes -= 1
                 
              }
              }
            }
            else {
              if(user.duelatk < u.dueldef) {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                user.nakopleniye += 1
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
                var atk = user.duelatk
                var udef = u.dueldef
                var result = atk - udef
                var spikes = result / 2
                u.duelhp -= result
                user.duelhp -= spikes
                user.nakopleniye += 1
                if(user.cd11 > 0) user.cd11 -= 1
                if(user.del11 > 0) user.del11 -= 1
                if(user.cd12 > 0) user.cd12 -= 1
                if(user.del12 > 0) user.del12 -= 1
                if(user.cd13 > 0) user.cd13 -= 1
                if(user.cd14 > 0) user.cd14 -= 1
                if(user.cd15 > 0) user.cd15 -= 1
                if(user.spikes > 0) user.spikes -= 1
                if(user.cd16 > 0) user.cd16 -= 1
                if(user.cd21 > 0) user.cd21 -= 1
                if(user.cd22 > 0) user.cd22 -= 1
                if(user.cd31 > 0) user.cd31 -= 1
                if(user.cd32 > 0) user.cd32 -= 1
                if(user.cd33 > 0) user.cd33 -= 1
                if(user.cd34 > 0) user.cd34 -= 1
                if(user.cd35 > 0) user.cd35 -= 1
                if(user.cd36 > 0) user.cd36 -= 1
                if(user.porezka > 0) user.porezka -= 1
                if(user.cd37 > 0) user.cd37 -= 1
                if(u.cd11 > 0) u.cd11 -= 1
                if(u.del11 > 0) u.del11 -= 1
                if(u.cd12 > 0) u.cd12 -= 1
                if(u.del12 > 0) u.del12 -= 1
                if(u.cd13 > 0) u.cd13 -= 1
                if(u.cd14 > 0) u.cd14 -= 1
                if(u.cd15 > 0) u.cd15 -= 1
                if(u.spikes > 0) u.spikes -= 1
                if(u.cd16 > 0) u.cd16 -= 1
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 1
                if(u.cd22 > 0) u.cd22 -= 1
                if(u.cd31 > 0) u.cd31 -= 1
                if(u.cd32 > 0) u.cd32 -= 1
                if(u.cd33 > 0) u.cd33 -= 1
                if(u.cd34 > 0) u.cd34 -= 1
                if(u.cd35 > 0) u.cd35 -= 1
                if(u.cd36 > 0) u.cd36 -= 1
                if(u.porezka > 0) u.porezka -= 1
                if(u.cd37 > 0) u.cd37 -= 1
                if(user.burn > 0) user.burn -= 1
                if(u.burn > 0) u.burn -= 1
                if(user.poison > 0) user.poison -= 1
                if(u.poison > 0) u.poison -= 1
                if(user.poisoning > 0) user.poisoning -= 1
                if(u.poisoning > 0) u.poisoning -= 1
                user.steps += 1
                u.steps += 1
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
                  if(user.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    user.money -= finalplata2
                    u.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                  else {
                    if(u.duelhp < 1) {
                      var plata2 = user.money
                      var procentplata = 10
                      var resultplata2 = plata2 / 100 * procentplata
                      let num27 = resultplata2
                      var finalplata = num27.toFixed(0)
                      var finalplata2 = Number(finalplata)
                      u.money -= finalplata2
                      user.money += finalplata2
                      user.duel = false
                      u.duel = false
                      u.predictionduel = false
                      user.predictduel = false
                      user.steps = 0
                      u.steps = 0
                      user.timer = 0
                      u.timer = 0
                      user.duelhp = 0
                      user.duelatk = 0
                      user.dueldef = 0
                      u.duelhp = 0
                      u.duelatk = 0
                      u.dueldef = 0
                      user.cd11 = 0,
                      user.del11 = -1,
                      user.cd12 = 0,
                      user.del12 = -1,
                      user.cd13 = 0,
                      user.cd14 = 0,
                      user.cd15 = 0,
                      user.spikes = -1,
                      user.cd16 = 0,
                      user.clinch = -1,
                      user.cd21 = 0,
                      user.cd22 = 0,
                      user.nakopleniye = 0,
                      user.el1 = 0,
                      user.burn = 0,
                      user.el2 = 0,
                      user.el3 = 0,
                      user.cd31 = 0,
                      user.poison = 0,
                      user.cd32 = 0,
                      user.cd33 = 0,
                      user.cd34 = 0,
                      user.invisible = false,
                      user.cd35 = 0,
                      user.cd36 = 0,
                      user.cd37 = 0,
                      user.poisoning = -1
                      u.cd11 = 0,
                      u.del11 = -1,
                      u.cd12 = 0,
                      u.del12 = -1,
                      u.cd13 = 0,
                      u.cd14 = 0,
                      u.cd15 = 0,
                      u.spikes = -1,
                      u.cd16 = 0,
                      u.clinch = -1,
                      u.cd21 = 0,
                      u.cd22 = 0,
                      u.nakopleniye = 0,
                      u.el1 = 0,
                      u.burn = 0,
                      u.el2 = 0,
                      u.el3 = 0,
                      u.cd31 = 0,
                      u.poison = 0,
                      u.cd32 = 0,
                      u.cd33 = 0,
                      u.cd34 = 0,
                      u.invisible = false,
                      u.cd35 = 0,
                      u.cd36 = 0,
                      u.cd37 = 0,
                      u.poisoning = -1
                      msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                      var constuser = user
                      user = u
                      u = constuser
                    }
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
            }
          }
          else {
            if(u.control > 0) {
              if(u.dueldef > user.duelatk) {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                user.nakopleniye += 1
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
                var atk = user.duelatk
                var udef = u.dueldef
                var result = atk - udef
                u.duelhp -= result
                user.nakopleniye += 1
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                  }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                    }
                  }
                }
                if(user.duelhp < 1) {
                  var plata2 = user.money
                  var procentplata = 10
                  var resultplata2 = plata2 / 100 * procentplata
                  let num27 = resultplata2
                  var finalplata = num27.toFixed(0)
                  var finalplata2 = Number(finalplata)
                  user.money -= finalplata2
                  u.money += finalplata2
                  user.duel = false
                  u.duel = false
                  u.predictionduel = false
                  user.predictduel = false
                  user.steps = 0
                  u.steps = 0
                  user.timer = 0
                  u.timer = 0
                  user.duelhp = 0
                  user.duelatk = 0
                  user.dueldef = 0
                  u.duelhp = 0
                  u.duelatk = 0
                  u.dueldef = 0
                  user.cd11 = 0,
                  user.del11 = -1,
                  user.cd12 = 0,
                  user.del12 = -1,
                  user.cd13 = 0,
                  user.cd14 = 0,
                  user.cd15 = 0,
                  user.spikes = -1,
                  user.cd16 = 0,
                  user.clinch = -1,
                  user.cd21 = 0,
                  user.cd22 = 0,
                  user.nakopleniye = 0,
                  user.el1 = 0,
                  user.burn = 0,
                  user.el2 = 0,
                  user.el3 = 0,
                  user.cd31 = 0,
                  user.poison = 0,
                  user.cd32 = 0,
                  user.cd33 = 0,
                  user.cd34 = 0,
                  user.invisible = false,
                  user.cd35 = 0,
                  user.cd36 = 0,
                  user.cd37 = 0,
                  user.poisoning = -1
                  u.cd11 = 0,
                  u.del11 = -1,
                  u.cd12 = 0,
                  u.del12 = -1,
                  u.cd13 = 0,
                  u.cd14 = 0,
                  u.cd15 = 0,
                  u.spikes = -1,
                  u.cd16 = 0,
                  u.clinch = -1,
                  u.cd21 = 0,
                  u.cd22 = 0,
                  u.nakopleniye = 0,
                  u.el1 = 0,
                  u.burn = 0,
                  u.el2 = 0,
                  u.el3 = 0,
                  u.cd31 = 0,
                  u.poison = 0,
                  u.cd32 = 0,
                  u.cd33 = 0,
                  u.cd34 = 0,
                  u.invisible = false,
                  u.cd35 = 0,
                  u.cd36 = 0,
                  u.cd37 = 0,
                  u.poisoning = -1
                  msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                  var constuser = user
                  user = u
                  u = constuser
                }
                else {
                  if(u.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    u.money -= finalplata2
                    user.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
            }
            else {
              if(u.dueldef > user.duelatk) {
                if(user.cd11 > 0) user.cd11 -= 1
                if(user.del11 > 0) user.del11 -= 1
                if(user.cd12 > 0) user.cd12 -= 1
                if(user.del12 > 0) user.del12 -= 1
                if(user.cd13 > 0) user.cd13 -= 1
                if(user.cd14 > 0) user.cd14 -= 1
                if(user.cd15 > 0) user.cd15 -= 1
                if(user.spikes > 0) user.spikes -= 1
                if(user.cd16 > 0) user.cd16 -= 1
                if(user.cd21 > 0) user.cd21 -= 1
                if(user.cd22 > 0) user.cd22 -= 1
                if(user.cd31 > 0) user.cd31 -= 1
                if(user.cd32 > 0) user.cd32 -= 1
                if(user.cd33 > 0) user.cd33 -= 1
                if(user.cd34 > 0) user.cd34 -= 1
                if(user.cd35 > 0) user.cd35 -= 1
                if(user.cd36 > 0) user.cd36 -= 1
                if(user.porezka > 0) user.porezka -= 1
                if(user.cd37 > 0) user.cd37 -= 1
                if(u.cd11 > 0) u.cd11 -= 1
                if(u.del11 > 0) u.del11 -= 1
                if(u.cd12 > 0) u.cd12 -= 1
                if(u.del12 > 0) u.del12 -= 1
                if(u.cd13 > 0) u.cd13 -= 1
                if(u.cd14 > 0) u.cd14 -= 1
                if(u.cd15 > 0) u.cd15 -= 1
                if(u.spikes > 0) u.spikes -= 1
                if(u.cd16 > 0) u.cd16 -= 1
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 1
                if(u.cd22 > 0) u.cd22 -= 1
                if(u.cd31 > 0) u.cd31 -= 1
                if(u.cd32 > 0) u.cd32 -= 1
                if(u.cd33 > 0) u.cd33 -= 1
                if(u.cd34 > 0) u.cd34 -= 1
                if(u.cd35 > 0) u.cd35 -= 1
                if(u.cd36 > 0) u.cd36 -= 1
                if(u.porezka > 0) u.porezka -= 1
                if(u.cd37 > 0) u.cd37 -= 1
                if(user.burn > 0) user.burn -= 1
                if(u.burn > 0) u.burn -= 1
                if(user.poison > 0) user.poison -= 1
                if(u.poison > 0) u.poison -= 1
                if(user.poisoning > 0) user.poisoning -= 1
                if(u.poisoning > 0) u.poisoning -= 1
                user.nakopleniye += 1
                user.steps += 1
                u.steps += 1
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
                var atk = user.duelatk
                var udef = u.dueldef
                var result = atk - udef
                u.duelhp -= result
                user.nakopleniye += 1
                if(user.cd11 > 0) user.cd11 -= 1
                if(user.del11 > 0) user.del11 -= 1
                if(user.cd12 > 0) user.cd12 -= 1
                if(user.del12 > 0) user.del12 -= 1
                if(user.cd13 > 0) user.cd13 -= 1
                if(user.cd14 > 0) user.cd14 -= 1
                if(user.cd15 > 0) user.cd15 -= 1
                if(user.spikes > 0) user.spikes -= 1
                if(user.cd16 > 0) user.cd16 -= 1
                if(user.cd21 > 0) user.cd21 -= 1
                if(user.cd22 > 0) user.cd22 -= 1
                if(user.cd31 > 0) user.cd31 -= 1
                if(user.cd32 > 0) user.cd32 -= 1
                if(user.cd33 > 0) user.cd33 -= 1
                if(user.cd34 > 0) user.cd34 -= 1
                if(user.cd35 > 0) user.cd35 -= 1
                if(user.cd36 > 0) user.cd36 -= 1
                if(user.porezka > 0) user.porezka -= 1
                if(user.cd37 > 0) user.cd37 -= 1
                if(u.cd11 > 0) u.cd11 -= 1
                if(u.del11 > 0) u.del11 -= 1
                if(u.cd12 > 0) u.cd12 -= 1
                if(u.del12 > 0) u.del12 -= 1
                if(u.cd13 > 0) u.cd13 -= 1
                if(u.cd14 > 0) u.cd14 -= 1
                if(u.cd15 > 0) u.cd15 -= 1
                if(u.spikes > 0) u.spikes -= 1
                if(u.cd16 > 0) u.cd16 -= 1
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 1
                if(u.cd22 > 0) u.cd22 -= 1
                if(u.cd31 > 0) u.cd31 -= 1
                if(u.cd32 > 0) u.cd32 -= 1
                if(u.cd33 > 0) u.cd33 -= 1
                if(u.cd34 > 0) u.cd34 -= 1
                if(u.cd35 > 0) u.cd35 -= 1
                if(u.cd36 > 0) u.cd36 -= 1
                if(u.porezka > 0) u.porezka -= 1
                if(u.cd37 > 0) u.cd37 -= 1
                if(user.burn > 0) user.burn -= 1
                if(u.burn > 0) u.burn -= 1
                if(user.poison > 0) user.poison -= 1
                if(u.poison > 0) u.poison -= 1
                if(user.poisoning > 0) user.poisoning -= 1
                if(u.poisoning > 0) u.poisoning -= 1
                user.steps += 1
                u.steps += 1
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
                  if(user.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    user.money -= finalplata2
                    u.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                  else {
                    if(u.duelhp < 1) {
                      var plata2 = user.money
                      var procentplata = 10
                      var resultplata2 = plata2 / 100 * procentplata
                      let num27 = resultplata2
                      var finalplata = num27.toFixed(0)
                      var finalplata2 = Number(finalplata)
                      u.money -= finalplata2
                      user.money += finalplata2
                      user.duel = false
                      u.duel = false
                      u.predictionduel = false
                      user.predictduel = false
                      user.steps = 0
                      u.steps = 0
                      user.timer = 0
                      u.timer = 0
                      user.duelhp = 0
                      user.duelatk = 0
                      user.dueldef = 0
                      u.duelhp = 0
                      u.duelatk = 0
                      u.dueldef = 0
                      user.cd11 = 0,
                      user.del11 = -1,
                      user.cd12 = 0,
                      user.del12 = -1,
                      user.cd13 = 0,
                      user.cd14 = 0,
                      user.cd15 = 0,
                      user.spikes = -1,
                      user.cd16 = 0,
                      user.clinch = -1,
                      user.cd21 = 0,
                      user.cd22 = 0,
                      user.nakopleniye = 0,
                      user.el1 = 0,
                      user.burn = 0,
                      user.el2 = 0,
                      user.el3 = 0,
                      user.cd31 = 0,
                      user.poison = 0,
                      user.cd32 = 0,
                      user.cd33 = 0,
                      user.cd34 = 0,
                      user.invisible = false,
                      user.cd35 = 0,
                      user.cd36 = 0,
                      user.cd37 = 0,
                      user.poisoning = -1
                      u.cd11 = 0,
                      u.del11 = -1,
                      u.cd12 = 0,
                      u.del12 = -1,
                      u.cd13 = 0,
                      u.cd14 = 0,
                      u.cd15 = 0,
                      u.spikes = -1,
                      u.cd16 = 0,
                      u.clinch = -1,
                      u.cd21 = 0,
                      u.cd22 = 0,
                      u.nakopleniye = 0,
                      u.el1 = 0,
                      u.burn = 0,
                      u.el2 = 0,
                      u.el3 = 0,
                      u.cd31 = 0,
                      u.poison = 0,
                      u.cd32 = 0,
                      u.cd33 = 0,
                      u.cd34 = 0,
                      u.invisible = false,
                      u.cd35 = 0,
                      u.cd36 = 0,
                      u.cd37 = 0,
                      u.poisoning = -1
                      msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                      var constuser = user
                      user = u
                      u = constuser
                    }
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
            }
          }
        }
      }
    }
    if(user.poison > 0) {
      var procent50 = 50
      var poison50 = u.duelatk * procent50 / 100
      user.duelhp -= poison50
      msg.send(`"${user.nick}" получает ⚔${poison50} урона`)
    }
    if(user.poisoning > 0) {
      var result1 = user.duelatk - user.dueldef
      user.duelhp -= result1
      msg.send(`"${user.nick}" получает ⚔${result1} урона от отравления`)
    }
    if(u.poisoning > 0) {
      var result2 = u.duelatk - u.dueldef
      u.duelhp -= result2
      msg.send(`"${u.nick}" наносит себе ⚔${result2} урона`)
    }
    if(user.poisoning == 0) {
      user.poisoning = -1
      var atk3 = user.duelatk * 3
      var heal1 = atk3 * 2
      user.duelhp += heal1
      if (user.duelhp > user.hp) {
      user.duelhp = user.hp
      }
      msg.send(`"${user.nick}" восстанавливает 💚${heal1} здоровья`)
    }
    if(u.poisoning == 0) {
      u.poisoning = -1
      var atk3 = u.duelatk * 3
      var heal2 = atk3 * 2
      u.duelhp += heal2
      if (u.duelhp > u.hp) {
      u.duelhp = u.hp
      }
      msg.send(`"${u.nick}" восстанавливает 💚${heal2} здоровья`)
    }
    if(user.nakopleniye == 3) {
      user.nakopleniye = -1
      u.control = 6
      user.steps += 1
      u.steps += 1
      msg.send(`Накопление заряжено, @id${u.id}(${u.nick}) в контроле на 6 ходов`)
    }
    var constuser = user
    user = u
    u = constuser
  })

  vk.updates.hear(/^(.*) 🔥$/i, msg => {
    if(user.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(u.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(user.steps > 100 || u.steps > 100) {
      user.duel = false
      u.duel = false
      u.predictionduel = false
      user.predictduel = false
      user.steps = 0
      u.steps = 0
      user.timer = 0
      u.timer = 0
      user.duelhp = 0
      user.duelatk = 0
      user.dueldef = 0
      u.duelhp = 0
      u.duelatk = 0
      u.dueldef = 0
      user.cd11 = 0,
      user.del11 = -1,
      user.cd12 = 0,
      user.del12 = -1,
      user.cd13 = 0,
      user.cd14 = 0,
      user.cd15 = 0,
      user.spikes = -1,
      user.cd16 = 0,
      user.clinch = -1,
      user.cd21 = 0,
      user.cd22 = 0,
      user.nakopleniye = 0,
      user.el1 = 0,
      user.burn = 0,
      user.el2 = 0,
      user.el3 = 0,
      user.cd31 = 0,
      user.poison = 0,
      user.cd32 = 0,
      user.cd33 = 0,
      user.cd34 = 0,
      user.invisible = false,
      user.cd35 = 0,
      user.cd36 = 0,
      user.cd37 = 0,
      user.poisoning = -1
      u.cd11 = 0,
      u.del11 = -1,
      u.cd12 = 0,
      u.del12 = -1,
      u.cd13 = 0,
      u.cd14 = 0,
      u.cd15 = 0,
      u.spikes = -1,
      u.cd16 = 0,
      u.clinch = -1,
      u.cd21 = 0,
      u.cd22 = 0,
      u.nakopleniye = 0,
      u.el1 = 0,
      u.burn = 0,
      u.el2 = 0,
      u.el3 = 0,
      u.cd31 = 0,
      u.poison = 0,
      u.cd32 = 0,
      u.cd33 = 0,
      u.cd34 = 0,
      u.invisible = false,
      u.cd35 = 0,
      u.cd36 = 0,
      u.cd37 = 0,
      u.poisoning = -1
      return msg.send ('Ходы дуэли превысили 100. Победитель не определён')
    }
    if(msg.senderId == u.id) {
      var constu = u
      u = user
      user = constu
    }
    if(user.clas.id != 2) return msg.send (`Умение не принадлежит вашему классу`)
    if(msg.$match[1] != '[club202302035|@eswep]') return
    if(msg.messagePayload != "project RQ") return
    if(u.nakopleniye > 0) {
      if(u.control > 0) u.nakopleniye = 0
    }
    if (user.steps % 2 == 0) {
      return msg.send ('Сейчас не твой ход')
    }
    else {
      if(user.control > 0) {
        msg.send (`Невозможно применить умение`);
      }
      else{
        if(u.clinch > 0) {
          if(user.duelatk < u.dueldef) {
            if(user.cd11 > 0) user.cd11 -= 1
            if(user.del11 > 0) user.del11 -= 1
            if(user.cd12 > 0) user.cd12 -= 1
            if(user.del12 > 0) user.del12 -= 1
            if(user.cd13 > 0) user.cd13 -= 1
            if(user.cd14 > 0) user.cd14 -= 1
            if(user.cd15 > 0) user.cd15 -= 1
            if(user.spikes > 0) user.spikes -= 1
            if(user.cd16 > 0) user.cd16 -= 1
            if(user.cd21 > 0) user.cd21 -= 1
            if(user.cd22 > 0) user.cd22 -= 1
            if(user.cd31 > 0) user.cd31 -= 1
            if(user.cd32 > 0) user.cd32 -= 1
            if(user.cd33 > 0) user.cd33 -= 1
            if(user.cd34 > 0) user.cd34 -= 1
            if(user.cd35 > 0) user.cd35 -= 1
            if(user.cd36 > 0) user.cd36 -= 1
            if(user.porezka > 0) user.porezka -= 1
            if(user.cd37 > 0) user.cd37 -= 1
            if(u.cd11 > 0) u.cd11 -= 1
            if(u.del11 > 0) u.del11 -= 1
            if(u.cd12 > 0) u.cd12 -= 1
            if(u.del12 > 0) u.del12 -= 1
            if(u.cd13 > 0) u.cd13 -= 1
            if(u.cd14 > 0) u.cd14 -= 1
            if(u.cd15 > 0) u.cd15 -= 1
            if(u.spikes > 0) u.spikes -= 1
            if(u.cd16 > 0) u.cd16 -= 1
            if(u.clinch > 0) u.clinch = -1
            if(u.cd21 > 0) u.cd21 -= 1
            if(u.cd22 > 0) u.cd22 -= 1
            if(u.cd31 > 0) u.cd31 -= 1
            if(u.cd32 > 0) u.cd32 -= 1
            if(u.cd33 > 0) u.cd33 -= 1
            if(u.cd34 > 0) u.cd34 -= 1
            if(u.cd35 > 0) u.cd35 -= 1
            if(u.cd36 > 0) u.cd36 -= 1
            if(u.porezka > 0) u.porezka -= 1
            if(u.cd37 > 0) u.cd37 -= 1
            if(user.burn > 0) user.burn -= 1
            if(u.burn > 0) u.burn -= 1
            if(user.poison > 0) user.poison -= 1
            if(u.poison > 0) u.poison -= 1
            if(user.poisoning > 0) user.poisoning -= 1
            if(u.poisoning > 0) u.poisoning -= 1
            user.steps += 1
            u.steps += 1
            if (u.clas.id == 1) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, так как активировал "клинч", @id${user.id}(${user.nick}) получает ⚔0 урона, так как атака @id${user.id}(${user.nick}) меньше защиты @id${u.id}(${u.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "😈",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🛡",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🖤",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "❣",
                    color: "positive",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "☦",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚙",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚔",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 2) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, так как активировал "клинч", @id${user.id}(${user.nick}) получает ⚔0 урона, так как атака @id${user.id}(${user.nick}) меньше защиты @id${u.id}(${u.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "❄",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💥",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🍃",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔥",
                    color: "negative",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "💧",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚡",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 3) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${u.id}(${u.nick}) не получает урона, так как активировал "клинч", @id${user.id}(${user.nick}) получает ⚔0 урона, так как атака @id${user.id}(${user.nick}) меньше защиты @id${u.id}(${u.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "🦠",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔪",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💣",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "👁‍🗨",
                  color: "primary",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "🧬",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🗡",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💉",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
              }
            if(user.del11 == 0) {
              var hp = user.hp
              var atk = user.atk
              var procent = 20
              var resulthp = hp / 100 * procent
              var resultatk = atk / 100 * procent
              user.duelhp -= resulthp
              user.duelatk -= resultatk
              user.del11 = -1
               
            }
            if(u.del11 == 0) {
              var hp1 = u.hp
              var atk1 = u.atk
              var procent = 20
              var resulthp1 = hp1 / 100 * procent
              var resultatk1 = atk1 / 100 * procent
              u.duelhp -= resulthp1
              u.duelatk -= resultatk1
              u.del11 = -1
               
            }
            if(user.del12 == 0) {
              var def = user.def
              var procent = 20
               var resultdef = def / 100 * procent
              user.dueldef -= resultdef
              user.del12 = -1
               
            }
            if(u.del12 == 0) {
              var def1 = u.def
              var procent = 20
              var resultdef1 = def1 / 100 * procent
              u.dueldef -= resultdef1
              u.del12 = -1
               
            }
            if(user.spikes == 0) {
              user.spikes -= 1
               
            }
            if(u.spikes == 0) {
              u.spikes -= 1
               
            }
          }
          else {
            var atk = user.duelatk
            var udef = u.dueldef
            var result = atk - udef
            user.duelhp -= result
            if(user.cd11 > 0) user.cd11 -= 1
            if(user.del11 > 0) user.del11 -= 1
            if(user.cd12 > 0) user.cd12 -= 1
            if(user.del12 > 0) user.del12 -= 1
            if(user.cd13 > 0) user.cd13 -= 1
            if(user.cd14 > 0) user.cd14 -= 1
            if(user.cd15 > 0) user.cd15 -= 1
            if(user.spikes > 0) user.spikes -= 1
            if(user.cd16 > 0) user.cd16 -= 1
            if(user.cd21 > 0) user.cd21 -= 1
            if(user.cd22 > 0) user.cd22 -= 1
            if(user.cd31 > 0) user.cd31 -= 1
            if(user.cd32 > 0) user.cd32 -= 1
            if(user.cd33 > 0) user.cd33 -= 1
            if(user.cd34 > 0) user.cd34 -= 1
            if(user.cd35 > 0) user.cd35 -= 1
            if(user.cd36 > 0) user.cd36 -= 1
            if(user.porezka > 0) user.porezka -= 1
            if(user.cd37 > 0) user.cd37 -= 1
            if(u.cd11 > 0) u.cd11 -= 1
            if(u.del11 > 0) u.del11 -= 1
            if(u.cd12 > 0) u.cd12 -= 1
            if(u.del12 > 0) u.del12 -= 1
            if(u.cd13 > 0) u.cd13 -= 1
            if(u.cd14 > 0) u.cd14 -= 1
            if(u.cd15 > 0) u.cd15 -= 1
            if(u.spikes > 0) u.spikes -= 1
            if(u.cd16 > 0) u.cd16 -= 1
            if(u.clinch > 0) u.clinch = -1
            if(u.cd21 > 0) u.cd21 -= 1
            if(u.cd22 > 0) u.cd22 -= 1
            if(u.cd31 > 0) u.cd31 -= 1
            if(u.cd32 > 0) u.cd32 -= 1
            if(u.cd33 > 0) u.cd33 -= 1
            if(u.cd34 > 0) u.cd34 -= 1
            if(u.cd35 > 0) u.cd35 -= 1
            if(u.cd36 > 0) u.cd36 -= 1
            if(u.porezka > 0) u.porezka -= 1
            if(u.cd37 > 0) u.cd37 -= 1
            if(user.burn > 0) user.burn -= 1
            if(u.burn > 0) u.burn -= 1
            if(user.poison > 0) user.poison -= 1
            if(u.poison > 0) u.poison -= 1
            if(user.poisoning > 0) user.poisoning -= 1
            if(u.poisoning > 0) u.poisoning -= 1
            user.steps += 1
            u.steps += 1
            if (u.clas.id == 1) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, @id${user.id}(${user.nick}) получает ⚔${result} урона, так как @id${u.id}(${u.nick}) активировал "клинч". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "😈",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🛡",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🖤",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "❣",
                    color: "positive",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "☦",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚙",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚔",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 2) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, @id${user.id}(${user.nick}) получает ⚔${result} урона, так как @id${u.id}(${u.nick}) активировал "клинч". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "❄",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💥",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🍃",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔥",
                    color: "negative",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "💧",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚡",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 3) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${u.id}(${u.nick}) не получает урона, @id${user.id}(${user.nick}) получает ⚔${result} урона, так как @id${u.id}(${u.nick}) активировал "клинч". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "🦠",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔪",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💣",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "👁‍🗨",
                  color: "primary",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "🧬",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🗡",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💉",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
              }
              if(user.duelhp < 1) {
                var plata2 = user.money
                var procentplata = 10
                var resultplata2 = plata2 / 100 * procentplata
                let num27 = resultplata2
                var finalplata = num27.toFixed(0)
                var finalplata2 = Number(finalplata)
                user.money -= finalplata2
                u.money += finalplata2
                user.duel = false
                u.duel = false
                u.predictionduel = false
                user.predictduel = false
                user.steps = 0
                u.steps = 0
                user.timer = 0
                u.timer = 0
                user.duelhp = 0
                user.duelatk = 0
                user.dueldef = 0
                u.duelhp = 0
                u.duelatk = 0
                u.dueldef = 0
                user.cd11 = 0,
                user.del11 = -1,
                user.cd12 = 0,
                user.del12 = -1,
                user.cd13 = 0,
                user.cd14 = 0,
                user.cd15 = 0,
                user.spikes = -1,
                user.cd16 = 0,
                user.clinch = -1,
                user.cd21 = 0,
                user.cd22 = 0,
                user.nakopleniye = 0,
                user.el1 = 0,
                user.burn = 0,
                user.el2 = 0,
                user.el3 = 0,
                user.cd31 = 0,
                user.poison = 0,
                user.cd32 = 0,
                user.cd33 = 0,
                user.cd34 = 0,
                user.invisible = false,
                user.cd35 = 0,
                user.cd36 = 0,
                user.cd37 = 0,
                user.poisoning = -1
                u.cd11 = 0,
                u.del11 = -1,
                u.cd12 = 0,
                u.del12 = -1,
                u.cd13 = 0,
                u.cd14 = 0,
                u.cd15 = 0,
                u.spikes = -1,
                u.cd16 = 0,
                u.clinch = -1,
                u.cd21 = 0,
                u.cd22 = 0,
                u.nakopleniye = 0,
                u.el1 = 0,
                u.burn = 0,
                u.el2 = 0,
                u.el3 = 0,
                u.cd31 = 0,
                u.poison = 0,
                u.cd32 = 0,
                u.cd33 = 0,
                u.cd34 = 0,
                u.invisible = false,
                u.cd35 = 0,
                u.cd36 = 0,
                u.cd37 = 0,
                u.poisoning = -1
                msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                var constuser = user
                user = u
                u = constuser
              }
              else {
                if(u.duelhp < 1) {
                  var plata2 = user.money
                  var procentplata = 10
                  var resultplata2 = plata2 / 100 * procentplata
                  let num27 = resultplata2
                  var finalplata = num27.toFixed(0)
                  var finalplata2 = Number(finalplata)
                  u.money -= finalplata2
                  user.money += finalplata2
                  user.duel = false
                  u.duel = false
                  u.predictionduel = false
                  user.predictduel = false
                  user.steps = 0
                  u.steps = 0
                  user.timer = 0
                  u.timer = 0
                  user.duelhp = 0
                  user.duelatk = 0
                  user.dueldef = 0
                  u.duelhp = 0
                  u.duelatk = 0
                  u.dueldef = 0
                  user.cd11 = 0,
                  user.del11 = -1,
                  user.cd12 = 0,
                  user.del12 = -1,
                  user.cd13 = 0,
                  user.cd14 = 0,
                  user.cd15 = 0,
                  user.spikes = -1,
                  user.cd16 = 0,
                  user.clinch = -1,
                  user.cd21 = 0,
                  user.cd22 = 0,
                  user.nakopleniye = 0,
                  user.el1 = 0,
                  user.burn = 0,
                  user.el2 = 0,
                  user.el3 = 0,
                  user.cd31 = 0,
                  user.poison = 0,
                  user.cd32 = 0,
                  user.cd33 = 0,
                  user.cd34 = 0,
                  user.invisible = false,
                  user.cd35 = 0,
                  user.cd36 = 0,
                  user.cd37 = 0,
                  user.poisoning = -1
                  u.cd11 = 0,
                  u.del11 = -1,
                  u.cd12 = 0,
                  u.del12 = -1,
                  u.cd13 = 0,
                  u.cd14 = 0,
                  u.cd15 = 0,
                  u.spikes = -1,
                  u.cd16 = 0,
                  u.clinch = -1,
                  u.cd21 = 0,
                  u.cd22 = 0,
                  u.nakopleniye = 0,
                  u.el1 = 0,
                  u.burn = 0,
                  u.el2 = 0,
                  u.el3 = 0,
                  u.cd31 = 0,
                  u.poison = 0,
                  u.cd32 = 0,
                  u.cd33 = 0,
                  u.cd34 = 0,
                  u.invisible = false,
                  u.cd35 = 0,
                  u.cd36 = 0,
                  u.cd37 = 0,
                  u.poisoning = -1
                  msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                  var constuser = user
                  user = u
                  u = constuser
                }
              }
            if(user.del11 == 0) {
              var hp = user.hp
              var atk = user.atk
              var procent = 20
              var resulthp = hp / 100 * procent
              var resultatk = atk / 100 * procent
              user.duelhp -= resulthp
              user.duelatk -= resultatk
              user.del11 = -1
               
            }
            if(u.del11 == 0) {
              var hp1 = u.hp
              var atk1 = u.atk
              var procent = 20
              var resulthp1 = hp1 / 100 * procent
              var resultatk1 = atk1 / 100 * procent
              u.duelhp -= resulthp1
              u.duelatk -= resultatk1
              u.del11 = -1
               
            }
            if(user.del12 == 0) {
              var def = user.def
              var procent = 20
               var resultdef = def / 100 * procent
              user.dueldef -= resultdef
              user.del12 = -1
               
            }
            if(u.del12 == 0) {
              var def1 = u.def
              var procent = 20
              var resultdef1 = def1 / 100 * procent
              u.dueldef -= resultdef1
              u.del12 = -1
               
            }
            if(user.spikes == 0) {
              user.spikes -= 1
               
            }
            if(u.spikes == 0) {
              u.spikes -= 1
               
            }
          }
        }
        else {
          if(u.spikes > 0) {
            if(u.control > 0) {
              if(u.dueldef > user.duelatk) {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
              var atk = user.duelatk
              var udef = u.dueldef
              var result = atk - udef
              var spikes = result / 2
              u.duelhp -= result
              user.duelhp -= spikes
              if(user.cd11 > 0) user.cd11 -= 2
              if(user.del11 > 0) user.del11 -= 2
              if(user.cd12 > 0) user.cd12 -= 2
              if(user.del12 > 0) user.del12 -= 2
              if(user.cd13 > 0) user.cd13 -= 2
              if(user.cd14 > 0) user.cd14 -= 2
              if(user.cd15 > 0) user.cd15 -= 2
              if(user.spikes > 0) user.spikes -= 2
              if(user.cd16 > 0) user.cd16 -= 2
              if(user.cd21 > 0) user.cd21 -= 2
              if(user.cd22 > 0) user.cd22 -= 2
              if(user.cd31 > 0) user.cd31 -= 2
              if(user.cd32 > 0) user.cd32 -= 2
              if(user.cd33 > 0) user.cd33 -= 2
              if(user.cd34 > 0) user.cd34 -= 2
              if(user.cd35 > 0) user.cd35 -= 2
              if(user.cd36 > 0) user.cd36 -= 2
              if(user.porezka > 0) user.porezka -= 2
              if(user.cd37 > 0) user.cd37 -= 2
              if(u.cd11 > 0) u.cd11 -= 2
              if(u.del11 > 0) u.del11 -= 2
              if(u.cd12 > 0) u.cd12 -= 2
              if(u.del12 > 0) u.del12 -= 2
              if(u.cd13 > 0) u.cd13 -= 2
              if(u.cd14 > 0) u.cd14 -= 2
              if(u.cd15 > 0) u.cd15 -= 2
              if(u.spikes > 0) u.spikes -= 2
              if(u.cd16 > 0) u.cd16 -= 2
              if(u.clinch > 0) u.clinch = -1
              if(u.cd21 > 0) u.cd21 -= 2
              if(u.cd22 > 0) u.cd22 -= 2
              if(u.cd31 > 0) u.cd31 -= 2
              if(u.cd32 > 0) u.cd32 -= 2
              if(u.cd33 > 0) u.cd33 -= 2
              if(u.cd34 > 0) u.cd34 -= 2
              if(u.cd35 > 0) u.cd35 -= 2
              if(u.cd36 > 0) u.cd36 -= 2
              if(u.porezka > 0) u.porezka -= 2
              if(u.cd37 > 0) u.cd37 -= 2
              if(user.burn > 0) user.burn -= 2
              if(u.burn > 0) u.burn -= 2
              if(user.poison > 0) user.poison -= 2
              if(u.poison > 0) u.poison -= 2
              if(user.poisoning > 0) user.poisoning -= 2
              if(u.poisoning > 0) u.poisoning -= 2
              if(u.control == 2) {
                user.steps += 1
                u.steps += 1
                u.control -= 2
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
              }
              else {
                if(u.control > 2) {
                  user.steps += 2
                  u.steps += 2
                  u.control -= 2
                  if (user.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${user.id}(${user.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${user.id}(${user.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${user.id}(${user.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
              }
              if(user.el2 == 0 || user.el3 == 0) {
                user.el1 = 1
              }
              if(user.el2 == 1 || user.el3 == 1) {
                user.el1 = 2
              }
              if(user.el2 == 2 || user.el3 == 2) {
                user.el1 = 3
                if(user.el1 == 3) {
                  u.burn = 6
                  if(u.burn > 0) {
                    var procent70 = 70
                    var uburn = user.duelatk * procent70 / 100
                    var resultuburn = uburn - u.dueldef
                    u.duelhp -= resultuburn
                    user.el1 = 0
                    user.el2 = 0
                    user.el3 = 0
                    msg.send(`Горение наносит "${u.nick}" ⚔${resultuburn} урона`)
                  }
                }
              }
                if(user.duelhp < 1) {
                  var plata2 = user.money
                  var procentplata = 10
                  var resultplata2 = plata2 / 100 * procentplata
                  let num27 = resultplata2
                  var finalplata = num27.toFixed(0)
                  var finalplata2 = Number(finalplata)
                  user.money -= finalplata2
                  u.money += finalplata2
                  user.duel = false
                  u.duel = false
                  u.predictionduel = false
                  user.predictduel = false
                  user.steps = 0
                  u.steps = 0
                  user.timer = 0
                  u.timer = 0
                  user.duelhp = 0
                  user.duelatk = 0
                  user.dueldef = 0
                  u.duelhp = 0
                  u.duelatk = 0
                  u.dueldef = 0
                  user.cd11 = 0,
                  user.del11 = -1,
                  user.cd12 = 0,
                  user.del12 = -1,
                  user.cd13 = 0,
                  user.cd14 = 0,
                  user.cd15 = 0,
                  user.spikes = -1,
                  user.cd16 = 0,
                  user.clinch = -1,
                  user.cd21 = 0,
                  user.cd22 = 0,
                  user.nakopleniye = 0,
                  user.el1 = 0,
                  user.burn = 0,
                  user.el2 = 0,
                  user.el3 = 0,
                  user.cd31 = 0,
                  user.poison = 0,
                  user.cd32 = 0,
                  user.cd33 = 0,
                  user.cd34 = 0,
                  user.invisible = false,
                  user.cd35 = 0,
                  user.cd36 = 0,
                  user.cd37 = 0,
                  user.poisoning = -1
                  u.cd11 = 0,
                  u.del11 = -1,
                  u.cd12 = 0,
                  u.del12 = -1,
                  u.cd13 = 0,
                  u.cd14 = 0,
                  u.cd15 = 0,
                  u.spikes = -1,
                  u.cd16 = 0,
                  u.clinch = -1,
                  u.cd21 = 0,
                  u.cd22 = 0,
                  u.nakopleniye = 0,
                  u.el1 = 0,
                  u.burn = 0,
                  u.el2 = 0,
                  u.el3 = 0,
                  u.cd31 = 0,
                  u.poison = 0,
                  u.cd32 = 0,
                  u.cd33 = 0,
                  u.cd34 = 0,
                  u.invisible = false,
                  u.cd35 = 0,
                  u.cd36 = 0,
                  u.cd37 = 0,
                  u.poisoning = -1
                  msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                  var constuser = user
                  user = u
                  u = constuser
                }
                else {
                  if(u.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    u.money -= finalplata2
                    user.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                }
              if(user.del11 == 0) {
                var hp = user.hp
                var atk = user.atk
                var procent = 20
                var resulthp = hp / 100 * procent
                var resultatk = atk / 100 * procent
                user.duelhp -= resulthp
                user.duelatk -= resultatk
                user.del11 = -1
                 
              }
              if(u.del11 == 0) {
                var hp1 = u.hp
                var atk1 = u.atk
                var procent = 20
                var resulthp1 = hp1 / 100 * procent
                var resultatk1 = atk1 / 100 * procent
                u.duelhp -= resulthp1
                u.duelatk -= resultatk1
                u.del11 = -1
                 
              }
              if(user.del12 == 0) {
                var def = user.def
                var procent = 20
                 var resultdef = def / 100 * procent
                user.dueldef -= resultdef
                user.del12 = -1
                 
              }
              if(u.del12 == 0) {
                var def1 = u.def
                var procent = 20
                var resultdef1 = def1 / 100 * procent
                u.dueldef -= resultdef1
                u.del12 = -1
                 
              }
              if(user.spikes == 0) {
                user.spikes -= 1
                 
              }
              if(u.spikes == 0) {
                u.spikes -= 1
                 
              }
              }
            }
            else {
              if(user.duelatk < u.dueldef) {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
                var atk = user.duelatk
                var udef = u.dueldef
                var result = atk - udef
                var spikes = result / 2
                u.duelhp -= result
                user.duelhp -= spikes
                if(user.cd11 > 0) user.cd11 -= 1
                if(user.del11 > 0) user.del11 -= 1
                if(user.cd12 > 0) user.cd12 -= 1
                if(user.del12 > 0) user.del12 -= 1
                if(user.cd13 > 0) user.cd13 -= 1
                if(user.cd14 > 0) user.cd14 -= 1
                if(user.cd15 > 0) user.cd15 -= 1
                if(user.spikes > 0) user.spikes -= 1
                if(user.cd16 > 0) user.cd16 -= 1
                if(user.cd21 > 0) user.cd21 -= 1
                if(user.cd22 > 0) user.cd22 -= 1
                if(user.cd31 > 0) user.cd31 -= 1
                if(user.cd32 > 0) user.cd32 -= 1
                if(user.cd33 > 0) user.cd33 -= 1
                if(user.cd34 > 0) user.cd34 -= 1
                if(user.cd35 > 0) user.cd35 -= 1
                if(user.cd36 > 0) user.cd36 -= 1
                if(user.porezka > 0) user.porezka -= 1
                if(user.cd37 > 0) user.cd37 -= 1
                if(u.cd11 > 0) u.cd11 -= 1
                if(u.del11 > 0) u.del11 -= 1
                if(u.cd12 > 0) u.cd12 -= 1
                if(u.del12 > 0) u.del12 -= 1
                if(u.cd13 > 0) u.cd13 -= 1
                if(u.cd14 > 0) u.cd14 -= 1
                if(u.cd15 > 0) u.cd15 -= 1
                if(u.spikes > 0) u.spikes -= 1
                if(u.cd16 > 0) u.cd16 -= 1
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 1
                if(u.cd22 > 0) u.cd22 -= 1
                if(u.cd31 > 0) u.cd31 -= 1
                if(u.cd32 > 0) u.cd32 -= 1
                if(u.cd33 > 0) u.cd33 -= 1
                if(u.cd34 > 0) u.cd34 -= 1
                if(u.cd35 > 0) u.cd35 -= 1
                if(u.cd36 > 0) u.cd36 -= 1
                if(u.porezka > 0) u.porezka -= 1
                if(u.cd37 > 0) u.cd37 -= 1
                if(user.burn > 0) user.burn -= 1
                if(u.burn > 0) u.burn -= 1
                if(user.poison > 0) user.poison -= 1
                if(u.poison > 0) u.poison -= 1
                if(user.poisoning > 0) user.poisoning -= 1
                if(u.poisoning > 0) u.poisoning -= 1
                user.steps += 1
                u.steps += 1
                if(user.el2 == 0 || user.el3 == 0) {
                  user.el1 = 1
                }
                if(user.el2 == 1 || user.el3 == 1) {
                  user.el1 = 2
                }
                if(user.el2 == 2 || user.el3 == 2) {
                  user.el1 = 3
                  if(user.el1 == 3) {
                    u.burn = 6
                    if(u.burn > 0) {
                      var procent70 = 70
                      var uburn = user.duelatk * procent70 / 100
                      var resultuburn = uburn - u.dueldef
                      u.duelhp -= resultuburn
                      user.el1 = 0
                      user.el2 = 0
                      user.el3 = 0
                      msg.send(`Горение наносит "${u.nick}" ⚔${resultuburn} урона`)
                    }
                  }
                }
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
                  if(user.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    user.money -= finalplata2
                    u.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                  else {
                    if(u.duelhp < 1) {
                      var plata2 = user.money
                      var procentplata = 10
                      var resultplata2 = plata2 / 100 * procentplata
                      let num27 = resultplata2
                      var finalplata = num27.toFixed(0)
                      var finalplata2 = Number(finalplata)
                      u.money -= finalplata2
                      user.money += finalplata2
                      user.duel = false
                      u.duel = false
                      u.predictionduel = false
                      user.predictduel = false
                      user.steps = 0
                      u.steps = 0
                      user.timer = 0
                      u.timer = 0
                      user.duelhp = 0
                      user.duelatk = 0
                      user.dueldef = 0
                      u.duelhp = 0
                      u.duelatk = 0
                      u.dueldef = 0
                      user.cd11 = 0,
                      user.del11 = -1,
                      user.cd12 = 0,
                      user.del12 = -1,
                      user.cd13 = 0,
                      user.cd14 = 0,
                      user.cd15 = 0,
                      user.spikes = -1,
                      user.cd16 = 0,
                      user.clinch = -1,
                      user.cd21 = 0,
                      user.cd22 = 0,
                      user.nakopleniye = 0,
                      user.el1 = 0,
                      user.burn = 0,
                      user.el2 = 0,
                      user.el3 = 0,
                      user.cd31 = 0,
                      user.poison = 0,
                      user.cd32 = 0,
                      user.cd33 = 0,
                      user.cd34 = 0,
                      user.invisible = false,
                      user.cd35 = 0,
                      user.cd36 = 0,
                      user.cd37 = 0,
                      user.poisoning = -1
                      u.cd11 = 0,
                      u.del11 = -1,
                      u.cd12 = 0,
                      u.del12 = -1,
                      u.cd13 = 0,
                      u.cd14 = 0,
                      u.cd15 = 0,
                      u.spikes = -1,
                      u.cd16 = 0,
                      u.clinch = -1,
                      u.cd21 = 0,
                      u.cd22 = 0,
                      u.nakopleniye = 0,
                      u.el1 = 0,
                      u.burn = 0,
                      u.el2 = 0,
                      u.el3 = 0,
                      u.cd31 = 0,
                      u.poison = 0,
                      u.cd32 = 0,
                      u.cd33 = 0,
                      u.cd34 = 0,
                      u.invisible = false,
                      u.cd35 = 0,
                      u.cd36 = 0,
                      u.cd37 = 0,
                      u.poisoning = -1
                      msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                      var constuser = user
                      user = u
                      u = constuser
                    }
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
            }
          }
          else {
            if(u.control > 0) {
              if(u.dueldef > user.duelatk) {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
                var atk = user.duelatk
                var udef = u.dueldef
                var result = atk - udef
                u.duelhp -= result
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                if(user.el2 == 0 || user.el3 == 0) {
                  user.el1 = 1
                }
                if(user.el2 == 1 || user.el3 == 1) {
                  user.el1 = 2
                }
                if(user.el2 == 2 || user.el3 == 2) {
                  user.el1 = 3
                  if(user.el1 == 3) {
                    u.burn = 6
                    if(u.burn > 0) {
                      var procent70 = 70
                      var uburn = user.duelatk * procent70 / 100
                      var resultuburn = uburn - u.dueldef
                      u.duelhp -= resultuburn
                      user.el1 = 0
                      user.el2 = 0
                      user.el3 = 0
                      msg.send(`Горение наносит "${u.nick}" ⚔${resultuburn} урона`)
                    }
                  }
                }
                  if(user.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    user.money -= finalplata2
                    u.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                  else {
                    if(u.duelhp < 1) {
                      var plata2 = user.money
                      var procentplata = 10
                      var resultplata2 = plata2 / 100 * procentplata
                      let num27 = resultplata2
                      var finalplata = num27.toFixed(0)
                      var finalplata2 = Number(finalplata)
                      u.money -= finalplata2
                      user.money += finalplata2
                      user.duel = false
                      u.duel = false
                      u.predictionduel = false
                      user.predictduel = false
                      user.steps = 0
                      u.steps = 0
                      user.timer = 0
                      u.timer = 0
                      user.duelhp = 0
                      user.duelatk = 0
                      user.dueldef = 0
                      u.duelhp = 0
                      u.duelatk = 0
                      u.dueldef = 0
                      user.cd11 = 0,
                      user.del11 = -1,
                      user.cd12 = 0,
                      user.del12 = -1,
                      user.cd13 = 0,
                      user.cd14 = 0,
                      user.cd15 = 0,
                      user.spikes = -1,
                      user.cd16 = 0,
                      user.clinch = -1,
                      user.cd21 = 0,
                      user.cd22 = 0,
                      user.nakopleniye = 0,
                      user.el1 = 0,
                      user.burn = 0,
                      user.el2 = 0,
                      user.el3 = 0,
                      user.cd31 = 0,
                      user.poison = 0,
                      user.cd32 = 0,
                      user.cd33 = 0,
                      user.cd34 = 0,
                      user.invisible = false,
                      user.cd35 = 0,
                      user.cd36 = 0,
                      user.cd37 = 0,
                      user.poisoning = -1
                      u.cd11 = 0,
                      u.del11 = -1,
                      u.cd12 = 0,
                      u.del12 = -1,
                      u.cd13 = 0,
                      u.cd14 = 0,
                      u.cd15 = 0,
                      u.spikes = -1,
                      u.cd16 = 0,
                      u.clinch = -1,
                      u.cd21 = 0,
                      u.cd22 = 0,
                      u.nakopleniye = 0,
                      u.el1 = 0,
                      u.burn = 0,
                      u.el2 = 0,
                      u.el3 = 0,
                      u.cd31 = 0,
                      u.poison = 0,
                      u.cd32 = 0,
                      u.cd33 = 0,
                      u.cd34 = 0,
                      u.invisible = false,
                      u.cd35 = 0,
                      u.cd36 = 0,
                      u.cd37 = 0,
                      u.poisoning = -1
                      msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                      var constuser = user
                      user = u
                      u = constuser
                    }
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
            }
            else {
              if(u.dueldef > user.duelatk) {
                if(user.cd11 > 0) user.cd11 -= 1
                if(user.del11 > 0) user.del11 -= 1
                if(user.cd12 > 0) user.cd12 -= 1
                if(user.del12 > 0) user.del12 -= 1
                if(user.cd13 > 0) user.cd13 -= 1
                if(user.cd14 > 0) user.cd14 -= 1
                if(user.cd15 > 0) user.cd15 -= 1
                if(user.spikes > 0) user.spikes -= 1
                if(user.cd16 > 0) user.cd16 -= 1
                if(user.cd21 > 0) user.cd21 -= 1
                if(user.cd22 > 0) user.cd22 -= 1
                if(user.cd31 > 0) user.cd31 -= 1
                if(user.cd32 > 0) user.cd32 -= 1
                if(user.cd33 > 0) user.cd33 -= 1
                if(user.cd34 > 0) user.cd34 -= 1
                if(user.cd35 > 0) user.cd35 -= 1
                if(user.cd36 > 0) user.cd36 -= 1
                if(user.porezka > 0) user.porezka -= 1
                if(user.cd37 > 0) user.cd37 -= 1
                if(u.cd11 > 0) u.cd11 -= 1
                if(u.del11 > 0) u.del11 -= 1
                if(u.cd12 > 0) u.cd12 -= 1
                if(u.del12 > 0) u.del12 -= 1
                if(u.cd13 > 0) u.cd13 -= 1
                if(u.cd14 > 0) u.cd14 -= 1
                if(u.cd15 > 0) u.cd15 -= 1
                if(u.spikes > 0) u.spikes -= 1
                if(u.cd16 > 0) u.cd16 -= 1
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 1
                if(u.cd22 > 0) u.cd22 -= 1
                if(u.cd31 > 0) u.cd31 -= 1
                if(u.cd32 > 0) u.cd32 -= 1
                if(u.cd33 > 0) u.cd33 -= 1
                if(u.cd34 > 0) u.cd34 -= 1
                if(u.cd35 > 0) u.cd35 -= 1
                if(u.cd36 > 0) u.cd36 -= 1
                if(u.porezka > 0) u.porezka -= 1
                if(u.cd37 > 0) u.cd37 -= 1
                if(user.burn > 0) user.burn -= 1
                if(u.burn > 0) u.burn -= 1
                if(user.poison > 0) user.poison -= 1
                if(u.poison > 0) u.poison -= 1
                if(user.poisoning > 0) user.poisoning -= 1
                if(u.poisoning > 0) u.poisoning -= 1
                user.steps += 1
                u.steps += 1
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
                var atk = user.duelatk
                var udef = u.dueldef
                var result = atk - udef
                u.duelhp -= result
                if(user.cd11 > 0) user.cd11 -= 1
                if(user.del11 > 0) user.del11 -= 1
                if(user.cd12 > 0) user.cd12 -= 1
                if(user.del12 > 0) user.del12 -= 1
                if(user.cd13 > 0) user.cd13 -= 1
                if(user.cd14 > 0) user.cd14 -= 1
                if(user.cd15 > 0) user.cd15 -= 1
                if(user.spikes > 0) user.spikes -= 1
                if(user.cd16 > 0) user.cd16 -= 1
                if(user.cd21 > 0) user.cd21 -= 1
                if(user.cd22 > 0) user.cd22 -= 1
                if(user.cd31 > 0) user.cd31 -= 1
                if(user.cd32 > 0) user.cd32 -= 1
                if(user.cd33 > 0) user.cd33 -= 1
                if(user.cd34 > 0) user.cd34 -= 1
                if(user.cd35 > 0) user.cd35 -= 1
                if(user.cd36 > 0) user.cd36 -= 1
                if(user.porezka > 0) user.porezka -= 1
                if(user.cd37 > 0) user.cd37 -= 1
                if(u.cd11 > 0) u.cd11 -= 1
                if(u.del11 > 0) u.del11 -= 1
                if(u.cd12 > 0) u.cd12 -= 1
                if(u.del12 > 0) u.del12 -= 1
                if(u.cd13 > 0) u.cd13 -= 1
                if(u.cd14 > 0) u.cd14 -= 1
                if(u.cd15 > 0) u.cd15 -= 1
                if(u.spikes > 0) u.spikes -= 1
                if(u.cd16 > 0) u.cd16 -= 1
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 1
                if(u.cd22 > 0) u.cd22 -= 1
                if(u.cd31 > 0) u.cd31 -= 1
                if(u.cd32 > 0) u.cd32 -= 1
                if(u.cd33 > 0) u.cd33 -= 1
                if(u.cd34 > 0) u.cd34 -= 1
                if(u.cd35 > 0) u.cd35 -= 1
                if(u.cd36 > 0) u.cd36 -= 1
                if(u.porezka > 0) u.porezka -= 1
                if(u.cd37 > 0) u.cd37 -= 1
                if(user.burn > 0) user.burn -= 1
                if(u.burn > 0) u.burn -= 1
                if(user.poison > 0) user.poison -= 1
                if(u.poison > 0) u.poison -= 1
                if(user.poisoning > 0) user.poisoning -= 1
                if(u.poisoning > 0) u.poisoning -= 1
                user.steps += 1
                u.steps += 1
                if(user.el2 == 0 || user.el3 == 0) {
                  user.el1 = 1
                }
                if(user.el2 == 1 || user.el3 == 1) {
                  user.el1 = 2
                }
                if(user.el2 == 2 || user.el3 == 2) {
                  user.el1 = 3
                  if(user.el1 == 3) {
                    u.burn = 6
                    if(u.burn > 0) {
                      var procent70 = 70
                      var uburn = user.duelatk * procent70 / 100
                      var resultuburn = uburn - u.dueldef
                      u.duelhp -= resultuburn
                      user.el1 = 0
                      user.el2 = 0
                      user.el3 = 0
                      msg.send(`Горение наносит "${u.nick}" ⚔${resultuburn} урона`)
                    }
                  }
                }
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
                  if(user.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    user.money -= finalplata2
                    u.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                  else {
                    if(u.duelhp < 1) {
                      var plata2 = user.money
                      var procentplata = 10
                      var resultplata2 = plata2 / 100 * procentplata
                      let num27 = resultplata2
                      var finalplata = num27.toFixed(0)
                      var finalplata2 = Number(finalplata)
                      u.money -= finalplata2
                      user.money += finalplata2
                      user.duel = false
                      u.duel = false
                      u.predictionduel = false
                      user.predictduel = false
                      user.steps = 0
                      u.steps = 0
                      user.timer = 0
                      u.timer = 0
                      user.duelhp = 0
                      user.duelatk = 0
                      user.dueldef = 0
                      u.duelhp = 0
                      u.duelatk = 0
                      u.dueldef = 0
                      user.cd11 = 0,
                      user.del11 = -1,
                      user.cd12 = 0,
                      user.del12 = -1,
                      user.cd13 = 0,
                      user.cd14 = 0,
                      user.cd15 = 0,
                      user.spikes = -1,
                      user.cd16 = 0,
                      user.clinch = -1,
                      user.cd21 = 0,
                      user.cd22 = 0,
                      user.nakopleniye = 0,
                      user.el1 = 0,
                      user.burn = 0,
                      user.el2 = 0,
                      user.el3 = 0,
                      user.cd31 = 0,
                      user.poison = 0,
                      user.cd32 = 0,
                      user.cd33 = 0,
                      user.cd34 = 0,
                      user.invisible = false,
                      user.cd35 = 0,
                      user.cd36 = 0,
                      user.cd37 = 0,
                      user.poisoning = -1
                      u.cd11 = 0,
                      u.del11 = -1,
                      u.cd12 = 0,
                      u.del12 = -1,
                      u.cd13 = 0,
                      u.cd14 = 0,
                      u.cd15 = 0,
                      u.spikes = -1,
                      u.cd16 = 0,
                      u.clinch = -1,
                      u.cd21 = 0,
                      u.cd22 = 0,
                      u.nakopleniye = 0,
                      u.el1 = 0,
                      u.burn = 0,
                      u.el2 = 0,
                      u.el3 = 0,
                      u.cd31 = 0,
                      u.poison = 0,
                      u.cd32 = 0,
                      u.cd33 = 0,
                      u.cd34 = 0,
                      u.invisible = false,
                      u.cd35 = 0,
                      u.cd36 = 0,
                      u.cd37 = 0,
                      u.poisoning = -1
                      msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                      var constuser = user
                      user = u
                      u = constuser
                    }
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
            }
          }
        }
      }
    }
    if(user.poison > 0) {
      var procent50 = 50
      var poison50 = u.duelatk * procent50 / 100
      user.duelhp -= poison50
      msg.send(`"${user.nick}" получает ⚔${poison50} урона`)
    }
    if(user.poisoning > 0) {
      var result1 = user.duelatk - user.dueldef
      user.duelhp -= result1
      msg.send(`"${user.nick}" получает ⚔${result1} урона от отравления`)
    }
    if(u.poisoning > 0) {
      var result2 = u.duelatk - u.dueldef
      u.duelhp -= result2
      msg.send(`"${u.nick}" наносит себе ⚔${result2} урона`)
    }
    if(user.poisoning == 0) {
      user.poisoning = -1
      var atk3 = user.duelatk * 3
      var heal1 = atk3 * 2
      user.duelhp += heal1
      if (user.duelhp > user.hp) {
      user.duelhp = user.hp
      }
      msg.send(`"${user.nick}" восстанавливает 💚${heal1} здоровья`)
    }
    if(u.poisoning == 0) {
      u.poisoning = -1
      var atk3 = u.duelatk * 3
      var heal2 = atk3 * 2
      u.duelhp += heal2
      if (u.duelhp > u.hp) {
      u.duelhp = u.hp
      }
      msg.send(`"${u.nick}" восстанавливает 💚${heal2} здоровья`)
    }
    var constuser = user
    user = u
    u = constuser
  })

  vk.updates.hear(/^(.*) ⚡$/i, msg => {
    if(user.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(u.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(user.steps > 100 || u.steps > 100) {
      user.duel = false
      u.duel = false
      u.predictionduel = false
      user.predictduel = false
      user.steps = 0
      u.steps = 0
      user.timer = 0
      u.timer = 0
      user.duelhp = 0
      user.duelatk = 0
      user.dueldef = 0
      u.duelhp = 0
      u.duelatk = 0
      u.dueldef = 0
      user.cd11 = 0,
      user.del11 = -1,
      user.cd12 = 0,
      user.del12 = -1,
      user.cd13 = 0,
      user.cd14 = 0,
      user.cd15 = 0,
      user.spikes = -1,
      user.cd16 = 0,
      user.clinch = -1,
      user.cd21 = 0,
      user.cd22 = 0,
      user.nakopleniye = 0,
      user.el1 = 0,
      user.burn = 0,
      user.el2 = 0,
      user.el3 = 0,
      user.cd31 = 0,
      user.poison = 0,
      user.cd32 = 0,
      user.cd33 = 0,
      user.cd34 = 0,
      user.invisible = false,
      user.cd35 = 0,
      user.cd36 = 0,
      user.cd37 = 0,
      user.poisoning = -1
      u.cd11 = 0,
      u.del11 = -1,
      u.cd12 = 0,
      u.del12 = -1,
      u.cd13 = 0,
      u.cd14 = 0,
      u.cd15 = 0,
      u.spikes = -1,
      u.cd16 = 0,
      u.clinch = -1,
      u.cd21 = 0,
      u.cd22 = 0,
      u.nakopleniye = 0,
      u.el1 = 0,
      u.burn = 0,
      u.el2 = 0,
      u.el3 = 0,
      u.cd31 = 0,
      u.poison = 0,
      u.cd32 = 0,
      u.cd33 = 0,
      u.cd34 = 0,
      u.invisible = false,
      u.cd35 = 0,
      u.cd36 = 0,
      u.cd37 = 0,
      u.poisoning = -1
      return msg.send ('Ходы дуэли превысили 100. Победитель не определён')
    }
    if(msg.senderId == u.id) {
      var constu = u
      u = user
      user = constu
    }
    if(user.clas.id != 2) return msg.send (`Умение не принадлежит вашему классу`)
    if(msg.$match[1] != '[club202302035|@eswep]') return
    if(msg.messagePayload != "project RQ") return
    if(u.nakopleniye > 0) {
      if(u.control > 0) u.nakopleniye = 0
    }
    if (user.steps % 2 == 0) {
      return msg.send ('Сейчас не твой ход')
    }
    else {
      if(user.control > 0) {
        msg.send (`Невозможно применить умение`);
      }
      else{
        if(u.clinch > 0) {
          if(user.duelatk < u.dueldef) {
            if(user.cd11 > 0) user.cd11 -= 1
            if(user.del11 > 0) user.del11 -= 1
            if(user.cd12 > 0) user.cd12 -= 1
            if(user.del12 > 0) user.del12 -= 1
            if(user.cd13 > 0) user.cd13 -= 1
            if(user.cd14 > 0) user.cd14 -= 1
            if(user.cd15 > 0) user.cd15 -= 1
            if(user.spikes > 0) user.spikes -= 1
            if(user.cd16 > 0) user.cd16 -= 1
            if(user.cd21 > 0) user.cd21 -= 1
            if(user.cd22 > 0) user.cd22 -= 1
            if(user.cd31 > 0) user.cd31 -= 1
            if(user.cd32 > 0) user.cd32 -= 1
            if(user.cd33 > 0) user.cd33 -= 1
            if(user.cd34 > 0) user.cd34 -= 1
            if(user.cd35 > 0) user.cd35 -= 1
            if(user.cd36 > 0) user.cd36 -= 1
            if(user.porezka > 0) user.porezka -= 1
            if(user.cd37 > 0) user.cd37 -= 1
            if(u.cd11 > 0) u.cd11 -= 1
            if(u.del11 > 0) u.del11 -= 1
            if(u.cd12 > 0) u.cd12 -= 1
            if(u.del12 > 0) u.del12 -= 1
            if(u.cd13 > 0) u.cd13 -= 1
            if(u.cd14 > 0) u.cd14 -= 1
            if(u.cd15 > 0) u.cd15 -= 1
            if(u.spikes > 0) u.spikes -= 1
            if(u.cd16 > 0) u.cd16 -= 1
            if(u.clinch > 0) u.clinch = -1
            if(u.cd21 > 0) u.cd21 -= 1
            if(u.cd22 > 0) u.cd22 -= 1
            if(u.cd31 > 0) u.cd31 -= 1
            if(u.cd32 > 0) u.cd32 -= 1
            if(u.cd33 > 0) u.cd33 -= 1
            if(u.cd34 > 0) u.cd34 -= 1
            if(u.cd35 > 0) u.cd35 -= 1
            if(u.cd36 > 0) u.cd36 -= 1
            if(u.porezka > 0) u.porezka -= 1
            if(u.cd37 > 0) u.cd37 -= 1
            if(user.burn > 0) user.burn -= 1
            if(u.burn > 0) u.burn -= 1
            if(user.poison > 0) user.poison -= 1
            if(u.poison > 0) u.poison -= 1
            if(user.poisoning > 0) user.poisoning -= 1
            if(u.poisoning > 0) u.poisoning -= 1
            user.steps += 1
            u.steps += 1
            if (u.clas.id == 1) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, так как активировал "клинч", @id${user.id}(${user.nick}) получает ⚔0 урона, так как атака @id${user.id}(${user.nick}) меньше защиты @id${u.id}(${u.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "😈",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🛡",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🖤",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "❣",
                    color: "positive",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "☦",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚙",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚔",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 2) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, так как активировал "клинч", @id${user.id}(${user.nick}) получает ⚔0 урона, так как атака @id${user.id}(${user.nick}) меньше защиты @id${u.id}(${u.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "❄",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💥",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🍃",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔥",
                    color: "negative",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "💧",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚡",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 3) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${u.id}(${u.nick}) не получает урона, так как активировал "клинч", @id${user.id}(${user.nick}) получает ⚔0 урона, так как атака @id${user.id}(${user.nick}) меньше защиты @id${u.id}(${u.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "🦠",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔪",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💣",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "👁‍🗨",
                  color: "primary",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "🧬",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🗡",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💉",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
              }
            if(user.del11 == 0) {
              var hp = user.hp
              var atk = user.atk
              var procent = 20
              var resulthp = hp / 100 * procent
              var resultatk = atk / 100 * procent
              user.duelhp -= resulthp
              user.duelatk -= resultatk
              user.del11 = -1
               
            }
            if(u.del11 == 0) {
              var hp1 = u.hp
              var atk1 = u.atk
              var procent = 20
              var resulthp1 = hp1 / 100 * procent
              var resultatk1 = atk1 / 100 * procent
              u.duelhp -= resulthp1
              u.duelatk -= resultatk1
              u.del11 = -1
               
            }
            if(user.del12 == 0) {
              var def = user.def
              var procent = 20
               var resultdef = def / 100 * procent
              user.dueldef -= resultdef
              user.del12 = -1
               
            }
            if(u.del12 == 0) {
              var def1 = u.def
              var procent = 20
              var resultdef1 = def1 / 100 * procent
              u.dueldef -= resultdef1
              u.del12 = -1
               
            }
            if(user.spikes == 0) {
              user.spikes -= 1
               
            }
            if(u.spikes == 0) {
              u.spikes -= 1
               
            }
          }
          else {
            var atk = user.duelatk
            var udef = u.dueldef
            var result = atk - udef
            user.duelhp -= result
            if(user.cd11 > 0) user.cd11 -= 1
            if(user.del11 > 0) user.del11 -= 1
            if(user.cd12 > 0) user.cd12 -= 1
            if(user.del12 > 0) user.del12 -= 1
            if(user.cd13 > 0) user.cd13 -= 1
            if(user.cd14 > 0) user.cd14 -= 1
            if(user.cd15 > 0) user.cd15 -= 1
            if(user.spikes > 0) user.spikes -= 1
            if(user.cd16 > 0) user.cd16 -= 1
            if(user.cd21 > 0) user.cd21 -= 1
            if(user.cd22 > 0) user.cd22 -= 1
            if(user.cd31 > 0) user.cd31 -= 1
            if(user.cd32 > 0) user.cd32 -= 1
            if(user.cd33 > 0) user.cd33 -= 1
            if(user.cd34 > 0) user.cd34 -= 1
            if(user.cd35 > 0) user.cd35 -= 1
            if(user.cd36 > 0) user.cd36 -= 1
            if(user.porezka > 0) user.porezka -= 1
            if(user.cd37 > 0) user.cd37 -= 1
            if(u.cd11 > 0) u.cd11 -= 1
            if(u.del11 > 0) u.del11 -= 1
            if(u.cd12 > 0) u.cd12 -= 1
            if(u.del12 > 0) u.del12 -= 1
            if(u.cd13 > 0) u.cd13 -= 1
            if(u.cd14 > 0) u.cd14 -= 1
            if(u.cd15 > 0) u.cd15 -= 1
            if(u.spikes > 0) u.spikes -= 1
            if(u.cd16 > 0) u.cd16 -= 1
            if(u.clinch > 0) u.clinch = -1
            if(u.cd21 > 0) u.cd21 -= 1
            if(u.cd22 > 0) u.cd22 -= 1
            if(u.cd31 > 0) u.cd31 -= 1
            if(u.cd32 > 0) u.cd32 -= 1
            if(u.cd33 > 0) u.cd33 -= 1
            if(u.cd34 > 0) u.cd34 -= 1
            if(u.cd35 > 0) u.cd35 -= 1
            if(u.cd36 > 0) u.cd36 -= 1
            if(u.porezka > 0) u.porezka -= 1
            if(u.cd37 > 0) u.cd37 -= 1
            if(user.burn > 0) user.burn -= 1
            if(u.burn > 0) u.burn -= 1
            if(user.poison > 0) user.poison -= 1
            if(u.poison > 0) u.poison -= 1
            if(user.poisoning > 0) user.poisoning -= 1
            if(u.poisoning > 0) u.poisoning -= 1
            user.steps += 1
            u.steps += 1
            if (u.clas.id == 1) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, @id${user.id}(${user.nick}) получает ⚔${result} урона, так как @id${u.id}(${u.nick}) активировал "клинч". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "😈",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🛡",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🖤",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "❣",
                    color: "positive",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "☦",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚙",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚔",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 2) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, @id${user.id}(${user.nick}) получает ⚔${result} урона, так как @id${u.id}(${u.nick}) активировал "клинч". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "❄",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💥",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🍃",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔥",
                    color: "negative",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "💧",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚡",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 3) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${u.id}(${u.nick}) не получает урона, @id${user.id}(${user.nick}) получает ⚔${result} урона, так как @id${u.id}(${u.nick}) активировал "клинч". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "🦠",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔪",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💣",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "👁‍🗨",
                  color: "primary",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "🧬",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🗡",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💉",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
              }
              if(user.duelhp < 1) {
                var plata2 = user.money
                var procentplata = 10
                var resultplata2 = plata2 / 100 * procentplata
                let num27 = resultplata2
                var finalplata = num27.toFixed(0)
                var finalplata2 = Number(finalplata)
                user.money -= finalplata2
                u.money += finalplata2
                user.duel = false
                u.duel = false
                u.predictionduel = false
                user.predictduel = false
                user.steps = 0
                u.steps = 0
                user.timer = 0
                u.timer = 0
                user.duelhp = 0
                user.duelatk = 0
                user.dueldef = 0
                u.duelhp = 0
                u.duelatk = 0
                u.dueldef = 0
                user.cd11 = 0,
                user.del11 = -1,
                user.cd12 = 0,
                user.del12 = -1,
                user.cd13 = 0,
                user.cd14 = 0,
                user.cd15 = 0,
                user.spikes = -1,
                user.cd16 = 0,
                user.clinch = -1,
                user.cd21 = 0,
                user.cd22 = 0,
                user.nakopleniye = 0,
                user.el1 = 0,
                user.burn = 0,
                user.el2 = 0,
                user.el3 = 0,
                user.cd31 = 0,
                user.poison = 0,
                user.cd32 = 0,
                user.cd33 = 0,
                user.cd34 = 0,
                user.invisible = false,
                user.cd35 = 0,
                user.cd36 = 0,
                user.cd37 = 0,
                user.poisoning = -1
                u.cd11 = 0,
                u.del11 = -1,
                u.cd12 = 0,
                u.del12 = -1,
                u.cd13 = 0,
                u.cd14 = 0,
                u.cd15 = 0,
                u.spikes = -1,
                u.cd16 = 0,
                u.clinch = -1,
                u.cd21 = 0,
                u.cd22 = 0,
                u.nakopleniye = 0,
                u.el1 = 0,
                u.burn = 0,
                u.el2 = 0,
                u.el3 = 0,
                u.cd31 = 0,
                u.poison = 0,
                u.cd32 = 0,
                u.cd33 = 0,
                u.cd34 = 0,
                u.invisible = false,
                u.cd35 = 0,
                u.cd36 = 0,
                u.cd37 = 0,
                u.poisoning = -1
                msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                var constuser = user
                user = u
                u = constuser
              }
              else {
                if(u.duelhp < 1) {
                  var plata2 = user.money
                  var procentplata = 10
                  var resultplata2 = plata2 / 100 * procentplata
                  let num27 = resultplata2
                  var finalplata = num27.toFixed(0)
                  var finalplata2 = Number(finalplata)
                  u.money -= finalplata2
                  user.money += finalplata2
                  user.duel = false
                  u.duel = false
                  u.predictionduel = false
                  user.predictduel = false
                  user.steps = 0
                  u.steps = 0
                  user.timer = 0
                  u.timer = 0
                  user.duelhp = 0
                  user.duelatk = 0
                  user.dueldef = 0
                  u.duelhp = 0
                  u.duelatk = 0
                  u.dueldef = 0
                  user.cd11 = 0,
                  user.del11 = -1,
                  user.cd12 = 0,
                  user.del12 = -1,
                  user.cd13 = 0,
                  user.cd14 = 0,
                  user.cd15 = 0,
                  user.spikes = -1,
                  user.cd16 = 0,
                  user.clinch = -1,
                  user.cd21 = 0,
                  user.cd22 = 0,
                  user.nakopleniye = 0,
                  user.el1 = 0,
                  user.burn = 0,
                  user.el2 = 0,
                  user.el3 = 0,
                  user.cd31 = 0,
                  user.poison = 0,
                  user.cd32 = 0,
                  user.cd33 = 0,
                  user.cd34 = 0,
                  user.invisible = false,
                  user.cd35 = 0,
                  user.cd36 = 0,
                  user.cd37 = 0,
                  user.poisoning = -1
                  u.cd11 = 0,
                  u.del11 = -1,
                  u.cd12 = 0,
                  u.del12 = -1,
                  u.cd13 = 0,
                  u.cd14 = 0,
                  u.cd15 = 0,
                  u.spikes = -1,
                  u.cd16 = 0,
                  u.clinch = -1,
                  u.cd21 = 0,
                  u.cd22 = 0,
                  u.nakopleniye = 0,
                  u.el1 = 0,
                  u.burn = 0,
                  u.el2 = 0,
                  u.el3 = 0,
                  u.cd31 = 0,
                  u.poison = 0,
                  u.cd32 = 0,
                  u.cd33 = 0,
                  u.cd34 = 0,
                  u.invisible = false,
                  u.cd35 = 0,
                  u.cd36 = 0,
                  u.cd37 = 0,
                  u.poisoning = -1
                  msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                  var constuser = user
                  user = u
                  u = constuser
                }
              }
            if(user.del11 == 0) {
              var hp = user.hp
              var atk = user.atk
              var procent = 20
              var resulthp = hp / 100 * procent
              var resultatk = atk / 100 * procent
              user.duelhp -= resulthp
              user.duelatk -= resultatk
              user.del11 = -1
               
            }
            if(u.del11 == 0) {
              var hp1 = u.hp
              var atk1 = u.atk
              var procent = 20
              var resulthp1 = hp1 / 100 * procent
              var resultatk1 = atk1 / 100 * procent
              u.duelhp -= resulthp1
              u.duelatk -= resultatk1
              u.del11 = -1
               
            }
            if(user.del12 == 0) {
              var def = user.def
              var procent = 20
               var resultdef = def / 100 * procent
              user.dueldef -= resultdef
              user.del12 = -1
               
            }
            if(u.del12 == 0) {
              var def1 = u.def
              var procent = 20
              var resultdef1 = def1 / 100 * procent
              u.dueldef -= resultdef1
              u.del12 = -1
               
            }
            if(user.spikes == 0) {
              user.spikes -= 1
               
            }
            if(u.spikes == 0) {
              u.spikes -= 1
               
            }
          }
        }
        else {
          if(u.spikes > 0) {
            if(u.control > 0) {
              if(u.dueldef > user.duelatk) {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
              var atk = user.duelatk
              var udef = u.dueldef
              var result = atk - udef
              var spikes = result / 2
              u.duelhp -= result
              user.duelhp -= spikes
              if(user.cd11 > 0) user.cd11 -= 2
              if(user.del11 > 0) user.del11 -= 2
              if(user.cd12 > 0) user.cd12 -= 2
              if(user.del12 > 0) user.del12 -= 2
              if(user.cd13 > 0) user.cd13 -= 2
              if(user.cd14 > 0) user.cd14 -= 2
              if(user.cd15 > 0) user.cd15 -= 2
              if(user.spikes > 0) user.spikes -= 2
              if(user.cd16 > 0) user.cd16 -= 2
              if(user.cd21 > 0) user.cd21 -= 2
              if(user.cd22 > 0) user.cd22 -= 2
              if(user.cd31 > 0) user.cd31 -= 2
              if(user.cd32 > 0) user.cd32 -= 2
              if(user.cd33 > 0) user.cd33 -= 2
              if(user.cd34 > 0) user.cd34 -= 2
              if(user.cd35 > 0) user.cd35 -= 2
              if(user.cd36 > 0) user.cd36 -= 2
              if(user.porezka > 0) user.porezka -= 2
              if(user.cd37 > 0) user.cd37 -= 2
              if(u.cd11 > 0) u.cd11 -= 2
              if(u.del11 > 0) u.del11 -= 2
              if(u.cd12 > 0) u.cd12 -= 2
              if(u.del12 > 0) u.del12 -= 2
              if(u.cd13 > 0) u.cd13 -= 2
              if(u.cd14 > 0) u.cd14 -= 2
              if(u.cd15 > 0) u.cd15 -= 2
              if(u.spikes > 0) u.spikes -= 2
              if(u.cd16 > 0) u.cd16 -= 2
              if(u.clinch > 0) u.clinch = -1
              if(u.cd21 > 0) u.cd21 -= 2
              if(u.cd22 > 0) u.cd22 -= 2
              if(u.cd31 > 0) u.cd31 -= 2
              if(u.cd32 > 0) u.cd32 -= 2
              if(u.cd33 > 0) u.cd33 -= 2
              if(u.cd34 > 0) u.cd34 -= 2
              if(u.cd35 > 0) u.cd35 -= 2
              if(u.cd36 > 0) u.cd36 -= 2
              if(u.porezka > 0) u.porezka -= 2
              if(u.cd37 > 0) u.cd37 -= 2
              if(user.burn > 0) user.burn -= 2
              if(u.burn > 0) u.burn -= 2
              if(user.poison > 0) user.poison -= 2
              if(u.poison > 0) u.poison -= 2
              if(user.poisoning > 0) user.poisoning -= 2
              if(u.poisoning > 0) u.poisoning -= 2
              if(u.control == 2) {
                user.steps += 1
                u.steps += 1
                u.control -= 2
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
              }
              else {
                if(u.control > 2) {
                  user.steps += 2
                  u.steps += 2
                  u.control -= 2
                  if (user.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${user.id}(${user.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${user.id}(${user.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${user.id}(${user.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
              }
              if(user.el1 == 0 || user.el2 == 0) {
                user.el3 = 1
              }
              if(user.el1 == 1 || user.el2 == 1) {
                user.el3 = 2
              }
              if(user.el1 == 2 || user.el2 == 2) {
                user.el3 = 3
                if(user.el3 == 3) {
                  var atk2 = user.duelatk * 2
                  u.duelhp -= atk2
                  user.el1 = 0
                  user.el2 = 0
                  user.el3 = 0
                  msg.send(`@id${u.id}(${u.nick}) получает ${atk2} чистого урона`)
                }
              }
                if(user.duelhp < 1) {
                  var plata2 = user.money
                  var procentplata = 10
                  var resultplata2 = plata2 / 100 * procentplata
                  let num27 = resultplata2
                  var finalplata = num27.toFixed(0)
                  var finalplata2 = Number(finalplata)
                  user.money -= finalplata2
                  u.money += finalplata2
                  user.duel = false
                  u.duel = false
                  u.predictionduel = false
                  user.predictduel = false
                  user.steps = 0
                  u.steps = 0
                  user.timer = 0
                  u.timer = 0
                  user.duelhp = 0
                  user.duelatk = 0
                  user.dueldef = 0
                  u.duelhp = 0
                  u.duelatk = 0
                  u.dueldef = 0
                  user.cd11 = 0,
                  user.del11 = -1,
                  user.cd12 = 0,
                  user.del12 = -1,
                  user.cd13 = 0,
                  user.cd14 = 0,
                  user.cd15 = 0,
                  user.spikes = -1,
                  user.cd16 = 0,
                  user.clinch = -1,
                  user.cd21 = 0,
                  user.cd22 = 0,
                  user.nakopleniye = 0,
                  user.el1 = 0,
                  user.burn = 0,
                  user.el2 = 0,
                  user.el3 = 0,
                  user.cd31 = 0,
                  user.poison = 0,
                  user.cd32 = 0,
                  user.cd33 = 0,
                  user.cd34 = 0,
                  user.invisible = false,
                  user.cd35 = 0,
                  user.cd36 = 0,
                  user.cd37 = 0,
                  user.poisoning = -1
                  u.cd11 = 0,
                  u.del11 = -1,
                  u.cd12 = 0,
                  u.del12 = -1,
                  u.cd13 = 0,
                  u.cd14 = 0,
                  u.cd15 = 0,
                  u.spikes = -1,
                  u.cd16 = 0,
                  u.clinch = -1,
                  u.cd21 = 0,
                  u.cd22 = 0,
                  u.nakopleniye = 0,
                  u.el1 = 0,
                  u.burn = 0,
                  u.el2 = 0,
                  u.el3 = 0,
                  u.cd31 = 0,
                  u.poison = 0,
                  u.cd32 = 0,
                  u.cd33 = 0,
                  u.cd34 = 0,
                  u.invisible = false,
                  u.cd35 = 0,
                  u.cd36 = 0,
                  u.cd37 = 0,
                  u.poisoning = -1
                  msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                  var constuser = user
                  user = u
                  u = constuser
                }
                else {
                  if(u.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    u.money -= finalplata2
                    user.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                }
              if(user.del11 == 0) {
                var hp = user.hp
                var atk = user.atk
                var procent = 20
                var resulthp = hp / 100 * procent
                var resultatk = atk / 100 * procent
                user.duelhp -= resulthp
                user.duelatk -= resultatk
                user.del11 = -1
                 
              }
              if(u.del11 == 0) {
                var hp1 = u.hp
                var atk1 = u.atk
                var procent = 20
                var resulthp1 = hp1 / 100 * procent
                var resultatk1 = atk1 / 100 * procent
                u.duelhp -= resulthp1
                u.duelatk -= resultatk1
                u.del11 = -1
                 
              }
              if(user.del12 == 0) {
                var def = user.def
                var procent = 20
                 var resultdef = def / 100 * procent
                user.dueldef -= resultdef
                user.del12 = -1
                 
              }
              if(u.del12 == 0) {
                var def1 = u.def
                var procent = 20
                var resultdef1 = def1 / 100 * procent
                u.dueldef -= resultdef1
                u.del12 = -1
                 
              }
              if(user.spikes == 0) {
                user.spikes -= 1
                 
              }
              if(u.spikes == 0) {
                u.spikes -= 1
                 
              }
              }
            }
            else {
              if(user.duelatk < u.dueldef) {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
                var atk = user.duelatk
                var udef = u.dueldef
                var result = atk - udef
                var spikes = result / 2
                u.duelhp -= result
                user.duelhp -= spikes
                if(user.cd11 > 0) user.cd11 -= 1
                if(user.del11 > 0) user.del11 -= 1
                if(user.cd12 > 0) user.cd12 -= 1
                if(user.del12 > 0) user.del12 -= 1
                if(user.cd13 > 0) user.cd13 -= 1
                if(user.cd14 > 0) user.cd14 -= 1
                if(user.cd15 > 0) user.cd15 -= 1
                if(user.spikes > 0) user.spikes -= 1
                if(user.cd16 > 0) user.cd16 -= 1
                if(user.cd21 > 0) user.cd21 -= 1
                if(user.cd22 > 0) user.cd22 -= 1
                if(user.cd31 > 0) user.cd31 -= 1
                if(user.cd32 > 0) user.cd32 -= 1
                if(user.cd33 > 0) user.cd33 -= 1
                if(user.cd34 > 0) user.cd34 -= 1
                if(user.cd35 > 0) user.cd35 -= 1
                if(user.cd36 > 0) user.cd36 -= 1
                if(user.porezka > 0) user.porezka -= 1
                if(user.cd37 > 0) user.cd37 -= 1
                if(u.cd11 > 0) u.cd11 -= 1
                if(u.del11 > 0) u.del11 -= 1
                if(u.cd12 > 0) u.cd12 -= 1
                if(u.del12 > 0) u.del12 -= 1
                if(u.cd13 > 0) u.cd13 -= 1
                if(u.cd14 > 0) u.cd14 -= 1
                if(u.cd15 > 0) u.cd15 -= 1
                if(u.spikes > 0) u.spikes -= 1
                if(u.cd16 > 0) u.cd16 -= 1
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 1
                if(u.cd22 > 0) u.cd22 -= 1
                if(u.cd31 > 0) u.cd31 -= 1
                if(u.cd32 > 0) u.cd32 -= 1
                if(u.cd33 > 0) u.cd33 -= 1
                if(u.cd34 > 0) u.cd34 -= 1
                if(u.cd35 > 0) u.cd35 -= 1
                if(u.cd36 > 0) u.cd36 -= 1
                if(u.porezka > 0) u.porezka -= 1
                if(u.cd37 > 0) u.cd37 -= 1
                if(user.burn > 0) user.burn -= 1
                if(u.burn > 0) u.burn -= 1
                if(user.poison > 0) user.poison -= 1
                if(u.poison > 0) u.poison -= 1
                if(user.poisoning > 0) user.poisoning -= 1
                if(u.poisoning > 0) u.poisoning -= 1
                user.steps += 1
                u.steps += 1
                if(user.el1 == 0 || user.el2 == 0) {
                  user.el3 = 1
                }
                if(user.el1 == 1 || user.el2 == 1) {
                  user.el3 = 2
                }
                if(user.el1 == 2 || user.el2 == 2) {
                  user.el3 = 3
                  if(user.el3 == 3) {
                    var atk2 = user.duelatk * 2
                    u.duelhp -= atk2
                    user.el1 = 0
                    user.el2 = 0
                    user.el3 = 0
                    msg.send(`@id${u.id}(${u.nick}) получает ${atk2} чистого урона`)
                  }
                }
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
                  if(user.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    user.money -= finalplata2
                    u.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                  else {
                    if(u.duelhp < 1) {
                      var plata2 = user.money
                      var procentplata = 10
                      var resultplata2 = plata2 / 100 * procentplata
                      let num27 = resultplata2
                      var finalplata = num27.toFixed(0)
                      var finalplata2 = Number(finalplata)
                      u.money -= finalplata2
                      user.money += finalplata2
                      user.duel = false
                      u.duel = false
                      u.predictionduel = false
                      user.predictduel = false
                      user.steps = 0
                      u.steps = 0
                      user.timer = 0
                      u.timer = 0
                      user.duelhp = 0
                      user.duelatk = 0
                      user.dueldef = 0
                      u.duelhp = 0
                      u.duelatk = 0
                      u.dueldef = 0
                      user.cd11 = 0,
                      user.del11 = -1,
                      user.cd12 = 0,
                      user.del12 = -1,
                      user.cd13 = 0,
                      user.cd14 = 0,
                      user.cd15 = 0,
                      user.spikes = -1,
                      user.cd16 = 0,
                      user.clinch = -1,
                      user.cd21 = 0,
                      user.cd22 = 0,
                      user.nakopleniye = 0,
                      user.el1 = 0,
                      user.burn = 0,
                      user.el2 = 0,
                      user.el3 = 0,
                      user.cd31 = 0,
                      user.poison = 0,
                      user.cd32 = 0,
                      user.cd33 = 0,
                      user.cd34 = 0,
                      user.invisible = false,
                      user.cd35 = 0,
                      user.cd36 = 0,
                      user.cd37 = 0,
                      user.poisoning = -1
                      u.cd11 = 0,
                      u.del11 = -1,
                      u.cd12 = 0,
                      u.del12 = -1,
                      u.cd13 = 0,
                      u.cd14 = 0,
                      u.cd15 = 0,
                      u.spikes = -1,
                      u.cd16 = 0,
                      u.clinch = -1,
                      u.cd21 = 0,
                      u.cd22 = 0,
                      u.nakopleniye = 0,
                      u.el1 = 0,
                      u.burn = 0,
                      u.el2 = 0,
                      u.el3 = 0,
                      u.cd31 = 0,
                      u.poison = 0,
                      u.cd32 = 0,
                      u.cd33 = 0,
                      u.cd34 = 0,
                      u.invisible = false,
                      u.cd35 = 0,
                      u.cd36 = 0,
                      u.cd37 = 0,
                      u.poisoning = -1
                      msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                      var constuser = user
                      user = u
                      u = constuser
                    }
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
            }
          }
          else {
            if(u.control > 0) {
              if(u.dueldef > user.duelatk) {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
                var atk = user.duelatk
                var udef = u.dueldef
                var result = atk - udef
                u.duelhp -= result
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                if(user.el1 == 0 || user.el2 == 0) {
                  user.el3 = 1
                }
                if(user.el1 == 1 || user.el2 == 1) {
                  user.el3 = 2
                }
                if(user.el1 == 2 || user.el2 == 2) {
                  user.el3 = 3
                  if(user.el3 == 3) {
                    var atk2 = user.duelatk * 2
                    u.duelhp -= atk2
                    user.el1 = 0
                    user.el2 = 0
                    user.el3 = 0
                    msg.send(`@id${u.id}(${u.nick}) получает ${atk2} чистого урона`)
                  }
                }
                  if(user.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    user.money -= finalplata2
                    u.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                  else {
                    if(u.duelhp < 1) {
                      var plata2 = user.money
                      var procentplata = 10
                      var resultplata2 = plata2 / 100 * procentplata
                      let num27 = resultplata2
                      var finalplata = num27.toFixed(0)
                      var finalplata2 = Number(finalplata)
                      u.money -= finalplata2
                      user.money += finalplata2
                      user.duel = false
                      u.duel = false
                      u.predictionduel = false
                      user.predictduel = false
                      user.steps = 0
                      u.steps = 0
                      user.timer = 0
                      u.timer = 0
                      user.duelhp = 0
                      user.duelatk = 0
                      user.dueldef = 0
                      u.duelhp = 0
                      u.duelatk = 0
                      u.dueldef = 0
                      user.cd11 = 0,
                      user.del11 = -1,
                      user.cd12 = 0,
                      user.del12 = -1,
                      user.cd13 = 0,
                      user.cd14 = 0,
                      user.cd15 = 0,
                      user.spikes = -1,
                      user.cd16 = 0,
                      user.clinch = -1,
                      user.cd21 = 0,
                      user.cd22 = 0,
                      user.nakopleniye = 0,
                      user.el1 = 0,
                      user.burn = 0,
                      user.el2 = 0,
                      user.el3 = 0,
                      user.cd31 = 0,
                      user.poison = 0,
                      user.cd32 = 0,
                      user.cd33 = 0,
                      user.cd34 = 0,
                      user.invisible = false,
                      user.cd35 = 0,
                      user.cd36 = 0,
                      user.cd37 = 0,
                      user.poisoning = -1
                      u.cd11 = 0,
                      u.del11 = -1,
                      u.cd12 = 0,
                      u.del12 = -1,
                      u.cd13 = 0,
                      u.cd14 = 0,
                      u.cd15 = 0,
                      u.spikes = -1,
                      u.cd16 = 0,
                      u.clinch = -1,
                      u.cd21 = 0,
                      u.cd22 = 0,
                      u.nakopleniye = 0,
                      u.el1 = 0,
                      u.burn = 0,
                      u.el2 = 0,
                      u.el3 = 0,
                      u.cd31 = 0,
                      u.poison = 0,
                      u.cd32 = 0,
                      u.cd33 = 0,
                      u.cd34 = 0,
                      u.invisible = false,
                      u.cd35 = 0,
                      u.cd36 = 0,
                      u.cd37 = 0,
                      u.poisoning = -1
                      msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                      var constuser = user
                      user = u
                      u = constuser
                    }
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
            }
            else {
              if(u.dueldef > user.duelatk) {
                if(user.cd11 > 0) user.cd11 -= 1
                if(user.del11 > 0) user.del11 -= 1
                if(user.cd12 > 0) user.cd12 -= 1
                if(user.del12 > 0) user.del12 -= 1
                if(user.cd13 > 0) user.cd13 -= 1
                if(user.cd14 > 0) user.cd14 -= 1
                if(user.cd15 > 0) user.cd15 -= 1
                if(user.spikes > 0) user.spikes -= 1
                if(user.cd16 > 0) user.cd16 -= 1
                if(user.cd21 > 0) user.cd21 -= 1
                if(user.cd22 > 0) user.cd22 -= 1
                if(user.cd31 > 0) user.cd31 -= 1
                if(user.cd32 > 0) user.cd32 -= 1
                if(user.cd33 > 0) user.cd33 -= 1
                if(user.cd34 > 0) user.cd34 -= 1
                if(user.cd35 > 0) user.cd35 -= 1
                if(user.cd36 > 0) user.cd36 -= 1
                if(user.porezka > 0) user.porezka -= 1
                if(user.cd37 > 0) user.cd37 -= 1
                if(u.cd11 > 0) u.cd11 -= 1
                if(u.del11 > 0) u.del11 -= 1
                if(u.cd12 > 0) u.cd12 -= 1
                if(u.del12 > 0) u.del12 -= 1
                if(u.cd13 > 0) u.cd13 -= 1
                if(u.cd14 > 0) u.cd14 -= 1
                if(u.cd15 > 0) u.cd15 -= 1
                if(u.spikes > 0) u.spikes -= 1
                if(u.cd16 > 0) u.cd16 -= 1
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 1
                if(u.cd22 > 0) u.cd22 -= 1
                if(u.cd31 > 0) u.cd31 -= 1
                if(u.cd32 > 0) u.cd32 -= 1
                if(u.cd33 > 0) u.cd33 -= 1
                if(u.cd34 > 0) u.cd34 -= 1
                if(u.cd35 > 0) u.cd35 -= 1
                if(u.cd36 > 0) u.cd36 -= 1
                if(u.porezka > 0) u.porezka -= 1
                if(u.cd37 > 0) u.cd37 -= 1
                if(user.burn > 0) user.burn -= 1
                if(u.burn > 0) u.burn -= 1
                if(user.poison > 0) user.poison -= 1
                if(u.poison > 0) u.poison -= 1
                if(user.poisoning > 0) user.poisoning -= 1
                if(u.poisoning > 0) u.poisoning -= 1
                user.steps += 1
                u.steps += 1
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
                var atk = user.duelatk
                var udef = u.dueldef
                var result = atk - udef
                u.duelhp -= result
                if(user.cd11 > 0) user.cd11 -= 1
                if(user.del11 > 0) user.del11 -= 1
                if(user.cd12 > 0) user.cd12 -= 1
                if(user.del12 > 0) user.del12 -= 1
                if(user.cd13 > 0) user.cd13 -= 1
                if(user.cd14 > 0) user.cd14 -= 1
                if(user.cd15 > 0) user.cd15 -= 1
                if(user.spikes > 0) user.spikes -= 1
                if(user.cd16 > 0) user.cd16 -= 1
                if(user.cd21 > 0) user.cd21 -= 1
                if(user.cd22 > 0) user.cd22 -= 1
                if(user.cd31 > 0) user.cd31 -= 1
                if(user.cd32 > 0) user.cd32 -= 1
                if(user.cd33 > 0) user.cd33 -= 1
                if(user.cd34 > 0) user.cd34 -= 1
                if(user.cd35 > 0) user.cd35 -= 1
                if(user.cd36 > 0) user.cd36 -= 1
                if(user.porezka > 0) user.porezka -= 1
                if(user.cd37 > 0) user.cd37 -= 1
                if(u.cd11 > 0) u.cd11 -= 1
                if(u.del11 > 0) u.del11 -= 1
                if(u.cd12 > 0) u.cd12 -= 1
                if(u.del12 > 0) u.del12 -= 1
                if(u.cd13 > 0) u.cd13 -= 1
                if(u.cd14 > 0) u.cd14 -= 1
                if(u.cd15 > 0) u.cd15 -= 1
                if(u.spikes > 0) u.spikes -= 1
                if(u.cd16 > 0) u.cd16 -= 1
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 1
                if(u.cd22 > 0) u.cd22 -= 1
                if(u.cd31 > 0) u.cd31 -= 1
                if(u.cd32 > 0) u.cd32 -= 1
                if(u.cd33 > 0) u.cd33 -= 1
                if(u.cd34 > 0) u.cd34 -= 1
                if(u.cd35 > 0) u.cd35 -= 1
                if(u.cd36 > 0) u.cd36 -= 1
                if(u.porezka > 0) u.porezka -= 1
                if(u.cd37 > 0) u.cd37 -= 1
                if(user.burn > 0) user.burn -= 1
                if(u.burn > 0) u.burn -= 1
                if(user.poison > 0) user.poison -= 1
                if(u.poison > 0) u.poison -= 1
                if(user.poisoning > 0) user.poisoning -= 1
                if(u.poisoning > 0) u.poisoning -= 1
                user.steps += 1
                u.steps += 1
                if(user.el1 == 0 || user.el2 == 0) {
                  user.el3 = 1
                }
                if(user.el1 == 1 || user.el2 == 1) {
                  user.el3 = 2
                }
                if(user.el1 == 2 || user.el2 == 2) {
                  user.el3 = 3
                  if(user.el3 == 3) {
                    var atk2 = user.duelatk * 2
                    u.duelhp -= atk2
                    user.el1 = 0
                    user.el2 = 0
                    user.el3 = 0
                    msg.send(`@id${u.id}(${u.nick}) получает ${atk2} чистого урона`)
                  }
                }
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
                  if(user.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    user.money -= finalplata2
                    u.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                  else {
                    if(u.duelhp < 1) {
                      var plata2 = user.money
                      var procentplata = 10
                      var resultplata2 = plata2 / 100 * procentplata
                      let num27 = resultplata2
                      var finalplata = num27.toFixed(0)
                      var finalplata2 = Number(finalplata)
                      u.money -= finalplata2
                      user.money += finalplata2
                      user.duel = false
                      u.duel = false
                      u.predictionduel = false
                      user.predictduel = false
                      user.steps = 0
                      u.steps = 0
                      user.timer = 0
                      u.timer = 0
                      user.duelhp = 0
                      user.duelatk = 0
                      user.dueldef = 0
                      u.duelhp = 0
                      u.duelatk = 0
                      u.dueldef = 0
                      user.cd11 = 0,
                      user.del11 = -1,
                      user.cd12 = 0,
                      user.del12 = -1,
                      user.cd13 = 0,
                      user.cd14 = 0,
                      user.cd15 = 0,
                      user.spikes = -1,
                      user.cd16 = 0,
                      user.clinch = -1,
                      user.cd21 = 0,
                      user.cd22 = 0,
                      user.nakopleniye = 0,
                      user.el1 = 0,
                      user.burn = 0,
                      user.el2 = 0,
                      user.el3 = 0,
                      user.cd31 = 0,
                      user.poison = 0,
                      user.cd32 = 0,
                      user.cd33 = 0,
                      user.cd34 = 0,
                      user.invisible = false,
                      user.cd35 = 0,
                      user.cd36 = 0,
                      user.cd37 = 0,
                      user.poisoning = -1
                      u.cd11 = 0,
                      u.del11 = -1,
                      u.cd12 = 0,
                      u.del12 = -1,
                      u.cd13 = 0,
                      u.cd14 = 0,
                      u.cd15 = 0,
                      u.spikes = -1,
                      u.cd16 = 0,
                      u.clinch = -1,
                      u.cd21 = 0,
                      u.cd22 = 0,
                      u.nakopleniye = 0,
                      u.el1 = 0,
                      u.burn = 0,
                      u.el2 = 0,
                      u.el3 = 0,
                      u.cd31 = 0,
                      u.poison = 0,
                      u.cd32 = 0,
                      u.cd33 = 0,
                      u.cd34 = 0,
                      u.invisible = false,
                      u.cd35 = 0,
                      u.cd36 = 0,
                      u.cd37 = 0,
                      u.poisoning = -1
                      msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                      var constuser = user
                      user = u
                      u = constuser
                    }
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
            }
          }
        }
      }
    }
    if(user.poison > 0) {
      var procent50 = 50
      var poison50 = u.duelatk * procent50 / 100
      user.duelhp -= poison50
      msg.send(`"${user.nick}" получает ⚔${poison50} урона`)
    }
    if(user.poisoning > 0) {
      var result1 = user.duelatk - user.dueldef
      user.duelhp -= result1
      msg.send(`"${user.nick}" получает ⚔${result1} урона от отравления`)
    }
    if(u.poisoning > 0) {
      var result2 = u.duelatk - u.dueldef
      u.duelhp -= result2
      msg.send(`"${u.nick}" наносит себе ⚔${result2} урона`)
    }
    if(user.poisoning == 0) {
      user.poisoning = -1
      var atk3 = user.duelatk * 3
      var heal1 = atk3 * 2
      user.duelhp += heal1
      if (user.duelhp > user.hp) {
      user.duelhp = user.hp
      }
      msg.send(`"${user.nick}" восстанавливает 💚${heal1} здоровья`)
    }
    if(u.poisoning == 0) {
      u.poisoning = -1
      var atk3 = u.duelatk * 3
      var heal2 = atk3 * 2
      u.duelhp += heal2
      if (u.duelhp > u.hp) {
      u.duelhp = u.hp
      }
      msg.send(`"${u.nick}" восстанавливает 💚${heal2} здоровья`)
    }
    var constuser = user
    user = u
    u = constuser
  })

  vk.updates.hear(/^(.*) 💧$/i, msg => {
    if(user.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(u.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(user.steps > 100 || u.steps > 100) {
      user.duel = false
      u.duel = false
      u.predictionduel = false
      user.predictduel = false
      user.steps = 0
      u.steps = 0
      user.timer = 0
      u.timer = 0
      user.duelhp = 0
      user.duelatk = 0
      user.dueldef = 0
      u.duelhp = 0
      u.duelatk = 0
      u.dueldef = 0
      user.cd11 = 0,
      user.del11 = -1,
      user.cd12 = 0,
      user.del12 = -1,
      user.cd13 = 0,
      user.cd14 = 0,
      user.cd15 = 0,
      user.spikes = -1,
      user.cd16 = 0,
      user.clinch = -1,
      user.cd21 = 0,
      user.cd22 = 0,
      user.nakopleniye = 0,
      user.el1 = 0,
      user.burn = 0,
      user.el2 = 0,
      user.el3 = 0,
      user.cd31 = 0,
      user.poison = 0,
      user.cd32 = 0,
      user.cd33 = 0,
      user.cd34 = 0,
      user.invisible = false,
      user.cd35 = 0,
      user.cd36 = 0,
      user.cd37 = 0,
      user.poisoning = -1
      u.cd11 = 0,
      u.del11 = -1,
      u.cd12 = 0,
      u.del12 = -1,
      u.cd13 = 0,
      u.cd14 = 0,
      u.cd15 = 0,
      u.spikes = -1,
      u.cd16 = 0,
      u.clinch = -1,
      u.cd21 = 0,
      u.cd22 = 0,
      u.nakopleniye = 0,
      u.el1 = 0,
      u.burn = 0,
      u.el2 = 0,
      u.el3 = 0,
      u.cd31 = 0,
      u.poison = 0,
      u.cd32 = 0,
      u.cd33 = 0,
      u.cd34 = 0,
      u.invisible = false,
      u.cd35 = 0,
      u.cd36 = 0,
      u.cd37 = 0,
      u.poisoning = -1
      return msg.send ('Ходы дуэли превысили 100. Победитель не определён')
    }
    if(msg.senderId == u.id) {
      var constu = u
      u = user
      user = constu
    }
    if(user.clas.id != 2) return msg.send (`Умение не принадлежит вашему классу`)
    if(msg.$match[1] != '[club202302035|@eswep]') return
    if(msg.messagePayload != "project RQ") return
    if(u.nakopleniye > 0) {
      if(u.control > 0) u.nakopleniye = 0
    }
    if (user.steps % 2 == 0) {
      return msg.send ('Сейчас не твой ход')
    }
    else {
      if(user.control > 0) {
        msg.send (`Невозможно применить умение`);
      }
      else{
        if(u.clinch > 0) {
          if(user.duelatk < u.dueldef) {
            if(user.cd11 > 0) user.cd11 -= 1
            if(user.del11 > 0) user.del11 -= 1
            if(user.cd12 > 0) user.cd12 -= 1
            if(user.del12 > 0) user.del12 -= 1
            if(user.cd13 > 0) user.cd13 -= 1
            if(user.cd14 > 0) user.cd14 -= 1
            if(user.cd15 > 0) user.cd15 -= 1
            if(user.spikes > 0) user.spikes -= 1
            if(user.cd16 > 0) user.cd16 -= 1
            if(user.cd21 > 0) user.cd21 -= 1
            if(user.cd22 > 0) user.cd22 -= 1
            if(user.cd31 > 0) user.cd31 -= 1
            if(user.cd32 > 0) user.cd32 -= 1
            if(user.cd33 > 0) user.cd33 -= 1
            if(user.cd34 > 0) user.cd34 -= 1
            if(user.cd35 > 0) user.cd35 -= 1
            if(user.cd36 > 0) user.cd36 -= 1
            if(user.porezka > 0) user.porezka -= 1
            if(user.cd37 > 0) user.cd37 -= 1
            if(u.cd11 > 0) u.cd11 -= 1
            if(u.del11 > 0) u.del11 -= 1
            if(u.cd12 > 0) u.cd12 -= 1
            if(u.del12 > 0) u.del12 -= 1
            if(u.cd13 > 0) u.cd13 -= 1
            if(u.cd14 > 0) u.cd14 -= 1
            if(u.cd15 > 0) u.cd15 -= 1
            if(u.spikes > 0) u.spikes -= 1
            if(u.cd16 > 0) u.cd16 -= 1
            if(u.clinch > 0) u.clinch = -1
            if(u.cd21 > 0) u.cd21 -= 1
            if(u.cd22 > 0) u.cd22 -= 1
            if(u.cd31 > 0) u.cd31 -= 1
            if(u.cd32 > 0) u.cd32 -= 1
            if(u.cd33 > 0) u.cd33 -= 1
            if(u.cd34 > 0) u.cd34 -= 1
            if(u.cd35 > 0) u.cd35 -= 1
            if(u.cd36 > 0) u.cd36 -= 1
            if(u.porezka > 0) u.porezka -= 1
            if(u.cd37 > 0) u.cd37 -= 1
            if(user.burn > 0) user.burn -= 1
            if(u.burn > 0) u.burn -= 1
            if(user.poison > 0) user.poison -= 1
            if(u.poison > 0) u.poison -= 1
            if(user.poisoning > 0) user.poisoning -= 1
            if(u.poisoning > 0) u.poisoning -= 1
            user.steps += 1
            u.steps += 1
            if (u.clas.id == 1) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, так как активировал "клинч", @id${user.id}(${user.nick}) получает ⚔0 урона, так как атака @id${user.id}(${user.nick}) меньше защиты @id${u.id}(${u.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "😈",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🛡",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🖤",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "❣",
                    color: "positive",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "☦",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚙",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚔",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 2) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, так как активировал "клинч", @id${user.id}(${user.nick}) получает ⚔0 урона, так как атака @id${user.id}(${user.nick}) меньше защиты @id${u.id}(${u.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "❄",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💥",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🍃",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔥",
                    color: "negative",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "💧",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚡",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 3) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${u.id}(${u.nick}) не получает урона, так как активировал "клинч", @id${user.id}(${user.nick}) получает ⚔0 урона, так как атака @id${user.id}(${user.nick}) меньше защиты @id${u.id}(${u.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "🦠",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔪",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💣",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "👁‍🗨",
                  color: "primary",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "🧬",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🗡",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💉",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
              }
            if(user.del11 == 0) {
              var hp = user.hp
              var atk = user.atk
              var procent = 20
              var resulthp = hp / 100 * procent
              var resultatk = atk / 100 * procent
              user.duelhp -= resulthp
              user.duelatk -= resultatk
              user.del11 = -1
               
            }
            if(u.del11 == 0) {
              var hp1 = u.hp
              var atk1 = u.atk
              var procent = 20
              var resulthp1 = hp1 / 100 * procent
              var resultatk1 = atk1 / 100 * procent
              u.duelhp -= resulthp1
              u.duelatk -= resultatk1
              u.del11 = -1
               
            }
            if(user.del12 == 0) {
              var def = user.def
              var procent = 20
               var resultdef = def / 100 * procent
              user.dueldef -= resultdef
              user.del12 = -1
               
            }
            if(u.del12 == 0) {
              var def1 = u.def
              var procent = 20
              var resultdef1 = def1 / 100 * procent
              u.dueldef -= resultdef1
              u.del12 = -1
               
            }
            if(user.spikes == 0) {
              user.spikes -= 1
               
            }
            if(u.spikes == 0) {
              u.spikes -= 1
               
            }
          }
          else {
            var atk = user.duelatk
            var udef = u.dueldef
            var result = atk - udef
            user.duelhp -= result
            if(user.cd11 > 0) user.cd11 -= 1
            if(user.del11 > 0) user.del11 -= 1
            if(user.cd12 > 0) user.cd12 -= 1
            if(user.del12 > 0) user.del12 -= 1
            if(user.cd13 > 0) user.cd13 -= 1
            if(user.cd14 > 0) user.cd14 -= 1
            if(user.cd15 > 0) user.cd15 -= 1
            if(user.spikes > 0) user.spikes -= 1
            if(user.cd16 > 0) user.cd16 -= 1
            if(user.cd21 > 0) user.cd21 -= 1
            if(user.cd22 > 0) user.cd22 -= 1
            if(user.cd31 > 0) user.cd31 -= 1
            if(user.cd32 > 0) user.cd32 -= 1
            if(user.cd33 > 0) user.cd33 -= 1
            if(user.cd34 > 0) user.cd34 -= 1
            if(user.cd35 > 0) user.cd35 -= 1
            if(user.cd36 > 0) user.cd36 -= 1
            if(user.porezka > 0) user.porezka -= 1
            if(user.cd37 > 0) user.cd37 -= 1
            if(u.cd11 > 0) u.cd11 -= 1
            if(u.del11 > 0) u.del11 -= 1
            if(u.cd12 > 0) u.cd12 -= 1
            if(u.del12 > 0) u.del12 -= 1
            if(u.cd13 > 0) u.cd13 -= 1
            if(u.cd14 > 0) u.cd14 -= 1
            if(u.cd15 > 0) u.cd15 -= 1
            if(u.spikes > 0) u.spikes -= 1
            if(u.cd16 > 0) u.cd16 -= 1
            if(u.clinch > 0) u.clinch = -1
            if(u.cd21 > 0) u.cd21 -= 1
            if(u.cd22 > 0) u.cd22 -= 1
            if(u.cd31 > 0) u.cd31 -= 1
            if(u.cd32 > 0) u.cd32 -= 1
            if(u.cd33 > 0) u.cd33 -= 1
            if(u.cd34 > 0) u.cd34 -= 1
            if(u.cd35 > 0) u.cd35 -= 1
            if(u.cd36 > 0) u.cd36 -= 1
            if(u.porezka > 0) u.porezka -= 1
            if(u.cd37 > 0) u.cd37 -= 1
            if(user.burn > 0) user.burn -= 1
            if(u.burn > 0) u.burn -= 1
            if(user.poison > 0) user.poison -= 1
            if(u.poison > 0) u.poison -= 1
            if(user.poisoning > 0) user.poisoning -= 1
            if(u.poisoning > 0) u.poisoning -= 1
            user.steps += 1
            u.steps += 1
            if (u.clas.id == 1) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, @id${user.id}(${user.nick}) получает ⚔${result} урона, так как @id${u.id}(${u.nick}) активировал "клинч". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "😈",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🛡",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🖤",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "❣",
                    color: "positive",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "☦",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚙",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚔",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 2) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, @id${user.id}(${user.nick}) получает ⚔${result} урона, так как @id${u.id}(${u.nick}) активировал "клинч". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "❄",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💥",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🍃",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔥",
                    color: "negative",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "💧",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚡",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 3) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${u.id}(${u.nick}) не получает урона, @id${user.id}(${user.nick}) получает ⚔${result} урона, так как @id${u.id}(${u.nick}) активировал "клинч". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "🦠",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔪",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💣",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "👁‍🗨",
                  color: "primary",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "🧬",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🗡",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💉",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
              }
              if(user.duelhp < 1) {
                var plata2 = user.money
                var procentplata = 10
                var resultplata2 = plata2 / 100 * procentplata
                let num27 = resultplata2
                var finalplata = num27.toFixed(0)
                var finalplata2 = Number(finalplata)
                user.money -= finalplata2
                u.money += finalplata2
                user.duel = false
                u.duel = false
                u.predictionduel = false
                user.predictduel = false
                user.steps = 0
                u.steps = 0
                user.timer = 0
                u.timer = 0
                user.duelhp = 0
                user.duelatk = 0
                user.dueldef = 0
                u.duelhp = 0
                u.duelatk = 0
                u.dueldef = 0
                user.cd11 = 0,
                user.del11 = -1,
                user.cd12 = 0,
                user.del12 = -1,
                user.cd13 = 0,
                user.cd14 = 0,
                user.cd15 = 0,
                user.spikes = -1,
                user.cd16 = 0,
                user.clinch = -1,
                user.cd21 = 0,
                user.cd22 = 0,
                user.nakopleniye = 0,
                user.el1 = 0,
                user.burn = 0,
                user.el2 = 0,
                user.el3 = 0,
                user.cd31 = 0,
                user.poison = 0,
                user.cd32 = 0,
                user.cd33 = 0,
                user.cd34 = 0,
                user.invisible = false,
                user.cd35 = 0,
                user.cd36 = 0,
                user.cd37 = 0,
                user.poisoning = -1
                u.cd11 = 0,
                u.del11 = -1,
                u.cd12 = 0,
                u.del12 = -1,
                u.cd13 = 0,
                u.cd14 = 0,
                u.cd15 = 0,
                u.spikes = -1,
                u.cd16 = 0,
                u.clinch = -1,
                u.cd21 = 0,
                u.cd22 = 0,
                u.nakopleniye = 0,
                u.el1 = 0,
                u.burn = 0,
                u.el2 = 0,
                u.el3 = 0,
                u.cd31 = 0,
                u.poison = 0,
                u.cd32 = 0,
                u.cd33 = 0,
                u.cd34 = 0,
                u.invisible = false,
                u.cd35 = 0,
                u.cd36 = 0,
                u.cd37 = 0,
                u.poisoning = -1
                msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                var constuser = user
                user = u
                u = constuser
              }
              else {
                if(u.duelhp < 1) {
                  var plata2 = user.money
                  var procentplata = 10
                  var resultplata2 = plata2 / 100 * procentplata
                  let num27 = resultplata2
                  var finalplata = num27.toFixed(0)
                  var finalplata2 = Number(finalplata)
                  u.money -= finalplata2
                  user.money += finalplata2
                  user.duel = false
                  u.duel = false
                  u.predictionduel = false
                  user.predictduel = false
                  user.steps = 0
                  u.steps = 0
                  user.timer = 0
                  u.timer = 0
                  user.duelhp = 0
                  user.duelatk = 0
                  user.dueldef = 0
                  u.duelhp = 0
                  u.duelatk = 0
                  u.dueldef = 0
                  user.cd11 = 0,
                  user.del11 = -1,
                  user.cd12 = 0,
                  user.del12 = -1,
                  user.cd13 = 0,
                  user.cd14 = 0,
                  user.cd15 = 0,
                  user.spikes = -1,
                  user.cd16 = 0,
                  user.clinch = -1,
                  user.cd21 = 0,
                  user.cd22 = 0,
                  user.nakopleniye = 0,
                  user.el1 = 0,
                  user.burn = 0,
                  user.el2 = 0,
                  user.el3 = 0,
                  user.cd31 = 0,
                  user.poison = 0,
                  user.cd32 = 0,
                  user.cd33 = 0,
                  user.cd34 = 0,
                  user.invisible = false,
                  user.cd35 = 0,
                  user.cd36 = 0,
                  user.cd37 = 0,
                  user.poisoning = -1
                  u.cd11 = 0,
                  u.del11 = -1,
                  u.cd12 = 0,
                  u.del12 = -1,
                  u.cd13 = 0,
                  u.cd14 = 0,
                  u.cd15 = 0,
                  u.spikes = -1,
                  u.cd16 = 0,
                  u.clinch = -1,
                  u.cd21 = 0,
                  u.cd22 = 0,
                  u.nakopleniye = 0,
                  u.el1 = 0,
                  u.burn = 0,
                  u.el2 = 0,
                  u.el3 = 0,
                  u.cd31 = 0,
                  u.poison = 0,
                  u.cd32 = 0,
                  u.cd33 = 0,
                  u.cd34 = 0,
                  u.invisible = false,
                  u.cd35 = 0,
                  u.cd36 = 0,
                  u.cd37 = 0,
                  u.poisoning = -1
                  msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                  var constuser = user
                  user = u
                  u = constuser
                }
              }
            if(user.del11 == 0) {
              var hp = user.hp
              var atk = user.atk
              var procent = 20
              var resulthp = hp / 100 * procent
              var resultatk = atk / 100 * procent
              user.duelhp -= resulthp
              user.duelatk -= resultatk
              user.del11 = -1
               
            }
            if(u.del11 == 0) {
              var hp1 = u.hp
              var atk1 = u.atk
              var procent = 20
              var resulthp1 = hp1 / 100 * procent
              var resultatk1 = atk1 / 100 * procent
              u.duelhp -= resulthp1
              u.duelatk -= resultatk1
              u.del11 = -1
               
            }
            if(user.del12 == 0) {
              var def = user.def
              var procent = 20
               var resultdef = def / 100 * procent
              user.dueldef -= resultdef
              user.del12 = -1
               
            }
            if(u.del12 == 0) {
              var def1 = u.def
              var procent = 20
              var resultdef1 = def1 / 100 * procent
              u.dueldef -= resultdef1
              u.del12 = -1
               
            }
            if(user.spikes == 0) {
              user.spikes -= 1
               
            }
            if(u.spikes == 0) {
              u.spikes -= 1
               
            }
          }
        }
        else {
          if(u.spikes > 0) {
            if(u.control > 0) {
              if(u.dueldef > user.duelatk) {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
              var atk = user.duelatk
              var udef = u.dueldef
              var result = atk - udef
              var spikes = result / 2
              u.duelhp -= result
              user.duelhp -= spikes
              if(user.cd11 > 0) user.cd11 -= 2
              if(user.del11 > 0) user.del11 -= 2
              if(user.cd12 > 0) user.cd12 -= 2
              if(user.del12 > 0) user.del12 -= 2
              if(user.cd13 > 0) user.cd13 -= 2
              if(user.cd14 > 0) user.cd14 -= 2
              if(user.cd15 > 0) user.cd15 -= 2
              if(user.spikes > 0) user.spikes -= 2
              if(user.cd16 > 0) user.cd16 -= 2
              if(user.cd21 > 0) user.cd21 -= 2
              if(user.cd22 > 0) user.cd22 -= 2
              if(user.cd31 > 0) user.cd31 -= 2
              if(user.cd32 > 0) user.cd32 -= 2
              if(user.cd33 > 0) user.cd33 -= 2
              if(user.cd34 > 0) user.cd34 -= 2
              if(user.cd35 > 0) user.cd35 -= 2
              if(user.cd36 > 0) user.cd36 -= 2
              if(user.porezka > 0) user.porezka -= 2
              if(user.cd37 > 0) user.cd37 -= 2
              if(u.cd11 > 0) u.cd11 -= 2
              if(u.del11 > 0) u.del11 -= 2
              if(u.cd12 > 0) u.cd12 -= 2
              if(u.del12 > 0) u.del12 -= 2
              if(u.cd13 > 0) u.cd13 -= 2
              if(u.cd14 > 0) u.cd14 -= 2
              if(u.cd15 > 0) u.cd15 -= 2
              if(u.spikes > 0) u.spikes -= 2
              if(u.cd16 > 0) u.cd16 -= 2
              if(u.clinch > 0) u.clinch = -1
              if(u.cd21 > 0) u.cd21 -= 2
              if(u.cd22 > 0) u.cd22 -= 2
              if(u.cd31 > 0) u.cd31 -= 2
              if(u.cd32 > 0) u.cd32 -= 2
              if(u.cd33 > 0) u.cd33 -= 2
              if(u.cd34 > 0) u.cd34 -= 2
              if(u.cd35 > 0) u.cd35 -= 2
              if(u.cd36 > 0) u.cd36 -= 2
              if(u.porezka > 0) u.porezka -= 2
              if(u.cd37 > 0) u.cd37 -= 2
              if(user.burn > 0) user.burn -= 2
              if(u.burn > 0) u.burn -= 2
              if(user.poison > 0) user.poison -= 2
              if(u.poison > 0) u.poison -= 2
              if(user.poisoning > 0) user.poisoning -= 2
              if(u.poisoning > 0) u.poisoning -= 2
              if(u.control == 2) {
                user.steps += 1
                u.steps += 1
                u.control -= 2
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
              }
              else {
                if(u.control > 2) {
                  user.steps += 2
                  u.steps += 2
                  u.control -= 2
                  if (user.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${user.id}(${user.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${user.id}(${user.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${user.id}(${user.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
              }
              if(user.el1 == 0 || user.el3 == 0) {
                user.el2 = 1
              }
              if(user.el1 == 1 || user.el3 == 1) {
                user.el2 = 2
              }
              if(user.el1 == 2 || user.el3 == 2) {
                user.el2 = 3
                if(user.el2 == 3) {
                  u.control = 4
                  user.el1 = 0
                  user.el2 = 0
                  user.el3 = 0
                  user.steps += 1
                  u.steps += 1
                  msg.send(`@id${u.id}(${u.nick}) заморожен элементом 💧 на 4 хода`)
                }
              }
                if(user.duelhp < 1) {
                  var plata2 = user.money
                  var procentplata = 10
                  var resultplata2 = plata2 / 100 * procentplata
                  let num27 = resultplata2
                  var finalplata = num27.toFixed(0)
                  var finalplata2 = Number(finalplata)
                  user.money -= finalplata2
                  u.money += finalplata2
                  user.duel = false
                  u.duel = false
                  u.predictionduel = false
                  user.predictduel = false
                  user.steps = 0
                  u.steps = 0
                  user.timer = 0
                  u.timer = 0
                  user.duelhp = 0
                  user.duelatk = 0
                  user.dueldef = 0
                  u.duelhp = 0
                  u.duelatk = 0
                  u.dueldef = 0
                  user.cd11 = 0,
                  user.del11 = -1,
                  user.cd12 = 0,
                  user.del12 = -1,
                  user.cd13 = 0,
                  user.cd14 = 0,
                  user.cd15 = 0,
                  user.spikes = -1,
                  user.cd16 = 0,
                  user.clinch = -1,
                  user.cd21 = 0,
                  user.cd22 = 0,
                  user.nakopleniye = 0,
                  user.el1 = 0,
                  user.burn = 0,
                  user.el2 = 0,
                  user.el3 = 0,
                  user.cd31 = 0,
                  user.poison = 0,
                  user.cd32 = 0,
                  user.cd33 = 0,
                  user.cd34 = 0,
                  user.invisible = false,
                  user.cd35 = 0,
                  user.cd36 = 0,
                  user.cd37 = 0,
                  user.poisoning = -1
                  u.cd11 = 0,
                  u.del11 = -1,
                  u.cd12 = 0,
                  u.del12 = -1,
                  u.cd13 = 0,
                  u.cd14 = 0,
                  u.cd15 = 0,
                  u.spikes = -1,
                  u.cd16 = 0,
                  u.clinch = -1,
                  u.cd21 = 0,
                  u.cd22 = 0,
                  u.nakopleniye = 0,
                  u.el1 = 0,
                  u.burn = 0,
                  u.el2 = 0,
                  u.el3 = 0,
                  u.cd31 = 0,
                  u.poison = 0,
                  u.cd32 = 0,
                  u.cd33 = 0,
                  u.cd34 = 0,
                  u.invisible = false,
                  u.cd35 = 0,
                  u.cd36 = 0,
                  u.cd37 = 0,
                  u.poisoning = -1
                  msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                  var constuser = user
                  user = u
                  u = constuser
                }
                else {
                  if(u.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    u.money -= finalplata2
                    user.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                }
              if(user.del11 == 0) {
                var hp = user.hp
                var atk = user.atk
                var procent = 20
                var resulthp = hp / 100 * procent
                var resultatk = atk / 100 * procent
                user.duelhp -= resulthp
                user.duelatk -= resultatk
                user.del11 = -1
                 
              }
              if(u.del11 == 0) {
                var hp1 = u.hp
                var atk1 = u.atk
                var procent = 20
                var resulthp1 = hp1 / 100 * procent
                var resultatk1 = atk1 / 100 * procent
                u.duelhp -= resulthp1
                u.duelatk -= resultatk1
                u.del11 = -1
                 
              }
              if(user.del12 == 0) {
                var def = user.def
                var procent = 20
                 var resultdef = def / 100 * procent
                user.dueldef -= resultdef
                user.del12 = -1
                 
              }
              if(u.del12 == 0) {
                var def1 = u.def
                var procent = 20
                var resultdef1 = def1 / 100 * procent
                u.dueldef -= resultdef1
                u.del12 = -1
                 
              }
              if(user.spikes == 0) {
                user.spikes -= 1
                 
              }
              if(u.spikes == 0) {
                u.spikes -= 1
                 
              }
              }
            }
            else {
              if(user.duelatk < u.dueldef) {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
                var atk = user.duelatk
                var udef = u.dueldef
                var result = atk - udef
                var spikes = result / 2
                u.duelhp -= result
                user.duelhp -= spikes
                if(user.cd11 > 0) user.cd11 -= 1
                if(user.del11 > 0) user.del11 -= 1
                if(user.cd12 > 0) user.cd12 -= 1
                if(user.del12 > 0) user.del12 -= 1
                if(user.cd13 > 0) user.cd13 -= 1
                if(user.cd14 > 0) user.cd14 -= 1
                if(user.cd15 > 0) user.cd15 -= 1
                if(user.spikes > 0) user.spikes -= 1
                if(user.cd16 > 0) user.cd16 -= 1
                if(user.cd21 > 0) user.cd21 -= 1
                if(user.cd22 > 0) user.cd22 -= 1
                if(user.cd31 > 0) user.cd31 -= 1
                if(user.cd32 > 0) user.cd32 -= 1
                if(user.cd33 > 0) user.cd33 -= 1
                if(user.cd34 > 0) user.cd34 -= 1
                if(user.cd35 > 0) user.cd35 -= 1
                if(user.cd36 > 0) user.cd36 -= 1
                if(user.porezka > 0) user.porezka -= 1
                if(user.cd37 > 0) user.cd37 -= 1
                if(u.cd11 > 0) u.cd11 -= 1
                if(u.del11 > 0) u.del11 -= 1
                if(u.cd12 > 0) u.cd12 -= 1
                if(u.del12 > 0) u.del12 -= 1
                if(u.cd13 > 0) u.cd13 -= 1
                if(u.cd14 > 0) u.cd14 -= 1
                if(u.cd15 > 0) u.cd15 -= 1
                if(u.spikes > 0) u.spikes -= 1
                if(u.cd16 > 0) u.cd16 -= 1
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 1
                if(u.cd22 > 0) u.cd22 -= 1
                if(u.cd31 > 0) u.cd31 -= 1
                if(u.cd32 > 0) u.cd32 -= 1
                if(u.cd33 > 0) u.cd33 -= 1
                if(u.cd34 > 0) u.cd34 -= 1
                if(u.cd35 > 0) u.cd35 -= 1
                if(u.cd36 > 0) u.cd36 -= 1
                if(u.porezka > 0) u.porezka -= 1
                if(u.cd37 > 0) u.cd37 -= 1
                if(user.burn > 0) user.burn -= 1
                if(u.burn > 0) u.burn -= 1
                if(user.poison > 0) user.poison -= 1
                if(u.poison > 0) u.poison -= 1
                if(user.poisoning > 0) user.poisoning -= 1
                if(u.poisoning > 0) u.poisoning -= 1
                user.steps += 1
                u.steps += 1
                if(user.el1 == 0 || user.el3 == 0) {
                  user.el2 = 1
                }
                if(user.el1 == 1 || user.el3 == 1) {
                  user.el2 = 2
                }
                if(user.el1 == 2 || user.el3 == 2) {
                  user.el2 = 3
                  if(user.el2 == 3) {
                    u.control = 4
                    user.el1 = 0
                    user.el2 = 0
                    user.el3 = 0
                    user.steps += 1
                    u.steps += 1
                    msg.send(`@id${u.id}(${u.nick}) заморожен элементом 💧 на 4 хода`)
                  }
                }
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
                  if(user.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    user.money -= finalplata2
                    u.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                  else {
                    if(u.duelhp < 1) {
                      var plata2 = user.money
                      var procentplata = 10
                      var resultplata2 = plata2 / 100 * procentplata
                      let num27 = resultplata2
                      var finalplata = num27.toFixed(0)
                      var finalplata2 = Number(finalplata)
                      u.money -= finalplata2
                      user.money += finalplata2
                      user.duel = false
                      u.duel = false
                      u.predictionduel = false
                      user.predictduel = false
                      user.steps = 0
                      u.steps = 0
                      user.timer = 0
                      u.timer = 0
                      user.duelhp = 0
                      user.duelatk = 0
                      user.dueldef = 0
                      u.duelhp = 0
                      u.duelatk = 0
                      u.dueldef = 0
                      user.cd11 = 0,
                      user.del11 = -1,
                      user.cd12 = 0,
                      user.del12 = -1,
                      user.cd13 = 0,
                      user.cd14 = 0,
                      user.cd15 = 0,
                      user.spikes = -1,
                      user.cd16 = 0,
                      user.clinch = -1,
                      user.cd21 = 0,
                      user.cd22 = 0,
                      user.nakopleniye = 0,
                      user.el1 = 0,
                      user.burn = 0,
                      user.el2 = 0,
                      user.el3 = 0,
                      user.cd31 = 0,
                      user.poison = 0,
                      user.cd32 = 0,
                      user.cd33 = 0,
                      user.cd34 = 0,
                      user.invisible = false,
                      user.cd35 = 0,
                      user.cd36 = 0,
                      user.cd37 = 0,
                      user.poisoning = -1
                      u.cd11 = 0,
                      u.del11 = -1,
                      u.cd12 = 0,
                      u.del12 = -1,
                      u.cd13 = 0,
                      u.cd14 = 0,
                      u.cd15 = 0,
                      u.spikes = -1,
                      u.cd16 = 0,
                      u.clinch = -1,
                      u.cd21 = 0,
                      u.cd22 = 0,
                      u.nakopleniye = 0,
                      u.el1 = 0,
                      u.burn = 0,
                      u.el2 = 0,
                      u.el3 = 0,
                      u.cd31 = 0,
                      u.poison = 0,
                      u.cd32 = 0,
                      u.cd33 = 0,
                      u.cd34 = 0,
                      u.invisible = false,
                      u.cd35 = 0,
                      u.cd36 = 0,
                      u.cd37 = 0,
                      u.poisoning = -1
                      msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                      var constuser = user
                      user = u
                      u = constuser
                    }
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
            }
          }
          else {
            if(u.control > 0) {
              if(u.dueldef > user.duelatk) {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
                var atk = user.duelatk
                var udef = u.dueldef
                var result = atk - udef
                u.duelhp -= result
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                if(user.el1 == 0 || user.el3 == 0) {
                  user.el2 = 1
                }
                if(user.el1 == 1 || user.el3 == 1) {
                  user.el2 = 2
                }
                if(user.el1 == 2 || user.el3 == 2) {
                  user.el2 = 3
                  if(user.el2 == 3) {
                    u.control = 4
                    user.el1 = 0
                    user.el2 = 0
                    user.el3 = 0
                    user.steps += 1
                    u.steps += 1
                    msg.send(`@id${u.id}(${u.nick}) заморожен элементом 💧 на 4 хода`)
                  }
                }
                  if(user.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    user.money -= finalplata2
                    u.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                  else {
                    if(u.duelhp < 1) {
                      var plata2 = user.money
                      var procentplata = 10
                      var resultplata2 = plata2 / 100 * procentplata
                      let num27 = resultplata2
                      var finalplata = num27.toFixed(0)
                      var finalplata2 = Number(finalplata)
                      u.money -= finalplata2
                      user.money += finalplata2
                      user.duel = false
                      u.duel = false
                      u.predictionduel = false
                      user.predictduel = false
                      user.steps = 0
                      u.steps = 0
                      user.timer = 0
                      u.timer = 0
                      user.duelhp = 0
                      user.duelatk = 0
                      user.dueldef = 0
                      u.duelhp = 0
                      u.duelatk = 0
                      u.dueldef = 0
                      user.cd11 = 0,
                      user.del11 = -1,
                      user.cd12 = 0,
                      user.del12 = -1,
                      user.cd13 = 0,
                      user.cd14 = 0,
                      user.cd15 = 0,
                      user.spikes = -1,
                      user.cd16 = 0,
                      user.clinch = -1,
                      user.cd21 = 0,
                      user.cd22 = 0,
                      user.nakopleniye = 0,
                      user.el1 = 0,
                      user.burn = 0,
                      user.el2 = 0,
                      user.el3 = 0,
                      user.cd31 = 0,
                      user.poison = 0,
                      user.cd32 = 0,
                      user.cd33 = 0,
                      user.cd34 = 0,
                      user.invisible = false,
                      user.cd35 = 0,
                      user.cd36 = 0,
                      user.cd37 = 0,
                      user.poisoning = -1
                      u.cd11 = 0,
                      u.del11 = -1,
                      u.cd12 = 0,
                      u.del12 = -1,
                      u.cd13 = 0,
                      u.cd14 = 0,
                      u.cd15 = 0,
                      u.spikes = -1,
                      u.cd16 = 0,
                      u.clinch = -1,
                      u.cd21 = 0,
                      u.cd22 = 0,
                      u.nakopleniye = 0,
                      u.el1 = 0,
                      u.burn = 0,
                      u.el2 = 0,
                      u.el3 = 0,
                      u.cd31 = 0,
                      u.poison = 0,
                      u.cd32 = 0,
                      u.cd33 = 0,
                      u.cd34 = 0,
                      u.invisible = false,
                      u.cd35 = 0,
                      u.cd36 = 0,
                      u.cd37 = 0,
                      u.poisoning = -1
                      msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                      var constuser = user
                      user = u
                      u = constuser
                    }
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
            }
            else {
              if(u.dueldef > user.duelatk) {
                if(user.cd11 > 0) user.cd11 -= 1
                if(user.del11 > 0) user.del11 -= 1
                if(user.cd12 > 0) user.cd12 -= 1
                if(user.del12 > 0) user.del12 -= 1
                if(user.cd13 > 0) user.cd13 -= 1
                if(user.cd14 > 0) user.cd14 -= 1
                if(user.cd15 > 0) user.cd15 -= 1
                if(user.spikes > 0) user.spikes -= 1
                if(user.cd16 > 0) user.cd16 -= 1
                if(user.cd21 > 0) user.cd21 -= 1
                if(user.cd22 > 0) user.cd22 -= 1
                if(user.cd31 > 0) user.cd31 -= 1
                if(user.cd32 > 0) user.cd32 -= 1
                if(user.cd33 > 0) user.cd33 -= 1
                if(user.cd34 > 0) user.cd34 -= 1
                if(user.cd35 > 0) user.cd35 -= 1
                if(user.cd36 > 0) user.cd36 -= 1
                if(user.porezka > 0) user.porezka -= 1
                if(user.cd37 > 0) user.cd37 -= 1
                if(u.cd11 > 0) u.cd11 -= 1
                if(u.del11 > 0) u.del11 -= 1
                if(u.cd12 > 0) u.cd12 -= 1
                if(u.del12 > 0) u.del12 -= 1
                if(u.cd13 > 0) u.cd13 -= 1
                if(u.cd14 > 0) u.cd14 -= 1
                if(u.cd15 > 0) u.cd15 -= 1
                if(u.spikes > 0) u.spikes -= 1
                if(u.cd16 > 0) u.cd16 -= 1
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 1
                if(u.cd22 > 0) u.cd22 -= 1
                if(u.cd31 > 0) u.cd31 -= 1
                if(u.cd32 > 0) u.cd32 -= 1
                if(u.cd33 > 0) u.cd33 -= 1
                if(u.cd34 > 0) u.cd34 -= 1
                if(u.cd35 > 0) u.cd35 -= 1
                if(u.cd36 > 0) u.cd36 -= 1
                if(u.porezka > 0) u.porezka -= 1
                if(u.cd37 > 0) u.cd37 -= 1
                if(user.burn > 0) user.burn -= 1
                if(u.burn > 0) u.burn -= 1
                if(user.poison > 0) user.poison -= 1
                if(u.poison > 0) u.poison -= 1
                if(user.poisoning > 0) user.poisoning -= 1
                if(u.poisoning > 0) u.poisoning -= 1
                user.steps += 1
                u.steps += 1
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
                var atk = user.duelatk
                var udef = u.dueldef
                var result = atk - udef
                u.duelhp -= result
                if(user.cd11 > 0) user.cd11 -= 1
                if(user.del11 > 0) user.del11 -= 1
                if(user.cd12 > 0) user.cd12 -= 1
                if(user.del12 > 0) user.del12 -= 1
                if(user.cd13 > 0) user.cd13 -= 1
                if(user.cd14 > 0) user.cd14 -= 1
                if(user.cd15 > 0) user.cd15 -= 1
                if(user.spikes > 0) user.spikes -= 1
                if(user.cd16 > 0) user.cd16 -= 1
                if(user.cd21 > 0) user.cd21 -= 1
                if(user.cd22 > 0) user.cd22 -= 1
                if(user.cd31 > 0) user.cd31 -= 1
                if(user.cd32 > 0) user.cd32 -= 1
                if(user.cd33 > 0) user.cd33 -= 1
                if(user.cd34 > 0) user.cd34 -= 1
                if(user.cd35 > 0) user.cd35 -= 1
                if(user.cd36 > 0) user.cd36 -= 1
                if(user.porezka > 0) user.porezka -= 1
                if(user.cd37 > 0) user.cd37 -= 1
                if(u.cd11 > 0) u.cd11 -= 1
                if(u.del11 > 0) u.del11 -= 1
                if(u.cd12 > 0) u.cd12 -= 1
                if(u.del12 > 0) u.del12 -= 1
                if(u.cd13 > 0) u.cd13 -= 1
                if(u.cd14 > 0) u.cd14 -= 1
                if(u.cd15 > 0) u.cd15 -= 1
                if(u.spikes > 0) u.spikes -= 1
                if(u.cd16 > 0) u.cd16 -= 1
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 1
                if(u.cd22 > 0) u.cd22 -= 1
                if(u.cd31 > 0) u.cd31 -= 1
                if(u.cd32 > 0) u.cd32 -= 1
                if(u.cd33 > 0) u.cd33 -= 1
                if(u.cd34 > 0) u.cd34 -= 1
                if(u.cd35 > 0) u.cd35 -= 1
                if(u.cd36 > 0) u.cd36 -= 1
                if(u.porezka > 0) u.porezka -= 1
                if(u.cd37 > 0) u.cd37 -= 1
                if(user.burn > 0) user.burn -= 1
                if(u.burn > 0) u.burn -= 1
                if(user.poison > 0) user.poison -= 1
                if(u.poison > 0) u.poison -= 1
                if(user.poisoning > 0) user.poisoning -= 1
                if(u.poisoning > 0) u.poisoning -= 1
                user.steps += 1
                u.steps += 1
                if(user.el1 == 0 || user.el3 == 0) {
                  user.el2 = 1
                }
                if(user.el1 == 1 || user.el3 == 1) {
                  user.el2 = 2
                }
                if(user.el1 == 2 || user.el3 == 2) {
                  user.el2 = 3
                  if(user.el2 == 3) {
                    u.control = 4
                    user.el1 = 0
                    user.el2 = 0
                    user.el3 = 0
                    user.steps += 1
                    u.steps += 1
                    msg.send(`@id${u.id}(${u.nick}) заморожен элементом 💧 на 4 хода`)
                  }
                }
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
                  if(user.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    user.money -= finalplata2
                    u.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                  else {
                    if(u.duelhp < 1) {
                      var plata2 = user.money
                      var procentplata = 10
                      var resultplata2 = plata2 / 100 * procentplata
                      let num27 = resultplata2
                      var finalplata = num27.toFixed(0)
                      var finalplata2 = Number(finalplata)
                      u.money -= finalplata2
                      user.money += finalplata2
                      user.duel = false
                      u.duel = false
                      u.predictionduel = false
                      user.predictduel = false
                      user.steps = 0
                      u.steps = 0
                      user.timer = 0
                      u.timer = 0
                      user.duelhp = 0
                      user.duelatk = 0
                      user.dueldef = 0
                      u.duelhp = 0
                      u.duelatk = 0
                      u.dueldef = 0
                      user.cd11 = 0,
                      user.del11 = -1,
                      user.cd12 = 0,
                      user.del12 = -1,
                      user.cd13 = 0,
                      user.cd14 = 0,
                      user.cd15 = 0,
                      user.spikes = -1,
                      user.cd16 = 0,
                      user.clinch = -1,
                      user.cd21 = 0,
                      user.cd22 = 0,
                      user.nakopleniye = 0,
                      user.el1 = 0,
                      user.burn = 0,
                      user.el2 = 0,
                      user.el3 = 0,
                      user.cd31 = 0,
                      user.poison = 0,
                      user.cd32 = 0,
                      user.cd33 = 0,
                      user.cd34 = 0,
                      user.invisible = false,
                      user.cd35 = 0,
                      user.cd36 = 0,
                      user.cd37 = 0,
                      user.poisoning = -1
                      u.cd11 = 0,
                      u.del11 = -1,
                      u.cd12 = 0,
                      u.del12 = -1,
                      u.cd13 = 0,
                      u.cd14 = 0,
                      u.cd15 = 0,
                      u.spikes = -1,
                      u.cd16 = 0,
                      u.clinch = -1,
                      u.cd21 = 0,
                      u.cd22 = 0,
                      u.nakopleniye = 0,
                      u.el1 = 0,
                      u.burn = 0,
                      u.el2 = 0,
                      u.el3 = 0,
                      u.cd31 = 0,
                      u.poison = 0,
                      u.cd32 = 0,
                      u.cd33 = 0,
                      u.cd34 = 0,
                      u.invisible = false,
                      u.cd35 = 0,
                      u.cd36 = 0,
                      u.cd37 = 0,
                      u.poisoning = -1
                      msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                      var constuser = user
                      user = u
                      u = constuser
                    }
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
            }
          }
        }
      }
    }
    if(user.poison > 0) {
      var procent50 = 50
      var poison50 = u.duelatk * procent50 / 100
      user.duelhp -= poison50
      msg.send(`"${user.nick}" получает ⚔${poison50} урона`)
    }
    if(user.poisoning > 0) {
      var result1 = user.duelatk - user.dueldef
      user.duelhp -= result1
      msg.send(`"${user.nick}" получает ⚔${result1} урона от отравления`)
    }
    if(u.poisoning > 0) {
      var result2 = u.duelatk - u.dueldef
      u.duelhp -= result2
      msg.send(`"${u.nick}" наносит себе ⚔${result2} урона`)
    }
    if(user.poisoning == 0) {
      user.poisoning = -1
      var atk3 = user.duelatk * 3
      var heal1 = atk3 * 2
      user.duelhp += heal1
      if (user.duelhp > user.hp) {
      user.duelhp = user.hp
      }
      msg.send(`"${user.nick}" восстанавливает 💚${heal1} здоровья`)
    }
    if(u.poisoning == 0) {
      u.poisoning = -1
      var atk3 = u.duelatk * 3
      var heal2 = atk3 * 2
      u.duelhp += heal2
      if (u.duelhp > u.hp) {
      u.duelhp = u.hp
      }
      msg.send(`"${u.nick}" восстанавливает 💚${heal2} здоровья`)
    }
    var constuser = user
    user = u
    u = constuser
  })

  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------
  //-----------------------------------------------------скиллы ассасина------------------------------------------------------------------------------------------------------

  vk.updates.hear(/^(.*) 🦠$/i, msg => {
    if(user.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(u.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(user.steps > 100 || u.steps > 100) {
      user.duel = false
      u.duel = false
      u.predictionduel = false
      user.predictduel = false
      user.steps = 0
      u.steps = 0
      user.timer = 0
      u.timer = 0
      user.duelhp = 0
      user.duelatk = 0
      user.dueldef = 0
      u.duelhp = 0
      u.duelatk = 0
      u.dueldef = 0
      user.cd11 = 0,
      user.del11 = -1,
      user.cd12 = 0,
      user.del12 = -1,
      user.cd13 = 0,
      user.cd14 = 0,
      user.cd15 = 0,
      user.spikes = -1,
      user.cd16 = 0,
      user.clinch = -1,
      user.cd21 = 0,
      user.cd22 = 0,
      user.nakopleniye = 0,
      user.el1 = 0,
      user.burn = 0,
      user.el2 = 0,
      user.el3 = 0,
      user.cd31 = 0,
      user.poison = 0,
      user.cd32 = 0,
      user.cd33 = 0,
      user.cd34 = 0,
      user.invisible = false,
      user.cd35 = 0,
      user.cd36 = 0,
      user.cd37 = 0,
      user.poisoning = -1
      u.cd11 = 0,
      u.del11 = -1,
      u.cd12 = 0,
      u.del12 = -1,
      u.cd13 = 0,
      u.cd14 = 0,
      u.cd15 = 0,
      u.spikes = -1,
      u.cd16 = 0,
      u.clinch = -1,
      u.cd21 = 0,
      u.cd22 = 0,
      u.nakopleniye = 0,
      u.el1 = 0,
      u.burn = 0,
      u.el2 = 0,
      u.el3 = 0,
      u.cd31 = 0,
      u.poison = 0,
      u.cd32 = 0,
      u.cd33 = 0,
      u.cd34 = 0,
      u.invisible = false,
      u.cd35 = 0,
      u.cd36 = 0,
      u.cd37 = 0,
      u.poisoning = -1
      return msg.send ('Ходы дуэли превысили 100. Победитель не определён')
    }
    if(msg.$match[1] != '[club202302035|@eswep]') return
    if(msg.messagePayload != "project RQ") return
    if(msg.senderId == u.id) {
      var constu = u
      u = user
      user = constu
    }
    if(user.cd31 > 0) return msg.send(`Умение перезаряжается`)
    if(user.clas.id != 3) return msg.send (`Умение не принадлежит вашему классу`)
    if(u.nakopleniye > 0) {
      if(u.control > 0) u.nakopleniye = 0
    }
    if (user.steps % 2 == 0) {
      return msg.send ('Сейчас не твой ход')
    }
    else {
      if(user.control > 0) {
        msg.send (`Невозможно применить умение`);
        }
        else{
          if(u.control > 0 ) {
            if(user.cd11 > 0) user.cd11 -= 1
            if(user.del11 > 0) user.del11 -= 1
            if(user.cd12 > 0) user.cd12 -= 1
            if(user.del12 > 0) user.del12 -= 1
            if(user.cd13 > 0) user.cd13 -= 1
            if(user.cd14 > 0) user.cd14 -= 1
            if(user.cd15 > 0) user.cd15 -= 1
            if(user.spikes > 0) user.spikes -= 1
            if(user.cd16 > 0) user.cd16 -= 1
            if(user.cd21 > 0) user.cd21 -= 1
            if(user.cd22 > 0) user.cd22 -= 1
            if(user.cd31 > 0) user.cd31 -= 1
            if(user.cd32 > 0) user.cd32 -= 1
            if(user.cd33 > 0) user.cd33 -= 1
            if(user.cd34 > 0) user.cd34 -= 1
            if(user.cd35 > 0) user.cd35 -= 1
            if(user.cd36 > 0) user.cd36 -= 1
            if(user.porezka > 0) user.porezka -= 1
            if(user.cd37 > 0) user.cd37 -= 1
            if(u.cd11 > 0) u.cd11 -= 1
            if(u.del11 > 0) u.del11 -= 1
            if(u.cd12 > 0) u.cd12 -= 1
            if(u.del12 > 0) u.del12 -= 1
            if(u.cd13 > 0) u.cd13 -= 1
            if(u.cd14 > 0) u.cd14 -= 1
            if(u.cd15 > 0) u.cd15 -= 1
            if(u.spikes > 0) u.spikes -= 1
            if(u.cd16 > 0) u.cd16 -= 1
            if(u.clinch > 0) u.clinch = -1
            if(u.cd21 > 0) u.cd21 -= 1
            if(u.cd22 > 0) u.cd22 -= 1
            if(u.cd31 > 0) u.cd31 -= 1
            if(u.cd32 > 0) u.cd32 -= 1
            if(u.cd33 > 0) u.cd33 -= 1
            if(u.cd34 > 0) u.cd34 -= 1
            if(u.cd35 > 0) u.cd35 -= 1
            if(u.cd36 > 0) u.cd36 -= 1
            if(u.porezka > 0) u.porezka -= 1
            if(u.cd37 > 0) u.cd37 -= 1
            if(user.burn > 0) user.burn -= 1
            if(u.burn > 0) u.burn -= 1
            if(user.poison > 0) user.poison -= 1
            if(u.poison > 0) u.poison -= 1
            if(user.poisoning > 0) user.poisoning -= 1
            if(u.poisoning > 0) u.poisoning -= 1
            user.cd31 = 12
            u.poison = 6
            if(u.control == 2) {
              user.steps += 1
              u.steps += 1
              u.control -= 2
              if (u.clas.id == 1) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) заражён ядом. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "😈",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🛡",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🖤",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "❣",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "☦",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚙",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚔",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 2) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) заражём ядом. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "❄",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💥",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🍃",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔥",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "💧",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚡",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 3) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) заражём ядом. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "🦠",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔪",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💣",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "👁‍🗨",
                    color: "primary",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "🧬",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🗡",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💉",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
                }
            }
            else {
              if(u.control > 2) {
                user.steps += 2
                u.steps += 2
                u.control -= 2
                if (user.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) заражён ядом. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (user.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) заражём ядом. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (user.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) заражём ядом. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
              }
            }
              if(user.duelhp < 1) {
                var plata2 = user.money
                var procentplata = 10
                var resultplata2 = plata2 / 100 * procentplata
                let num27 = resultplata2
                var finalplata = num27.toFixed(0)
                var finalplata2 = Number(finalplata)
                user.money -= finalplata2
                u.money += finalplata2
                user.duel = false
                u.duel = false
                u.predictionduel = false
                user.predictduel = false
                user.steps = 0
                u.steps = 0
                user.timer = 0
                u.timer = 0
                user.duelhp = 0
                user.duelatk = 0
                user.dueldef = 0
                u.duelhp = 0
                u.duelatk = 0
                u.dueldef = 0
                user.cd11 = 0,
                user.del11 = -1,
                user.cd12 = 0,
                user.del12 = -1,
                user.cd13 = 0,
                user.cd14 = 0,
                user.cd15 = 0,
                user.spikes = -1,
                user.cd16 = 0,
                user.clinch = -1,
                user.cd21 = 0,
                user.cd22 = 0,
                user.nakopleniye = 0,
                user.el1 = 0,
                user.burn = 0,
                user.el2 = 0,
                user.el3 = 0,
                user.cd31 = 0,
                user.poison = 0,
                user.cd32 = 0,
                user.cd33 = 0,
                user.cd34 = 0,
                user.invisible = false,
                user.cd35 = 0,
                user.cd36 = 0,
                user.cd37 = 0,
                user.poisoning = -1
                u.cd11 = 0,
                u.del11 = -1,
                u.cd12 = 0,
                u.del12 = -1,
                u.cd13 = 0,
                u.cd14 = 0,
                u.cd15 = 0,
                u.spikes = -1,
                u.cd16 = 0,
                u.clinch = -1,
                u.cd21 = 0,
                u.cd22 = 0,
                u.nakopleniye = 0,
                u.el1 = 0,
                u.burn = 0,
                u.el2 = 0,
                u.el3 = 0,
                u.cd31 = 0,
                u.poison = 0,
                u.cd32 = 0,
                u.cd33 = 0,
                u.cd34 = 0,
                u.invisible = false,
                u.cd35 = 0,
                u.cd36 = 0,
                u.cd37 = 0,
                u.poisoning = -1
                msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                var constuser = user
                user = u
                u = constuser
              }
              else {
                if(u.duelhp < 1) {
                  var plata2 = user.money
                  var procentplata = 10
                  var resultplata2 = plata2 / 100 * procentplata
                  let num27 = resultplata2
                  var finalplata = num27.toFixed(0)
                  var finalplata2 = Number(finalplata)
                  u.money -= finalplata2
                  user.money += finalplata2
                  user.duel = false
                  u.duel = false
                  u.predictionduel = false
                  user.predictduel = false
                  user.steps = 0
                  u.steps = 0
                  user.timer = 0
                  u.timer = 0
                  user.duelhp = 0
                  user.duelatk = 0
                  user.dueldef = 0
                  u.duelhp = 0
                  u.duelatk = 0
                  u.dueldef = 0
                  user.cd11 = 0,
                  user.del11 = -1,
                  user.cd12 = 0,
                  user.del12 = -1,
                  user.cd13 = 0,
                  user.cd14 = 0,
                  user.cd15 = 0,
                  user.spikes = -1,
                  user.cd16 = 0,
                  user.clinch = -1,
                  user.cd21 = 0,
                  user.cd22 = 0,
                  user.nakopleniye = 0,
                  user.el1 = 0,
                  user.burn = 0,
                  user.el2 = 0,
                  user.el3 = 0,
                  user.cd31 = 0,
                  user.poison = 0,
                  user.cd32 = 0,
                  user.cd33 = 0,
                  user.cd34 = 0,
                  user.invisible = false,
                  user.cd35 = 0,
                  user.cd36 = 0,
                  user.cd37 = 0,
                  user.poisoning = -1
                  u.cd11 = 0,
                  u.del11 = -1,
                  u.cd12 = 0,
                  u.del12 = -1,
                  u.cd13 = 0,
                  u.cd14 = 0,
                  u.cd15 = 0,
                  u.spikes = -1,
                  u.cd16 = 0,
                  u.clinch = -1,
                  u.cd21 = 0,
                  u.cd22 = 0,
                  u.nakopleniye = 0,
                  u.el1 = 0,
                  u.burn = 0,
                  u.el2 = 0,
                  u.el3 = 0,
                  u.cd31 = 0,
                  u.poison = 0,
                  u.cd32 = 0,
                  u.cd33 = 0,
                  u.cd34 = 0,
                  u.invisible = false,
                  u.cd35 = 0,
                  u.cd36 = 0,
                  u.cd37 = 0,
                  u.poisoning = -1
                  msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                  var constuser = user
                  user = u
                  u = constuser
                }
              }
            if(user.del11 == 0) {
              var hp = user.hp
              var atk = user.atk
              var procent = 20
              var resulthp = hp / 100 * procent
              var resultatk = atk / 100 * procent
              user.duelhp -= resulthp
              user.duelatk -= resultatk
              user.del11 = -1
               
            }
            if(u.del11 == 0) {
              var hp1 = u.hp
              var atk1 = u.atk
              var procent = 20
              var resulthp1 = hp1 / 100 * procent
              var resultatk1 = atk1 / 100 * procent
              u.duelhp -= resulthp1
              u.duelatk -= resultatk1
              u.del11 = -1
               
            }
            if(user.del12 == 0) {
              var def = user.def
              var procent = 20
               var resultdef = def / 100 * procent
              user.dueldef -= resultdef
              user.del12 = -1
               
            }
            if(u.del12 == 0) {
              var def1 = u.def
              var procent = 20
              var resultdef1 = def1 / 100 * procent
              u.dueldef -= resultdef1
              u.del12 = -1
               
            }
            if(user.spikes == 0) {
              user.spikes -= 1
               
            }
            if(u.spikes == 0) {
              u.spikes -= 1
               
            }
          }
          else {
            if(user.cd11 > 0) user.cd11 -= 1
            if(user.del11 > 0) user.del11 -= 1
            if(user.cd12 > 0) user.cd12 -= 1
            if(user.del12 > 0) user.del12 -= 1
            if(user.cd13 > 0) user.cd13 -= 1
            if(user.cd14 > 0) user.cd14 -= 1
            if(user.cd15 > 0) user.cd15 -= 1
            if(user.spikes > 0) user.spikes -= 1
            if(user.cd16 > 0) user.cd16 -= 1
            if(user.cd21 > 0) user.cd21 -= 1
            if(user.cd22 > 0) user.cd22 -= 1
            if(user.cd31 > 0) user.cd31 -= 1
            if(user.cd32 > 0) user.cd32 -= 1
            if(user.cd33 > 0) user.cd33 -= 1
            if(user.cd34 > 0) user.cd34 -= 1
            if(user.cd35 > 0) user.cd35 -= 1
            if(user.cd36 > 0) user.cd36 -= 1
            if(user.porezka > 0) user.porezka -= 1
            if(user.cd37 > 0) user.cd37 -= 1
            if(u.cd11 > 0) u.cd11 -= 1
            if(u.del11 > 0) u.del11 -= 1
            if(u.cd12 > 0) u.cd12 -= 1
            if(u.del12 > 0) u.del12 -= 1
            if(u.cd13 > 0) u.cd13 -= 1
            if(u.cd14 > 0) u.cd14 -= 1
            if(u.cd15 > 0) u.cd15 -= 1
            if(u.spikes > 0) u.spikes -= 1
            if(u.cd16 > 0) u.cd16 -= 1
            if(u.clinch > 0) u.clinch = -1
            if(u.cd21 > 0) u.cd21 -= 1
            if(u.cd22 > 0) u.cd22 -= 1
            if(u.cd31 > 0) u.cd31 -= 1
            if(u.cd32 > 0) u.cd32 -= 1
            if(u.cd33 > 0) u.cd33 -= 1
            if(u.cd34 > 0) u.cd34 -= 1
            if(u.cd35 > 0) u.cd35 -= 1
            if(u.cd36 > 0) u.cd36 -= 1
            if(u.porezka > 0) u.porezka -= 1
            if(u.cd37 > 0) u.cd37 -= 1
            if(user.burn > 0) user.burn -= 1
            if(u.burn > 0) u.burn -= 1
            if(user.poison > 0) user.poison -= 1
            if(u.poison > 0) u.poison -= 1
            if(user.poisoning > 0) user.poisoning -= 1
            if(u.poisoning > 0) u.poisoning -= 1
            user.steps += 1
            u.steps += 1
            user.cd31 = 12
            u.poison = 6
            if (u.clas.id == 1) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) заражён ядом. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "😈",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🛡",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🖤",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "❣",
                    color: "positive",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "☦",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚙",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚔",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 2) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) заражём ядом. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "❄",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💥",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🍃",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔥",
                    color: "negative",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "💧",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚡",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 3) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${u.id}(${u.nick}) заражём ядом. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "🦠",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔪",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💣",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "👁‍🗨",
                  color: "primary",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "🧬",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🗡",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💉",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
              }
              if(user.duelhp < 1) {
                var plata2 = user.money
                var procentplata = 10
                var resultplata2 = plata2 / 100 * procentplata
                let num27 = resultplata2
                var finalplata = num27.toFixed(0)
                var finalplata2 = Number(finalplata)
                user.money -= finalplata2
                u.money += finalplata2
                user.duel = false
                u.duel = false
                u.predictionduel = false
                user.predictduel = false
                user.steps = 0
                u.steps = 0
                user.timer = 0
                u.timer = 0
                user.duelhp = 0
                user.duelatk = 0
                user.dueldef = 0
                u.duelhp = 0
                u.duelatk = 0
                u.dueldef = 0
                user.cd11 = 0,
                user.del11 = -1,
                user.cd12 = 0,
                user.del12 = -1,
                user.cd13 = 0,
                user.cd14 = 0,
                user.cd15 = 0,
                user.spikes = -1,
                user.cd16 = 0,
                user.clinch = -1,
                user.cd21 = 0,
                user.cd22 = 0,
                user.nakopleniye = 0,
                user.el1 = 0,
                user.burn = 0,
                user.el2 = 0,
                user.el3 = 0,
                user.cd31 = 0,
                user.poison = 0,
                user.cd32 = 0,
                user.cd33 = 0,
                user.cd34 = 0,
                user.invisible = false,
                user.cd35 = 0,
                user.cd36 = 0,
                user.cd37 = 0,
                user.poisoning = -1
                u.cd11 = 0,
                u.del11 = -1,
                u.cd12 = 0,
                u.del12 = -1,
                u.cd13 = 0,
                u.cd14 = 0,
                u.cd15 = 0,
                u.spikes = -1,
                u.cd16 = 0,
                u.clinch = -1,
                u.cd21 = 0,
                u.cd22 = 0,
                u.nakopleniye = 0,
                u.el1 = 0,
                u.burn = 0,
                u.el2 = 0,
                u.el3 = 0,
                u.cd31 = 0,
                u.poison = 0,
                u.cd32 = 0,
                u.cd33 = 0,
                u.cd34 = 0,
                u.invisible = false,
                u.cd35 = 0,
                u.cd36 = 0,
                u.cd37 = 0,
                u.poisoning = -1
                msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                var constuser = user
                user = u
                u = constuser
              }
              else {
                if(u.duelhp < 1) {
                  var plata2 = user.money
                  var procentplata = 10
                  var resultplata2 = plata2 / 100 * procentplata
                  let num27 = resultplata2
                  var finalplata = num27.toFixed(0)
                  var finalplata2 = Number(finalplata)
                  u.money -= finalplata2
                  user.money += finalplata2
                  user.duel = false
                  u.duel = false
                  u.predictionduel = false
                  user.predictduel = false
                  user.steps = 0
                  u.steps = 0
                  user.timer = 0
                  u.timer = 0
                  user.duelhp = 0
                  user.duelatk = 0
                  user.dueldef = 0
                  u.duelhp = 0
                  u.duelatk = 0
                  u.dueldef = 0
                  user.cd11 = 0,
                  user.del11 = -1,
                  user.cd12 = 0,
                  user.del12 = -1,
                  user.cd13 = 0,
                  user.cd14 = 0,
                  user.cd15 = 0,
                  user.spikes = -1,
                  user.cd16 = 0,
                  user.clinch = -1,
                  user.cd21 = 0,
                  user.cd22 = 0,
                  user.nakopleniye = 0,
                  user.el1 = 0,
                  user.burn = 0,
                  user.el2 = 0,
                  user.el3 = 0,
                  user.cd31 = 0,
                  user.poison = 0,
                  user.cd32 = 0,
                  user.cd33 = 0,
                  user.cd34 = 0,
                  user.invisible = false,
                  user.cd35 = 0,
                  user.cd36 = 0,
                  user.cd37 = 0,
                  user.poisoning = -1
                  u.cd11 = 0,
                  u.del11 = -1,
                  u.cd12 = 0,
                  u.del12 = -1,
                  u.cd13 = 0,
                  u.cd14 = 0,
                  u.cd15 = 0,
                  u.spikes = -1,
                  u.cd16 = 0,
                  u.clinch = -1,
                  u.cd21 = 0,
                  u.cd22 = 0,
                  u.nakopleniye = 0,
                  u.el1 = 0,
                  u.burn = 0,
                  u.el2 = 0,
                  u.el3 = 0,
                  u.cd31 = 0,
                  u.poison = 0,
                  u.cd32 = 0,
                  u.cd33 = 0,
                  u.cd34 = 0,
                  u.invisible = false,
                  u.cd35 = 0,
                  u.cd36 = 0,
                  u.cd37 = 0,
                  u.poisoning = -1
                  msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                  var constuser = user
                  user = u
                  u = constuser
                }
              }
            if(user.del11 == 0) {
              var hp = user.hp
              var atk = user.atk
              var procent = 20
              var resulthp = hp / 100 * procent
              var resultatk = atk / 100 * procent
              user.duelhp -= resulthp
              user.duelatk -= resultatk
              user.del11 = -1
               
            }
            if(u.del11 == 0) {
              var hp1 = u.hp
              var atk1 = u.atk
              var procent = 20
              var resulthp1 = hp1 / 100 * procent
              var resultatk1 = atk1 / 100 * procent
              u.duelhp -= resulthp1
              u.duelatk -= resultatk1
              u.del11 = -1
               
            }
            if(user.del12 == 0) {
              var def = user.def
              var procent = 20
               var resultdef = def / 100 * procent
              user.dueldef -= resultdef
              user.del12 = -1
               
            }
            if(u.del12 == 0) {
              var def1 = u.def
              var procent = 20
              var resultdef1 = def1 / 100 * procent
              u.dueldef -= resultdef1
              u.del12 = -1
               
            }
            if(user.spikes == 0) {
              user.spikes -= 1
               
            }
            if(u.spikes == 0) {
              u.spikes -= 1
               
            }
          }
        }
      }
      if(u.poison > 0) {
        var procent50 = 50
        var poison50 = user.duelatk * procent50 / 100
        u.duelhp -= poison50
        msg.send(`"${u.nick}" получает ⚔${poison50} урона`)
      }
      if(user.poisoning > 0) {
        var result1 = user.duelatk - user.dueldef
        user.duelhp -= result1
        msg.send(`"${user.nick}" получает ⚔${result1} урона от отравления`)
      }
      if(u.poisoning > 0) {
        var result2 = u.duelatk - u.dueldef
        u.duelhp -= result2
        msg.send(`"${u.nick}" наносит себе ⚔${result2} урона`)
      }
      if(user.poisoning == 0) {
        user.poisoning = -1
        var atk3 = user.duelatk * 3
        var heal1 = atk3 * 2
        user.duelhp += heal1
        if (user.duelhp > user.hp) {
        user.duelhp = user.hp
        }
        msg.send(`"${user.nick}" восстанавливает 💚${heal1} здоровья`)
      }
      if(u.poisoning == 0) {
        u.poisoning = -1
        var atk3 = u.duelatk * 3
        var heal2 = atk3 * 2
        u.duelhp += heal2
        if (u.duelhp > u.hp) {
        u.duelhp = u.hp
        }
        msg.send(`"${u.nick}" восстанавливает 💚${heal2} здоровья`)
      }
    var constuser = user
    user = u
    u = constuser
  })

  vk.updates.hear(/^(.*) 🔪$/i, msg => {
    if(user.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(u.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(user.steps > 100 || u.steps > 100) {
      user.duel = false
      u.duel = false
      u.predictionduel = false
      user.predictduel = false
      user.steps = 0
      u.steps = 0
      user.timer = 0
      u.timer = 0
      user.duelhp = 0
      user.duelatk = 0
      user.dueldef = 0
      u.duelhp = 0
      u.duelatk = 0
      u.dueldef = 0
      user.cd11 = 0,
      user.del11 = -1,
      user.cd12 = 0,
      user.del12 = -1,
      user.cd13 = 0,
      user.cd14 = 0,
      user.cd15 = 0,
      user.spikes = -1,
      user.cd16 = 0,
      user.clinch = -1,
      user.cd21 = 0,
      user.cd22 = 0,
      user.nakopleniye = 0,
      user.el1 = 0,
      user.burn = 0,
      user.el2 = 0,
      user.el3 = 0,
      user.cd31 = 0,
      user.poison = 0,
      user.cd32 = 0,
      user.cd33 = 0,
      user.cd34 = 0,
      user.invisible = false,
      user.cd35 = 0,
      user.cd36 = 0,
      user.cd37 = 0,
      user.poisoning = -1
      u.cd11 = 0,
      u.del11 = -1,
      u.cd12 = 0,
      u.del12 = -1,
      u.cd13 = 0,
      u.cd14 = 0,
      u.cd15 = 0,
      u.spikes = -1,
      u.cd16 = 0,
      u.clinch = -1,
      u.cd21 = 0,
      u.cd22 = 0,
      u.nakopleniye = 0,
      u.el1 = 0,
      u.burn = 0,
      u.el2 = 0,
      u.el3 = 0,
      u.cd31 = 0,
      u.poison = 0,
      u.cd32 = 0,
      u.cd33 = 0,
      u.cd34 = 0,
      u.invisible = false,
      u.cd35 = 0,
      u.cd36 = 0,
      u.cd37 = 0,
      u.poisoning = -1
      return msg.send ('Ходы дуэли превысили 100. Победитель не определён')
    }
    if(msg.$match[1] != '[club202302035|@eswep]') return
    if(msg.messagePayload != "project RQ") return
    if(msg.senderId == u.id) {
      var constu = u
      u = user
      user = constu
    }
    if(user.cd32 > 0) return msg.send(`Умение перезаряжается`)
    if(user.clas.id != 3) return msg.send(`Умение не принадлежит вашему классу`)
    if(u.nakopleniye > 0) {
      if(u.control > 0) u.nakopleniye = 0
    }
    if (user.steps % 2 == 0) {
      return msg.send ('Сейчас не твой ход')
    }
    else {
      if(user.control > 0) {
        msg.send (`Невозможно применить умение`);
      }
      else{
        if(u.clinch > 0) {
          if(user.duelatk < u.dueldef) {
            if(user.cd11 > 0) user.cd11 -= 1
            if(user.del11 > 0) user.del11 -= 1
            if(user.cd12 > 0) user.cd12 -= 1
            if(user.del12 > 0) user.del12 -= 1
            if(user.cd13 > 0) user.cd13 -= 1
            if(user.cd14 > 0) user.cd14 -= 1
            if(user.cd15 > 0) user.cd15 -= 1
            if(user.spikes > 0) user.spikes -= 1
            if(user.cd16 > 0) user.cd16 -= 1
            if(user.cd21 > 0) user.cd21 -= 1
            if(user.cd22 > 0) user.cd22 -= 1
            if(user.cd31 > 0) user.cd31 -= 1
            if(user.cd32 > 0) user.cd32 -= 1
            if(user.cd33 > 0) user.cd33 -= 1
            if(user.cd34 > 0) user.cd34 -= 1
            if(user.cd35 > 0) user.cd35 -= 1
            if(user.cd36 > 0) user.cd36 -= 1
            if(user.porezka > 0) user.porezka -= 1
            if(user.cd37 > 0) user.cd37 -= 1
            if(u.cd11 > 0) u.cd11 -= 1
            if(u.del11 > 0) u.del11 -= 1
            if(u.cd12 > 0) u.cd12 -= 1
            if(u.del12 > 0) u.del12 -= 1
            if(u.cd13 > 0) u.cd13 -= 1
            if(u.cd14 > 0) u.cd14 -= 1
            if(u.cd15 > 0) u.cd15 -= 1
            if(u.spikes > 0) u.spikes -= 1
            if(u.cd16 > 0) u.cd16 -= 1
            if(u.clinch > 0) u.clinch = -1
            if(u.cd21 > 0) u.cd21 -= 1
            if(u.cd22 > 0) u.cd22 -= 1
            if(u.cd31 > 0) u.cd31 -= 1
            if(u.cd32 > 0) u.cd32 -= 1
            if(u.cd33 > 0) u.cd33 -= 1
            if(u.cd34 > 0) u.cd34 -= 1
            if(u.cd35 > 0) u.cd35 -= 1
            if(u.cd36 > 0) u.cd36 -= 1
            if(u.porezka > 0) u.porezka -= 1
            if(u.cd37 > 0) u.cd37 -= 1
            if(user.burn > 0) user.burn -= 1
            if(u.burn > 0) u.burn -= 1
            if(user.poison > 0) user.poison -= 1
            if(u.poison > 0) u.poison -= 1
            if(user.poisoning > 0) user.poisoning -= 1
            if(u.poisoning > 0) u.poisoning -= 1
            user.steps += 1
            u.steps += 1
            user.cd32 = 7
            if (u.clas.id == 1) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, так как активировал "клинч", @id${user.id}(${user.nick}) получает ⚔0 урона, так как атака @id${user.id}(${user.nick}) меньше защиты @id${u.id}(${u.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "😈",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🛡",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🖤",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "❣",
                    color: "positive",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "☦",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚙",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚔",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 2) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, так как активировал "клинч", @id${user.id}(${user.nick}) получает ⚔0 урона, так как атака @id${user.id}(${user.nick}) меньше защиты @id${u.id}(${u.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "❄",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💥",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🍃",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔥",
                    color: "negative",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "💧",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚡",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 3) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${u.id}(${u.nick}) не получает урона, так как активировал "клинч", @id${user.id}(${user.nick}) получает ⚔0 урона, так как атака @id${user.id}(${user.nick}) меньше защиты @id${u.id}(${u.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "🦠",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔪",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💣",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "👁‍🗨",
                  color: "primary",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "🧬",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🗡",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💉",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
            }
            if(user.del11 == 0) {
              var hp = user.hp
              var atk = user.atk
              var procent = 20
              var resulthp = hp / 100 * procent
              var resultatk = atk / 100 * procent
              user.duelhp -= resulthp
              user.duelatk -= resultatk
              user.del11 = -1
               
            }
            if(u.del11 == 0) {
              var hp1 = u.hp
              var atk1 = u.atk
              var procent = 20
              var resulthp1 = hp1 / 100 * procent
              var resultatk1 = atk1 / 100 * procent
              u.duelhp -= resulthp1
              u.duelatk -= resultatk1
              u.del11 = -1
               
            }
            if(user.del12 == 0) {
              var def = user.def
              var procent = 20
               var resultdef = def / 100 * procent
              user.dueldef -= resultdef
              user.del12 = -1
               
            }
            if(u.del12 == 0) {
              var def1 = u.def
              var procent = 20
              var resultdef1 = def1 / 100 * procent
              u.dueldef -= resultdef1
              u.del12 = -1
               
            }
            if(user.spikes == 0) {
              user.spikes -= 1
               
            }
            if(u.spikes == 0) {
              u.spikes -= 1
               
            }
          }
          else {
            if(user.cd11 > 0) user.cd11 -= 1
            if(user.del11 > 0) user.del11 -= 1
            if(user.cd12 > 0) user.cd12 -= 1
            if(user.del12 > 0) user.del12 -= 1
            if(user.cd13 > 0) user.cd13 -= 1
            if(user.cd14 > 0) user.cd14 -= 1
            if(user.cd15 > 0) user.cd15 -= 1
            if(user.spikes > 0) user.spikes -= 1
            if(user.cd16 > 0) user.cd16 -= 1
            if(user.cd21 > 0) user.cd21 -= 1
            if(user.cd22 > 0) user.cd22 -= 1
            if(user.cd31 > 0) user.cd31 -= 1
            if(user.cd32 > 0) user.cd32 -= 1
            if(user.cd33 > 0) user.cd33 -= 1
            if(user.cd34 > 0) user.cd34 -= 1
            if(user.cd35 > 0) user.cd35 -= 1
            if(user.cd36 > 0) user.cd36 -= 1
            if(user.porezka > 0) user.porezka -= 1
            if(user.cd37 > 0) user.cd37 -= 1
            if(u.cd11 > 0) u.cd11 -= 1
            if(u.del11 > 0) u.del11 -= 1
            if(u.cd12 > 0) u.cd12 -= 1
            if(u.del12 > 0) u.del12 -= 1
            if(u.cd13 > 0) u.cd13 -= 1
            if(u.cd14 > 0) u.cd14 -= 1
            if(u.cd15 > 0) u.cd15 -= 1
            if(u.spikes > 0) u.spikes -= 1
            if(u.cd16 > 0) u.cd16 -= 1
            if(u.clinch > 0) u.clinch = -1
            if(u.cd21 > 0) u.cd21 -= 1
            if(u.cd22 > 0) u.cd22 -= 1
            if(u.cd31 > 0) u.cd31 -= 1
            if(u.cd32 > 0) u.cd32 -= 1
            if(u.cd33 > 0) u.cd33 -= 1
            if(u.cd34 > 0) u.cd34 -= 1
            if(u.cd35 > 0) u.cd35 -= 1
            if(u.cd36 > 0) u.cd36 -= 1
            if(u.porezka > 0) u.porezka -= 1
            if(u.cd37 > 0) u.cd37 -= 1
            if(user.burn > 0) user.burn -= 1
            if(u.burn > 0) u.burn -= 1
            if(user.poison > 0) user.poison -= 1
            if(u.poison > 0) u.poison -= 1
            if(user.poisoning > 0) user.poisoning -= 1
            if(u.poisoning > 0) u.poisoning -= 1
            user.steps += 1
            u.steps += 1
            user.cd32 = 7
            var result = u.duelatk - user.dueldef
            user.duelhp -= result
            if (u.clas.id == 1) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, @id${user.id}(${user.nick}) получает ⚔${result} урона, так как @id${u.id}(${u.nick}) активировал "клинч". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "😈",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🛡",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🖤",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "❣",
                    color: "positive",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "☦",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚙",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚔",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 2) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, @id${user.id}(${user.nick}) получает ⚔${result} урона, так как @id${u.id}(${u.nick}) активировал "клинч". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "❄",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💥",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🍃",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔥",
                    color: "negative",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "💧",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚡",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 3) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${u.id}(${u.nick}) не получает урона, @id${user.id}(${user.nick}) получает ⚔${result} урона, так как @id${u.id}(${u.nick}) активировал "клинч". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "🦠",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔪",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💣",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "👁‍🗨",
                  color: "primary",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "🧬",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🗡",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💉",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
            }
            if(user.duelhp < 1) {
              var plata2 = user.money
              var procentplata = 10
              var resultplata2 = plata2 / 100 * procentplata
              let num27 = resultplata2
              var finalplata = num27.toFixed(0)
              var finalplata2 = Number(finalplata)
              user.money -= finalplata2
              u.money += finalplata2
              user.duel = false
              u.duel = false
              u.predictionduel = false
              user.predictduel = false
              user.steps = 0
              u.steps = 0
              user.timer = 0
              u.timer = 0
              user.duelhp = 0
              user.duelatk = 0
              user.dueldef = 0
              u.duelhp = 0
              u.duelatk = 0
              u.dueldef = 0
              user.cd11 = 0,
              user.del11 = -1,
              user.cd12 = 0,
              user.del12 = -1,
              user.cd13 = 0,
              user.cd14 = 0,
              user.cd15 = 0,
              user.spikes = -1,
              user.cd16 = 0,
              user.clinch = -1,
              user.cd21 = 0,
              user.cd22 = 0,
              user.nakopleniye = 0,
              user.el1 = 0,
              user.burn = 0,
              user.el2 = 0,
              user.el3 = 0,
              user.cd31 = 0,
              user.poison = 0,
              user.cd32 = 0,
              user.cd33 = 0,
              user.cd34 = 0,
              user.invisible = false,
              user.cd35 = 0,
              user.cd36 = 0,
              user.cd37 = 0,
              user.poisoning = -1
              u.cd11 = 0,
              u.del11 = -1,
              u.cd12 = 0,
              u.del12 = -1,
              u.cd13 = 0,
              u.cd14 = 0,
              u.cd15 = 0,
              u.spikes = -1,
              u.cd16 = 0,
              u.clinch = -1,
              u.cd21 = 0,
              u.cd22 = 0,
              u.nakopleniye = 0,
              u.el1 = 0,
              u.burn = 0,
              u.el2 = 0,
              u.el3 = 0,
              u.cd31 = 0,
              u.poison = 0,
              u.cd32 = 0,
              u.cd33 = 0,
              u.cd34 = 0,
              u.invisible = false,
              u.cd35 = 0,
              u.cd36 = 0,
              u.cd37 = 0,
              u.poisoning = -1
              msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
              var constuser = user
              user = u
              u = constuser
            }
            else {
              if(u.duelhp < 1) {
                var plata2 = user.money
                var procentplata = 10
                var resultplata2 = plata2 / 100 * procentplata
                let num27 = resultplata2
                var finalplata = num27.toFixed(0)
                var finalplata2 = Number(finalplata)
                u.money -= finalplata2
                user.money += finalplata2
                user.duel = false
                u.duel = false
                u.predictionduel = false
                user.predictduel = false
                user.steps = 0
                u.steps = 0
                user.timer = 0
                u.timer = 0
                user.duelhp = 0
                user.duelatk = 0
                user.dueldef = 0
                u.duelhp = 0
                u.duelatk = 0
                u.dueldef = 0
                user.cd11 = 0,
                user.del11 = -1,
                user.cd12 = 0,
                user.del12 = -1,
                user.cd13 = 0,
                user.cd14 = 0,
                user.cd15 = 0,
                user.spikes = -1,
                user.cd16 = 0,
                user.clinch = -1,
                user.cd21 = 0,
                user.cd22 = 0,
                user.nakopleniye = 0,
                user.el1 = 0,
                user.burn = 0,
                user.el2 = 0,
                user.el3 = 0,
                user.cd31 = 0,
                user.poison = 0,
                user.cd32 = 0,
                user.cd33 = 0,
                user.cd34 = 0,
                user.invisible = false,
                user.cd35 = 0,
                user.cd36 = 0,
                user.cd37 = 0,
                user.poisoning = -1
                u.cd11 = 0,
                u.del11 = -1,
                u.cd12 = 0,
                u.del12 = -1,
                u.cd13 = 0,
                u.cd14 = 0,
                u.cd15 = 0,
                u.spikes = -1,
                u.cd16 = 0,
                u.clinch = -1,
                u.cd21 = 0,
                u.cd22 = 0,
                u.nakopleniye = 0,
                u.el1 = 0,
                u.burn = 0,
                u.el2 = 0,
                u.el3 = 0,
                u.cd31 = 0,
                u.poison = 0,
                u.cd32 = 0,
                u.cd33 = 0,
                u.cd34 = 0,
                u.invisible = false,
                u.cd35 = 0,
                u.cd36 = 0,
                u.cd37 = 0,
                u.poisoning = -1
                msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                var constuser = user
                user = u
                u = constuser
              }
            }
            if(user.del11 == 0) {
              var hp = user.hp
              var atk = user.atk
              var procent = 20
              var resulthp = hp / 100 * procent
              var resultatk = atk / 100 * procent
              user.duelhp -= resulthp
              user.duelatk -= resultatk
              user.del11 = -1
               
            }
            if(u.del11 == 0) {
              var hp1 = u.hp
              var atk1 = u.atk
              var procent = 20
              var resulthp1 = hp1 / 100 * procent
              var resultatk1 = atk1 / 100 * procent
              u.duelhp -= resulthp1
              u.duelatk -= resultatk1
              u.del11 = -1
               
            }
            if(user.del12 == 0) {
              var def = user.def
              var procent = 20
               var resultdef = def / 100 * procent
              user.dueldef -= resultdef
              user.del12 = -1
               
            }
            if(u.del12 == 0) {
              var def1 = u.def
              var procent = 20
              var resultdef1 = def1 / 100 * procent
              u.dueldef -= resultdef1
              u.del12 = -1
               
            }
            if(user.spikes == 0) {
              user.spikes -= 1
               
            }
            if(u.spikes == 0) {
              u.spikes -= 1
               
            }
          }
        }
        else {
          if(u.spikes > 0) {
            if(u.control > 0) {
              if(u.dueldef > user.duelatk) {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                user.cd32 = 7
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
              if(user.cd11 > 0) user.cd11 -= 2
              if(user.del11 > 0) user.del11 -= 2
              if(user.cd12 > 0) user.cd12 -= 2
              if(user.del12 > 0) user.del12 -= 2
              if(user.cd13 > 0) user.cd13 -= 2
              if(user.cd14 > 0) user.cd14 -= 2
              if(user.cd15 > 0) user.cd15 -= 2
              if(user.spikes > 0) user.spikes -= 2
              if(user.cd16 > 0) user.cd16 -= 2
              if(user.cd21 > 0) user.cd21 -= 2
              if(user.cd22 > 0) user.cd22 -= 2
              if(user.cd31 > 0) user.cd31 -= 2
              if(user.cd32 > 0) user.cd32 -= 2
              if(user.cd33 > 0) user.cd33 -= 2
              if(user.cd34 > 0) user.cd34 -= 2
              if(user.cd35 > 0) user.cd35 -= 2
              if(user.cd36 > 0) user.cd36 -= 2
              if(user.porezka > 0) user.porezka -= 2
              if(user.cd37 > 0) user.cd37 -= 2
              if(u.cd11 > 0) u.cd11 -= 2
              if(u.del11 > 0) u.del11 -= 2
              if(u.cd12 > 0) u.cd12 -= 2
              if(u.del12 > 0) u.del12 -= 2
              if(u.cd13 > 0) u.cd13 -= 2
              if(u.cd14 > 0) u.cd14 -= 2
              if(u.cd15 > 0) u.cd15 -= 2
              if(u.spikes > 0) u.spikes -= 2
              if(u.cd16 > 0) u.cd16 -= 2
              if(u.clinch > 0) u.clinch = -1
              if(u.cd21 > 0) u.cd21 -= 2
              if(u.cd22 > 0) u.cd22 -= 2
              if(u.cd31 > 0) u.cd31 -= 2
              if(u.cd32 > 0) u.cd32 -= 2
              if(u.cd33 > 0) u.cd33 -= 2
              if(u.cd34 > 0) u.cd34 -= 2
              if(u.cd35 > 0) u.cd35 -= 2
              if(u.cd36 > 0) u.cd36 -= 2
              if(u.porezka > 0) u.porezka -= 2
              if(u.cd37 > 0) u.cd37 -= 2
              if(user.burn > 0) user.burn -= 2
              if(u.burn > 0) u.burn -= 2
              if(user.poison > 0) user.poison -= 2
              if(u.poison > 0) u.poison -= 2
              if(user.poisoning > 0) user.poisoning -= 2
              if(u.poisoning > 0) u.poisoning -= 2
              user.cd32 = 7
              if(u.poison > 0) {
                if(user.invisible > 0) {
                  var atk = user.duelatk
                  var minuspoisonhp = atk * 3
                  var def = u.dueldef
                  var minuspoisonhpminusdef = minuspoisonhp - def
                  var result = minuspoisonhpminusdef * 2
                  u.duelhp -= result
                  var spikes = result / 2
                  user.duelhp -= spikes
                }
                else {
                var atk = user.duelatk
                var minuspoisonhp = atk * 3
                var def = u.dueldef
                var result = minuspoisonhp - def
                u.duelhp -= result
                var spikes = result / 2
                user.duelhp -= spikes
                }
              }
              else {
                var resultatk = user.duelatk * 2
                var result = resultatk - u.dueldef
                u.duelhp -= result
                var spikes = result / 2
                user.duelhp -= spikes
              }
              if(u.control == 2) {
                user.steps += 1
                u.steps += 1
                u.control -= 2
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                }
              }
              else {
                if(u.control > 2) {
                  user.steps += 2
                  u.steps += 2
                  u.control -= 2
                  if (user.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${user.id}(${user.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${user.id}(${user.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${user.id}(${user.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                  }
                }
              }
              if(user.duelhp < 1) {
                var plata2 = user.money
                var procentplata = 10
                var resultplata2 = plata2 / 100 * procentplata
                let num27 = resultplata2
                var finalplata = num27.toFixed(0)
                var finalplata2 = Number(finalplata)
                user.money -= finalplata2
                u.money += finalplata2
                user.duel = false
                u.duel = false
                u.predictionduel = false
                user.predictduel = false
                user.steps = 0
                u.steps = 0
                user.timer = 0
                u.timer = 0
                user.duelhp = 0
                user.duelatk = 0
                user.dueldef = 0
                u.duelhp = 0
                u.duelatk = 0
                u.dueldef = 0
                user.cd11 = 0,
                user.del11 = -1,
                user.cd12 = 0,
                user.del12 = -1,
                user.cd13 = 0,
                user.cd14 = 0,
                user.cd15 = 0,
                user.spikes = -1,
                user.cd16 = 0,
                user.clinch = -1,
                user.cd21 = 0,
                user.cd22 = 0,
                user.nakopleniye = 0,
                user.el1 = 0,
                user.burn = 0,
                user.el2 = 0,
                user.el3 = 0,
                user.cd31 = 0,
                user.poison = 0,
                user.cd32 = 0,
                user.cd33 = 0,
                user.cd34 = 0,
                user.invisible = false,
                user.cd35 = 0,
                user.cd36 = 0,
                user.cd37 = 0,
                user.poisoning = -1
                u.cd11 = 0,
                u.del11 = -1,
                u.cd12 = 0,
                u.del12 = -1,
                u.cd13 = 0,
                u.cd14 = 0,
                u.cd15 = 0,
                u.spikes = -1,
                u.cd16 = 0,
                u.clinch = -1,
                u.cd21 = 0,
                u.cd22 = 0,
                u.nakopleniye = 0,
                u.el1 = 0,
                u.burn = 0,
                u.el2 = 0,
                u.el3 = 0,
                u.cd31 = 0,
                u.poison = 0,
                u.cd32 = 0,
                u.cd33 = 0,
                u.cd34 = 0,
                u.invisible = false,
                u.cd35 = 0,
                u.cd36 = 0,
                u.cd37 = 0,
                u.poisoning = -1
                msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                var constuser = user
                user = u
                u = constuser
              }
              else {
                if(u.duelhp < 1) {
                  var plata2 = user.money
                  var procentplata = 10
                  var resultplata2 = plata2 / 100 * procentplata
                  let num27 = resultplata2
                  var finalplata = num27.toFixed(0)
                  var finalplata2 = Number(finalplata)
                  u.money -= finalplata2
                  user.money += finalplata2
                  user.duel = false
                  u.duel = false
                  u.predictionduel = false
                  user.predictduel = false
                  user.steps = 0
                  u.steps = 0
                  user.timer = 0
                  u.timer = 0
                  user.duelhp = 0
                  user.duelatk = 0
                  user.dueldef = 0
                  u.duelhp = 0
                  u.duelatk = 0
                  u.dueldef = 0
                  user.cd11 = 0,
                  user.del11 = -1,
                  user.cd12 = 0,
                  user.del12 = -1,
                  user.cd13 = 0,
                  user.cd14 = 0,
                  user.cd15 = 0,
                  user.spikes = -1,
                  user.cd16 = 0,
                  user.clinch = -1,
                  user.cd21 = 0,
                  user.cd22 = 0,
                  user.nakopleniye = 0,
                  user.el1 = 0,
                  user.burn = 0,
                  user.el2 = 0,
                  user.el3 = 0,
                  user.cd31 = 0,
                  user.poison = 0,
                  user.cd32 = 0,
                  user.cd33 = 0,
                  user.cd34 = 0,
                  user.invisible = false,
                  user.cd35 = 0,
                  user.cd36 = 0,
                  user.cd37 = 0,
                  user.poisoning = -1
                  u.cd11 = 0,
                  u.del11 = -1,
                  u.cd12 = 0,
                  u.del12 = -1,
                  u.cd13 = 0,
                  u.cd14 = 0,
                  u.cd15 = 0,
                  u.spikes = -1,
                  u.cd16 = 0,
                  u.clinch = -1,
                  u.cd21 = 0,
                  u.cd22 = 0,
                  u.nakopleniye = 0,
                  u.el1 = 0,
                  u.burn = 0,
                  u.el2 = 0,
                  u.el3 = 0,
                  u.cd31 = 0,
                  u.poison = 0,
                  u.cd32 = 0,
                  u.cd33 = 0,
                  u.cd34 = 0,
                  u.invisible = false,
                  u.cd35 = 0,
                  u.cd36 = 0,
                  u.cd37 = 0,
                  u.poisoning = -1
                  msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                  var constuser = user
                  user = u
                  u = constuser
                }
              }
              if(user.del11 == 0) {
                var hp = user.hp
                var atk = user.atk
                var procent = 20
                var resulthp = hp / 100 * procent
                var resultatk = atk / 100 * procent
                user.duelhp -= resulthp
                user.duelatk -= resultatk
                user.del11 = -1
                 
              }
              if(u.del11 == 0) {
                var hp1 = u.hp
                var atk1 = u.atk
                var procent = 20
                var resulthp1 = hp1 / 100 * procent
                var resultatk1 = atk1 / 100 * procent
                u.duelhp -= resulthp1
                u.duelatk -= resultatk1
                u.del11 = -1
                 
              }
              if(user.del12 == 0) {
                var def = user.def
                var procent = 20
                 var resultdef = def / 100 * procent
                user.dueldef -= resultdef
                user.del12 = -1
                 
              }
              if(u.del12 == 0) {
                var def1 = u.def
                var procent = 20
                var resultdef1 = def1 / 100 * procent
                u.dueldef -= resultdef1
                u.del12 = -1
                 
              }
              if(user.spikes == 0) {
                user.spikes -= 1
                 
              }
              if(u.spikes == 0) {
                u.spikes -= 1
                 
              }
              }
            }
            else {
              if(user.duelatk < u.dueldef) {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                user.cd32 = 7
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
              if(user.cd11 > 0) user.cd11 -= 1
              if(user.del11 > 0) user.del11 -= 1
              if(user.cd12 > 0) user.cd12 -= 1
              if(user.del12 > 0) user.del12 -= 1
              if(user.cd13 > 0) user.cd13 -= 1
              if(user.cd14 > 0) user.cd14 -= 1
              if(user.cd15 > 0) user.cd15 -= 1
              if(user.spikes > 0) user.spikes -= 1
              if(user.cd16 > 0) user.cd16 -= 1
              if(user.cd21 > 0) user.cd21 -= 1
              if(user.cd22 > 0) user.cd22 -= 1
              if(user.cd31 > 0) user.cd31 -= 1
              if(user.cd32 > 0) user.cd32 -= 1
              if(user.cd33 > 0) user.cd33 -= 1
              if(user.cd34 > 0) user.cd34 -= 1
              if(user.cd35 > 0) user.cd35 -= 1
              if(user.cd36 > 0) user.cd36 -= 1
              if(user.porezka > 0) user.porezka -= 1
              if(user.cd37 > 0) user.cd37 -= 1
              if(u.cd11 > 0) u.cd11 -= 1
              if(u.del11 > 0) u.del11 -= 1
              if(u.cd12 > 0) u.cd12 -= 1
              if(u.del12 > 0) u.del12 -= 1
              if(u.cd13 > 0) u.cd13 -= 1
              if(u.cd14 > 0) u.cd14 -= 1
              if(u.cd15 > 0) u.cd15 -= 1
              if(u.spikes > 0) u.spikes -= 1
              if(u.cd16 > 0) u.cd16 -= 1
              if(u.clinch > 0) u.clinch = -1
              if(u.cd21 > 0) u.cd21 -= 1
              if(u.cd22 > 0) u.cd22 -= 1
              if(u.cd31 > 0) u.cd31 -= 1
              if(u.cd32 > 0) u.cd32 -= 1
              if(u.cd33 > 0) u.cd33 -= 1
              if(u.cd34 > 0) u.cd34 -= 1
              if(u.cd35 > 0) u.cd35 -= 1
              if(u.cd36 > 0) u.cd36 -= 1
              if(u.porezka > 0) u.porezka -= 1
              if(u.cd37 > 0) u.cd37 -= 1
              if(user.burn > 0) user.burn -= 1
              if(u.burn > 0) u.burn -= 1
              if(user.poison > 0) user.poison -= 1
              if(u.poison > 0) u.poison -= 1
              if(user.poisoning > 0) user.poisoning -= 1
              if(u.poisoning > 0) u.poisoning -= 1
              user.steps += 1
              u.steps += 1
              user.cd32 = 7
              if(u.poison > 0) {
                if(user.invisible > 0) {
                  var atk = user.duelatk
                  var minuspoisonhp = atk * 3
                  var def = u.dueldef
                  var minuspoisonhpminusdef = minuspoisonhp - def
                  var result = minuspoisonhpminusdef * 2
                  u.duelhp -= result
                  var spikes = result / 2
                  user.duelhp -= spikes
                }
                else {
                var atk = user.duelatk
                var minuspoisonhp = atk * 3
                var def = u.dueldef
                var result = minuspoisonhp - def
                u.duelhp -= result
                var spikes = result / 2
                user.duelhp -= spikes
                }
              }
              else {
                var resultatk = user.duelatk * 2
                var result = resultatk - u.dueldef
                u.duelhp -= result
                var spikes = result / 2
                user.duelhp -= spikes
              }
              if (u.clas.id == 1) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "😈",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🛡",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🖤",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "❣",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "☦",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚙",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚔",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 2) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "❄",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💥",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🍃",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔥",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "💧",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚡",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 3) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "🦠",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔪",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💣",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "👁‍🗨",
                    color: "primary",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "🧬",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🗡",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💉",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
                }
                if(user.duelhp < 1) {
                  var plata2 = user.money
                  var procentplata = 10
                  var resultplata2 = plata2 / 100 * procentplata
                  let num27 = resultplata2
                  var finalplata = num27.toFixed(0)
                  var finalplata2 = Number(finalplata)
                  user.money -= finalplata2
                  u.money += finalplata2
                  user.duel = false
                  u.duel = false
                  u.predictionduel = false
                  user.predictduel = false
                  user.steps = 0
                  u.steps = 0
                  user.timer = 0
                  u.timer = 0
                  user.duelhp = 0
                  user.duelatk = 0
                  user.dueldef = 0
                  u.duelhp = 0
                  u.duelatk = 0
                  u.dueldef = 0
                  user.cd11 = 0,
                  user.del11 = -1,
                  user.cd12 = 0,
                  user.del12 = -1,
                  user.cd13 = 0,
                  user.cd14 = 0,
                  user.cd15 = 0,
                  user.spikes = -1,
                  user.cd16 = 0,
                  user.clinch = -1,
                  user.cd21 = 0,
                  user.cd22 = 0,
                  user.nakopleniye = 0,
                  user.el1 = 0,
                  user.burn = 0,
                  user.el2 = 0,
                  user.el3 = 0,
                  user.cd31 = 0,
                  user.poison = 0,
                  user.cd32 = 0,
                  user.cd33 = 0,
                  user.cd34 = 0,
                  user.invisible = false,
                  user.cd35 = 0,
                  user.cd36 = 0,
                  user.cd37 = 0,
                  user.poisoning = -1
                  u.cd11 = 0,
                  u.del11 = -1,
                  u.cd12 = 0,
                  u.del12 = -1,
                  u.cd13 = 0,
                  u.cd14 = 0,
                  u.cd15 = 0,
                  u.spikes = -1,
                  u.cd16 = 0,
                  u.clinch = -1,
                  u.cd21 = 0,
                  u.cd22 = 0,
                  u.nakopleniye = 0,
                  u.el1 = 0,
                  u.burn = 0,
                  u.el2 = 0,
                  u.el3 = 0,
                  u.cd31 = 0,
                  u.poison = 0,
                  u.cd32 = 0,
                  u.cd33 = 0,
                  u.cd34 = 0,
                  u.invisible = false,
                  u.cd35 = 0,
                  u.cd36 = 0,
                  u.cd37 = 0,
                  u.poisoning = -1
                  msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                  var constuser = user
                  user = u
                  u = constuser
                }
                else {
                  if(u.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    u.money -= finalplata2
                    user.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                }
              if(user.del11 == 0) {
                var hp = user.hp
                var atk = user.atk
                var procent = 20
                var resulthp = hp / 100 * procent
                var resultatk = atk / 100 * procent
                user.duelhp -= resulthp
                user.duelatk -= resultatk
                user.del11 = -1
                 
              }
              if(u.del11 == 0) {
                var hp1 = u.hp
                var atk1 = u.atk
                var procent = 20
                var resulthp1 = hp1 / 100 * procent
                var resultatk1 = atk1 / 100 * procent
                u.duelhp -= resulthp1
                u.duelatk -= resultatk1
                u.del11 = -1
                 
              }
              if(user.del12 == 0) {
                var def = user.def
                var procent = 20
                 var resultdef = def / 100 * procent
                user.dueldef -= resultdef
                user.del12 = -1
                 
              }
              if(u.del12 == 0) {
                var def1 = u.def
                var procent = 20
                var resultdef1 = def1 / 100 * procent
                u.dueldef -= resultdef1
                u.del12 = -1
                 
              }
              if(user.spikes == 0) {
                user.spikes -= 1
                 
              }
              if(u.spikes == 0) {
                u.spikes -= 1
                 
              }
            }
          }
          }
          else {
            if(u.control > 0) {
              if(u.dueldef > user.duelatk) {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                user.cd32 = 7
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                user.cd32 = 7
                if(u.poison > 0) {
                  if(user.invisible > 0) {
                    var atk = user.duelatk
                    var minuspoisonhp = atk * 3
                    var def = u.dueldef
                    var minuspoisonhpminusdef = minuspoisonhp - def
                    var result = minuspoisonhpminusdef * 2
                    u.duelhp -= result
                  }
                  else {
                  var atk = user.duelatk
                  var minuspoisonhp = atk * 3
                  var def = u.dueldef
                  var result = minuspoisonhp - def
                  u.duelhp -= result
                  }
                }
                else {
                  var resultatk = user.duelatk * 2
                  var result = resultatk - u.dueldef
                  u.duelhp -= result
                }
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                  if(user.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    user.money -= finalplata2
                    u.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                  else {
                    if(u.duelhp < 1) {
                      var plata2 = user.money
                      var procentplata = 10
                      var resultplata2 = plata2 / 100 * procentplata
                      let num27 = resultplata2
                      var finalplata = num27.toFixed(0)
                      var finalplata2 = Number(finalplata)
                      u.money -= finalplata2
                      user.money += finalplata2
                      user.duel = false
                      u.duel = false
                      u.predictionduel = false
                      user.predictduel = false
                      user.steps = 0
                      u.steps = 0
                      user.timer = 0
                      u.timer = 0
                      user.duelhp = 0
                      user.duelatk = 0
                      user.dueldef = 0
                      u.duelhp = 0
                      u.duelatk = 0
                      u.dueldef = 0
                      user.cd11 = 0,
                      user.del11 = -1,
                      user.cd12 = 0,
                      user.del12 = -1,
                      user.cd13 = 0,
                      user.cd14 = 0,
                      user.cd15 = 0,
                      user.spikes = -1,
                      user.cd16 = 0,
                      user.clinch = -1,
                      user.cd21 = 0,
                      user.cd22 = 0,
                      user.nakopleniye = 0,
                      user.el1 = 0,
                      user.burn = 0,
                      user.el2 = 0,
                      user.el3 = 0,
                      user.cd31 = 0,
                      user.poison = 0,
                      user.cd32 = 0,
                      user.cd33 = 0,
                      user.cd34 = 0,
                      user.invisible = false,
                      user.cd35 = 0,
                      user.cd36 = 0,
                      user.cd37 = 0,
                      user.poisoning = -1
                      u.cd11 = 0,
                      u.del11 = -1,
                      u.cd12 = 0,
                      u.del12 = -1,
                      u.cd13 = 0,
                      u.cd14 = 0,
                      u.cd15 = 0,
                      u.spikes = -1,
                      u.cd16 = 0,
                      u.clinch = -1,
                      u.cd21 = 0,
                      u.cd22 = 0,
                      u.nakopleniye = 0,
                      u.el1 = 0,
                      u.burn = 0,
                      u.el2 = 0,
                      u.el3 = 0,
                      u.cd31 = 0,
                      u.poison = 0,
                      u.cd32 = 0,
                      u.cd33 = 0,
                      u.cd34 = 0,
                      u.invisible = false,
                      u.cd35 = 0,
                      u.cd36 = 0,
                      u.cd37 = 0,
                      u.poisoning = -1
                      msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                      var constuser = user
                      user = u
                      u = constuser
                    }
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
            }
            else {
              if(u.dueldef > user.duelatk) {
                if(user.cd11 > 0) user.cd11 -= 1
                if(user.del11 > 0) user.del11 -= 1
                if(user.cd12 > 0) user.cd12 -= 1
                if(user.del12 > 0) user.del12 -= 1
                if(user.cd13 > 0) user.cd13 -= 1
                if(user.cd14 > 0) user.cd14 -= 1
                if(user.cd15 > 0) user.cd15 -= 1
                if(user.spikes > 0) user.spikes -= 1
                if(user.cd16 > 0) user.cd16 -= 1
                if(user.cd21 > 0) user.cd21 -= 1
                if(user.cd22 > 0) user.cd22 -= 1
                if(user.cd31 > 0) user.cd31 -= 1
                if(user.cd32 > 0) user.cd32 -= 1
                if(user.cd33 > 0) user.cd33 -= 1
                if(user.cd34 > 0) user.cd34 -= 1
                if(user.cd35 > 0) user.cd35 -= 1
                if(user.cd36 > 0) user.cd36 -= 1
                if(user.porezka > 0) user.porezka -= 1
                if(user.cd37 > 0) user.cd37 -= 1
                if(u.cd11 > 0) u.cd11 -= 1
                if(u.del11 > 0) u.del11 -= 1
                if(u.cd12 > 0) u.cd12 -= 1
                if(u.del12 > 0) u.del12 -= 1
                if(u.cd13 > 0) u.cd13 -= 1
                if(u.cd14 > 0) u.cd14 -= 1
                if(u.cd15 > 0) u.cd15 -= 1
                if(u.spikes > 0) u.spikes -= 1
                if(u.cd16 > 0) u.cd16 -= 1
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 1
                if(u.cd22 > 0) u.cd22 -= 1
                if(u.cd31 > 0) u.cd31 -= 1
                if(u.cd32 > 0) u.cd32 -= 1
                if(u.cd33 > 0) u.cd33 -= 1
                if(u.cd34 > 0) u.cd34 -= 1
                if(u.cd35 > 0) u.cd35 -= 1
                if(u.cd36 > 0) u.cd36 -= 1
                if(u.porezka > 0) u.porezka -= 1
                if(u.cd37 > 0) u.cd37 -= 1
                if(user.burn > 0) user.burn -= 1
                if(u.burn > 0) u.burn -= 1
                if(user.poison > 0) user.poison -= 1
                if(u.poison > 0) u.poison -= 1
                if(user.poisoning > 0) user.poisoning -= 1
                if(u.poisoning > 0) u.poisoning -= 1
                user.steps += 1
                u.steps += 1
                user.cd32 = 7
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
                if(user.cd11 > 0) user.cd11 -= 1
                if(user.del11 > 0) user.del11 -= 1
                if(user.cd12 > 0) user.cd12 -= 1
                if(user.del12 > 0) user.del12 -= 1
                if(user.cd13 > 0) user.cd13 -= 1
                if(user.cd14 > 0) user.cd14 -= 1
                if(user.cd15 > 0) user.cd15 -= 1
                if(user.spikes > 0) user.spikes -= 1
                if(user.cd16 > 0) user.cd16 -= 1
                if(user.cd21 > 0) user.cd21 -= 1
                if(user.cd22 > 0) user.cd22 -= 1
                if(user.cd31 > 0) user.cd31 -= 1
                if(user.cd32 > 0) user.cd32 -= 1
                if(user.cd33 > 0) user.cd33 -= 1
                if(user.cd34 > 0) user.cd34 -= 1
                if(user.cd35 > 0) user.cd35 -= 1
                if(user.cd36 > 0) user.cd36 -= 1
                if(user.porezka > 0) user.porezka -= 1
                if(user.cd37 > 0) user.cd37 -= 1
                if(u.cd11 > 0) u.cd11 -= 1
                if(u.del11 > 0) u.del11 -= 1
                if(u.cd12 > 0) u.cd12 -= 1
                if(u.del12 > 0) u.del12 -= 1
                if(u.cd13 > 0) u.cd13 -= 1
                if(u.cd14 > 0) u.cd14 -= 1
                if(u.cd15 > 0) u.cd15 -= 1
                if(u.spikes > 0) u.spikes -= 1
                if(u.cd16 > 0) u.cd16 -= 1
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 1
                if(u.cd22 > 0) u.cd22 -= 1
                if(u.cd31 > 0) u.cd31 -= 1
                if(u.cd32 > 0) u.cd32 -= 1
                if(u.cd33 > 0) u.cd33 -= 1
                if(u.cd34 > 0) u.cd34 -= 1
                if(u.cd35 > 0) u.cd35 -= 1
                if(u.cd36 > 0) u.cd36 -= 1
                if(u.porezka > 0) u.porezka -= 1
                if(u.cd37 > 0) u.cd37 -= 1
                if(user.burn > 0) user.burn -= 1
                if(u.burn > 0) u.burn -= 1
                if(user.poison > 0) user.poison -= 1
                if(u.poison > 0) u.poison -= 1
                if(user.poisoning > 0) user.poisoning -= 1
                if(u.poisoning > 0) u.poisoning -= 1
                user.steps += 1
                u.steps += 1
                user.cd32 = 7
                if(u.poison > 0) {
                  if(user.invisible > 0) {
                    var atk = user.duelatk
                    var minuspoisonhp = atk * 3
                    var def = u.dueldef
                    var minuspoisonhpminusdef = minuspoisonhp - def
                    var result = minuspoisonhpminusdef * 2
                    u.duelhp -= result
                  }
                  else {
                  var atk = user.duelatk
                  var minuspoisonhp = atk * 3
                  var def = u.dueldef
                  var result = minuspoisonhp - def
                  u.duelhp -= result
                  }
                }
                else {
                  var resultatk = user.duelatk * 2
                  var result = resultatk - u.dueldef
                  u.duelhp -= result
                }
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
                  if(user.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    user.money -= finalplata2
                    u.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                  else {
                    if(u.duelhp < 1) {
                      var plata2 = user.money
                      var procentplata = 10
                      var resultplata2 = plata2 / 100 * procentplata
                      let num27 = resultplata2
                      var finalplata = num27.toFixed(0)
                      var finalplata2 = Number(finalplata)
                      u.money -= finalplata2
                      user.money += finalplata2
                      user.duel = false
                      u.duel = false
                      u.predictionduel = false
                      user.predictduel = false
                      user.steps = 0
                      u.steps = 0
                      user.timer = 0
                      u.timer = 0
                      user.duelhp = 0
                      user.duelatk = 0
                      user.dueldef = 0
                      u.duelhp = 0
                      u.duelatk = 0
                      u.dueldef = 0
                      user.cd11 = 0,
                      user.del11 = -1,
                      user.cd12 = 0,
                      user.del12 = -1,
                      user.cd13 = 0,
                      user.cd14 = 0,
                      user.cd15 = 0,
                      user.spikes = -1,
                      user.cd16 = 0,
                      user.clinch = -1,
                      user.cd21 = 0,
                      user.cd22 = 0,
                      user.nakopleniye = 0,
                      user.el1 = 0,
                      user.burn = 0,
                      user.el2 = 0,
                      user.el3 = 0,
                      user.cd31 = 0,
                      user.poison = 0,
                      user.cd32 = 0,
                      user.cd33 = 0,
                      user.cd34 = 0,
                      user.invisible = false,
                      user.cd35 = 0,
                      user.cd36 = 0,
                      user.cd37 = 0,
                      user.poisoning = -1
                      u.cd11 = 0,
                      u.del11 = -1,
                      u.cd12 = 0,
                      u.del12 = -1,
                      u.cd13 = 0,
                      u.cd14 = 0,
                      u.cd15 = 0,
                      u.spikes = -1,
                      u.cd16 = 0,
                      u.clinch = -1,
                      u.cd21 = 0,
                      u.cd22 = 0,
                      u.nakopleniye = 0,
                      u.el1 = 0,
                      u.burn = 0,
                      u.el2 = 0,
                      u.el3 = 0,
                      u.cd31 = 0,
                      u.poison = 0,
                      u.cd32 = 0,
                      u.cd33 = 0,
                      u.cd34 = 0,
                      u.invisible = false,
                      u.cd35 = 0,
                      u.cd36 = 0,
                      u.cd37 = 0,
                      u.poisoning = -1
                      msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                      var constuser = user
                      user = u
                      u = constuser
                    }
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
            }
          }
        }
      }
    }
    if(u.poison > 0) {
      var procent50 = 50
      var poison50 = user.duelatk * procent50 / 100
      u.duelhp -= poison50
      msg.send(`"${u.nick}" получает ⚔${poison50} урона`)
    }
    if(user.poisoning > 0) {
      var result1 = user.duelatk - user.dueldef
      user.duelhp -= result1
      msg.send(`"${user.nick}" получает ⚔${result1} урона от отравления`)
    }
    if(u.poisoning > 0) {
      var result2 = u.duelatk - u.dueldef
      u.duelhp -= result2
      msg.send(`"${u.nick}" наносит себе ⚔${result2} урона`)
    }
    if(user.poisoning == 0) {
      user.poisoning = -1
      var atk3 = user.duelatk * 3
      var heal1 = atk3 * 2
      user.duelhp += heal1
      if (user.duelhp > user.hp) {
      user.duelhp = user.hp
      }
      msg.send(`"${user.nick}" восстанавливает 💚${heal1} здоровья`)
    }
    if(u.poisoning == 0) {
      u.poisoning = -1
      var atk3 = u.duelatk * 3
      var heal2 = atk3 * 2
      u.duelhp += heal2
      if (u.duelhp > u.hp) {
      u.duelhp = u.hp
      }
      msg.send(`"${u.nick}" восстанавливает 💚${heal2} здоровья`)
    }
    var constuser = user
    user = u
    u = constuser
  })

  vk.updates.hear(/^(.*) 💣$/i, msg => {
    if(user.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(u.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(user.steps > 100 || u.steps > 100) {
      user.duel = false
      u.duel = false
      u.predictionduel = false
      user.predictduel = false
      user.steps = 0
      u.steps = 0
      user.timer = 0
      u.timer = 0
      user.duelhp = 0
      user.duelatk = 0
      user.dueldef = 0
      u.duelhp = 0
      u.duelatk = 0
      u.dueldef = 0
      user.cd11 = 0,
      user.del11 = -1,
      user.cd12 = 0,
      user.del12 = -1,
      user.cd13 = 0,
      user.cd14 = 0,
      user.cd15 = 0,
      user.spikes = -1,
      user.cd16 = 0,
      user.clinch = -1,
      user.cd21 = 0,
      user.cd22 = 0,
      user.nakopleniye = 0,
      user.el1 = 0,
      user.burn = 0,
      user.el2 = 0,
      user.el3 = 0,
      user.cd31 = 0,
      user.poison = 0,
      user.cd32 = 0,
      user.cd33 = 0,
      user.cd34 = 0,
      user.invisible = false,
      user.cd35 = 0,
      user.cd36 = 0,
      user.cd37 = 0,
      user.poisoning = -1
      u.cd11 = 0,
      u.del11 = -1,
      u.cd12 = 0,
      u.del12 = -1,
      u.cd13 = 0,
      u.cd14 = 0,
      u.cd15 = 0,
      u.spikes = -1,
      u.cd16 = 0,
      u.clinch = -1,
      u.cd21 = 0,
      u.cd22 = 0,
      u.nakopleniye = 0,
      u.el1 = 0,
      u.burn = 0,
      u.el2 = 0,
      u.el3 = 0,
      u.cd31 = 0,
      u.poison = 0,
      u.cd32 = 0,
      u.cd33 = 0,
      u.cd34 = 0,
      u.invisible = false,
      u.cd35 = 0,
      u.cd36 = 0,
      u.cd37 = 0,
      u.poisoning = -1
      return msg.send ('Ходы дуэли превысили 100. Победитель не определён')
    }
    if(msg.$match[1] != '[club202302035|@eswep]') return
    if(msg.messagePayload != "project RQ") return
    if(msg.senderId == u.id) {
      var constu = u
      u = user
      user = constu
    }
    if(user.cd33 > 0) return msg.send(`Умение перезаряжается`)
    if(user.clas.id != 3) return msg.send (`Умение не принадлежит вашему классу`)
    if(u.nakopleniye > 0) {
      if(u.control > 0) u.nakopleniye = 0
    }
    if (user.steps % 2 == 0) {
      return msg.send ('Сейчас не твой ход')
    }
    else {
      if(user.control > 0) {
        msg.send (`Невозможно применить умение`);
      }
      else{
        if(u.clinch > 0) {
          if(user.cd11 > 0) user.cd11 -= 1
          if(user.del11 > 0) user.del11 -= 1
          if(user.cd12 > 0) user.cd12 -= 1
          if(user.del12 > 0) user.del12 -= 1
          if(user.cd13 > 0) user.cd13 -= 1
          if(user.cd14 > 0) user.cd14 -= 1
          if(user.cd15 > 0) user.cd15 -= 1
          if(user.spikes > 0) user.spikes -= 1
          if(user.cd16 > 0) user.cd16 -= 1
          if(user.cd21 > 0) user.cd21 -= 1
          if(user.cd22 > 0) user.cd22 -= 1
          if(user.cd31 > 0) user.cd31 -= 1
          if(user.cd32 > 0) user.cd32 -= 1
          if(user.cd33 > 0) user.cd33 -= 1
          if(user.cd34 > 0) user.cd34 -= 1
          if(user.cd35 > 0) user.cd35 -= 1
          if(user.cd36 > 0) user.cd36 -= 1
          if(user.porezka > 0) user.porezka -= 1
          if(user.cd37 > 0) user.cd37 -= 1
          if(u.cd11 > 0) u.cd11 -= 1
          if(u.del11 > 0) u.del11 -= 1
          if(u.cd12 > 0) u.cd12 -= 1
          if(u.del12 > 0) u.del12 -= 1
          if(u.cd13 > 0) u.cd13 -= 1
          if(u.cd14 > 0) u.cd14 -= 1
          if(u.cd15 > 0) u.cd15 -= 1
          if(u.spikes > 0) u.spikes -= 1
          if(u.cd16 > 0) u.cd16 -= 1
          if(u.clinch > 0) u.clinch = -1
          if(u.cd21 > 0) u.cd21 -= 1
          if(u.cd22 > 0) u.cd22 -= 1
          if(u.cd31 > 0) u.cd31 -= 1
          if(u.cd32 > 0) u.cd32 -= 1
          if(u.cd33 > 0) u.cd33 -= 1
          if(u.cd34 > 0) u.cd34 -= 1
          if(u.cd35 > 0) u.cd35 -= 1
          if(u.cd36 > 0) u.cd36 -= 1
          if(u.porezka > 0) u.porezka -= 1
          if(u.cd37 > 0) u.cd37 -= 1
          if(user.burn > 0) user.burn -= 1
          if(u.burn > 0) u.burn -= 1
          if(user.poison > 0) user.poison -= 1
          if(u.poison > 0) u.poison -= 1
          if(user.poisoning > 0) user.poisoning -= 1
          if(u.poisoning > 0) u.poisoning -= 1
          user.steps += 1
          u.steps += 1
          if (u.clas.id == 1) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `Умение заблокировано, так как у @id${u.id}(${u.nick}) активирван "клинч"\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "😈",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🛡",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🖤",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "❣",
                  color: "positive",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "☦",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "⚙",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "⚔",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
          }
          if (u.clas.id == 2) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `Умение заблокировано, так как у @id${u.id}(${u.nick}) активирван "клинч"\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "❄",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💥",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🍃",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔥",
                  color: "negative",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "💧",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "⚡",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
          }
          if (u.clas.id == 3) {
          vk.api.messages.send({
            peer_id: msg.peerId,
            message: `Умение заблокировано, так как у @id${u.id}(${u.nick}) активирван "клинч"\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
            disable_mentions: 1,
            keyboard: Keyboard.builder()
            .inline()
              .textButton({
                label: "🦠",
                color: "negative",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "🔪",
                color: "negative",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "💣",
                color: "primary",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "👁‍🗨",
                color: "primary",
                payload: "project RQ"
                })
            .row()
            .inline()
              .textButton({
                label: "🧬",
                color: "positive",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "🗡",
                color: "secondary",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "💉",
                color: "positive",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "АТК",
                color: "negative",
                payload: "project RQ"
                })
              })
          }
        }
        else {
          if(user.cd11 > 0) user.cd11 -= 1
          if(user.del11 > 0) user.del11 -= 1
          if(user.cd12 > 0) user.cd12 -= 1
          if(user.del12 > 0) user.del12 -= 1
          if(user.cd13 > 0) user.cd13 -= 1
          if(user.cd14 > 0) user.cd14 -= 1
          if(user.cd15 > 0) user.cd15 -= 1
          if(user.spikes > 0) user.spikes -= 1
          if(user.cd16 > 0) user.cd16 -= 1
          if(user.cd21 > 0) user.cd21 -= 1
          if(user.cd22 > 0) user.cd22 -= 1
          if(user.cd31 > 0) user.cd31 -= 1
          if(user.cd32 > 0) user.cd32 -= 1
          if(user.cd33 > 0) user.cd33 -= 1
          if(user.cd34 > 0) user.cd34 -= 1
          if(user.cd35 > 0) user.cd35 -= 1
          if(user.cd36 > 0) user.cd36 -= 1
          if(user.porezka > 0) user.porezka -= 1
          if(user.cd37 > 0) user.cd37 -= 1
          if(u.cd11 > 0) u.cd11 -= 1
          if(u.del11 > 0) u.del11 -= 1
          if(u.cd12 > 0) u.cd12 -= 1
          if(u.del12 > 0) u.del12 -= 1
          if(u.cd13 > 0) u.cd13 -= 1
          if(u.cd14 > 0) u.cd14 -= 1
          if(u.cd15 > 0) u.cd15 -= 1
          if(u.spikes > 0) u.spikes -= 1
          if(u.cd16 > 0) u.cd16 -= 1
          if(u.clinch > 0) u.clinch = -1
          if(u.cd21 > 0) u.cd21 -= 1
          if(u.cd22 > 0) u.cd22 -= 1
          if(u.cd31 > 0) u.cd31 -= 1
          if(u.cd32 > 0) u.cd32 -= 1
          if(u.cd33 > 0) u.cd33 -= 1
          if(u.cd34 > 0) u.cd34 -= 1
          if(u.cd35 > 0) u.cd35 -= 1
          if(u.cd36 > 0) u.cd36 -= 1
          if(u.porezka > 0) u.porezka -= 1
          if(u.cd37 > 0) u.cd37 -= 1
          if(user.burn > 0) user.burn -= 1
          if(u.burn > 0) u.burn -= 1
          if(user.poison > 0) user.poison -= 1
          if(u.poison > 0) u.poison -= 1
          if(user.poisoning > 0) user.poisoning -= 1
          if(u.poisoning > 0) u.poisoning -= 1
          u.control += 4
          user.cd33 = 10
          if (user.clas.id == 1) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${u.id}(${u.nick}) оглушён на 4 хода. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "😈",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🛡",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🖤",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "❣",
                  color: "positive",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "☦",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "⚙",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "⚔",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
          }
          if (user.clas.id == 2) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${u.id}(${u.nick}) оглушён на 4 хода. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "❄",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💥",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🍃",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔥",
                  color: "negative",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "💧",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "⚡",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
          }
          if (user.clas.id == 3) {
          vk.api.messages.send({
            peer_id: msg.peerId,
            message: `@id${u.id}(${u.nick}) оглушён на 4 хода. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
            disable_mentions: 1,
            keyboard: Keyboard.builder()
            .inline()
              .textButton({
                label: "🦠",
                color: "negative",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "🔪",
                color: "negative",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "💣",
                color: "primary",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "👁‍🗨",
                color: "primary",
                payload: "project RQ"
                })
            .row()
            .inline()
              .textButton({
                label: "🧬",
                color: "positive",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "🗡",
                color: "secondary",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "💉",
                color: "positive",
                payload: "project RQ"
                })
            .inline()
              .textButton({
                label: "АТК",
                color: "negative",
                payload: "project RQ"
                })
              })
            }
        }
      }
    }
    if(u.poison > 0) {
      var procent50 = 50
      var poison50 = user.duelatk * procent50 / 100
      u.duelhp -= poison50
      msg.send(`"${u.nick}" получает ⚔${poison50} урона`)
    }
    if(user.poisoning > 0) {
      var result1 = user.duelatk - user.dueldef
      user.duelhp -= result1
      msg.send(`"${user.nick}" получает ⚔${result1} урона от отравления`)
    }
    if(u.poisoning > 0) {
      var result2 = u.duelatk - u.dueldef
      u.duelhp -= result2
      msg.send(`"${u.nick}" наносит себе ⚔${result2} урона`)
    }
    if(user.poisoning == 0) {
      user.poisoning = -1
      var atk3 = user.duelatk * 3
      var heal1 = atk3 * 2
      user.duelhp += heal1
      if (user.duelhp > user.hp) {
      user.duelhp = user.hp
      }
      msg.send(`"${user.nick}" восстанавливает 💚${heal1} здоровья`)
    }
    if(u.poisoning == 0) {
      u.poisoning = -1
      var atk3 = u.duelatk * 3
      var heal2 = atk3 * 2
      u.duelhp += heal2
      if (u.duelhp > u.hp) {
      u.duelhp = u.hp
      }
      msg.send(`"${u.nick}" восстанавливает 💚${heal2} здоровья`)
    }
    var constuser = user
    user = u
    u = constuser
  })

  vk.updates.hear(/^(.*) 👁‍🗨$/i, msg => {
    if(user.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(u.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(user.steps > 100 || u.steps > 100) {
      user.duel = false
      u.duel = false
      u.predictionduel = false
      user.predictduel = false
      user.steps = 0
      u.steps = 0
      user.timer = 0
      u.timer = 0
      user.duelhp = 0
      user.duelatk = 0
      user.dueldef = 0
      u.duelhp = 0
      u.duelatk = 0
      u.dueldef = 0
      user.cd11 = 0,
      user.del11 = -1,
      user.cd12 = 0,
      user.del12 = -1,
      user.cd13 = 0,
      user.cd14 = 0,
      user.cd15 = 0,
      user.spikes = -1,
      user.cd16 = 0,
      user.clinch = -1,
      user.cd21 = 0,
      user.cd22 = 0,
      user.nakopleniye = 0,
      user.el1 = 0,
      user.burn = 0,
      user.el2 = 0,
      user.el3 = 0,
      user.cd31 = 0,
      user.poison = 0,
      user.cd32 = 0,
      user.cd33 = 0,
      user.cd34 = 0,
      user.invisible = false,
      user.cd35 = 0,
      user.cd36 = 0,
      user.cd37 = 0,
      user.poisoning = -1
      u.cd11 = 0,
      u.del11 = -1,
      u.cd12 = 0,
      u.del12 = -1,
      u.cd13 = 0,
      u.cd14 = 0,
      u.cd15 = 0,
      u.spikes = -1,
      u.cd16 = 0,
      u.clinch = -1,
      u.cd21 = 0,
      u.cd22 = 0,
      u.nakopleniye = 0,
      u.el1 = 0,
      u.burn = 0,
      u.el2 = 0,
      u.el3 = 0,
      u.cd31 = 0,
      u.poison = 0,
      u.cd32 = 0,
      u.cd33 = 0,
      u.cd34 = 0,
      u.invisible = false,
      u.cd35 = 0,
      u.cd36 = 0,
      u.cd37 = 0,
      u.poisoning = -1
      return msg.send ('Ходы дуэли превысили 100. Победитель не определён')
    }
    if(msg.$match[1] != '[club202302035|@eswep]') return
    if(msg.messagePayload != "project RQ") return
    if(msg.senderId == u.id) {
      var constu = u
      u = user
      user = constu
    }
    if(user.cd34 > 0) return msg.send(`Умение перезаряжается`)
    if(user.clas.id != 3) return msg.send (`Умение не принадлежит вашему классу`)
    if(u.nakopleniye > 0) {
      if(u.control > 0) u.nakopleniye = 0
    }
    if (user.steps % 2 == 0) {
      return msg.send ('Сейчас не твой ход')
    }
    else {
      if(user.control > 0) {
        msg.send (`Невозможно применить умение`);
      }
      else{
      if(user.cd11 > 0) user.cd11 -= 1
      if(user.del11 > 0) user.del11 -= 1
      if(user.cd12 > 0) user.cd12 -= 1
      if(user.del12 > 0) user.del12 -= 1
      if(user.cd13 > 0) user.cd13 -= 1
      if(user.cd14 > 0) user.cd14 -= 1
      if(user.cd15 > 0) user.cd15 -= 1
      if(user.spikes > 0) user.spikes -= 1
      if(user.cd16 > 0) user.cd16 -= 1
      if(user.cd21 > 0) user.cd21 -= 1
      if(user.cd22 > 0) user.cd22 -= 1
      if(user.cd31 > 0) user.cd31 -= 1
      if(user.cd32 > 0) user.cd32 -= 1
      if(user.cd33 > 0) user.cd33 -= 1
      if(user.cd34 > 0) user.cd34 -= 1
      if(user.cd35 > 0) user.cd35 -= 1
      if(user.cd36 > 0) user.cd36 -= 1
      if(user.cd37 > 0) user.cd37 -= 1
      if(u.cd11 > 0) u.cd11 -= 1
      if(u.del11 > 0) u.del11 -= 1
      if(u.cd12 > 0) u.cd12 -= 1
      if(u.del12 > 0) u.del12 -= 1
      if(u.cd13 > 0) u.cd13 -= 1
      if(u.cd14 > 0) u.cd14 -= 1
      if(u.cd15 > 0) u.cd15 -= 1
      if(u.spikes > 0) u.spikes -= 1
      if(u.cd16 > 0) u.cd16 -= 1
      if(u.clinch > 0) u.clinch = -1
      if(u.cd21 > 0) u.cd21 -= 1
      if(u.cd22 > 0) u.cd22 -= 1
      if(u.cd31 > 0) u.cd31 -= 1
      if(u.cd32 > 0) u.cd32 -= 1
      if(u.cd33 > 0) u.cd33 -= 1
      if(u.cd34 > 0) u.cd34 -= 1
      if(u.cd35 > 0) u.cd35 -= 1
      if(u.cd36 > 0) u.cd36 -= 1
      if(u.cd37 > 0) u.cd37 -= 1
      if(user.burn > 0) user.burn -= 1
      if(u.burn > 0) u.burn -= 1
      if(user.poison > 0) user.poison -= 1
      if(u.poison > 0) u.poison -= 1
      if(user.poisoning > 0) user.poisoning -= 1
      if(u.poisoning > 0) u.poisoning -= 1
      u.control += 2
      user.cd34 = 10
      user.cd32 = 0
      user.cd33 = 0
      user.cd36 = 0
      if (user.clas.id == 1) {
        vk.api.messages.send({
          peer_id: msg.peerId,
          message: `@id${user.id}(${user.nick}) скрылся. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
          disable_mentions: 1,
          keyboard: Keyboard.builder()
          .inline()
            .textButton({
              label: "😈",
              color: "primary",
              payload: "project RQ"
              })
          .inline()
            .textButton({
              label: "🛡",
              color: "primary",
              payload: "project RQ"
              })
          .inline()
            .textButton({
              label: "🖤",
              color: "negative",
              payload: "project RQ"
              })
          .inline()
            .textButton({
              label: "❣",
              color: "positive",
              payload: "project RQ"
              })
          .row()
          .inline()
            .textButton({
              label: "☦",
              color: "negative",
              payload: "project RQ"
              })
          .inline()
            .textButton({
              label: "⚙",
              color: "primary",
              payload: "project RQ"
              })
          .inline()
            .textButton({
              label: "⚔",
              color: "primary",
              payload: "project RQ"
              })
          .inline()
            .textButton({
              label: "АТК",
              color: "negative",
              payload: "project RQ"
              })
            })
      }
      if (user.clas.id == 2) {
        vk.api.messages.send({
          peer_id: msg.peerId,
          message: `@id${user.id}(${user.nick}) скрылся. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
          disable_mentions: 1,
          keyboard: Keyboard.builder()
          .inline()
            .textButton({
              label: "❄",
              color: "primary",
              payload: "project RQ"
              })
          .inline()
            .textButton({
              label: "💥",
              color: "secondary",
              payload: "project RQ"
              })
          .inline()
            .textButton({
              label: "🍃",
              color: "positive",
              payload: "project RQ"
              })
          .inline()
            .textButton({
              label: "🔥",
              color: "negative",
              payload: "project RQ"
              })
          .row()
          .inline()
            .textButton({
              label: "💧",
              color: "negative",
              payload: "project RQ"
              })
          .inline()
            .textButton({
              label: "⚡",
              color: "negative",
              payload: "project RQ"
              })
          .inline()
            .textButton({
              label: "АТК",
              color: "negative",
              payload: "project RQ"
              })
            })
      }
      if (user.clas.id == 3) {
      vk.api.messages.send({
        peer_id: msg.peerId,
        message: `@id${user.id}(${user.nick}) скрылся. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
        disable_mentions: 1,
        keyboard: Keyboard.builder()
        .inline()
          .textButton({
            label: "🦠",
            color: "negative",
            payload: "project RQ"
            })
        .inline()
          .textButton({
            label: "🔪",
            color: "negative",
            payload: "project RQ"
            })
        .inline()
          .textButton({
            label: "💣",
            color: "primary",
            payload: "project RQ"
            })
        .inline()
          .textButton({
            label: "👁‍🗨",
            color: "primary",
            payload: "project RQ"
            })
        .row()
        .inline()
          .textButton({
            label: "🧬",
            color: "positive",
            payload: "project RQ"
            })
        .inline()
          .textButton({
            label: "🗡",
            color: "secondary",
            payload: "project RQ"
            })
        .inline()
          .textButton({
            label: "💉",
            color: "positive",
            payload: "project RQ"
            })
        .inline()
          .textButton({
            label: "АТК",
            color: "negative",
            payload: "project RQ"
            })
          })
        }
      }
    }
    if(u.poison > 0) {
      var procent50 = 50
      var poison50 = user.duelatk * procent50 / 100
      u.duelhp -= poison50
      msg.send(`"${u.nick}" получает ⚔${poison50} урона`)
    }
    if(user.poisoning > 0) {
      var result1 = user.duelatk - user.dueldef
      user.duelhp -= result1
      msg.send(`"${user.nick}" получает ⚔${result1} урона от отравления`)
    }
    if(u.poisoning > 0) {
      var result2 = u.duelatk - u.dueldef
      u.duelhp -= result2
      msg.send(`"${u.nick}" наносит себе ⚔${result2} урона`)
    }
    if(user.poisoning == 0) {
      user.poisoning = -1
      var atk3 = user.duelatk * 3
      var heal1 = atk3 * 2
      user.duelhp += heal1
      if (user.duelhp > user.hp) {
      user.duelhp = user.hp
      }
      msg.send(`"${user.nick}" восстанавливает 💚${heal1} здоровья`)
    }
    if(u.poisoning == 0) {
      u.poisoning = -1
      var atk3 = u.duelatk * 3
      var heal2 = atk3 * 2
      u.duelhp += heal2
      if (u.duelhp > u.hp) {
      u.duelhp = u.hp
      }
      msg.send(`"${u.nick}" восстанавливает 💚${heal2} здоровья`)
    }
    var constuser = user
    user = u
    u = constuser
  })

  vk.updates.hear(/^(.*) 🧬$/i, msg => {
    if(user.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(u.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(user.steps > 100 || u.steps > 100) {
      user.duel = false
      u.duel = false
      u.predictionduel = false
      user.predictduel = false
      user.steps = 0
      u.steps = 0
      user.timer = 0
      u.timer = 0
      user.duelhp = 0
      user.duelatk = 0
      user.dueldef = 0
      u.duelhp = 0
      u.duelatk = 0
      u.dueldef = 0
      user.cd11 = 0,
      user.del11 = -1,
      user.cd12 = 0,
      user.del12 = -1,
      user.cd13 = 0,
      user.cd14 = 0,
      user.cd15 = 0,
      user.spikes = -1,
      user.cd16 = 0,
      user.clinch = -1,
      user.cd21 = 0,
      user.cd22 = 0,
      user.nakopleniye = 0,
      user.el1 = 0,
      user.burn = 0,
      user.el2 = 0,
      user.el3 = 0,
      user.cd31 = 0,
      user.poison = 0,
      user.cd32 = 0,
      user.cd33 = 0,
      user.cd34 = 0,
      user.invisible = false,
      user.cd35 = 0,
      user.cd36 = 0,
      user.cd37 = 0,
      user.poisoning = -1
      u.cd11 = 0,
      u.del11 = -1,
      u.cd12 = 0,
      u.del12 = -1,
      u.cd13 = 0,
      u.cd14 = 0,
      u.cd15 = 0,
      u.spikes = -1,
      u.cd16 = 0,
      u.clinch = -1,
      u.cd21 = 0,
      u.cd22 = 0,
      u.nakopleniye = 0,
      u.el1 = 0,
      u.burn = 0,
      u.el2 = 0,
      u.el3 = 0,
      u.cd31 = 0,
      u.poison = 0,
      u.cd32 = 0,
      u.cd33 = 0,
      u.cd34 = 0,
      u.invisible = false,
      u.cd35 = 0,
      u.cd36 = 0,
      u.cd37 = 0,
      u.poisoning = -1
      return msg.send ('Ходы дуэли превысили 100. Победитель не определён')
    }
    if(msg.$match[1] != '[club202302035|@eswep]') return
    if(msg.messagePayload != "project RQ") return
    if(msg.senderId == u.id) {
      var constu = u
      u = user
      user = constu
    }
    if(user.cd35 > 0) return msg.send(`Умение перезаряжается`)
    if(u.poison != 1) return msg.send(`Невозможно применить умение`)
    if(user.clas.id != 3) return msg.send(`Умение не принадлежит вашему классу`)
    if(u.nakopleniye > 0) {
      if(u.control > 0) u.nakopleniye = 0
    }
    if (user.steps % 2 == 0) {
      return msg.send ('Сейчас не твой ход')
    }
    else {
      if(user.control > 0) {
        msg.send (`Невозможно применить умение`);
      }
      else{
          if(u.control > 0) {
            if(user.cd11 > 0) user.cd11 -= 1
            if(user.del11 > 0) user.del11 -= 1
            if(user.cd12 > 0) user.cd12 -= 1
            if(user.del12 > 0) user.del12 -= 1
            if(user.cd13 > 0) user.cd13 -= 1
            if(user.cd14 > 0) user.cd14 -= 1
            if(user.cd15 > 0) user.cd15 -= 1
            if(user.spikes > 0) user.spikes -= 1
            if(user.cd16 > 0) user.cd16 -= 1
            if(user.cd21 > 0) user.cd21 -= 1
            if(user.cd22 > 0) user.cd22 -= 1
            if(user.cd31 > 0) user.cd31 -= 1
            if(user.cd32 > 0) user.cd32 -= 1
            if(user.cd33 > 0) user.cd33 -= 1
            if(user.cd34 > 0) user.cd34 -= 1
            if(user.cd35 > 0) user.cd35 -= 1
            if(user.cd36 > 0) user.cd36 -= 1
            if(user.porezka > 0) user.porezka -= 1
            if(user.cd37 > 0) user.cd37 -= 1
            if(u.cd11 > 0) u.cd11 -= 1
            if(u.del11 > 0) u.del11 -= 1
            if(u.cd12 > 0) u.cd12 -= 1
            if(u.del12 > 0) u.del12 -= 1
            if(u.cd13 > 0) u.cd13 -= 1
            if(u.cd14 > 0) u.cd14 -= 1
            if(u.cd15 > 0) u.cd15 -= 1
            if(u.spikes > 0) u.spikes -= 1
            if(u.cd16 > 0) u.cd16 -= 1
            if(u.clinch > 0) u.clinch = -1
            if(u.cd21 > 0) u.cd21 -= 1
            if(u.cd22 > 0) u.cd22 -= 1
            if(u.cd31 > 0) u.cd31 -= 1
            if(u.cd32 > 0) u.cd32 -= 1
            if(u.cd33 > 0) u.cd33 -= 1
            if(u.cd34 > 0) u.cd34 -= 1
            if(u.cd35 > 0) u.cd35 -= 1
            if(u.cd36 > 0) u.cd36 -= 1
            if(u.porezka > 0) u.porezka -= 1
            if(u.cd37 > 0) u.cd37 -= 1
            if(user.burn > 0) user.burn -= 1
            if(u.burn > 0) u.burn -= 1
            if(user.poison > 0) user.poison -= 1
            if(u.poison > 0) u.poison -= 1
            if(user.poisoning > 0) user.poisoning -= 1
            if(u.poisoning > 0) u.poisoning -= 1
            user.cd35 = 13
            var heal = user.duelatk * 3
            user.duelhp += heal
            if (user.duelhp > user.hp) {
              user.duelhp = user.hp
            }
            if(u.control == 2) {
              user.steps += 1
              u.steps += 1
              u.control -= 2
              if (u.clas.id == 1) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${user.id}(${user.nick}) восстанавливает себе 💚"${heal}" здоровья. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "😈",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🛡",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🖤",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "❣",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "☦",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚙",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚔",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 2) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${user.id}(${user.nick}) восстанавливает себе 💚"${heal}" здоровья. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "❄",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💥",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🍃",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔥",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "💧",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚡",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 3) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${user.id}(${user.nick}) восстанавливает себе 💚"${heal}" здоровья. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "🦠",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔪",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💣",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "👁‍🗨",
                    color: "primary",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "🧬",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🗡",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💉",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
              }
            }
            else {
              if(u.control > 2) {
                user.steps += 2
                u.steps += 2
                u.control -= 2
                if (user.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${user.id}(${user.nick}) восстанавливает себе 💚"${heal}" здоровья. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (user.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${user.id}(${user.nick}) восстанавливает себе 💚"${heal}" здоровья. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (user.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${user.id}(${user.nick}) восстанавливает себе 💚"${heal}" здоровья. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                }
              }
            }
          }
          else {
            if(user.cd11 > 0) user.cd11 -= 1
            if(user.del11 > 0) user.del11 -= 1
            if(user.cd12 > 0) user.cd12 -= 1
            if(user.del12 > 0) user.del12 -= 1
            if(user.cd13 > 0) user.cd13 -= 1
            if(user.cd14 > 0) user.cd14 -= 1
            if(user.cd15 > 0) user.cd15 -= 1
            if(user.spikes > 0) user.spikes -= 1
            if(user.cd16 > 0) user.cd16 -= 1
            if(user.cd21 > 0) user.cd21 -= 1
            if(user.cd22 > 0) user.cd22 -= 1
            if(user.cd31 > 0) user.cd31 -= 1
            if(user.cd32 > 0) user.cd32 -= 1
            if(user.cd33 > 0) user.cd33 -= 1
            if(user.cd34 > 0) user.cd34 -= 1
            if(user.cd35 > 0) user.cd35 -= 1
            if(user.cd36 > 0) user.cd36 -= 1
            if(user.porezka > 0) user.porezka -= 1
            if(user.cd37 > 0) user.cd37 -= 1
            if(u.cd11 > 0) u.cd11 -= 1
            if(u.del11 > 0) u.del11 -= 1
            if(u.cd12 > 0) u.cd12 -= 1
            if(u.del12 > 0) u.del12 -= 1
            if(u.cd13 > 0) u.cd13 -= 1
            if(u.cd14 > 0) u.cd14 -= 1
            if(u.cd15 > 0) u.cd15 -= 1
            if(u.spikes > 0) u.spikes -= 1
            if(u.cd16 > 0) u.cd16 -= 1
            if(u.clinch > 0) u.clinch = -1
            if(u.cd21 > 0) u.cd21 -= 1
            if(u.cd22 > 0) u.cd22 -= 1
            if(u.cd31 > 0) u.cd31 -= 1
            if(u.cd32 > 0) u.cd32 -= 1
            if(u.cd33 > 0) u.cd33 -= 1
            if(u.cd34 > 0) u.cd34 -= 1
            if(u.cd35 > 0) u.cd35 -= 1
            if(u.cd36 > 0) u.cd36 -= 1
            if(u.porezka > 0) u.porezka -= 1
            if(u.cd37 > 0) u.cd37 -= 1
            if(user.burn > 0) user.burn -= 1
            if(u.burn > 0) u.burn -= 1
            if(user.poison > 0) user.poison -= 1
            if(u.poison > 0) u.poison -= 1
            if(user.poisoning > 0) user.poisoning -= 1
            if(u.poisoning > 0) u.poisoning -= 1
            user.steps += 1
            u.steps += 1
            user.cd35 = 13
            var heal = user.duelatk * 3
            user.duelhp += heal
            if (user.duelhp > user.hp) {
              user.duelhp = user.hp
            }
            if (u.clas.id == 1) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${user.id}(${user.nick}) восстанавливает себе 💚"${heal}" здоровья. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "😈",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🛡",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🖤",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "❣",
                    color: "positive",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "☦",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚙",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚔",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 2) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${user.id}(${user.nick}) восстанавливает себе 💚"${heal}" здоровья. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "❄",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💥",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🍃",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔥",
                    color: "negative",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "💧",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚡",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 3) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${user.id}(${user.nick}) восстанавливает себе 💚"${heal}" здоровья. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "🦠",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔪",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💣",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "👁‍🗨",
                  color: "primary",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "🧬",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🗡",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💉",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
              }
          }
        }
      }
      if(u.poison > 0) {
        var procent50 = 50
        var poison50 = user.duelatk * procent50 / 100
        u.duelhp -= poison50
        msg.send(`"${u.nick}" получает ⚔${poison50} урона`)
      }
      if(user.poisoning > 0) {
        var result1 = user.duelatk - user.dueldef
        user.duelhp -= result1
        msg.send(`"${user.nick}" получает ⚔${result1} урона от отравления`)
      }
      if(u.poisoning > 0) {
        var result2 = u.duelatk - u.dueldef
        u.duelhp -= result2
        msg.send(`"${u.nick}" наносит себе ⚔${result2} урона`)
      }
      if(user.poisoning == 0) {
        user.poisoning = -1
        var atk3 = user.duelatk * 3
        var heal1 = atk3 * 2
        user.duelhp += heal1
        if (user.duelhp > user.hp) {
        user.duelhp = user.hp
        }
        msg.send(`"${user.nick}" восстанавливает 💚${heal1} здоровья`)
      }
      if(u.poisoning == 0) {
        u.poisoning = -1
        var atk3 = u.duelatk * 3
        var heal2 = atk3 * 2
        u.duelhp += heal2
        if (u.duelhp > u.hp) {
        u.duelhp = u.hp
        }
        msg.send(`"${u.nick}" восстанавливает 💚${heal2} здоровья`)
      }
    var constuser = user
    user = u
    u = constuser
  })

  vk.updates.hear(/^(.*) 🗡$/i, msg => {
    if(user.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(u.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(user.steps > 100 || u.steps > 100) {
      user.duel = false
      u.duel = false
      u.predictionduel = false
      user.predictduel = false
      user.steps = 0
      u.steps = 0
      user.timer = 0
      u.timer = 0
      user.duelhp = 0
      user.duelatk = 0
      user.dueldef = 0
      u.duelhp = 0
      u.duelatk = 0
      u.dueldef = 0
      user.cd11 = 0,
      user.del11 = -1,
      user.cd12 = 0,
      user.del12 = -1,
      user.cd13 = 0,
      user.cd14 = 0,
      user.cd15 = 0,
      user.spikes = -1,
      user.cd16 = 0,
      user.clinch = -1,
      user.cd21 = 0,
      user.cd22 = 0,
      user.nakopleniye = 0,
      user.el1 = 0,
      user.burn = 0,
      user.el2 = 0,
      user.el3 = 0,
      user.cd31 = 0,
      user.poison = 0,
      user.cd32 = 0,
      user.cd33 = 0,
      user.cd34 = 0,
      user.invisible = false,
      user.cd35 = 0,
      user.cd36 = 0,
      user.cd37 = 0,
      user.poisoning = -1
      u.cd11 = 0,
      u.del11 = -1,
      u.cd12 = 0,
      u.del12 = -1,
      u.cd13 = 0,
      u.cd14 = 0,
      u.cd15 = 0,
      u.spikes = -1,
      u.cd16 = 0,
      u.clinch = -1,
      u.cd21 = 0,
      u.cd22 = 0,
      u.nakopleniye = 0,
      u.el1 = 0,
      u.burn = 0,
      u.el2 = 0,
      u.el3 = 0,
      u.cd31 = 0,
      u.poison = 0,
      u.cd32 = 0,
      u.cd33 = 0,
      u.cd34 = 0,
      u.invisible = false,
      u.cd35 = 0,
      u.cd36 = 0,
      u.cd37 = 0,
      u.poisoning = -1
      return msg.send ('Ходы дуэли превысили 100. Победитель не определён')
    }
    if(msg.$match[1] != '[club202302035|@eswep]') return
    if(msg.messagePayload != "project RQ") return
    if(msg.senderId == u.id) {
      var constu = u
      u = user
      user = constu
    }
    if(user.cd36 > 0) return msg.send(`Умение перезаряжается`)
    if(user.clas.id != 3) return msg.send(`Умение не принадлежит вашему классу`)
    if(u.nakopleniye > 0) {
      if(u.control > 0) u.nakopleniye = 0
    }
    if (user.steps % 2 == 0) {
      return msg.send ('Сейчас не твой ход')
    }
    else {
      if(user.control > 0) {
        msg.send (`Невозможно применить умение`);
      }
      else{
        if(u.clinch > 0) {
          if(user.duelatk < u.dueldef) {
            if(user.cd11 > 0) user.cd11 -= 1
            if(user.del11 > 0) user.del11 -= 1
            if(user.cd12 > 0) user.cd12 -= 1
            if(user.del12 > 0) user.del12 -= 1
            if(user.cd13 > 0) user.cd13 -= 1
            if(user.cd14 > 0) user.cd14 -= 1
            if(user.cd15 > 0) user.cd15 -= 1
            if(user.spikes > 0) user.spikes -= 1
            if(user.cd16 > 0) user.cd16 -= 1
            if(user.cd21 > 0) user.cd21 -= 1
            if(user.cd22 > 0) user.cd22 -= 1
            if(user.cd31 > 0) user.cd31 -= 1
            if(user.cd32 > 0) user.cd32 -= 1
            if(user.cd33 > 0) user.cd33 -= 1
            if(user.cd34 > 0) user.cd34 -= 1
            if(user.cd35 > 0) user.cd35 -= 1
            if(user.cd36 > 0) user.cd36 -= 1
            if(user.porezka > 0) user.porezka -= 1
            if(user.cd37 > 0) user.cd37 -= 1
            if(u.cd11 > 0) u.cd11 -= 1
            if(u.del11 > 0) u.del11 -= 1
            if(u.cd12 > 0) u.cd12 -= 1
            if(u.del12 > 0) u.del12 -= 1
            if(u.cd13 > 0) u.cd13 -= 1
            if(u.cd14 > 0) u.cd14 -= 1
            if(u.cd15 > 0) u.cd15 -= 1
            if(u.spikes > 0) u.spikes -= 1
            if(u.cd16 > 0) u.cd16 -= 1
            if(u.clinch > 0) u.clinch = -1
            if(u.cd21 > 0) u.cd21 -= 1
            if(u.cd22 > 0) u.cd22 -= 1
            if(u.cd31 > 0) u.cd31 -= 1
            if(u.cd32 > 0) u.cd32 -= 1
            if(u.cd33 > 0) u.cd33 -= 1
            if(u.cd34 > 0) u.cd34 -= 1
            if(u.cd35 > 0) u.cd35 -= 1
            if(u.cd36 > 0) u.cd36 -= 1
            if(u.porezka > 0) u.porezka -= 1
            if(u.cd37 > 0) u.cd37 -= 1
            if(user.burn > 0) user.burn -= 1
            if(u.burn > 0) u.burn -= 1
            if(user.poison > 0) user.poison -= 1
            if(u.poison > 0) u.poison -= 1
            if(user.poisoning > 0) user.poisoning -= 1
            if(u.poisoning > 0) u.poisoning -= 1
            user.steps += 1
            u.steps += 1
            user.cd36 = 7
            if (u.clas.id == 1) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, так как активировал "клинч", @id${user.id}(${user.nick}) получает ⚔0 урона, так как атака @id${user.id}(${user.nick}) меньше защиты @id${u.id}(${u.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "😈",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🛡",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🖤",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "❣",
                    color: "positive",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "☦",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚙",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚔",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 2) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, так как активировал "клинч", @id${user.id}(${user.nick}) получает ⚔0 урона, так как атака @id${user.id}(${user.nick}) меньше защиты @id${u.id}(${u.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "❄",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💥",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🍃",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔥",
                    color: "negative",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "💧",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚡",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 3) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${u.id}(${u.nick}) не получает урона, так как активировал "клинч", @id${user.id}(${user.nick}) получает ⚔0 урона, так как атака @id${user.id}(${user.nick}) меньше защиты @id${u.id}(${u.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "🦠",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔪",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💣",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "👁‍🗨",
                  color: "primary",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "🧬",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🗡",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💉",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
            }
            if(user.del11 == 0) {
              var hp = user.hp
              var atk = user.atk
              var procent = 20
              var resulthp = hp / 100 * procent
              var resultatk = atk / 100 * procent
              user.duelhp -= resulthp
              user.duelatk -= resultatk
              user.del11 = -1
               
            }
            if(u.del11 == 0) {
              var hp1 = u.hp
              var atk1 = u.atk
              var procent = 20
              var resulthp1 = hp1 / 100 * procent
              var resultatk1 = atk1 / 100 * procent
              u.duelhp -= resulthp1
              u.duelatk -= resultatk1
              u.del11 = -1
               
            }
            if(user.del12 == 0) {
              var def = user.def
              var procent = 20
               var resultdef = def / 100 * procent
              user.dueldef -= resultdef
              user.del12 = -1
               
            }
            if(u.del12 == 0) {
              var def1 = u.def
              var procent = 20
              var resultdef1 = def1 / 100 * procent
              u.dueldef -= resultdef1
              u.del12 = -1
               
            }
            if(user.spikes == 0) {
              user.spikes -= 1
               
            }
            if(u.spikes == 0) {
              u.spikes -= 1
               
            }
          }
          else {
            if(user.cd11 > 0) user.cd11 -= 1
            if(user.del11 > 0) user.del11 -= 1
            if(user.cd12 > 0) user.cd12 -= 1
            if(user.del12 > 0) user.del12 -= 1
            if(user.cd13 > 0) user.cd13 -= 1
            if(user.cd14 > 0) user.cd14 -= 1
            if(user.cd15 > 0) user.cd15 -= 1
            if(user.spikes > 0) user.spikes -= 1
            if(user.cd16 > 0) user.cd16 -= 1
            if(user.cd21 > 0) user.cd21 -= 1
            if(user.cd22 > 0) user.cd22 -= 1
            if(user.cd31 > 0) user.cd31 -= 1
            if(user.cd32 > 0) user.cd32 -= 1
            if(user.cd33 > 0) user.cd33 -= 1
            if(user.cd34 > 0) user.cd34 -= 1
            if(user.cd35 > 0) user.cd35 -= 1
            if(user.cd36 > 0) user.cd36 -= 1
            if(user.porezka > 0) user.porezka -= 1
            if(user.cd37 > 0) user.cd37 -= 1
            if(u.cd11 > 0) u.cd11 -= 1
            if(u.del11 > 0) u.del11 -= 1
            if(u.cd12 > 0) u.cd12 -= 1
            if(u.del12 > 0) u.del12 -= 1
            if(u.cd13 > 0) u.cd13 -= 1
            if(u.cd14 > 0) u.cd14 -= 1
            if(u.cd15 > 0) u.cd15 -= 1
            if(u.spikes > 0) u.spikes -= 1
            if(u.cd16 > 0) u.cd16 -= 1
            if(u.clinch > 0) u.clinch = -1
            if(u.cd21 > 0) u.cd21 -= 1
            if(u.cd22 > 0) u.cd22 -= 1
            if(u.cd31 > 0) u.cd31 -= 1
            if(u.cd32 > 0) u.cd32 -= 1
            if(u.cd33 > 0) u.cd33 -= 1
            if(u.cd34 > 0) u.cd34 -= 1
            if(u.cd35 > 0) u.cd35 -= 1
            if(u.cd36 > 0) u.cd36 -= 1
            if(u.porezka > 0) u.porezka -= 1
            if(u.cd37 > 0) u.cd37 -= 1
            if(user.burn > 0) user.burn -= 1
            if(u.burn > 0) u.burn -= 1
            if(user.poison > 0) user.poison -= 1
            if(u.poison > 0) u.poison -= 1
            if(user.poisoning > 0) user.poisoning -= 1
            if(u.poisoning > 0) u.poisoning -= 1
            user.steps += 1
            u.steps += 1
            user.cd36 = 7
            var result = u.duelatk - user.dueldef
            user.duelhp -= result
            if (u.clas.id == 1) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, @id${user.id}(${user.nick}) получает ⚔${result} урона, так как @id${u.id}(${u.nick}) активировал "клинч". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "😈",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🛡",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🖤",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "❣",
                    color: "positive",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "☦",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚙",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚔",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 2) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) не получает урона, @id${user.id}(${user.nick}) получает ⚔${result} урона, так как @id${u.id}(${u.nick}) активировал "клинч". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "❄",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💥",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🍃",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔥",
                    color: "negative",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "💧",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚡",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 3) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${u.id}(${u.nick}) не получает урона, @id${user.id}(${user.nick}) получает ⚔${result} урона, так как @id${u.id}(${u.nick}) активировал "клинч". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "🦠",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔪",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💣",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "👁‍🗨",
                  color: "primary",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "🧬",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🗡",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💉",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
            }
            if(user.duelhp < 1) {
              var plata2 = user.money
              var procentplata = 10
              var resultplata2 = plata2 / 100 * procentplata
              let num27 = resultplata2
              var finalplata = num27.toFixed(0)
              var finalplata2 = Number(finalplata)
              user.money -= finalplata2
              u.money += finalplata2
              user.duel = false
              u.duel = false
              u.predictionduel = false
              user.predictduel = false
              user.steps = 0
              u.steps = 0
              user.timer = 0
              u.timer = 0
              user.duelhp = 0
              user.duelatk = 0
              user.dueldef = 0
              u.duelhp = 0
              u.duelatk = 0
              u.dueldef = 0
              user.cd11 = 0,
              user.del11 = -1,
              user.cd12 = 0,
              user.del12 = -1,
              user.cd13 = 0,
              user.cd14 = 0,
              user.cd15 = 0,
              user.spikes = -1,
              user.cd16 = 0,
              user.clinch = -1,
              user.cd21 = 0,
              user.cd22 = 0,
              user.nakopleniye = 0,
              user.el1 = 0,
              user.burn = 0,
              user.el2 = 0,
              user.el3 = 0,
              user.cd31 = 0,
              user.poison = 0,
              user.cd32 = 0,
              user.cd33 = 0,
              user.cd34 = 0,
              user.invisible = false,
              user.cd35 = 0,
              user.cd36 = 0,
              user.cd37 = 0,
              user.poisoning = -1
              u.cd11 = 0,
              u.del11 = -1,
              u.cd12 = 0,
              u.del12 = -1,
              u.cd13 = 0,
              u.cd14 = 0,
              u.cd15 = 0,
              u.spikes = -1,
              u.cd16 = 0,
              u.clinch = -1,
              u.cd21 = 0,
              u.cd22 = 0,
              u.nakopleniye = 0,
              u.el1 = 0,
              u.burn = 0,
              u.el2 = 0,
              u.el3 = 0,
              u.cd31 = 0,
              u.poison = 0,
              u.cd32 = 0,
              u.cd33 = 0,
              u.cd34 = 0,
              u.invisible = false,
              u.cd35 = 0,
              u.cd36 = 0,
              u.cd37 = 0,
              u.poisoning = -1
              msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
              var constuser = user
              user = u
              u = constuser
            }
            else {
              if(u.duelhp < 1) {
                var plata2 = user.money
                var procentplata = 10
                var resultplata2 = plata2 / 100 * procentplata
                let num27 = resultplata2
                var finalplata = num27.toFixed(0)
                var finalplata2 = Number(finalplata)
                u.money -= finalplata2
                user.money += finalplata2
                user.duel = false
                u.duel = false
                u.predictionduel = false
                user.predictduel = false
                user.steps = 0
                u.steps = 0
                user.timer = 0
                u.timer = 0
                user.duelhp = 0
                user.duelatk = 0
                user.dueldef = 0
                u.duelhp = 0
                u.duelatk = 0
                u.dueldef = 0
                user.cd11 = 0,
                user.del11 = -1,
                user.cd12 = 0,
                user.del12 = -1,
                user.cd13 = 0,
                user.cd14 = 0,
                user.cd15 = 0,
                user.spikes = -1,
                user.cd16 = 0,
                user.clinch = -1,
                user.cd21 = 0,
                user.cd22 = 0,
                user.nakopleniye = 0,
                user.el1 = 0,
                user.burn = 0,
                user.el2 = 0,
                user.el3 = 0,
                user.cd31 = 0,
                user.poison = 0,
                user.cd32 = 0,
                user.cd33 = 0,
                user.cd34 = 0,
                user.invisible = false,
                user.cd35 = 0,
                user.cd36 = 0,
                user.cd37 = 0,
                user.poisoning = -1
                u.cd11 = 0,
                u.del11 = -1,
                u.cd12 = 0,
                u.del12 = -1,
                u.cd13 = 0,
                u.cd14 = 0,
                u.cd15 = 0,
                u.spikes = -1,
                u.cd16 = 0,
                u.clinch = -1,
                u.cd21 = 0,
                u.cd22 = 0,
                u.nakopleniye = 0,
                u.el1 = 0,
                u.burn = 0,
                u.el2 = 0,
                u.el3 = 0,
                u.cd31 = 0,
                u.poison = 0,
                u.cd32 = 0,
                u.cd33 = 0,
                u.cd34 = 0,
                u.invisible = false,
                u.cd35 = 0,
                u.cd36 = 0,
                u.cd37 = 0,
                u.poisoning = -1
                msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                var constuser = user
                user = u
                u = constuser
              }
            }
            if(user.del11 == 0) {
              var hp = user.hp
              var atk = user.atk
              var procent = 20
              var resulthp = hp / 100 * procent
              var resultatk = atk / 100 * procent
              user.duelhp -= resulthp
              user.duelatk -= resultatk
              user.del11 = -1
               
            }
            if(u.del11 == 0) {
              var hp1 = u.hp
              var atk1 = u.atk
              var procent = 20
              var resulthp1 = hp1 / 100 * procent
              var resultatk1 = atk1 / 100 * procent
              u.duelhp -= resulthp1
              u.duelatk -= resultatk1
              u.del11 = -1
               
            }
            if(user.del12 == 0) {
              var def = user.def
              var procent = 20
               var resultdef = def / 100 * procent
              user.dueldef -= resultdef
              user.del12 = -1
               
            }
            if(u.del12 == 0) {
              var def1 = u.def
              var procent = 20
              var resultdef1 = def1 / 100 * procent
              u.dueldef -= resultdef1
              u.del12 = -1
               
            }
            if(user.spikes == 0) {
              user.spikes -= 1
               
            }
            if(u.spikes == 0) {
              u.spikes -= 1
               
            }
          }
        }
        else {
          if(u.spikes > 0) {
            if(u.control > 0) {
              if(u.dueldef > user.duelatk) {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                user.cd36 = 7
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${unick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
              if(user.cd11 > 0) user.cd11 -= 2
              if(user.del11 > 0) user.del11 -= 2
              if(user.cd12 > 0) user.cd12 -= 2
              if(user.del12 > 0) user.del12 -= 2
              if(user.cd13 > 0) user.cd13 -= 2
              if(user.cd14 > 0) user.cd14 -= 2
              if(user.cd15 > 0) user.cd15 -= 2
              if(user.spikes > 0) user.spikes -= 2
              if(user.cd16 > 0) user.cd16 -= 2
              if(user.cd21 > 0) user.cd21 -= 2
              if(user.cd22 > 0) user.cd22 -= 2
              if(user.cd31 > 0) user.cd31 -= 2
              if(user.cd32 > 0) user.cd32 -= 2
              if(user.cd33 > 0) user.cd33 -= 2
              if(user.cd34 > 0) user.cd34 -= 2
              if(user.cd35 > 0) user.cd35 -= 2
              if(user.cd36 > 0) user.cd36 -= 2
              if(user.porezka > 0) user.porezka -= 2
              if(user.cd37 > 0) user.cd37 -= 2
              if(u.cd11 > 0) u.cd11 -= 2
              if(u.del11 > 0) u.del11 -= 2
              if(u.cd12 > 0) u.cd12 -= 2
              if(u.del12 > 0) u.del12 -= 2
              if(u.cd13 > 0) u.cd13 -= 2
              if(u.cd14 > 0) u.cd14 -= 2
              if(u.cd15 > 0) u.cd15 -= 2
              if(u.spikes > 0) u.spikes -= 2
              if(u.cd16 > 0) u.cd16 -= 2
              if(u.clinch > 0) u.clinch = -1
              if(u.cd21 > 0) u.cd21 -= 2
              if(u.cd22 > 0) u.cd22 -= 2
              if(u.cd31 > 0) u.cd31 -= 2
              if(u.cd32 > 0) u.cd32 -= 2
              if(u.cd33 > 0) u.cd33 -= 2
              if(u.cd34 > 0) u.cd34 -= 2
              if(u.cd35 > 0) u.cd35 -= 2
              if(u.cd36 > 0) u.cd36 -= 2
              if(u.porezka > 0) u.porezka -= 2
              if(u.cd37 > 0) u.cd37 -= 2
              if(user.burn > 0) user.burn -= 2
              if(u.burn > 0) u.burn -= 2
              if(user.poison > 0) user.poison -= 2
              if(u.poison > 0) u.poison -= 2
              if(user.poisoning > 0) user.poisoning -= 2
              if(u.poisoning > 0) u.poisoning -= 2
              user.cd36 = 7
              u.dueldef = 0
              u.porezka = 4
              var result = user.duelatk
              u.duelhp -= result
              var spikes = result / 2
              user.duelhp -= spikes
              if(u.control == 2) {
                user.steps += 1
                u.steps += 1
                u.control -= 2
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                }
              }
              else {
                if(u.control > 2) {
                  user.steps += 2
                  u.steps += 2
                  u.control -= 2
                  if (user.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${user.id}(${user.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${user.id}(${user.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (user.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${user.id}(${user.nick}).\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                  }
                }
              }
              if(user.duelhp < 1) {
                var plata2 = user.money
                var procentplata = 10
                var resultplata2 = plata2 / 100 * procentplata
                let num27 = resultplata2
                var finalplata = num27.toFixed(0)
                var finalplata2 = Number(finalplata)
                user.money -= finalplata2
                u.money += finalplata2
                user.duel = false
                u.duel = false
                u.predictionduel = false
                user.predictduel = false
                user.steps = 0
                u.steps = 0
                user.timer = 0
                u.timer = 0
                user.duelhp = 0
                user.duelatk = 0
                user.dueldef = 0
                u.duelhp = 0
                u.duelatk = 0
                u.dueldef = 0
                user.cd11 = 0,
                user.del11 = -1,
                user.cd12 = 0,
                user.del12 = -1,
                user.cd13 = 0,
                user.cd14 = 0,
                user.cd15 = 0,
                user.spikes = -1,
                user.cd16 = 0,
                user.clinch = -1,
                user.cd21 = 0,
                user.cd22 = 0,
                user.nakopleniye = 0,
                user.el1 = 0,
                user.burn = 0,
                user.el2 = 0,
                user.el3 = 0,
                user.cd31 = 0,
                user.poison = 0,
                user.cd32 = 0,
                user.cd33 = 0,
                user.cd34 = 0,
                user.invisible = false,
                user.cd35 = 0,
                user.cd36 = 0,
                user.cd37 = 0,
                user.poisoning = -1
                u.cd11 = 0,
                u.del11 = -1,
                u.cd12 = 0,
                u.del12 = -1,
                u.cd13 = 0,
                u.cd14 = 0,
                u.cd15 = 0,
                u.spikes = -1,
                u.cd16 = 0,
                u.clinch = -1,
                u.cd21 = 0,
                u.cd22 = 0,
                u.nakopleniye = 0,
                u.el1 = 0,
                u.burn = 0,
                u.el2 = 0,
                u.el3 = 0,
                u.cd31 = 0,
                u.poison = 0,
                u.cd32 = 0,
                u.cd33 = 0,
                u.cd34 = 0,
                u.invisible = false,
                u.cd35 = 0,
                u.cd36 = 0,
                u.cd37 = 0,
                u.poisoning = -1
                msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                var constuser = user
                user = u
                u = constuser
              }
              else {
                if(u.duelhp < 1) {
                  var plata2 = user.money
                  var procentplata = 10
                  var resultplata2 = plata2 / 100 * procentplata
                  let num27 = resultplata2
                  var finalplata = num27.toFixed(0)
                  var finalplata2 = Number(finalplata)
                  u.money -= finalplata2
                  user.money += finalplata2
                  user.duel = false
                  u.duel = false
                  u.predictionduel = false
                  user.predictduel = false
                  user.steps = 0
                  u.steps = 0
                  user.timer = 0
                  u.timer = 0
                  user.duelhp = 0
                  user.duelatk = 0
                  user.dueldef = 0
                  u.duelhp = 0
                  u.duelatk = 0
                  u.dueldef = 0
                  user.cd11 = 0,
                  user.del11 = -1,
                  user.cd12 = 0,
                  user.del12 = -1,
                  user.cd13 = 0,
                  user.cd14 = 0,
                  user.cd15 = 0,
                  user.spikes = -1,
                  user.cd16 = 0,
                  user.clinch = -1,
                  user.cd21 = 0,
                  user.cd22 = 0,
                  user.nakopleniye = 0,
                  user.el1 = 0,
                  user.burn = 0,
                  user.el2 = 0,
                  user.el3 = 0,
                  user.cd31 = 0,
                  user.poison = 0,
                  user.cd32 = 0,
                  user.cd33 = 0,
                  user.cd34 = 0,
                  user.invisible = false,
                  user.cd35 = 0,
                  user.cd36 = 0,
                  user.cd37 = 0,
                  user.poisoning = -1
                  u.cd11 = 0,
                  u.del11 = -1,
                  u.cd12 = 0,
                  u.del12 = -1,
                  u.cd13 = 0,
                  u.cd14 = 0,
                  u.cd15 = 0,
                  u.spikes = -1,
                  u.cd16 = 0,
                  u.clinch = -1,
                  u.cd21 = 0,
                  u.cd22 = 0,
                  u.nakopleniye = 0,
                  u.el1 = 0,
                  u.burn = 0,
                  u.el2 = 0,
                  u.el3 = 0,
                  u.cd31 = 0,
                  u.poison = 0,
                  u.cd32 = 0,
                  u.cd33 = 0,
                  u.cd34 = 0,
                  u.invisible = false,
                  u.cd35 = 0,
                  u.cd36 = 0,
                  u.cd37 = 0,
                  u.poisoning = -1
                  msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                  var constuser = user
                  user = u
                  u = constuser
                }
              }
              if(user.del11 == 0) {
                var hp = user.hp
                var atk = user.atk
                var procent = 20
                var resulthp = hp / 100 * procent
                var resultatk = atk / 100 * procent
                user.duelhp -= resulthp
                user.duelatk -= resultatk
                user.del11 = -1
                 
              }
              if(u.del11 == 0) {
                var hp1 = u.hp
                var atk1 = u.atk
                var procent = 20
                var resulthp1 = hp1 / 100 * procent
                var resultatk1 = atk1 / 100 * procent
                u.duelhp -= resulthp1
                u.duelatk -= resultatk1
                u.del11 = -1
                 
              }
              if(user.del12 == 0) {
                var def = user.def
                var procent = 20
                 var resultdef = def / 100 * procent
                user.dueldef -= resultdef
                user.del12 = -1
                 
              }
              if(u.del12 == 0) {
                var def1 = u.def
                var procent = 20
                var resultdef1 = def1 / 100 * procent
                u.dueldef -= resultdef1
                u.del12 = -1
                 
              }
              if(user.spikes == 0) {
                user.spikes -= 1
                 
              }
              if(u.spikes == 0) {
                u.spikes -= 1
                 
              }
              }
            }
            else {
              if(user.duelatk < u.dueldef) {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                user.cd36 = 7
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
              if(user.cd11 > 0) user.cd11 -= 1
              if(user.del11 > 0) user.del11 -= 1
              if(user.cd12 > 0) user.cd12 -= 1
              if(user.del12 > 0) user.del12 -= 1
              if(user.cd13 > 0) user.cd13 -= 1
              if(user.cd14 > 0) user.cd14 -= 1
              if(user.cd15 > 0) user.cd15 -= 1
              if(user.spikes > 0) user.spikes -= 1
              if(user.cd16 > 0) user.cd16 -= 1
              if(user.cd21 > 0) user.cd21 -= 1
              if(user.cd22 > 0) user.cd22 -= 1
              if(user.cd31 > 0) user.cd31 -= 1
              if(user.cd32 > 0) user.cd32 -= 1
              if(user.cd33 > 0) user.cd33 -= 1
              if(user.cd34 > 0) user.cd34 -= 1
              if(user.cd35 > 0) user.cd35 -= 1
              if(user.cd36 > 0) user.cd36 -= 1
              if(user.porezka > 0) user.porezka -= 1
              if(user.cd37 > 0) user.cd37 -= 1
              if(u.cd11 > 0) u.cd11 -= 1
              if(u.del11 > 0) u.del11 -= 1
              if(u.cd12 > 0) u.cd12 -= 1
              if(u.del12 > 0) u.del12 -= 1
              if(u.cd13 > 0) u.cd13 -= 1
              if(u.cd14 > 0) u.cd14 -= 1
              if(u.cd15 > 0) u.cd15 -= 1
              if(u.spikes > 0) u.spikes -= 1
              if(u.cd16 > 0) u.cd16 -= 1
              if(u.clinch > 0) u.clinch = -1
              if(u.cd21 > 0) u.cd21 -= 1
              if(u.cd22 > 0) u.cd22 -= 1
              if(u.cd31 > 0) u.cd31 -= 1
              if(u.cd32 > 0) u.cd32 -= 1
              if(u.cd33 > 0) u.cd33 -= 1
              if(u.cd34 > 0) u.cd34 -= 1
              if(u.cd35 > 0) u.cd35 -= 1
              if(u.cd36 > 0) u.cd36 -= 1
              if(u.porezka > 0) u.porezka -= 1
              if(u.cd37 > 0) u.cd37 -= 1
              if(user.burn > 0) user.burn -= 1
              if(u.burn > 0) u.burn -= 1
              if(user.poison > 0) user.poison -= 1
              if(u.poison > 0) u.poison -= 1
              if(user.poisoning > 0) user.poisoning -= 1
              if(u.poisoning > 0) u.poisoning -= 1
              user.steps += 1
              u.steps += 1
              user.cd36 = 7
              u.dueldef = 0
              u.porezka = 4
              var result = user.duelatk
              u.duelhp -= result
              var spikes = result / 2
              user.duelhp -= spikes
              if (u.clas.id == 1) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "😈",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🛡",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🖤",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "❣",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "☦",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚙",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚔",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 2) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "❄",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💥",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🍃",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔥",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "💧",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚡",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 3) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. @id${user.id}(${user.nick}) получает ⚔${spikes} урона, так как у @id${u.id}(${u.nick}) активны "шипы". Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "🦠",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔪",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💣",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "👁‍🗨",
                    color: "primary",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "🧬",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🗡",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💉",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
                }
                if(user.duelhp < 1) {
                  var plata2 = user.money
                  var procentplata = 10
                  var resultplata2 = plata2 / 100 * procentplata
                  let num27 = resultplata2
                  var finalplata = num27.toFixed(0)
                  var finalplata2 = Number(finalplata)
                  user.money -= finalplata2
                  u.money += finalplata2
                  user.duel = false
                  u.duel = false
                  u.predictionduel = false
                  user.predictduel = false
                  user.steps = 0
                  u.steps = 0
                  user.timer = 0
                  u.timer = 0
                  user.duelhp = 0
                  user.duelatk = 0
                  user.dueldef = 0
                  u.duelhp = 0
                  u.duelatk = 0
                  u.dueldef = 0
                  user.cd11 = 0,
                  user.del11 = -1,
                  user.cd12 = 0,
                  user.del12 = -1,
                  user.cd13 = 0,
                  user.cd14 = 0,
                  user.cd15 = 0,
                  user.spikes = -1,
                  user.cd16 = 0,
                  user.clinch = -1,
                  user.cd21 = 0,
                  user.cd22 = 0,
                  user.nakopleniye = 0,
                  user.el1 = 0,
                  user.burn = 0,
                  user.el2 = 0,
                  user.el3 = 0,
                  user.cd31 = 0,
                  user.poison = 0,
                  user.cd32 = 0,
                  user.cd33 = 0,
                  user.cd34 = 0,
                  user.invisible = false,
                  user.cd35 = 0,
                  user.cd36 = 0,
                  user.cd37 = 0,
                  user.poisoning = -1
                  u.cd11 = 0,
                  u.del11 = -1,
                  u.cd12 = 0,
                  u.del12 = -1,
                  u.cd13 = 0,
                  u.cd14 = 0,
                  u.cd15 = 0,
                  u.spikes = -1,
                  u.cd16 = 0,
                  u.clinch = -1,
                  u.cd21 = 0,
                  u.cd22 = 0,
                  u.nakopleniye = 0,
                  u.el1 = 0,
                  u.burn = 0,
                  u.el2 = 0,
                  u.el3 = 0,
                  u.cd31 = 0,
                  u.poison = 0,
                  u.cd32 = 0,
                  u.cd33 = 0,
                  u.cd34 = 0,
                  u.invisible = false,
                  u.cd35 = 0,
                  u.cd36 = 0,
                  u.cd37 = 0,
                  u.poisoning = -1
                  msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                  var constuser = user
                  user = u
                  u = constuser
                }
                else {
                  if(u.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    u.money -= finalplata2
                    user.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                }
              if(user.del11 == 0) {
                var hp = user.hp
                var atk = user.atk
                var procent = 20
                var resulthp = hp / 100 * procent
                var resultatk = atk / 100 * procent
                user.duelhp -= resulthp
                user.duelatk -= resultatk
                user.del11 = -1
                 
              }
              if(u.del11 == 0) {
                var hp1 = u.hp
                var atk1 = u.atk
                var procent = 20
                var resulthp1 = hp1 / 100 * procent
                var resultatk1 = atk1 / 100 * procent
                u.duelhp -= resulthp1
                u.duelatk -= resultatk1
                u.del11 = -1
                 
              }
              if(user.del12 == 0) {
                var def = user.def
                var procent = 20
                 var resultdef = def / 100 * procent
                user.dueldef -= resultdef
                user.del12 = -1
                 
              }
              if(u.del12 == 0) {
                var def1 = u.def
                var procent = 20
                var resultdef1 = def1 / 100 * procent
                u.dueldef -= resultdef1
                u.del12 = -1
                 
              }
              if(user.spikes == 0) {
                user.spikes -= 1
                 
              }
              if(u.spikes == 0) {
                u.spikes -= 1
                 
              }
            }
          }
          }
          else {
            if(u.control > 0) {
              if(u.dueldef > user.duelatk) {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                user.cd36 = 7
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
                if(user.cd11 > 0) user.cd11 -= 2
                if(user.del11 > 0) user.del11 -= 2
                if(user.cd12 > 0) user.cd12 -= 2
                if(user.del12 > 0) user.del12 -= 2
                if(user.cd13 > 0) user.cd13 -= 2
                if(user.cd14 > 0) user.cd14 -= 2
                if(user.cd15 > 0) user.cd15 -= 2
                if(user.spikes > 0) user.spikes -= 2
                if(user.cd16 > 0) user.cd16 -= 2
                if(user.cd21 > 0) user.cd21 -= 2
                if(user.cd22 > 0) user.cd22 -= 2
                if(user.cd31 > 0) user.cd31 -= 2
                if(user.cd32 > 0) user.cd32 -= 2
                if(user.cd33 > 0) user.cd33 -= 2
                if(user.cd34 > 0) user.cd34 -= 2
                if(user.cd35 > 0) user.cd35 -= 2
                if(user.cd36 > 0) user.cd36 -= 2
                if(user.porezka > 0) user.porezka -= 2
                if(user.cd37 > 0) user.cd37 -= 2
                if(u.cd11 > 0) u.cd11 -= 2
                if(u.del11 > 0) u.del11 -= 2
                if(u.cd12 > 0) u.cd12 -= 2
                if(u.del12 > 0) u.del12 -= 2
                if(u.cd13 > 0) u.cd13 -= 2
                if(u.cd14 > 0) u.cd14 -= 2
                if(u.cd15 > 0) u.cd15 -= 2
                if(u.spikes > 0) u.spikes -= 2
                if(u.cd16 > 0) u.cd16 -= 2
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 2
                if(u.cd22 > 0) u.cd22 -= 2
                if(u.cd31 > 0) u.cd31 -= 2
                if(u.cd32 > 0) u.cd32 -= 2
                if(u.cd33 > 0) u.cd33 -= 2
                if(u.cd34 > 0) u.cd34 -= 2
                if(u.cd35 > 0) u.cd35 -= 2
                if(u.cd36 > 0) u.cd36 -= 2
                if(u.porezka > 0) u.porezka -= 2
                if(u.cd37 > 0) u.cd37 -= 2
                if(user.burn > 0) user.burn -= 2
                if(u.burn > 0) u.burn -= 2
                if(user.poison > 0) user.poison -= 2
                if(u.poison > 0) u.poison -= 2
                if(user.poisoning > 0) user.poisoning -= 2
                if(u.poisoning > 0) u.poisoning -= 2
                user.cd36 = 7
                u.dueldef = 0
                u.porezka = 4
                var result = user.duelatk
                u.duelhp -= result
                if(u.control == 2) {
                  user.steps += 1
                  u.steps += 1
                  u.control -= 2
                  if (u.clas.id == 1) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "😈",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🛡",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🖤",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "❣",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "☦",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚙",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚔",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 2) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "❄",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💥",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🍃",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔥",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "💧",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "⚡",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                  }
                  if (u.clas.id == 3) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "🦠",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔪",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💣",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "👁‍🗨",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "🧬",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🗡",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💉",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                    }
                }
                else {
                  if(u.control > 2) {
                    user.steps += 2
                    u.steps += 2
                    u.control -= 2
                    if (user.clas.id == 1) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "😈",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🛡",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🖤",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "❣",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "☦",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚙",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚔",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 2) {
                      vk.api.messages.send({
                        peer_id: msg.peerId,
                        message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                        disable_mentions: 1,
                        keyboard: Keyboard.builder()
                        .inline()
                          .textButton({
                            label: "❄",
                            color: "primary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "💥",
                            color: "secondary",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🍃",
                            color: "positive",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "🔥",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .row()
                        .inline()
                          .textButton({
                            label: "💧",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "⚡",
                            color: "negative",
                            payload: "project RQ"
                            })
                        .inline()
                          .textButton({
                            label: "АТК",
                            color: "negative",
                            payload: "project RQ"
                            })
                          })
                    }
                    if (user.clas.id == 3) {
                    vk.api.messages.send({
                      peer_id: msg.peerId,
                      message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                      disable_mentions: 1,
                      keyboard: Keyboard.builder()
                      .inline()
                        .textButton({
                          label: "🦠",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🔪",
                          color: "negative",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💣",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "👁‍🗨",
                          color: "primary",
                          payload: "project RQ"
                          })
                      .row()
                      .inline()
                        .textButton({
                          label: "🧬",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "🗡",
                          color: "secondary",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "💉",
                          color: "positive",
                          payload: "project RQ"
                          })
                      .inline()
                        .textButton({
                          label: "АТК",
                          color: "negative",
                          payload: "project RQ"
                          })
                        })
                      }
                  }
                }
                  if(user.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    user.money -= finalplata2
                    u.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                  else {
                    if(u.duelhp < 1) {
                      var plata2 = user.money
                      var procentplata = 10
                      var resultplata2 = plata2 / 100 * procentplata
                      let num27 = resultplata2
                      var finalplata = num27.toFixed(0)
                      var finalplata2 = Number(finalplata)
                      u.money -= finalplata2
                      user.money += finalplata2
                      user.duel = false
                      u.duel = false
                      u.predictionduel = false
                      user.predictduel = false
                      user.steps = 0
                      u.steps = 0
                      user.timer = 0
                      u.timer = 0
                      user.duelhp = 0
                      user.duelatk = 0
                      user.dueldef = 0
                      u.duelhp = 0
                      u.duelatk = 0
                      u.dueldef = 0
                      user.cd11 = 0,
                      user.del11 = -1,
                      user.cd12 = 0,
                      user.del12 = -1,
                      user.cd13 = 0,
                      user.cd14 = 0,
                      user.cd15 = 0,
                      user.spikes = -1,
                      user.cd16 = 0,
                      user.clinch = -1,
                      user.cd21 = 0,
                      user.cd22 = 0,
                      user.nakopleniye = 0,
                      user.el1 = 0,
                      user.burn = 0,
                      user.el2 = 0,
                      user.el3 = 0,
                      user.cd31 = 0,
                      user.poison = 0,
                      user.cd32 = 0,
                      user.cd33 = 0,
                      user.cd34 = 0,
                      user.invisible = false,
                      user.cd35 = 0,
                      user.cd36 = 0,
                      user.cd37 = 0,
                      user.poisoning = -1
                      u.cd11 = 0,
                      u.del11 = -1,
                      u.cd12 = 0,
                      u.del12 = -1,
                      u.cd13 = 0,
                      u.cd14 = 0,
                      u.cd15 = 0,
                      u.spikes = -1,
                      u.cd16 = 0,
                      u.clinch = -1,
                      u.cd21 = 0,
                      u.cd22 = 0,
                      u.nakopleniye = 0,
                      u.el1 = 0,
                      u.burn = 0,
                      u.el2 = 0,
                      u.el3 = 0,
                      u.cd31 = 0,
                      u.poison = 0,
                      u.cd32 = 0,
                      u.cd33 = 0,
                      u.cd34 = 0,
                      u.invisible = false,
                      u.cd35 = 0,
                      u.cd36 = 0,
                      u.cd37 = 0,
                      u.poisoning = -1
                      msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                      var constuser = user
                      user = u
                      u = constuser
                    }
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
            }
            else {
              if(u.dueldef > user.duelatk) {
                if(user.cd11 > 0) user.cd11 -= 1
                if(user.del11 > 0) user.del11 -= 1
                if(user.cd12 > 0) user.cd12 -= 1
                if(user.del12 > 0) user.del12 -= 1
                if(user.cd13 > 0) user.cd13 -= 1
                if(user.cd14 > 0) user.cd14 -= 1
                if(user.cd15 > 0) user.cd15 -= 1
                if(user.spikes > 0) user.spikes -= 1
                if(user.cd16 > 0) user.cd16 -= 1
                if(user.cd21 > 0) user.cd21 -= 1
                if(user.cd22 > 0) user.cd22 -= 1
                if(user.cd31 > 0) user.cd31 -= 1
                if(user.cd32 > 0) user.cd32 -= 1
                if(user.cd33 > 0) user.cd33 -= 1
                if(user.cd34 > 0) user.cd34 -= 1
                if(user.cd35 > 0) user.cd35 -= 1
                if(user.cd36 > 0) user.cd36 -= 1
                if(user.porezka > 0) user.porezka -= 1
                if(user.cd37 > 0) user.cd37 -= 1
                if(u.cd11 > 0) u.cd11 -= 1
                if(u.del11 > 0) u.del11 -= 1
                if(u.cd12 > 0) u.cd12 -= 1
                if(u.del12 > 0) u.del12 -= 1
                if(u.cd13 > 0) u.cd13 -= 1
                if(u.cd14 > 0) u.cd14 -= 1
                if(u.cd15 > 0) u.cd15 -= 1
                if(u.spikes > 0) u.spikes -= 1
                if(u.cd16 > 0) u.cd16 -= 1
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 1
                if(u.cd22 > 0) u.cd22 -= 1
                if(u.cd31 > 0) u.cd31 -= 1
                if(u.cd32 > 0) u.cd32 -= 1
                if(u.cd33 > 0) u.cd33 -= 1
                if(u.cd34 > 0) u.cd34 -= 1
                if(u.cd35 > 0) u.cd35 -= 1
                if(u.cd36 > 0) u.cd36 -= 1
                if(u.porezka > 0) u.porezka -= 1
                if(u.cd37 > 0) u.cd37 -= 1
                if(user.burn > 0) user.burn -= 1
                if(u.burn > 0) u.burn -= 1
                if(user.poison > 0) user.poison -= 1
                if(u.poison > 0) u.poison -= 1
                if(user.poisoning > 0) user.poisoning -= 1
                if(u.poisoning > 0) u.poisoning -= 1
                user.steps += 1
                u.steps += 1
                user.cd36 = 7
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) не получает урона, так как его защита выше атаки @id${user.id}(${user.nick}). Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
              else {
                if(user.cd11 > 0) user.cd11 -= 1
                if(user.del11 > 0) user.del11 -= 1
                if(user.cd12 > 0) user.cd12 -= 1
                if(user.del12 > 0) user.del12 -= 1
                if(user.cd13 > 0) user.cd13 -= 1
                if(user.cd14 > 0) user.cd14 -= 1
                if(user.cd15 > 0) user.cd15 -= 1
                if(user.spikes > 0) user.spikes -= 1
                if(user.cd16 > 0) user.cd16 -= 1
                if(user.cd21 > 0) user.cd21 -= 1
                if(user.cd22 > 0) user.cd22 -= 1
                if(user.cd31 > 0) user.cd31 -= 1
                if(user.cd32 > 0) user.cd32 -= 1
                if(user.cd33 > 0) user.cd33 -= 1
                if(user.cd34 > 0) user.cd34 -= 1
                if(user.cd35 > 0) user.cd35 -= 1
                if(user.cd36 > 0) user.cd36 -= 1
                if(user.porezka > 0) user.porezka -= 1
                if(user.cd37 > 0) user.cd37 -= 1
                if(u.cd11 > 0) u.cd11 -= 1
                if(u.del11 > 0) u.del11 -= 1
                if(u.cd12 > 0) u.cd12 -= 1
                if(u.del12 > 0) u.del12 -= 1
                if(u.cd13 > 0) u.cd13 -= 1
                if(u.cd14 > 0) u.cd14 -= 1
                if(u.cd15 > 0) u.cd15 -= 1
                if(u.spikes > 0) u.spikes -= 1
                if(u.cd16 > 0) u.cd16 -= 1
                if(u.clinch > 0) u.clinch = -1
                if(u.cd21 > 0) u.cd21 -= 1
                if(u.cd22 > 0) u.cd22 -= 1
                if(u.cd31 > 0) u.cd31 -= 1
                if(u.cd32 > 0) u.cd32 -= 1
                if(u.cd33 > 0) u.cd33 -= 1
                if(u.cd34 > 0) u.cd34 -= 1
                if(u.cd35 > 0) u.cd35 -= 1
                if(u.cd36 > 0) u.cd36 -= 1
                if(u.porezka > 0) u.porezka -= 1
                if(u.cd37 > 0) u.cd37 -= 1
                if(user.burn > 0) user.burn -= 1
                if(u.burn > 0) u.burn -= 1
                if(user.poison > 0) user.poison -= 1
                if(u.poison > 0) u.poison -= 1
                if(user.poisoning > 0) user.poisoning -= 1
                if(u.poisoning > 0) u.poisoning -= 1
                user.steps += 1
                u.steps += 1
                user.cd36 = 7
                u.dueldef = 0
                u.porezka = 4
                var result = user.duelatk
                u.duelhp -= result
                if (u.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (u.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${u.id}(${u.nick}) получает ⚔${result} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                  }
                  if(user.duelhp < 1) {
                    var plata2 = user.money
                    var procentplata = 10
                    var resultplata2 = plata2 / 100 * procentplata
                    let num27 = resultplata2
                    var finalplata = num27.toFixed(0)
                    var finalplata2 = Number(finalplata)
                    user.money -= finalplata2
                    u.money += finalplata2
                    user.duel = false
                    u.duel = false
                    u.predictionduel = false
                    user.predictduel = false
                    user.steps = 0
                    u.steps = 0
                    user.timer = 0
                    u.timer = 0
                    user.duelhp = 0
                    user.duelatk = 0
                    user.dueldef = 0
                    u.duelhp = 0
                    u.duelatk = 0
                    u.dueldef = 0
                    user.cd11 = 0,
                    user.del11 = -1,
                    user.cd12 = 0,
                    user.del12 = -1,
                    user.cd13 = 0,
                    user.cd14 = 0,
                    user.cd15 = 0,
                    user.spikes = -1,
                    user.cd16 = 0,
                    user.clinch = -1,
                    user.cd21 = 0,
                    user.cd22 = 0,
                    user.nakopleniye = 0,
                    user.el1 = 0,
                    user.burn = 0,
                    user.el2 = 0,
                    user.el3 = 0,
                    user.cd31 = 0,
                    user.poison = 0,
                    user.cd32 = 0,
                    user.cd33 = 0,
                    user.cd34 = 0,
                    user.invisible = false,
                    user.cd35 = 0,
                    user.cd36 = 0,
                    user.cd37 = 0,
                    user.poisoning = -1
                    u.cd11 = 0,
                    u.del11 = -1,
                    u.cd12 = 0,
                    u.del12 = -1,
                    u.cd13 = 0,
                    u.cd14 = 0,
                    u.cd15 = 0,
                    u.spikes = -1,
                    u.cd16 = 0,
                    u.clinch = -1,
                    u.cd21 = 0,
                    u.cd22 = 0,
                    u.nakopleniye = 0,
                    u.el1 = 0,
                    u.burn = 0,
                    u.el2 = 0,
                    u.el3 = 0,
                    u.cd31 = 0,
                    u.poison = 0,
                    u.cd32 = 0,
                    u.cd33 = 0,
                    u.cd34 = 0,
                    u.invisible = false,
                    u.cd35 = 0,
                    u.cd36 = 0,
                    u.cd37 = 0,
                    u.poisoning = -1
                    msg.send(`@id${u.id}(${u.nick}) победил @id${user.id}(${user.nick}) в дуэли. Со счёта @id${user.id}(${user.nick}) списано ${finalplata2}💵 и начислено на счёт @id${u.id}(${u.nick})`)
                    var constuser = user
                    user = u
                    u = constuser
                  }
                  else {
                    if(u.duelhp < 1) {
                      var plata2 = user.money
                      var procentplata = 10
                      var resultplata2 = plata2 / 100 * procentplata
                      let num27 = resultplata2
                      var finalplata = num27.toFixed(0)
                      var finalplata2 = Number(finalplata)
                      u.money -= finalplata2
                      user.money += finalplata2
                      user.duel = false
                      u.duel = false
                      u.predictionduel = false
                      user.predictduel = false
                      user.steps = 0
                      u.steps = 0
                      user.timer = 0
                      u.timer = 0
                      user.duelhp = 0
                      user.duelatk = 0
                      user.dueldef = 0
                      u.duelhp = 0
                      u.duelatk = 0
                      u.dueldef = 0
                      user.cd11 = 0,
                      user.del11 = -1,
                      user.cd12 = 0,
                      user.del12 = -1,
                      user.cd13 = 0,
                      user.cd14 = 0,
                      user.cd15 = 0,
                      user.spikes = -1,
                      user.cd16 = 0,
                      user.clinch = -1,
                      user.cd21 = 0,
                      user.cd22 = 0,
                      user.nakopleniye = 0,
                      user.el1 = 0,
                      user.burn = 0,
                      user.el2 = 0,
                      user.el3 = 0,
                      user.cd31 = 0,
                      user.poison = 0,
                      user.cd32 = 0,
                      user.cd33 = 0,
                      user.cd34 = 0,
                      user.invisible = false,
                      user.cd35 = 0,
                      user.cd36 = 0,
                      user.cd37 = 0,
                      user.poisoning = -1
                      u.cd11 = 0,
                      u.del11 = -1,
                      u.cd12 = 0,
                      u.del12 = -1,
                      u.cd13 = 0,
                      u.cd14 = 0,
                      u.cd15 = 0,
                      u.spikes = -1,
                      u.cd16 = 0,
                      u.clinch = -1,
                      u.cd21 = 0,
                      u.cd22 = 0,
                      u.nakopleniye = 0,
                      u.el1 = 0,
                      u.burn = 0,
                      u.el2 = 0,
                      u.el3 = 0,
                      u.cd31 = 0,
                      u.poison = 0,
                      u.cd32 = 0,
                      u.cd33 = 0,
                      u.cd34 = 0,
                      u.invisible = false,
                      u.cd35 = 0,
                      u.cd36 = 0,
                      u.cd37 = 0,
                      u.poisoning = -1
                      msg.send(`@id${user.id}(${user.nick}) победил @id${u.id}(${u.nick}) в дуэли. Со счёта @id${u.id}(${u.nick}) списано ${finalplata2}💵 и начислено на счёт @id${user.id}(${user.nick})`)
                      var constuser = user
                      user = u
                      u = constuser
                    }
                  }
                if(user.del11 == 0) {
                  var hp = user.hp
                  var atk = user.atk
                  var procent = 20
                  var resulthp = hp / 100 * procent
                  var resultatk = atk / 100 * procent
                  user.duelhp -= resulthp
                  user.duelatk -= resultatk
                  user.del11 = -1
                   
                }
                if(u.del11 == 0) {
                  var hp1 = u.hp
                  var atk1 = u.atk
                  var procent = 20
                  var resulthp1 = hp1 / 100 * procent
                  var resultatk1 = atk1 / 100 * procent
                  u.duelhp -= resulthp1
                  u.duelatk -= resultatk1
                  u.del11 = -1
                   
                }
                if(user.del12 == 0) {
                  var def = user.def
                  var procent = 20
                   var resultdef = def / 100 * procent
                  user.dueldef -= resultdef
                  user.del12 = -1
                   
                }
                if(u.del12 == 0) {
                  var def1 = u.def
                  var procent = 20
                  var resultdef1 = def1 / 100 * procent
                  u.dueldef -= resultdef1
                  u.del12 = -1
                   
                }
                if(user.spikes == 0) {
                  user.spikes -= 1
                   
                }
                if(u.spikes == 0) {
                  u.spikes -= 1
                   
                }
              }
            }
          }
        }
      }
    }
    if(u.poison > 0) {
      var procent50 = 50
      var poison50 = user.duelatk * procent50 / 100
      u.duelhp -= poison50
      msg.send(`"${u.nick}" получает ⚔${poison50} урона`)
    }
    if(user.poisoning > 0) {
      var result1 = user.duelatk - user.dueldef
      user.duelhp -= result1
      msg.send(`"${user.nick}" получает ⚔${result1} урона от отравления`)
    }
    if(u.poisoning > 0) {
      var result2 = u.duelatk - u.dueldef
      u.duelhp -= result2
      msg.send(`"${u.nick}" наносит себе ⚔${result2} урона`)
    }
    if(user.poisoning == 0) {
      user.poisoning = -1
      var atk3 = user.duelatk * 3
      var heal1 = atk3 * 2
      user.duelhp += heal1
      if (user.duelhp > user.hp) {
      user.duelhp = user.hp
      }
      msg.send(`"${user.nick}" восстанавливает 💚${heal1} здоровья`)
    }
    if(u.poisoning == 0) {
      u.poisoning = -1
      var atk3 = u.duelatk * 3
      var heal2 = atk3 * 2
      u.duelhp += heal2
      if (u.duelhp > u.hp) {
      u.duelhp = u.hp
      }
      msg.send(`"${u.nick}" восстанавливает 💚${heal2} здоровья`)
    }
    var constuser = user
    user = u
    u = constuser
  })

  vk.updates.hear(/^(.*) 💉$/i, msg => {
    if(user.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(u.duel == false) return msg.send ('В данный момент вы не в дуэли')
    if(user.steps > 100 || u.steps > 100) {
      user.duel = false
      u.duel = false
      u.predictionduel = false
      user.predictduel = false
      user.steps = 0
      u.steps = 0
      user.timer = 0
      u.timer = 0
      user.duelhp = 0
      user.duelatk = 0
      user.dueldef = 0
      u.duelhp = 0
      u.duelatk = 0
      u.dueldef = 0
      user.cd11 = 0,
      user.del11 = -1,
      user.cd12 = 0,
      user.del12 = -1,
      user.cd13 = 0,
      user.cd14 = 0,
      user.cd15 = 0,
      user.spikes = -1,
      user.cd16 = 0,
      user.clinch = -1,
      user.cd21 = 0,
      user.cd22 = 0,
      user.nakopleniye = 0,
      user.el1 = 0,
      user.burn = 0,
      user.el2 = 0,
      user.el3 = 0,
      user.cd31 = 0,
      user.poison = 0,
      user.cd32 = 0,
      user.cd33 = 0,
      user.cd34 = 0,
      user.invisible = false,
      user.cd35 = 0,
      user.cd36 = 0,
      user.cd37 = 0,
      user.poisoning = -1
      u.cd11 = 0,
      u.del11 = -1,
      u.cd12 = 0,
      u.del12 = -1,
      u.cd13 = 0,
      u.cd14 = 0,
      u.cd15 = 0,
      u.spikes = -1,
      u.cd16 = 0,
      u.clinch = -1,
      u.cd21 = 0,
      u.cd22 = 0,
      u.nakopleniye = 0,
      u.el1 = 0,
      u.burn = 0,
      u.el2 = 0,
      u.el3 = 0,
      u.cd31 = 0,
      u.poison = 0,
      u.cd32 = 0,
      u.cd33 = 0,
      u.cd34 = 0,
      u.invisible = false,
      u.cd35 = 0,
      u.cd36 = 0,
      u.cd37 = 0,
      u.poisoning = -1
      return msg.send ('Ходы дуэли превысили 100. Победитель не определён')
    }
    if(msg.$match[1] != '[club202302035|@eswep]') return
    if(msg.messagePayload != "project RQ") return
    if(msg.senderId == u.id) {
      var constu = u
      u = user
      user = constu
    }
    if(user.cd37 > 0) return msg.send(`Умение перезаряжается`)
    if(user.clas.id != 3) return msg.send(`Умение не принадлежит вашему классу`)
    if(u.nakopleniye > 0) {
      if(u.control > 0) u.nakopleniye = 0
    }
    if (user.steps % 2 == 0) {
      return msg.send ('Сейчас не твой ход')
    }
    else {
      if(user.control > 0) {
        msg.send (`Невозможно применить умение`);
      }
      else{
          if(u.control > 0) {
            if(user.cd11 > 0) user.cd11 -= 1
            if(user.del11 > 0) user.del11 -= 1
            if(user.cd12 > 0) user.cd12 -= 1
            if(user.del12 > 0) user.del12 -= 1
            if(user.cd13 > 0) user.cd13 -= 1
            if(user.cd14 > 0) user.cd14 -= 1
            if(user.cd15 > 0) user.cd15 -= 1
            if(user.spikes > 0) user.spikes -= 1
            if(user.cd16 > 0) user.cd16 -= 1
            if(user.cd21 > 0) user.cd21 -= 1
            if(user.cd22 > 0) user.cd22 -= 1
            if(user.cd31 > 0) user.cd31 -= 1
            if(user.cd32 > 0) user.cd32 -= 1
            if(user.cd33 > 0) user.cd33 -= 1
            if(user.cd34 > 0) user.cd34 -= 1
            if(user.cd35 > 0) user.cd35 -= 1
            if(user.cd36 > 0) user.cd36 -= 1
            if(user.porezka > 0) user.porezka -= 1
            if(user.cd37 > 0) user.cd37 -= 1
            if(u.cd11 > 0) u.cd11 -= 1
            if(u.del11 > 0) u.del11 -= 1
            if(u.cd12 > 0) u.cd12 -= 1
            if(u.del12 > 0) u.del12 -= 1
            if(u.cd13 > 0) u.cd13 -= 1
            if(u.cd14 > 0) u.cd14 -= 1
            if(u.cd15 > 0) u.cd15 -= 1
            if(u.spikes > 0) u.spikes -= 1
            if(u.cd16 > 0) u.cd16 -= 1
            if(u.clinch > 0) u.clinch = -1
            if(u.cd21 > 0) u.cd21 -= 1
            if(u.cd22 > 0) u.cd22 -= 1
            if(u.cd31 > 0) u.cd31 -= 1
            if(u.cd32 > 0) u.cd32 -= 1
            if(u.cd33 > 0) u.cd33 -= 1
            if(u.cd34 > 0) u.cd34 -= 1
            if(u.cd35 > 0) u.cd35 -= 1
            if(u.cd36 > 0) u.cd36 -= 1
            if(u.porezka > 0) u.porezka -= 1
            if(u.cd37 > 0) u.cd37 -= 1
            if(user.burn > 0) user.burn -= 1
            if(u.burn > 0) u.burn -= 1
            if(user.poison > 0) user.poison -= 1
            if(u.poison > 0) u.poison -= 1
            if(user.poisoning > 0) user.poisoning -= 1
            if(u.poisoning > 0) u.poisoning -= 1
            user.cd37 = 9
            user.poisoning = 4
            if(user.poisoning > 0) {
              var result1 = user.duelatk - user.dueldef
              user.duelhp -= result1
            }
            if(u.control == 2) {
              user.steps += 1
              u.steps += 1
              u.control -= 2
              if (u.clas.id == 1) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${user.id}(${user.nick}) наносит себе ⚔${result1} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "😈",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🛡",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🖤",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "❣",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "☦",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚙",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚔",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 2) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${user.id}(${user.nick}) наносит себе ⚔${result1} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "❄",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💥",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🍃",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔥",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "💧",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "⚡",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
              }
              if (u.clas.id == 3) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${user.id}(${user.nick}) наносит себе ⚔${result1} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "🦠",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔪",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💣",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "👁‍🗨",
                    color: "primary",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "🧬",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🗡",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💉",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
              }
            }
            else {
              if(u.control > 2) {
                user.steps += 2
                u.steps += 2
                u.control -= 2
                if (user.clas.id == 1) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${user.id}(${user.nick}) наносит себе ⚔${result1} урона. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "😈",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🛡",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🖤",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "❣",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "☦",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚙",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚔",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (user.clas.id == 2) {
                  vk.api.messages.send({
                    peer_id: msg.peerId,
                    message: `@id${user.id}(${user.nick}) наносит себе ⚔${result1} урона. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                    disable_mentions: 1,
                    keyboard: Keyboard.builder()
                    .inline()
                      .textButton({
                        label: "❄",
                        color: "primary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "💥",
                        color: "secondary",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🍃",
                        color: "positive",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "🔥",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .row()
                    .inline()
                      .textButton({
                        label: "💧",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "⚡",
                        color: "negative",
                        payload: "project RQ"
                        })
                    .inline()
                      .textButton({
                        label: "АТК",
                        color: "negative",
                        payload: "project RQ"
                        })
                      })
                }
                if (user.clas.id == 3) {
                vk.api.messages.send({
                  peer_id: msg.peerId,
                  message: `@id${user.id}(${user.nick}) наносит себе ⚔${result1} урона. Следующим ходит — @id${user.id}(${user.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                  disable_mentions: 1,
                  keyboard: Keyboard.builder()
                  .inline()
                    .textButton({
                      label: "🦠",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🔪",
                      color: "negative",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💣",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "👁‍🗨",
                      color: "primary",
                      payload: "project RQ"
                      })
                  .row()
                  .inline()
                    .textButton({
                      label: "🧬",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "🗡",
                      color: "secondary",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "💉",
                      color: "positive",
                      payload: "project RQ"
                      })
                  .inline()
                    .textButton({
                      label: "АТК",
                      color: "negative",
                      payload: "project RQ"
                      })
                    })
                }
              }
            }
          }
          else {
            if(user.cd11 > 0) user.cd11 -= 1
            if(user.del11 > 0) user.del11 -= 1
            if(user.cd12 > 0) user.cd12 -= 1
            if(user.del12 > 0) user.del12 -= 1
            if(user.cd13 > 0) user.cd13 -= 1
            if(user.cd14 > 0) user.cd14 -= 1
            if(user.cd15 > 0) user.cd15 -= 1
            if(user.spikes > 0) user.spikes -= 1
            if(user.cd16 > 0) user.cd16 -= 1
            if(user.cd21 > 0) user.cd21 -= 1
            if(user.cd22 > 0) user.cd22 -= 1
            if(user.cd31 > 0) user.cd31 -= 1
            if(user.cd32 > 0) user.cd32 -= 1
            if(user.cd33 > 0) user.cd33 -= 1
            if(user.cd34 > 0) user.cd34 -= 1
            if(user.cd35 > 0) user.cd35 -= 1
            if(user.cd36 > 0) user.cd36 -= 1
            if(user.porezka > 0) user.porezka -= 1
            if(user.cd37 > 0) user.cd37 -= 1
            if(u.cd11 > 0) u.cd11 -= 1
            if(u.del11 > 0) u.del11 -= 1
            if(u.cd12 > 0) u.cd12 -= 1
            if(u.del12 > 0) u.del12 -= 1
            if(u.cd13 > 0) u.cd13 -= 1
            if(u.cd14 > 0) u.cd14 -= 1
            if(u.cd15 > 0) u.cd15 -= 1
            if(u.spikes > 0) u.spikes -= 1
            if(u.cd16 > 0) u.cd16 -= 1
            if(u.clinch > 0) u.clinch = -1
            if(u.cd21 > 0) u.cd21 -= 1
            if(u.cd22 > 0) u.cd22 -= 1
            if(u.cd31 > 0) u.cd31 -= 1
            if(u.cd32 > 0) u.cd32 -= 1
            if(u.cd33 > 0) u.cd33 -= 1
            if(u.cd34 > 0) u.cd34 -= 1
            if(u.cd35 > 0) u.cd35 -= 1
            if(u.cd36 > 0) u.cd36 -= 1
            if(u.porezka > 0) u.porezka -= 1
            if(u.cd37 > 0) u.cd37 -= 1
            if(user.burn > 0) user.burn -= 1
            if(u.burn > 0) u.burn -= 1
            if(user.poison > 0) user.poison -= 1
            if(u.poison > 0) u.poison -= 1
            if(user.poisoning > 0) user.poisoning -= 1
            if(u.poisoning > 0) u.poisoning -= 1
            user.steps += 1
            u.steps += 1
            user.cd37 = 9
            user.poisoning = 4
            if(user.poisoning > 0) {
              var result1 = user.duelatk - user.dueldef
              user.duelhp -= result1
            }
            if (u.clas.id == 1) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${user.id}(${user.nick}) наносит себе себе ⚔${result1} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "😈",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🛡",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🖤",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "❣",
                    color: "positive",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "☦",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚙",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚔",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 2) {
              vk.api.messages.send({
                peer_id: msg.peerId,
                message: `@id${user.id}(${user.nick}) наносит себе ⚔${result1} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
                disable_mentions: 1,
                keyboard: Keyboard.builder()
                .inline()
                  .textButton({
                    label: "❄",
                    color: "primary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "💥",
                    color: "secondary",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🍃",
                    color: "positive",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "🔥",
                    color: "negative",
                    payload: "project RQ"
                    })
                .row()
                .inline()
                  .textButton({
                    label: "💧",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "⚡",
                    color: "negative",
                    payload: "project RQ"
                    })
                .inline()
                  .textButton({
                    label: "АТК",
                    color: "negative",
                    payload: "project RQ"
                    })
                  })
            }
            if (u.clas.id == 3) {
            vk.api.messages.send({
              peer_id: msg.peerId,
              message: `@id${user.id}(${user.nick}) наносит себе ⚔${result1} урона. Следующим ходит — @id${u.id}(${u.nick})\n@id${user.id}(${user.nick}): ❤"${user.duelhp}" ⚔"${user.duelatk}" 🛡"${user.dueldef}"\n @id${u.id}(${u.nick}): ❤"${u.duelhp}" ⚔"${u.duelatk}" 🛡"${u.dueldef}"`,
              disable_mentions: 1,
              keyboard: Keyboard.builder()
              .inline()
                .textButton({
                  label: "🦠",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🔪",
                  color: "negative",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💣",
                  color: "primary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "👁‍🗨",
                  color: "primary",
                  payload: "project RQ"
                  })
              .row()
              .inline()
                .textButton({
                  label: "🧬",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "🗡",
                  color: "secondary",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "💉",
                  color: "positive",
                  payload: "project RQ"
                  })
              .inline()
                .textButton({
                  label: "АТК",
                  color: "negative",
                  payload: "project RQ"
                  })
                })
              }
          }
        }
      }
      if(u.poison > 0) {
        var procent50 = 50
        var poison50 = user.duelatk * procent50 / 100
        u.duelhp -= poison50
        msg.send(`"${u.nick}" получает ⚔${poison50} урона`)
      }
      if(user.poisoning > 0) {
        var result1 = user.duelatk - user.dueldef
        user.duelhp -= result1
        msg.send(`"${user.nick}" получает ⚔${result1} урона от отравления`)
      }
      if(u.poisoning > 0) {
        var result2 = u.duelatk - u.dueldef
        u.duelhp -= result2
        msg.send(`"${u.nick}" наносит себе ⚔${result2} урона`)
      }
      if(user.poisoning == 0) {
        user.poisoning = -1
        var atk3 = user.duelatk * 3
        var heal1 = atk3 * 2
        user.duelhp += heal1
        if (user.duelhp > user.hp) {
        user.duelhp = user.hp
        }
        msg.send(`"${user.nick}" восстанавливает 💚${heal1} здоровья`)
      }
      if(u.poisoning == 0) {
        u.poisoning = -1
        var atk3 = u.duelatk * 3
        var heal2 = atk3 * 2
        u.duelhp += heal2
        if (u.duelhp > u.hp) {
        u.duelhp = u.hp
        }
        msg.send(`"${u.nick}" восстанавливает 💚${heal2} здоровья`)
      }
    var constuser = user
    user = u
    u = constuser
  })
})

vk.updates.hear(/^Начать$/i, async (context) => {
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: "—> открываю клавиатуру",
    keyboard: Keyboard.keyboard([
      [
      Keyboard.textButton({
        label: "Профиль",
        color: "primary",
        payload: "project RQ"
      })
    ],
    [
      Keyboard.textButton({
        label: "Классы",
        color: "secondary",
        payload: "project RQ"
      }),
      Keyboard.textButton({
        label: "Умения",
        color: "secondary",
        payload: "project RQ"
      })
    ],
    [
      Keyboard.textButton({
        label: "Улучшения",
        color: "negative",
        payload: "project RQ"
      })
    ],
    [
      Keyboard.textButton({
        label: "Сюжет",
        color: "positive",
        payload: "project RQ"
      })
    ]
    ])
  })
})

vk.updates.hear(/^Главное меню$/i, async (context) => {
  if(context.messagePayload != "project RQ") return
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: "Loading… █████████] 99%",
    keyboard: Keyboard.keyboard([
      [
      Keyboard.textButton({
        label: "Профиль",
        color: "primary",
        payload: "project RQ"
      })
    ],
    [
      Keyboard.textButton({
        label: "Классы",
        color: "secondary",
        payload: "project RQ"
      }),
      Keyboard.textButton({
        label: "Умения",
        color: "secondary",
        payload: "project RQ"
      })
    ],
    [
      Keyboard.textButton({
        label: "Улучшения",
        color: "negative",
        payload: "project RQ"
      })
    ],
    [
      Keyboard.textButton({
        label: "Сюжет",
        color: "positive",
        payload: "project RQ"
      })
    ]
    ])
  })
})

vk.updates.hear(/^(.*) Сюжет$/i, async(context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.$match[1] != '[club202302035|@eswep]') return
  if(user.nick == "Игрок") return context.send (`Невозможное действие. Установите себе ник`)
  if(context.messagePayload != "project RQ") return
  context.send(`Прохождение сюжетной линии доступно только в личных сообщениях с ботом`)
})

vk.updates.hear(/^Сюжет$/i, async(context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload != "project RQ") return
  var locationquest1 = ''
  if(user.quest == 0) locationquest1 += `⭐---`
  if(user.quest == 1) locationquest1 += `⭐---`
  var locationquest2 = ''
  if(user.quest == 2 || user.quest == 3 || user.quest == 4 || user.quest == 5) locationquest2 += `⭐---`
  var locationquest3 = ''
  if(user.quest == 6 || user.quest == 7 || user.quest == 8 || user.quest == 9) locationquest3 += `⭐---`
  var locationquest4 = ''
  if(user.quest == 10 || user.quest == 11 || user.quest == 12 || user.quest == 13) locationquest4 += `⭐---`
  var locationquest5 = ''
  if(user.quest == 14 || user.quest == 15 || user.quest == 16) locationquest5 += `⭐---`
  var locationquest6 = ''
  if(user.quest == 17 || user.quest == 18 || user.quest == 19 || user.quest == 20 || user.quest == 21) locationquest6 += `⭐---`
  if(user.nick == "Игрок") return context.send (`Невозможное действие. Установите себе ник`)
  if(user.quest == 0) {
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: `Добро пожаловать в сюжетную линию\n\n🔷1 Глава "Неведомый горизонт"🔷\n${locationquest1}Квест 1: "Плохое вино"\n${locationquest2}Квест 2: "Очень странные дела"\n${locationquest3}Квест 3: "Тяжело в учении — в бою кошмар"\n\n🔷2 Глава "А раньше было тише..."🔷\n${locationquest4}Квест 1: "Знакомство"\n${locationquest5}Квест 2: "Детсад?"\n${locationquest6}Квест 3: "Отряд"`,
      keyboard: Keyboard.keyboard([
      [
        Keyboard.textButton({
          label: "Начать прохождение сюжета",
          color: "positive",
          payload: "project RQ"
        })
      ],
      [
        Keyboard.textButton({
          label: "Главное меню",
          color: "primary",
          payload: "project RQ"
        }),
      ]
      ])
    })
  }
  else {
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: `Добро пожаловать в сюжетную линию\n\n🔷1 Глава "Неведомый горизонт"🔷\n${locationquest1}Квест 1: "Плохое вино"\n${locationquest2}Квест 2: "Очень странные дела"\n${locationquest3}Квест 3: "Тяжело в учении — в бою кошмар"\n\n🔷2 Глава "А раньше было тише..."🔷\n${locationquest4}Квест 1: "Знакомство"\n${locationquest5}Квест 2: "Детсад?"\n${locationquest6}Квест 3: "Отряд"`,
      keyboard: Keyboard.keyboard([
      [
        Keyboard.textButton({
          label: "Продолжить прохождение сюжета",
          color: "positive",
          payload: "project RQ"
        })
      ],
      [
        Keyboard.textButton({
          label: "Главное меню",
          color: "primary",
          payload: "project RQ"
        }),
      ]
      ])
    })
  }
})

vk.updates.hear(/^Начать прохождение сюжета$/i, async (context) => {
  if(context.messagePayload != "project RQ") return
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: `----------Глава 1, Квест 1----------\n\nНаконец-то наступил день вашего совершеннолетия и вы с нетерпением отправляетесь в Гильдию искателей приключений. Каждому новобранцу выдавали нарукавную повязку с особой эмблемой, отличающей искателей приключений от обычных солдат. Вы получаете как раз такую же.\nИз-за своего пылкого характера вы не собираетесь отмечать своё поступление в гильдию, а сразу же отправляетесь на встречу приключениям.\n\nДоска заданий была увешана разными просьбами горожан, заданиями по охоте на чудовищ, и прочими занятиями для искателей приключений. Однако все интересные задания были не для вашего ранга, а просьбы горожан были слишком банальны, хоть и неплохо вознаграждались. Вы берёте задание по сопровождению повозки с вином в ближайший город. Это единственное задание с выходом из города подходящее вашему рангу, поэтому оно приглянулось вам.\nС большим нетерпением вы ожидаете указанного времени у городских ворот.\nПовозчик погрузил бочки с вином и вы отправляетесь на своё первое задание.\n\nПоловина дня прошла с вашего выхода из города. Но каких либо трудностей пока не возникало, хотя вы надеялись на парочку чудовищ с которыми можно справиться одному. Однако, на половине пути в город вы встречаете первую опасность...\nК большому несчастью перед вами группа разбойников из 5 человек.\nРазбойник 1:\n- А я уж думал "Гром" совсем умом тронулся, отправляя нас сюда.\nРазбойник 2:\n- Хорошо ребята, мы не в настроении пачкать руки, поэтому можем мирно договориться.\n\nВыберите дальнейшее действие`,
    keyboard: Keyboard.keyboard([
      [
      Keyboard.textButton({
        label: "1. Вступить в бой",
        color: "secondary",
        payload: "1"
      })
    ],
    [
      Keyboard.textButton({
        label: "2. Рассказать анекдот",
        color: "secondary",
        payload: "2"
      })
    ],
    [
      Keyboard.textButton({
        label: "3. Отдать все деньги",
        color: "secondary",
        payload: "3"
      })
    ],
    [
      Keyboard.textButton({
        label: "Главное меню",
        color: "primary",
        payload: "project RQ"
      })
    ]
    ])
  })
})

vk.updates.hear(/^1. Вступить в бой$/i, async (context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload != "1") return
  context.send(`Это было крайне глупое решение, враг превышал вас количеством и легко справился с вами, ограбив до ниточки. Стоит принять другое решение...`)
  user.money = 0
})

vk.updates.hear(/^2. Рассказать анекдот$/i, async (context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload != "2") return
  context.send(`Вы:\n- Заходят как-то негр и попугай в бар, а бармен спрашивает: "Где ты его купил?"\n"В Африке" - отвечает попугай.\n\nРазбойники на славу посмеялись, а после ограбили вас под чистую. Стоит принять другое решение...`)
  user.money = 0
})

vk.updates.hear(/^3. Отдать все деньги$/i, async (context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload != "3") return
  context.send(`Вы вместе с повозчиком отдаёте все сбережения что у вас были, и разбойники нехотя отпускают вас`)
  user.money = 0
  user.quest += 1
  context.send(`К счастью, перевозчик не брал с собой много денег, и не винил вас. Он сам понимал, что выбрал ранг задания слишком низким, однако сами вы потеряли все свои сбережения\nВы благополучно доставляете вино и отправляетесь назад...`)
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: "Подъезжая к тому месту где вас ограбили, вы чувствуете неладное. Из-за холма слышатся голоса. Перевозчик останавливается, а вы карабкаетесь на холм наблюдая следующее...\n\nРазбойник 1:\n- Ты видимо не вдупляешь паренёк.\nРазбойник 2:\n- Для такого сопляка как ты, храбрость не к лицу.\nНезнакомец\n- ...\nРазбойник 3:\n- Ладно ребят, очевидно он не понимает в какой ситуации находится.\n\nРазбойники нападают на незнакомца. Но тот быстро обнажает клинки необычной формы и вступает в схватку. Быстрыми и ловкими движениями он обезоруживает всех врагов. Раньше вы не видели ничего подобного и были изумлены движениями этого человека.\n\nВыберите дальнейшее действие",
    keyboard: Keyboard.keyboard([
      [
      Keyboard.textButton({
        label: "1. Распросить незнакомца",
        color: "secondary",
        payload: "4"
      })
    ],
    [
      Keyboard.textButton({
        label: "2. Избежать контакта",
        color: "secondary",
        payload: "4"
      })
    ],
    [
      Keyboard.textButton({
        label: "3. Напасть на незнакомца",
        color: "secondary",
        payload: "5"
      })
    ],
    [
      Keyboard.textButton({
        label: "Главное меню",
        color: "primary",
        payload: "project RQ"
      })
    ]
    ])
  })
})

vk.updates.hear(/^3. Напасть на незнакомца$/i, async (context) => {
  if(context.messagePayload != "5") return
  context.send(`О чем вы только думали... Незнакомец запросто справился с вами и связал, а перед уходом пожелал удачи в приключениях. Стоит принять другое решение...`)
})

vk.updates.hear(/^(?:1. Распросить незнакомца|2. Избежать контакта)$/i, async (context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload != "4") return
  if(context.text == "1. Распросить незнакомца") context.send(`Вы вышли к незнакомцу и начали разговор`)
  if(context.text == "2. Избежать контакта") context.send(`Вы громко зашуршали листвой, а когда обернулись незнакомец стоял перед вами. Вы насторожились и сказали ему не подходить. В ответ же он любезно представился`)
  user.money += 10000
  user.quest += 1
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: `"Я - Айко, служитель культа Аригирис." И действительно, одет он был необычно, скорее всего это особая форма культистов. Волосы его были рыжего цвета, в руках он держал клинки синего отблеска, а на лице была улыбка.\nАйко:\n- Ты я так понимаю местный искатель приключений. Я подслушал разговор тех ребят, они говорили о чудаке, которого сопровождал малец и то как они сами отдали все деньги им. Ну и я решил любезно попросить их отдать награбленное. Теперь думаю как найти тех двух...\nВы объясняете Айко всё что с вами произошло...\n\nАйко:\n- Ахахаха, вот это совпадение.\nАйко возвращает ваши деньги.\n\nВы расспрашиваете Айко о его движениях во время боя...\n\nАйко:\n- Хах, ты конечно поражён моими навыками, как и многие другие кому повезло увидеть меня в бою.\nЗа это я обязан своему учителю, мы с ним давно не виделись. По возвращению я обещал ему что стану ещё сильнее и смогу одолеть его! Я уверен что уже превзошёл его, ахахаха.\nК слову, ты же на задании. Да и мне тоже пора. Если хочешь при следующей встрече могу и тебя потренировать. Бывай!\n\nВы отправляетесь в город вместе с повозчиком, размышляя об Айко.\nПо прибытию вы получаете награду за выполненное занятие, повозчик был доброго характера и не рассказывал подробностей в гильдии, о том что вы по сути не справились.\nХотя он сам был виноват что хотел сэкономить на охране...\n\nТак прошёл ваш самый первый день искателя приключений`,
    keyboard: Keyboard.keyboard([
      [
      Keyboard.textButton({
        label: "Завершить 1-1",
        color: "secondary",
        payload: "project RQ1"
      })
    ],
    [
      Keyboard.textButton({
        label: "Главное меню",
        color: "positive",
        payload: "project RQ"
      })
    ]
    ])
  })
})

vk.updates.hear(/^Завершить 1-1$/i, async (context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload != "project RQ1") return
  user.money += 5000
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: `----------------------------------------------\nГлава 1, Квест 1 завершён. Для получения второго квеста достигните ❤432 ⚔87 🛡36\n----------------------------------------------\nЗа прохождение квеста вы получаете 💵5.000\n----------------------------------------------`,
    keyboard: Keyboard.keyboard([
      [
      Keyboard.textButton({
        label: "Профиль",
        color: "primary",
        payload: "project RQ"
      })
    ],
    [
      Keyboard.textButton({
        label: "Классы",
        color: "secondary",
        payload: "project RQ"
      }),
      Keyboard.textButton({
        label: "Умения",
        color: "secondary",
        payload: "project RQ"
      })
    ],
    [
      Keyboard.textButton({
        label: "Улучшения",
        color: "negative",
        payload: "project RQ"
      })
    ],
    [
      Keyboard.textButton({
        label: "Сюжет",
        color: "positive",
        payload: "project RQ"
      })
    ]
    ])
  })
})

vk.updates.hear(/^Отказаться$/i, async (context) => {
  if(context.messagePayload == "6") {
  context.send(`На доске заданий не оказалось ничего интересного, и вы поспешили вернуться к Рокки`)
  }
})

vk.updates.hear(/^Согласиться$/i, async (context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload != "7") return
  user.quest += 1
  context.send(`Рокки был очень рад вашему согласию и вы тут же снарядились в дорогу`)
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: "Дорога до места назначения заняла половину дня. Это была деревня, по словам Рокки в задании было сказано что тут пропали трое юношей, и с их пропажи прошло 2 недели. Жители очень обеспокоенны. Местные наверняка что-то видели, стоит подробнее распросить их об этом случае",
    keyboard: Keyboard.keyboard([
      [
      Keyboard.textButton({
        label: "Опросить местных об этом",
        color: "secondary",
        payload: "8"
      })
    ],
    [
      Keyboard.textButton({
        label: "Главное меню",
        color: "primary",
        payload: "project RQ"
      })
    ]
    ])
  })
})

vk.updates.hear(/^Опросить местных об этом$/i, async (context) => {
  if(context.messagePayload != "8") return
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: "На улице было малолюдно, поэтому выбор тоже мал",
    keyboard: Keyboard.keyboard([
      [
      Keyboard.textButton({
        label: "1. Спросить торговца об этом случае",
        color: "secondary",
        payload: "9"
      })
    ],
    [
      Keyboard.textButton({
        label: "2. Спросить детей об этом случае",
        color: "secondary",
        payload: "10"
      })
    ],
    [
      Keyboard.textButton({
        label: "3. Спросить старика об этом случае",
        color: "secondary",
        payload: "11"
      })
    ],
    [
      Keyboard.textButton({
        label: "Главное меню",
        color: "primary",
        payload: "project RQ"
      })
    ]
    ])
  })
})

vk.updates.hear(/^1. Спросить торговца об этом случае$/i, async (context) => {
  if(context.messagePayload != "9") return
  context.send(`Торговец\n- Извините, но я здесь проездом, поэтому ничего не знаю`)
})

vk.updates.hear(/^2. Спросить детей об этом случае$/i, async (context) => {
  if(context.messagePayload != "10") return
  context.send(`Дети не сказали ничего полезного`)
})

vk.updates.hear(/^3. Спросить старика об этом случае$/i, async (context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload != "11") return
  context.send(`Старик рассказал о том, что юноши отправились в руины храма`)
  user.quest += 1
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: "Рокки:\n- Ну, хоть уже что-то. Давай отправляться.\n\nУже вечерело. Вы решили сперва осмотреть руины снаружи, а потом внутри. Ничего необычного. Наступили сумерки. Как только тень горизонта накрыла весь храм, вам стало не по себе. Внутри стало очень темно. Вы поспешили уходить, но замечаете девочку в зале. Вместе с Рокки вы в недоумении. Девочка задумчиво смотрит на вас. После минутных гляделок девочка засмеялась и засмущённо опустила взгляд. А через мгновенье перед вами предстала девушка. Милая улыбка и невинные глаза. А так же идеальное тело. Ни один юноша не сможет устоять перед такой красотой, она поистенне прекрасна. Мягкими и неслышными шагами она стала подходить к вам.\nВы замечаете что Рокки буквально отключился и не слышит вас, вы понимаете что это может плохо кончится.\nВыберите дальнейшее действие",
    keyboard: Keyboard.keyboard([
      [
      Keyboard.textButton({
        label: "1. Поспешить в деревню за помощью",
        color: "secondary",
        payload: "12"
      })
    ],
    [
      Keyboard.textButton({
        label: "2. Ударить Рокки",
        color: "secondary",
        payload: "13"
      })
    ],
    [
      Keyboard.textButton({
        label: "3. Приглядеться к девушке",
        color: "secondary",
        payload: "14"
      })
    ],
    [
      Keyboard.textButton({
        label: "Главное меню",
        color: "primary",
        payload: "project RQ"
      })
    ]
    ])
  })
})

vk.updates.hear(/^1. Поспешить в деревню за помощью$/i, async (context) => {
  if(context.messagePayload != "12") return
  context.send(`Мгновенная смерть, даже понять не успели чем и кто сделал это`)
})

vk.updates.hear(/^3. Приглядеться к девушке$/i, async (context) => {
  if(context.messagePayload != "14") return
  context.send(`"Она прекрасна" — лишь эта мысль появлялась в голове и ничего другого, когда смотришь на неё. Она медленно подошла именно к вам. Обошла вас проведя рукой по плечу и вы нехотя сели. Девушка села на колени сзади вас и обвела руки у вашей шеи. Грудью прижалась к вашей спине, а кистями рук касалась вашего торса. Наконец вы соприкоснулись губами и тут же уснули.\nЭтот сон стал для вас вечным...`)
})

vk.updates.hear(/^2. Ударить Рокки$/i, async (context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload != "13") return
  user.quest += 1
  context.send(`Это сработало и товарищ пришёл в себя`)
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: `Вы сказали Рокки чтобы тот не смотрел на девушку, это кажется ловушкой. Вы предпологаете что по её вине пропали и те трое юношей. Не смотря на девушку, вы спрашиваете как её зовут.\nДевушка:\n- Этель\nРокки:\n- Это из-за тебя пропали те трое?\nЭтель:\n- Да, это я усыпила их.\nРокки:\n- Зачем, зачем ты это сделала?!\nЭтель:\n- П-потому что...\nОна замолчала на некоторое время...\nЭтель:\n"Мне пришлось, о-они сказали что тогда отпустят меня!" — Разрыдавшись прокричала она.\nРокки:\n- Кто это, они?\nЭтель:\n- Культ Аригирис, они оставили мою душу здесь, и сказали, что чем больше юнош я смогу усыпить для них, тем скорее меня отпус...\n\nНе успевши договорить, Этель застыла, а после словно рассыпалась в воздухе.\nГолос:\n- Слишком болтлива, но с делом справилась. Ещё 2 есть.\nПеред вами оказывается группа культистов. К вашему удивлению среди них был Айко, он узнал вас и тоже был не меньше удивлён.\nСлужитель культа Аргирис:\n- У вас есть выбор, любезно принять этот усыпляющий порошок или же умереть мучительной смертью.\nАйко:\n- Хэй хэй, не думаешь, что девчонка итак неплохо справилась, можно и отпустить этих мальцов.\nСлужитель культа:\n- Что ты несёшь? Айко, если это твоя очередная выходка то у тебя будет совсем другой разговор с боссом.\n\nПока Айко говорил с культистами вы решаете что-то делать`,
    keyboard: Keyboard.keyboard([
      [
      Keyboard.textButton({
        label: "1. Попытаться сбежать",
        color: "secondary",
        payload: "15"
      })
    ],
    [
      Keyboard.textButton({
        label: "2. Атаковать культистов",
        color: "secondary",
        payload: "16"
      })
    ],
    [
      Keyboard.textButton({
        label: "Главное меню",
        color: "primary",
        payload: "project RQ"
      })
    ]
    ])
  })
})

vk.updates.hear(/^2. Атаковать культистов$/i, async (context) => {
  if(context.messagePayload != "16") return
  context.send(`Поединок был не долгим, вас с Рокки убили`)
})

vk.updates.hear(/^1. Попытаться сбежать$/i, async (context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload != "15") return
  user.quest += 1
  context.send(`Вы незаметно достали дымовую гранату. Позади вас в стене была брешь. Вы бросаете гранату и зал наполняется дымом. Вместе с Рокки вы прорываетесь в брешь и ищите выход из руин`)
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: `За вами гоняться несколько силуэтов. Пробежав уже много коридоров вы не можете найти выход. Вдруг вас с Рокки толкают в сторону и вы оказываетесь в совсем тёмной комнате. Перед вами культист в плаще, сняв капюшон вы узнаёте Айко. Рокки уже хотел атаковать его, как Айко прижал его к стене и заткнул рот рукой.\nАйко:\n- Парниша успокойся, я ваш союзник.\nВы говорите Рокки что знаете его. Айко показывает вам выход и вы успешно сбегаете.\n\nСледующим утром вы покидаете деревню. На её выходе вы встречаете Айко...\n\nАйко:\n- Как же вовремя вы пришли сюда.\nРокки:\n- Кто ты такой?\nВы знакомите Айко и Рокки друг с другом...\nАйко:\n- Понятно, ну и доставили же вы мне хлопот. Что вы тут делали вообще, а хотя, стоит ли спрашивать. Искатели приключений...\nРокки:\n- Зачем ты спас нас?\nАйко:\n- Хах, с твоим другом я познакомился давно, да и мне не нравятся методы работы моих товарищей, а ещё я просто добрый человек.\nРокки:\n- ...\nАйко (вам):\n- Кстати, я же обещал при следующей встрече потренировать тебя. Но похоже ты уже измотан. В таком случае давай встретимся позже\n\nВы с Рокки возвращаетесь в город. К сожалению задание не выполнено, ведь вам даже неизвестно что сделали культисты с теми юношами. Рокки поблагодарил вас, ведь без вас он скорее всего не выжил.`,
    keyboard: Keyboard.keyboard([
      [
      Keyboard.textButton({
        label: "Завершить 1-2",
        color: "secondary",
        payload: "project RQ2"
      })
    ],
    [
      Keyboard.textButton({
        label: "Главное меню",
        color: "primary",
        payload: "project RQ"
      })
    ]
    ])
  })
})

vk.updates.hear(/^Завершить 1-2$/i, async (context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload != "project RQ2") return
  user.money += 10000
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: `----------------------------------------------\nГлава 1, Квест 2 завершён. Для получения третьего квеста достигните ❤621 ⚔130 🛡52\n----------------------------------------------\nЗа прохождение квеста вы получаете 💵10.000\n----------------------------------------------`,
    keyboard: Keyboard.keyboard([
      [
      Keyboard.textButton({
        label: "Профиль",
        color: "primary",
        payload: "project RQ"
      })
    ],
    [
      Keyboard.textButton({
        label: "Классы",
        color: "secondary",
        payload: "project RQ"
      }),
      Keyboard.textButton({
        label: "Умения",
        color: "secondary",
        payload: "project RQ"
      })
    ],
    [
      Keyboard.textButton({
        label: "Улучшения",
        color: "negative",
        payload: "project RQ"
      })
    ],
    [
      Keyboard.textButton({
        label: "Сюжет",
        color: "positive",
        payload: "project RQ"
      })
    ]
    ])
  })
})

vk.updates.hear(/^1. Разгрузка товарных повозок$/i, async (context) => {
  if(context.messagePayload != "17") return
  context.send(`Это поручение абсолютно не подходит вам, ведь оно в стенах города`)
})

vk.updates.hear(/^2. Доставка семян одуванчиков$/i, async (context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload != "18") return
  user.quest += 1
  context.send(`Это самое лёгкое и дешёвое поручение, что было, и для его выполнения как раз нужно покинуть город`)
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: `Вы очень быстро доставили семена какой-то старушке, кто знает зачем они ей...\nИ так, теперь вы вне города и у вас есть целый день впереди. Вспоминая последнюю встречу с Айко, вы так же вспоминаете, что по уходу он показал на подножие горы "Плауст", и сказал, что найти его можно будет там.\nНемедля вы отправляетесь туда.\n\nЛишь валуны и мёртвые деревья встречались вам у подножия горы. Это вас не удивило, ведь здесь находятся месторождения соли.\n\nОбойдя это место вы не находите никого. Время близится к полудню, а солнце печёт сильнее с каждой минутой.\nВаше терпение подходит к концу`,
    keyboard: Keyboard.keyboard([
    [
      Keyboard.textButton({
        label: "1. Отправиться домой",
        color: "secondary",
        payload: "19"
      })
    ],
    [
      Keyboard.textButton({
        label: "2. Ждать",
        color: "secondary",
        payload: "20"
      })
    ],
    [
      Keyboard.textButton({
        label: "Главное меню",
        color: "primary",
        payload: "project RQ"
      })
    ]
    ])
  })
})

vk.updates.hear(/^1. Отправиться домой$/i, async (context) => {
  if(context.messagePayload != "19") return
  context.send(`Вы с испортившемся настроением идёте домой. Это явно того не стоило...`)
})

vk.updates.hear(/^2. Ждать$/i, async (context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload != "20") return
  user.quest += 1
  context.send(`Вы прождали ещё около часа, но так никто и не появился`)
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: `Встав с булыжника вы поворачиваетесь и идёте обратно, оглядываясь назад. Неожиданно вы врезаетесь во что-то, а если точнее в чью-то грудь...\nПеред вами человек высокого роста, с рыжими волосами и приятной улыбкой на лице - Айко...\nАйко:\n- Хахахаха, извини уж, заблудился на жизненном пути так сказать.\nВы:\n- ...\nАйко:\n- Как и обещал, я потренирую тебя. Но результат зависит только от тебя самого.\n\nВы следуете за Айко. Место куда он вас привёл было очень приятным. Много тени от листвы деревьев, а рядом ручей. Вы с Айко присели у ручья...\n\nАйко:\n- Итак, скажи мне, на чём строится твоя сила?\nВы:\n- ...\nАйко:\n- Хм, не задумывался?\nСила зависит от твоего желания, а именно желания сражаться. В голове ты должен представлять каждое своё движение перед тем, как совершить его, и оно должно быть успешным. После нескольких таких движений, тебя должен охватить "Кроум"\nВы:\n- Кроум?\nАйко:\n- Это что-то вроде воодушевления, страсти битвы по-другому. Как только это чувство охватывает тебя, всё, что ты делаешь, у тебя получается. Движения, ритм дыхания, все это синхронизируется.\nСловом, это прекрасное чувство, которое усиливает тебя. Словом, это прекрасное чувство, которое усиливает тебя. Однако, если забыться и полностью полагаться на него, то ты можешь совершить смертельную ошибку.\nНо не волнуйся, это грозит одержимым сумасбродам. Я же научу тебя контролировать себя в этом состоянии.\nОтлично, давай приступим!\n\nАйко достал клинки не вынимая их из ножн.\nАйко:\n- А теперь, уворачивайся от моих атак!\nМолниеносно он приблизился к вам и сразу же целился в голову. К счастью вы успели пригнуться, однако после этого вас ждала подсечка и вы упали.\nАйко:\n- Хм, думаю стоит размяться, чтобы повысить твою реакцию.\n\nВместе вы идёте к реке.\n\nАйко:\n- Эта река довольно быстрая и холодная, не хотелось бы упасть в неё. Но нам нужно на ту сторону, видишь те булыжники? По ним можно "перебежать" туда.\nАйко быстро пересекает реку по булыжникам и зовёт вас.`,
    keyboard: Keyboard.keyboard([
      [
      Keyboard.textButton({
        label: "1. Медленно шагать по камням",
        color: "secondary",
        payload: "21"
      })
    ],
    [
      Keyboard.textButton({
        label: "2. Повторять за Айко",
        color: "secondary",
        payload: "22"
      })
    ],
    [
      Keyboard.textButton({
        label: "Главное меню",
        color: "primary",
        payload: "project RQ"
      })
    ]
    ])
  })
})

vk.updates.hear(/^1. Медленно шагать по камням$/i, async (context) => {
  if(context.messagePayload != "21") return
  context.send(`Из-за сильного течения вы подскользнулись и упали`)
})

vk.updates.hear(/^2. Повторять за Айко$/i, async (context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload != "22") return
  user.quest += 1
  context.send(`Не так же быстро, но у вас получилось пересечь реку`)
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: `Айко:\n- Отлично, из-за того, что ты быстро перепрыгивал по камням, тебе пришлось растормошить свою реакцию. Думаю можно продолжить...\nАйко так же быстро достал клинки и заставил вас уворачиваться от атак. Всё быстрее двигались клинки, глаза казалось бы уже не поспевали за ними, тело само делало необходимые движения. Вы почувствали прилив сил. Теперь уворачиваться получалось легче, вы были сконцентрированы и могли уклониться от любой атаки.\nАйко:\n- Ага, значит почувствовал кроум. Чтож, ускоримся.\nАтаки становились всё быстрее и быстрее, однако этот самый кроум помогал вам. Уже привыкши к ритму атак Айко, вам не составляло труда уворачиваться. Но, в один момент, вы всё-таки упали.\nАйко:\n- Я ждал, когда ты ошибёшься, теперь ты должен понимать, что это состояние пика концентрации, то есть кроум, не такое неуязвимое, из-за него ты начинаешь делать движения вперёд нужного времени. Поэтому я должен научить тебя оставаться хладнокровным.\nВы продолжили тренировку до самого вечера...\n\nПосле такой тренировки вы сильно устали. Вместе с Айко вы сели под деревом у ручья.\nАйко:\n- Чтож, ты быстро учишься, и из тебя вышел хороший ученик.\nВы:\n- Спасибо, ведь у меня хороший учитель.\nАйко:\n- Ох не льсти мне, я всего лишь обучаю тебя основам моего учителя.\nВместе с Айко вы наслаждетесь приятным ветерком и вечерними лучами солнца. Кажется это тот момент когда можно завести хороший разговор...`,
    keyboard: Keyboard.keyboard([
      [
      Keyboard.textButton({
        label: "1. Спросить про всё связанное с культами",
        color: "secondary",
        payload: "23"
      })
    ],
    [
      Keyboard.textButton({
        label: "2. Спросить про самого Айко",
        color: "secondary",
        payload: "24"
      })
    ],
    [
      Keyboard.textButton({
        label: `3. "Какой у тебя рост?"`,
        color: "secondary",
        payload: "25"
      })
    ],
    [
      Keyboard.textButton({
        label: "Завершить 1-3",
        color: "secondary",
        payload: "project RQ"
      })
    ],
    [
      Keyboard.textButton({
        label: "Главное меню",
        color: "primary",
        payload: "project RQ"
      })
    ]
    ])
  })
})

vk.updates.hear(/^1. Спросить про всё связанное с культами$/i, async (context) => {
  if(context.messagePayload != "23") return
  context.send(`Давным давно... Во времена первых королей и зарождения нынешних цевелизаций жили два брата. Отец их был жесток и жестокость та передалась братьям. Старшего звали - Аргирис. Младшего - Никон. С детства они ненавидили друг друга, были вечными соперниками и врагами. Годы шли, дети стали юношами, юношы мужчинами..Но та злоба, что была зарождена пороком их жестокости, никуда не делась. Был у той злобы только один плюс, она помогла им стать легендарными воинами, безжалостными и яростными. На войне им не было равных, каждый знал, видишь герб одного из братьев - сдавайся без боя, ибо исход битвы предрешен до её начала. Все закончилось бы абсолютным завоеванием мира, но время забирало свое. Могучие войны чувствовали приближение старости. Тогда они оба решили похоронить свою злобу вместе с их душами в двух артефактах. Так и сгинули на долгие годы легендарные войны. Те самые артефакты были отданы двум культам. Культ Аргирис получил артефакт Никон, а культ Никон получил соответственно Аргирис. Тот кто первый сможет заполучить артефакт своего божества и вернуть его в наш мир, тот и одержит верх. К счастью или сожалению ни один из культов ещё не победил в этой многовековой войне. При этом каждый культ следует заповеди своей религии. Их как и братьев 2. Религия "Аригирис" и религия "Никон"`)
})

vk.updates.hear(/^2. Спросить про самого Айко$/i, async (context) => {
  if(context.messagePayload != "24") return
  context.send(`Хм, думаю стоит уже рассказать о себе.\nДетство к сожалению не выдалось. Мать ушла к другому, отец каждый день выпивал по этому поводу, а про нас и думать забыл.\nНас было четверо. 2 младших брата, Отто и Кори. Сестра - Рикка, и я.\nОтец был тем ещё слабаком, всё только жаловался на свою жизнь. А позже умер на очередной пьянке.\nНам с сестрой пришлось найти работу чтобы как-то жить. Устроились на верфь. Разгружали корабли, драили палубы, ну знаешь, грязная работёнка за копейки.\nОднажды сестре вздумалось стащить несколько сейлеров(местная валюта), пока мы разгружали очередное судно. Нас поймали, а потом жестоко избивали, оказалось владельцами судна были контрабандисты. Они издевались над нами, до того момента пока нас не спасли. Этот человек справился с несколькими контрабандистами, пользуясь лишь ножной от меча.\nПо его виду сразу не назовёшь возраст, не стар и не молод.\nПосле этого мы с сестрой отыскали его чтобы отблагодарить, а потом рассказали о нашей нелёгкой жизни. Он решил помочь нам, и взял нас с братьями и сестрой к себе. Он стал учить нас с сестрой разным боевым стилям. Его девиз был таков: "Сильные, используют свою силу чтобы помогать слабым, так устроен наш мир..."`)
})

vk.updates.hear(/^3. "Какой у тебя рост\?"$/i, async (context) => {
  if(context.messagePayload != "25") return
  context.send(`Хахахаха, удивился когда столкнулся со мной? Ну чтож, это не секрет, всего 190см. Знаешь, приятно смотреть на противника сверху вниз`)
})

vk.updates.hear(/^Завершить 1-3$/i, async (context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload != "project RQ") return
  user.money += 15000
  user.quest += 1
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: `----------------------------------------------\nГлава 1, Квест 3 завершён. Для перехода на Главу 2 и получения первого квеста достигните ❤894 ⚔197 🛡74\n----------------------------------------------\nЗа прохождение квеста вы получаете 💵15.000\n----------------------------------------------`,
    keyboard: Keyboard.keyboard([
      [
      Keyboard.textButton({
        label: "Профиль",
        color: "primary",
        payload: "project RQ"
      })
    ],
    [
      Keyboard.textButton({
        label: "Классы",
        color: "secondary",
        payload: "project RQ"
      }),
      Keyboard.textButton({
        label: "Умения",
        color: "secondary",
        payload: "project RQ"
      })
    ],
    [
      Keyboard.textButton({
        label: "Улучшения",
        color: "negative",
        payload: "project RQ"
      })
    ],
    [
      Keyboard.textButton({
        label: "Сюжет",
        color: "positive",
        payload: "project RQ"
      })
    ]
    ])
  })
})

vk.updates.hear(/^Откaзаться$/i, async (context) => {
  if(context.messagePayload == "26") {
  context.send(`Чувак, серьёзно? Здесь всего одна сюжетная линия, ты не можешь отказаться, лол...`)
  }
})

vk.updates.hear(/^Соглaситься$/i, async (context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload == "27") {
  user.quest += 1
  context.send(`Мария пообещала вам награду за задание, и объяснила его суть`)
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: `Направляясь к городским воротом до вас доносится шум. Какая-то парочка о чём-то спорит...\n\n- Да отдай уже!\n- Нет не отдам.\n- Я должен нести его!\n- Ты понесёшь свою зубочистку *указывает на меч*\n- Секретарша дала его нам обоим!\n- А я старше!\n- Какая разница, мы одного ранга!\n\nВы подходите к ним...\n\nВы:\n- Кхм, это вы новички из гильдии? Меня просили присоединиться к вам.\n\nКимми:\n- Да, всё верно. Меня зовут Кимми, а этот — пройдоха Тору.\nТору:\n- Эй почему это ты представляешь нас?\nКимми:\n- Сколько же повторять, я старше тебя.\nТору:\n- Это не имеет никакого значения!\nВы:\n- Если вы так не ладите, почему в одном отряде?\nТору:\n- Из-за моих способностей я должен состоять в отряде, одному мне странствовать нельзя. И теперь приходится терпеть эту выскочку.\nКимми:\n- Эй, как будто я хотела быть в одной команде с тобой. Я вообще не понимаю твоей роли, махать палкой любой дурак может.\nТору:\n- Хах, как будто выучить несколько строчек из книжки и произносить их с пафосным видом так сложно.\nКимми:\n- Ааа, терпеть тебя не могу. Как только в гильдии появятся новички - сразу же сменю напарника.\nТору:\n- Я тоже самое хотел сказать.\n*оба с надутым видом*\nВы:\n- Вам стоило бы попытаться поладить, из-за ссоры вы до сих пор не отправились на задание, поэтому меня прислали к вам. Кстати что вы не могли такое поделить?\nКимми:\n- А, этот камень дала нам секретарша, сказала что с его помощью можно узнать есть ли поблизости монстры или нет. Он чувствует маглименты внутри них, и светится когда они рядом. *сказала с умным видом*\nВы:\n- Понятно, ну раз вы не можете решить кто понесёт его, понесу его я. Да и рангом я выше.\n\nВместе с двоицей вы отправляетесь на совсем новый рудник, вблизи "Шепчущего леса". По словам рабочих, рядом могут водиться монстры, особо активны они ночью, как раз тогда когда рабочие добывают руду в шахтах. Поэтому ночью это место нужно патрулировать. Вы пришли на место ещё до сумерок. Поэтому отправились в лес за провизией...\n\nКимми:\n- ААА! *спряталась за Тору*\nТору:\n- А кто-то говорил что я бесполезен *с ухмылкой*\nКимми:\n- Идиот! Там кто-то есть. *указывает на кусты*\nТору:\n- А? *подошёл к кустам и всматривается*\nИз кустов выпрыгнул кабан и ударил Тору прямо в торс...\nКимми:\n- Хахахаха\nТору:\n*в бешенстве погнался за кабаном*\nЧерез некоторое время Тору вернулся с добычей, и вы разожгли костёр. Уже смеркалось, вы всей компанией ужинали у костра...\n\nКимми:\n- Эх, если бы я не заметила того кабана, мы не ели сейчас так вкусно.\nТору:\n- Что?! Я сделал всю работу один!\nКимми:\n- Да этот кабан чуть не забадал тебя ахахаха.\nТору:\n- Ах так, тогда отдавай его! *дерутся за мясо*\n\nПосидев ещё немного, вы замечаете что уже совсем стемнело. Рабочие просыпались, и отправлялись в шахты.\nРабочий:\n- Расчитываем на вас!\n\nВместе с Кимми и Тору, вы договорились что будете следить за камнем который вам дала Мария - поочереди. Первым были конечно же вы.\nНаблюдая за камнем было сложно не засыпать. Абсолютно никаких признаков на монстров поблизости. Кимми и Тору мило спали, хотя по лицам казалось что они спорят даже во сне...\nНеожиданно краем глаза вы замечаете какую-то фигуру, камень не загорался. Значит это определённо человек. Этот тип ошивался у шахт и что-то делал.`,
    keyboard: Keyboard.keyboard([
      [
      Keyboard.textButton({
        label: "Погнаться за силуэтом",
        color: "secondary",
        payload: "28"
      })
    ],
    [
      Keyboard.textButton({
        label: "Окликнуть силуэт",
        color: "secondary",
        payload: "29"
      })
    ],
    [
      Keyboard.textButton({
        label: "Разбудить Кимми и Тору",
        color: "secondary",
        payload: "30"
      })
    ],
    [
      Keyboard.textButton({
        label: "Главное меню",
        color: "primary",
        payload: "project RQ"
      })
    ]
    ])
  })
  }
})

vk.updates.hear(/^Погнаться за силуэтом$/i, async (context) => {
  if(context.messagePayload == "28") {
  context.send(`Как только вас заметили, человек попытался скрыться, вы преследовали его. Неожиданно случается взрыв на руднике...`)
  }
})

vk.updates.hear(/^Окликнуть силуэт$/i, async (context) => {
  if(context.messagePayload == "29") {
  context.send(`Тот, заметив вас, поспешил скрыться`)
  }
})

vk.updates.hear(/^Разбудить Кимми и Тору$/i, async (context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload == "30") {
  user.quest += 1
  context.send(`Вместе вы решаете незаметно подойти к незнакомцу с разных сторон`)
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: `Незаметно подобравшись, вы подходите к незнакомцу с трех сторон...\n\nВы:\n- Ты не похож на рабочего, кто ты?\nНезнакомец:\n*шёпотом* - Чёрт, меня заметили. А впрочем не важно.\nТору:\n- Эй так зачем ты здесь?!\n\nВдруг незнакомец бросил дымовую гранату. Пока дым рассеивался он успел исчезнуть. Вдруг вы замечаете какие-то искры. Это был подожённый фитиль, он вёл прямо в шахту. Вы быстро последовали за ним, оказалось он ведёт к пороховым бочкам что были заготовлены шахтёрами. Похоже тот тип решил устроить взрыв на руднике.`,
    keyboard: Keyboard.keyboard([
      [
      Keyboard.textButton({
        label: "Потушить водой",
        color: "secondary",
        payload: "31"
      })
    ],
    [
      Keyboard.textButton({
        label: "Начать выносить бочки",
        color: "secondary",
        payload: "32"
      })
    ],
    [
      Keyboard.textButton({
        label: "Перерубить фитиль",
        color: "secondary",
        payload: "33"
      })
    ],
    [
      Keyboard.textButton({
        label: "Главное меню",
        color: "primary",
        payload: "project RQ"
      })
    ]
    ])
  })
  }
})

vk.updates.hear(/^Потушить водой$/i, async (context) => {
  if(context.messagePayload == "31") {
  context.send(`Кимми пыталась, но воды не достаточно чтобы его потушить`)
  }
})

vk.updates.hear(/^Начать выносить бочки$/i, async (context) => {
  if(context.messagePayload == "32") {
  context.send(`Не особо хорошая идея, фитиль сгорал крайне быстро`)
  }
})

vk.updates.hear(/^Перерубить фитиль$/i, async (context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload == "33") {
  user.quest += 1
  context.send(`Тору быстро отрезал огню путь к пороху`)
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: `После этого вы поспешили найти того человека. Однако долго искать не пришлось...\n\nРазбойник:\n- Агхаа, Гром будет в ярости! Вы пожалеете что оказались здесь!\nВы:\n- Так значит ты человек Грома, зачем тебе понадобилось взрывать рудник?!\nРазбойник:\n- Не твоё дело щенок!\n*бой*\n\nРазбойник сильно недооценил искателей приключений, и теперь терпит поражение. Однако ему хватило ещё сил чтобы сделать рывок с кинжалом в сторону Кимми. "Хотя бы одного я заберу с собой!" с этими словами он уже хотел было нанести удар, но его попытался отразить мечом Тору и разбойник ранил его в плечо. Однако Тору смог нанести ему последний удар...\n\nТору:\n*лёжа на земле с предсмертным видом*\n- Видимо мои приключения закончились не начавшись. Передайте сестре, что я люблю её...\nКимми:\n- Эй. Не разводи трагедию. *исцеляет Тору*\n\nКогда рабочие вышли из шахт вы объяснили им что здесь произошло. А после отправились в город. В гильдии вы доложили о случившемся на руднике. По словам главы, рудник видимо чем-то мешает Грому, и тот решил сразу же избавиться от него. Гильдия предпримет меры по этому поводу.`,
    keyboard: Keyboard.keyboard([
      [
      Keyboard.textButton({
        label: "Завершить 2-1",
        color: "secondary",
        payload: "project RQ"
      })
    ],
    [
      Keyboard.textButton({
        label: "Главное меню",
        color: "primary",
        payload: "project RQ"
      })
    ]
    ])
  })
  }
})

vk.updates.hear(/^Завершить 2-1$/i, async (context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload != "project RQ") return
  user.money += 20000
  user.quest += 1
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: `----------------------------------------------\nГлава 2, Квест 1 завершён. Для получения второго квеста достигните ❤1258 ⚔298 🛡107\n----------------------------------------------\nЗа прохождение квеста вы получаете 💵20.000\n----------------------------------------------`,
    keyboard: Keyboard.keyboard([
      [
      Keyboard.textButton({
        label: "Профиль",
        color: "primary",
        payload: "project RQ"
      })
    ],
    [
      Keyboard.textButton({
        label: "Классы",
        color: "secondary",
        payload: "project RQ"
      }),
      Keyboard.textButton({
        label: "Умения",
        color: "secondary",
        payload: "project RQ"
      })
    ],
    [
      Keyboard.textButton({
        label: "Улучшения",
        color: "negative",
        payload: "project RQ"
      })
    ],
    [
      Keyboard.textButton({
        label: "Сюжет",
        color: "positive",
        payload: "project RQ"
      })
    ]
    ])
  })
})

vk.updates.hear(/^Мария хочет, чтобы вы купили ей продукты$/i, async (context) => {
  if(context.messagePayload == "34") {
  context.send(`Ты сейчас совсем не читал, так ведь?...`)
  }
})

vk.updates.hear(/^Мария хочет, чтобы вы подменили её$/i, async (context) => {
  if(context.messagePayload == "35") {
  context.send(`Почти, но нет`)
  }
})

vk.updates.hear(/^Мария хочет, чтобы вы помогли новичкам$/i, async (context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload == "36") {
  user.quest += 1
  context.send(`Вы поприветствовали новичков однако они были слишком увлечены спором...`)
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: `Мария дала вам лист с поручением. Оно заключалась в том чтобы ликвидировать тушу небольшого дракона сгинувшего недалеко от города. Это нужно сделать как можно скорее дабы тело не начало разлагаться и не заразило порчей всю округу. Условия: нельзя сжигать, а так же сбрасывать останки в реку.\n\nПосле долгого спора оба отвернулись друг от друга с надутым видом. Теперь можно отправляться на задание. Взяв Кимми и Тору вы поспешили.\n\nКимми: *ворчит*\n- Совсем скоро в гильдии появятся новички и я сменю напарника.\nТору:\n- Ну вообще-то это я сменю тебя.\nКимми:\n- Нет, я буду первее, а ты останешься один.\nТору:\n- Увы, одна останешься ты. Даже не знаю, что ты будешь делать без меня...\nКимми:\n- Хаха, это что ТЫ, будешь делать без меня. Ведь я тогда спасла тебя.\nТору:\n- Эй! Если бы не я, ты бы откинулась на первом же задании! Выходит спасал тебя я, а не ты меня.\nКимми:\n- Ааа бесишь, бесишь, бесишь!\n\nНаконец-то вы добрались до места назначения и нашли останки дракона. Приблизившись к туше, из неё вдруг начала выбираться живность, от происходящего по шее тёк холодный пот. Не самое приятное зрелище...\nПохоже мелких монстров привлекли маглименты дракона. Даже поверженный дракон представляет опасность...\n\nВместе с Кимми и Тору вы разобрались с монстрами. Однако теперь возник вопрос, как транспортировать тело, и куда?`,
    keyboard: Keyboard.keyboard([
      [
      Keyboard.textButton({
        label: "Выбросить тушу в реку",
        color: "secondary",
        payload: "37"
      })
    ],
    [
      Keyboard.textButton({
        label: "Сбросить тушу в овраг у горы Плауст",
        color: "secondary",
        payload: "38"
      })
    ],
    [
      Keyboard.textButton({
        label: "Закопать тушу",
        color: "secondary",
        payload: "39"
      })
    ],
    [
      Keyboard.textButton({
        label: "Главное меню",
        color: "primary",
        payload: "project RQ"
      })
    ]
    ])
  })
  }
})

vk.updates.hear(/^Выбросить тушу в реку$/i, async (context) => {
  if(context.messagePayload == "37") {
  context.send(`Заражение порчей распростронится по реке, а это очень плохо`)
  }
})

vk.updates.hear(/^Закопать тушу$/i, async (context) => {
  if(context.messagePayload == "39") {
  context.send(`Копать придётся довольно долго, примерно неделю а может две...`)
  }
})

vk.updates.hear(/^Сбросить тушу в овраг у горы Плауст$/i, async (context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload == "38") {
  user.quest += 1
  context.send(`Если вспомнить, то гора Плауст богата солью, которая не даст распространяться порче`)
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: `Гора была не так близко. Теперь, стоит придумать, как транспортировать туда останки дракона. Втроём вы долго думали над этим. Однако у Кимми появилась идея. Можно разделить тело на несколько частей, а потом заморозить. Эта идея не такая плохая.\nВы с Тору отправляетесь за повозкой в ближайшую деревню, пока Кимми будет замораживать останки.\nЗа повозку пришлось заплатить. По вашему приходу Кимми уже закончила. Погрузивши части дракона, вы повезли их к горе. Кимми поддерживала замороженное состояние дракона, а вы с Тору тянули повозку.\n\nНаконец-то добравшись до горы, вы нашли большой овраг. Куда со спокойной душой скинули останки. Теперь можно возвращаться в гильдию.\n\nТору:\n- Эх, было довольно быстро\nКимми:\n- Да\nТору:\n- Да и как-то просто\nКимми:\n- Да\nТору:\n- Тору мой хозяин и повелитель\nКимми:\n- Да...\nТору:\n- Ахаха что с тобой? Эй\nКимми:\n- ...\n\nКажется Кимми выбилась из сил, что чуть ли не засыпала. Видимо всё из-за поддержания замороженного состояния.\n\nКогда вы выходили из под горы. То внезапно на вас напали монстры, которые видимо почуяли маглименты дракона.\nКогда вы выходили из под горы. То внезапно на вас напали монстры, которые видимо почуяли маглименты дракона.\nТеперь вы сражаетесь с чудовищами одни. Было несколько тяжело, и не обошлось без ран. Однако, вы справились.\nПосле пришлось найти Тору с Кимми.\nКимми по немногу приходила в себя. Но Тору пришлось нести её на себе, так как у неё просто не было сил на ходьбу.\n\nПо возвращении в гильдию, Кимми полностью пришла в себя...\nКимми:\n- Эй, я в порядке, могу идти сама.\nТору:\n- Может ещё что-то скажешь?\nКимми:\n- Спасибо. Так, погоди. Ты ведь ничего не делал со мной пока я была без сознания?!\nТору:\n- Конечно нет. Эй скажи ей`,
    keyboard: Keyboard.keyboard([
      [
      Keyboard.textButton({
        label: "Он трогал тебя за грудь",
        color: "secondary",
        payload: "40"
      })
    ],
    [
      Keyboard.textButton({
        label: "Он делал тебе искусственное дыхание",
        color: "secondary",
        payload: "41"
      })
    ],
    [
      Keyboard.textButton({
        label: "Он совсем ничего не делал",
        color: "secondary",
        payload: "42"
      })
    ],
    [
      Keyboard.textButton({
        label: "Завершить 2-2",
        color: "secondary",
        payload: "project RQ"
      })
    ],
    [
      Keyboard.textButton({
        label: "Главное меню",
        color: "primary",
        payload: "project RQ"
      })
    ]
    ])
  })
  }
})

vk.updates.hear(/^Он трогал тебя за грудь$/i, async (context) => {
  if(context.messagePayload == "40") {
  context.send(`Кимми была в бешенстве, и кажется начала произносить какое-то заклинание в адрес Тору`)
  }
})

vk.updates.hear(/^Он делал тебе искусственное дыхание$/i, async (context) => {
  if(context.messagePayload == "41") {
  context.send(`Кимми покраснела, и кажется была готова убить Тору`)
  }
})

vk.updates.hear(/^Он совсем ничего не делал$/i, async (context) => {
  if(context.messagePayload == "42") {
  context.send(`Кимми успокоилась`)
  }
})

vk.updates.hear(/^Завершить 2-2$/i, async (context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload != "project RQ") return
  user.money += 25000
  user.quest += 1
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: `----------------------------------------------\nГлава 2, Квест 2 завершён. Для получения второго квеста достигните ❤1652 ⚔423 🛡140\n----------------------------------------------\nЗа прохождение квеста вы получаете 💵25.000\n----------------------------------------------`,
    keyboard: Keyboard.keyboard([
      [
      Keyboard.textButton({
        label: "Профиль",
        color: "primary",
        payload: "project RQ"
      })
    ],
    [
      Keyboard.textButton({
        label: "Классы",
        color: "secondary",
        payload: "project RQ"
      }),
      Keyboard.textButton({
        label: "Умения",
        color: "secondary",
        payload: "project RQ"
      })
    ],
    [
      Keyboard.textButton({
        label: "Улучшения",
        color: "negative",
        payload: "project RQ"
      })
    ],
    [
      Keyboard.textButton({
        label: "Сюжет",
        color: "positive",
        payload: "project RQ"
      })
    ]
    ])
  })
})

vk.updates.hear(/^(?:Да, конечно|Ну, хорошо|Отказываю)$/i, async (context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload == "43") {
  user.quest += 1
  context.send(`Парочка светилась от счастья`)
  }
  if(context.messagePayload == "44") {
  user.quest += 1
  context.send(`Парочка светилась от счастья`)
  }
  if(context.messagePayload == "45") {
  user.quest += 1
  context.send(`У тебя нет сердца, поэтому автор сюжета решил всё за тебя и ты согласился`)
  }
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: `Создать отряд было не так тяжело, а Мария была очень рада. По её словам она боялась за этих двоих, однако теперь с вами у них больше шансов не погибнуть... Как говорится: "Хороший искатель приключений - живой искатель приключений.\n\nКимми и Тору выглядели ещё не восстановившимися после вчерашнего задания, да и вы сами имели пару ран. Поэтому, было принято решение взять задание в стенах города.\nВместе вы отправились на стройку новой винокурни, работа заключалась в разгрузке стройматериалов.\n\nСолнце светило ярко, а из-за отсутствия ветра стоял зной. Тору успев поранить уже несколько пальцев, выбился из сил...\n\nКимми:\n- Эй, ты чего отлыниваешь?!\nТору:\n- Я, в отличие от тебя, носил груза куда больше.\nКимми:\n- Тебя не просили носить кирпичи. Аргонавт ты наш.\nТору:\n- Киммиии, ну используй пожалуйста восстановление на мне.\nКимми:\n- Ещё чего, я не использую заклинания на такую чепуху.\nТору:\n- Эй, тебя не учили, что друзья важнее своих принципов?\nКимми:\n- Ааааа, ладно, иначе ты не отстанешь.\nТору:\n- О богиня, благослови же меня. (С пафосом и на коленях сказал Тору)\n\nПосле восстановления Тору заметно стало лучше. И работа пошла быстрее\n\nСолнце наконец-то стало заходить, а рабочие часы закончились. Все получили плату за работу. Однако на Кимми и Тору будто лица не было...\n\nКимми:\n- Я и до этого в гильдии не много получала, но здесь вообще 1/2 от той суммы...\nГлавный строитель:\n- Здесь не нужно рисковать жизнью, чтобы получить плату. Если хотите больше денег, берите задания ранга S (С недовольством ответил строитель)\nС недовольной парочкой вы уходите со стройки.\nВы думаете над тем, чтобы сходить куда-то после тяжёлого рабочего дня...`,
    keyboard: Keyboard.keyboard([
      [
      Keyboard.textButton({
        label: "Сходить в закусочную",
        color: "secondary",
        payload: "46"
      })
    ],
    [
      Keyboard.textButton({
        label: "Сходить на фонтанную площадь",
        color: "secondary",
        payload: "47"
      })
    ],
    [
      Keyboard.textButton({
        label: "Сходить в бар",
        color: "secondary",
        payload: "48"
      })
    ],
    [
      Keyboard.textButton({
        label: "Главное меню",
        color: "primary",
        payload: "project RQ"
      })
    ]
    ])
  })
})

vk.updates.hear(/^Сходить на фонтанную площадь$/i, async (context) => {
  if(context.messagePayload == "47") {
  context.send(`Вы слишком уставшие чтобы гулять...`)
  }
})

vk.updates.hear(/^Сходить в бар$/i, async (context) => {
  if(context.messagePayload == "48") {
  context.send(`Слишком большой шанс оставить там все деньги...`)
  }
})

vk.updates.hear(/^Сходить в закусочную$/i, async (context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload == "46") {
  user.quest += 1
  context.send(`Как раз кстати, ведь все очень голодны`)
  }
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: `Зайдя в трактир, вы садитесь за первый же столик. У вас принимают заказ...\nВы:\n- Куриный шашлычок с грибами, сливочное рагу, мятный салат, и виноградный эль, пожалуйста.\nОфициантка:\nХорошо, а чего желаете вы?\nТору долго всматривался в меню, и наконец-то ответил:\n- Кхм, лапшу пожалуйста.\nОфициантка:\n- Ещё что-то?\nТору:\n- Стакан воды.\nОфициантка:\n- А чего...\nНе дав ей договорить, Кимми сразу ответила:\n- Мне то же, что и ему.\n\nВсю трапезу вам было неловко есть, ведь ваш ужин казался куда роскошнее чем простая лапша...\n\nВы решили предложить Кимми и Тору разделить ужин, но они вежливо отказали`,
    keyboard: Keyboard.keyboard([
      [
      Keyboard.textButton({
        label: "Повторно предложить",
        color: "secondary",
        payload: "49"
      })
    ],
    [
      Keyboard.textButton({
        label: "Как можно скорее закончить есть",
        color: "secondary",
        payload: "50"
      })
    ],
    [
      Keyboard.textButton({
        label: "Главное меню",
        color: "primary",
        payload: "project RQ"
      })
    ]
    ])
  })
})

vk.updates.hear(/^(?:Повторно предложить|Как можно скорее закончить есть)$/i, async (context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload == "49") {
  user.quest += 1
  context.send(`На этот раз они не смогли отказать вам, и вы все вместе вдоволь наелись`)
  }
  if(context.messagePayload == "50") {
  user.quest += 1
  context.send(`Поев, вы вышли из трактира`)
  }
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: `Вас мучил вопрос, почему они выбрали такой скромный ужин.\nВы:\n- Кимми, Тору, почему вы так мало заказали?\nКимми:\n- Кхм, я забыла деньги дома, а плата за работу действительно очень маленькая.\nТору:\n- Может хватит притворяться? Ты не могла забыть то, чего нет.\nКимми:\n- А сам то почему одну лапшу взял?\nТору:\n- Кхм, финансовые трудности.\nКимми:\n- И давно они у тебя?\nТору:\n- Хорошо-хорошо, я тоже на мели. Мои изначальные запасы кончились совсем недавно.\nКимми:\n- Мои тоже...\nВы:\n- А здесь вы очень похожи.\nТору:\n- Я взял деньги у отца, и надеялся что этого хватит на первое время. Оказалось что нет, но я не собираюсь возвращаться к нему!\nКимми:\n- Ого... Действительно похожи. У меня был такой же план, когда уходила из дома. Но кто знал что деньги так быстро кончаются...\nИ да, я не намерена возвращаться.\nВы:\n- А где вы ночуете?\nТору:\n- На сеновале...\nКимми:\n- ...\nВы:\n- Ну что же, раз мы теперь отряд, почему бы нам не спать под одной крышей?`,
    keyboard: Keyboard.keyboard([
      [
      Keyboard.textButton({
        label: "Отправиться втроём на сеновал",
        color: "secondary",
        payload: "51"
      })
    ],
    [
      Keyboard.textButton({
        label: "Пригласить Кимми и Тору к себе домой",
        color: "secondary",
        payload: "52"
      })
    ],
    [
      Keyboard.textButton({
        label: "Главное меню",
        color: "primary",
        payload: "project RQ"
      })
    ]
    ])
  })
})

vk.updates.hear(/^Отправиться втроём на сеновал$/i, async (context) => {
  if(context.messagePayload == "51") {
  context.send(`Серьёзно?🙄`)
  }
})

vk.updates.hear(/^Пригласить Кимми и Тору к себе домой$/i, async (context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload == "52") {
  user.quest += 1
  context.send(`Вы сказали Кимми и Тору следовать за собой`)
  }
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: `Подойдя к дому, вы приглашаете парочку зайти\nТору:\n- Что это за место?\nВы:\n- Мой дом\nКимми:\n- Чтоо?! Вы и так слишком много сделали для нас`,
    keyboard: Keyboard.keyboard([
      [
      Keyboard.textButton({
        label: `Перейдём на "Ты"`,
        color: "secondary",
        payload: "53"
      })
    ],
    [
      Keyboard.textButton({
        label: "Ничего, мы же теперь отряд",
        color: "secondary",
        payload: "54"
      })
    ],
    [
      Keyboard.textButton({
        label: "Это мелочи, вы заслужили",
        color: "secondary",
        payload: "55"
      })
    ],
    [
      Keyboard.textButton({
        label: "Главное меню",
        color: "primary",
        payload: "project RQ"
      })
    ]
    ])
  })
})

vk.updates.hear(/^(?:Перейдём на "Ты"|Ничего, мы же теперь отряд|Это мелочи, вы заслужили)$/i, async (context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload == "53" || "54" || "55") {
  user.quest += 1
  }
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: `Так как в доме было лишь 2 комнаты, вы выделили парочке самую большую из них, и сказали обустроиться там. Все дружно, вы заснули крепким сном после тяжёлого дня`,
    keyboard: Keyboard.keyboard([
      [
      Keyboard.textButton({
        label: "Завершить 2-3",
        color: "secondary",
        payload: "project RQ"
      })
    ],
    [
      Keyboard.textButton({
        label: "Главное меню",
        color: "primary",
        payload: "project RQ"
      })
    ]
    ])
  })
})

vk.updates.hear(/^Завершить 2-3$/i, async (context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload != "project RQ") return
  user.money += 30000
  user.quest += 1
  await vk.api.messages.send({
    peer_id: context.peerId,
    message: `----------------------------------------------\nГлава 2, Квест 3 завершён. Для получения второго квеста достигните ❤1855 ⚔451 🛡155\n----------------------------------------------\nЗа прохождение квеста вы получаете 💵30.000\n----------------------------------------------`,
    keyboard: Keyboard.keyboard([
      [
      Keyboard.textButton({
        label: "Профиль",
        color: "primary",
        payload: "project RQ"
      })
    ],
    [
      Keyboard.textButton({
        label: "Классы",
        color: "secondary",
        payload: "project RQ"
      }),
      Keyboard.textButton({
        label: "Умения",
        color: "secondary",
        payload: "project RQ"
      })
    ],
    [
      Keyboard.textButton({
        label: "Улучшения",
        color: "negative",
        payload: "project RQ"
      })
    ],
    [
      Keyboard.textButton({
        label: "Сюжет",
        color: "positive",
        payload: "project RQ"
      })
    ]
    ])
  })
})

vk.updates.hear(/^(?:Перейти к следующему квесту|Продолжить прохождение сюжета)$/i, async (context) => {
  const user = users.filter(x => x.id === context.senderId)[0]
  if(context.messagePayload != "project RQ") return
  if(user.quest == 1) {
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: "Подъезжая к тому месту где вас ограбили, вы чувствуете неладное. Из-за холма слышатся голоса. Перевозчик останавливается, а вы карабкаетесь на холм наблюдая следующее...\n\nРазбойник 1:\n- Ты видимо не вдупляешь паренёк.\nРазбойник 2:\n- Для такого сопляка как ты, храбрость не к лицу.\nНезнакомец\n- ...\nРазбойник 3:\n- Ладно ребят, очевидно он не понимает в какой ситуации находится.\n\nРазбойники нападают на незнакомца. Но тот быстро обнажает клинки необычной формы и вступает в схватку. Быстрыми и ловкими движениями он обезоруживает всех врагов. Раньше вы не видели ничего подобного и были изумлены движениями этого человека.\n\nВыберите дальнейшее действие",
      keyboard: Keyboard.keyboard([
        [
        Keyboard.textButton({
          label: "1. Распросить незнакомца",
          color: "secondary",
          payload: "4"
        })
      ],
      [
        Keyboard.textButton({
          label: "2. Избежать контакта",
          color: "secondary",
          payload: "5"
        })
      ],
      [
        Keyboard.textButton({
          label: "3. Напасть на незнакомца",
          color: "secondary",
          payload: "6"
        })
      ],
      [
        Keyboard.textButton({
          label: "Главное меню",
          color: "primary",
          payload: "project RQ"
        })
      ]
      ])
    })
  }
  if(user.quest == 2) {
    if(user.hp < 432) return context.send(`Необходимо повысить здоровье до ❤432`)
    if(user.atk < 87) return context.send(`Необходимо повысить атаку до ⚔87`)
    if(user.def < 36) return context.send(`Необходимо повысить защиту до 🛡36`)
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: "С момента вашего 1 задания уже прошло около 2-ух месяцев, и вы добились повышения на пару ступень. Теперь, вы уже не просто новичок.\n\nРанним утром вы встречаете вашего знакомого искателя приключений. Это Рокки, он начал свои приключения чуть раньше вас. А так же был на 1 ступень выше. Он был несколько неуклюж, но довольно усердным. На задания он часто отправлялся с опытными искателями, и не редко получал похвалу от них. За что вскоре и был повышен.\n\nРокки:\n- Привет, такое дело, не хочешь отправиться на задание со мной? Раньше я не ходил на задания один, поэтому очень непривычно. Миссию, что я выбрал, никто не берет долгое время, и никто не хочет идти со мной по причине её малой информации. Может быть ты согласишься?",
      keyboard: Keyboard.keyboard([
        [
        Keyboard.textButton({
          label: "Отказаться",
          color: "secondary",
          payload: "6"
        })
      ],
      [
        Keyboard.textButton({
          label: "Согласиться",
          color: "secondary",
          payload: "7"
        })
      ],
      [
        Keyboard.textButton({
          label: "Главное меню",
          color: "primary",
          payload: "project RQ"
        })
      ]
      ])
    })
  }
  if(user.quest == 3) {
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: "Дорога до места назначения заняла половину дня. Это была деревня, по словам Рокки в задании было сказано что тут пропали трое юношей, и с их пропажи прошло 2 недели. Жители очень обеспокоенны.",
      keyboard: Keyboard.keyboard([
        [
        Keyboard.textButton({
          label: "Опросить местных об этом",
          color: "secondary",
          payload: "8"
        })
      ],
      [
        Keyboard.textButton({
          label: "Главное меню",
          color: "primary",
          payload: "project RQ"
        })
      ]
      ])
    })
  }
  if(user.quest == 4) {
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: "Рокки:\n- Ну, хоть уже что-то. Давай отправляться.\n\nУже вечерело. Вы решили сперва осмотреть руины снаружи, а потом внутри. Ничего необычного. Наступили сумерки. Как только тень горизонта накрыла весь храм, вам стало не по себе. Внутри стало очень темно. Вы поспешили уходить, но замечаете девочку в зале. Вместе с Рокки вы в недоумении. Девочка задумчиво смотрит на вас. После минутных гляделок девочка засмеялась и засмущённо опустила взгляд. А через мгновенье перед вами предстала девушка. Милая улыбка и невинные глаза. А так же идеальное тело. Ни один юноша не сможет устоять перед такой красотой, она поистенне прекрасна. Мягкими и неслышными шагами она стала подходить к вам.\nВы замечаете что Рокки буквально отключился и не слышит вас, вы понимаете что это может плохо кончится\nВыберите дальнейшее действие",
      keyboard: Keyboard.keyboard([
        [
        Keyboard.textButton({
          label: "1. Поспешить в деревню за помощью",
          color: "secondary",
          payload: "12"
        })
      ],
      [
        Keyboard.textButton({
          label: "2. Ударить Рокки",
          color: "secondary",
          payload: "13"
        })
      ],
      [
        Keyboard.textButton({
          label: "3. Приглядеться к девушке",
          color: "secondary",
          payload: "14"
        })
      ],
      [
        Keyboard.textButton({
          label: "Главное меню",
          color: "primary",
          payload: "project RQ"
        })
      ]
      ])
    })
  }
  if(user.quest == 5) {
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: `Вы сказали Рокки чтобы тот не смотрел на девушку, это кажется ловушкой. Вы предпологаете что по её вине пропали и те трое юношей. Не смотря на девушку, вы спрашиваете как её зовут.\nДевушка:\n- Этель\nРокки:\n- Это из-за тебя пропали те трое?\nЭтель:\n- Да, это я усыпила их.\nРокки:\n- Зачем, зачем ты это сделала?!\nЭтель:\n- П-потому что...\nОна замолчала на некоторое время...\nЭтель:\n"Мне пришлось, о-они сказали что тогда отпустят меня!" — Разрыдавшись прокричала она.\nРокки:\n- Кто это, они?\nЭтель:\n- Культ Аригирис, они оставили мою душу здесь, и сказали, что чем больше юнош я смогу усыпить для них, тем скорее меня отпус...\n\nНе успевши договорить, Этель застыла, а после словно рассыпалась в воздухе.\nГолос:\n- Слишком болтлива, но с делом справилась. Ещё 2 есть.\nПеред вами оказывается группа культистов. К вашему удивлению среди них был Айко, он узнал вас и тоже был не меньше удивлён.\nСлужитель культа Аргирис:\n- У вас есть выбор, любезно принять этот усыпляющий порошок или же умереть мучительной смертью.\nАйко:\n- Хэй хэй, не думаешь, что девчонка итак неплохо справилась, можно и отпустить этих мальцов.\nСлужитель культа:\n- Что ты несёшь? Айко, если это твоя очередная выходка то у тебя будет совсем другой разговор с боссом.\n\nПока Айко говорил с культистами вы решаете что-то делать`,
      keyboard: Keyboard.keyboard([
        [
        Keyboard.textButton({
          label: "1. Попытаться сбежать",
          color: "secondary",
          payload: "15"
        })
      ],
      [
        Keyboard.textButton({
          label: "2. Атаковать культистов",
          color: "secondary",
          payload: "16"
        })
      ],
      [
        Keyboard.textButton({
          label: "Главное меню",
          color: "primary",
          payload: "project RQ"
        })
      ]
      ])
    })
  }
  if(user.quest == 6) {
    if(user.hp < 621) return context.send(`Необходимо повысить здоровье до ❤621`)
    if(user.atk < 130) return context.send(`Необходимо повысить атаку до ⚔130`)
    if(user.def < 52) return context.send(`Необходимо повысить защиту до 🛡52`)
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: `И так, уже ранним утром вы отправляетесь в департамент по делам граждан, именно туда вам сегодня нужно, дабы взять задание и встретиться с Айко за стенами города. По приходу туда у вас есть небольшой выбор среди просьб жителей города.`,
      keyboard: Keyboard.keyboard([
        [
        Keyboard.textButton({
          label: "1. Разгрузка товарных повозок",
          color: "secondary",
          payload: "17"
        })
      ],
      [
        Keyboard.textButton({
          label: "2. Доставка семян одуванчиков",
          color: "secondary",
          payload: "18"
        })
      ],
      [
        Keyboard.textButton({
          label: "Главное меню",
          color: "primary",
          payload: "project RQ"
        })
      ]
      ])
    })
  }
  if(user.quest == 7) {
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: `Вы очень быстро доставили семена какой-то старушке, кто знает зачем они ей...\nИ так, теперь вы вне города и у вас есть целый день впереди. Вспоминая последнюю встречу с Айко, вы так же вспоминаете, что по уходу он показал на подножие горы "Плауст", и сказал, что найти его можно будет там.\nНемедля вы отправляетесь туда.\n\nЛишь валуны и мёртвые деревья встречались вам у подножия горы. Это вас не удивило, ведь здесь находятся месторождения соли.\n\nОбойдя это место вы не находите никого. Время близится к полудню, а солнце печёт сильнее с каждой минутой.\nВаше терпение подходит к концу`,
      keyboard: Keyboard.keyboard([
      [
        Keyboard.textButton({
          label: "1. Отправиться домой",
          color: "secondary",
          payload: "19"
        }),
      ],
      [
        Keyboard.textButton({
          label: "2. Ждать",
          color: "secondary",
          payload: "20"
        })
      ],
      [
        Keyboard.textButton({
          label: "Главное меню",
          color: "primary",
          payload: "project RQ"
        })
      ]
      ])
    })
  }
  if(user.quest == 8) {
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: `Встав с булыжника вы поворачиваетесь и идёте обратно, оглядываясь назад. Неожиданно вы врезаетесь во что-то, а если точнее в чью-то грудь...\nПеред вами человек высокого роста, с рыжими волосами и приятной улыбкой на лице - Айко...\nАйко:\n- Хахахаха, извини уж, заблудился на жизненном пути так сказать.\nВы:\n- ...\nАйко:\n- Как и обещал, я потренирую тебя. Но результат зависит только от тебя самого.\n\nВы следуете за Айко. Место куда он вас привёл было очень приятным. Много тени от листвы деревьев, а рядом ручей. Вы с Айко присели у ручья...\n\nАйко:\n- Итак, скажи мне, на чём строится твоя сила?\nВы:\n- ...\nАйко:\n- Хм, не задумывался?\nСила зависит от твоего желания, а именно желания сражаться. В голове ты должен представлять каждое своё движение перед тем, как совершить его, и оно должно быть успешным. После нескольких таких движений, тебя должен охватить "Кроум"\nВы:\n- Кроум?\nАйко:\n- Это что-то вроде воодушевления, страсти битвы по-другому. Как только это чувство охватывает тебя, всё, что ты делаешь, у тебя получается. Движения, ритм дыхания, все это синхронизируется.\nСловом, это прекрасное чувство, которое усиливает тебя. Словом, это прекрасное чувство, которое усиливает тебя. Однако, если забыться и полностью полагаться на него, то ты можешь совершить смертельную ошибку.\nНо не волнуйся, это грозит одержимым сумасбродам. Я же научу тебя контролировать себя в этом состоянии.\nОтлично, давай приступим!\n\nАйко достал клинки не вынимая их из ножн.\nАйко:\n- А теперь, уворачивайся от моих атак!\nМолниеносно он приблизился к вам и сразу же целился в голову. К счастью вы успели пригнуться, однако после этого вас ждала подсечка и вы упали.\nАйко:\n- Хм, думаю стоит размяться, чтобы повысить твою реакцию.\n\nВместе вы идёте к реке.\n\nАйко:\n- Эта река довольно быстрая и холодная, не хотелось бы упасть в неё. Но нам нужно на ту сторону, видишь те булыжники? По ним можно "перебежать" туда.\nАйко быстро пересекает реку по булыжникам и зовёт вас.`,
      keyboard: Keyboard.keyboard([
        [
        Keyboard.textButton({
          label: "1. Медленно шагать по камням",
          color: "secondary",
          payload: "21"
        })
      ],
      [
        Keyboard.textButton({
          label: "2. Повторять за Айко",
          color: "secondary",
          payload: "22"
        })
      ],
      [
        Keyboard.textButton({
          label: "Главное меню",
          color: "primary",
          payload: "project RQ"
        })
      ]
      ])
    })
  }
  if(user.quest == 9) {
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: `Айко:\n- Отлично, из-за того, что ты быстро перепрыгивал по камням, тебе пришлось растормошить свою реакцию. Думаю можно продолжить...\nАйко так же быстро достал клинки и заставил вас уворачиваться от атак. Всё быстрее двигались клинки, глаза казалось бы уже не поспевали за ними, тело само делало необходимые движения. Вы почувствали прилив сил. Теперь уворачиваться получалось легче, вы были сконцентрированы и могли уклониться от любой атаки.\nАйко:\n- Ага, значит почувствовал кроум. Чтож, ускоримся.\nАтаки становились всё быстрее и быстрее, однако этот самый кроум помогал вам. Уже привыкши к ритму атак Айко, вам не составляло труда уворачиваться. Но, в один момент, вы всё-таки упали.\nАйко:\n- Я ждал, когда ты ошибёшься, теперь ты должен понимать, что это состояние пика концентрации, то есть кроум, не такое неуязвимое, из-за него ты начинаешь делать движения вперёд нужного времени. Поэтому я должен научить тебя оставаться хладнокровным.\nВы продолжили тренировку до самого вечера...\n\nПосле такой тренировки вы сильно устали. Вместе с Айко вы сели под деревом у ручья.\nАйко:\n- Чтож, ты быстро учишься, и из тебя вышел хороший ученик.\nВы:\n- Спасибо, ведь у меня хороший учитель.\nАйко:\n- Ох не льсти мне, я всего лишь обучаю тебя основам моего учителя.\nВместе с Айко вы наслаждетесь приятным ветерком и вечерними лучами солнца. Кажется это тот момент когда можно завести хороший разговор...`,
      keyboard: Keyboard.keyboard([
        [
        Keyboard.textButton({
          label: "1. Спросить про всё связанное с культами",
          color: "secondary",
          payload: "23"
        })
      ],
      [
        Keyboard.textButton({
          label: "2. Спросить про самого Айко",
          color: "secondary",
          payload: "24"
        })
      ],
      [
        Keyboard.textButton({
          label: `"Какой у тебя рост?"`,
          color: "secondary",
          payload: "25"
        })
      ],
      [
        Keyboard.textButton({
          label: "Завершить 1-3",
          color: "secondary",
          payload: "project RQ"
        })
      ],
      [
        Keyboard.textButton({
          label: "Главное меню",
          color: "primary",
          payload: "project RQ"
        })
      ]
      ])
    })
  }
  if(user.quest == 10) {
      if(user.hp < 894) return context.send(`Необходимо повысить здоровье до ❤894`)
      if(user.atk < 197) return context.send(`Необходимо повысить атаку до ⚔197`)
      if(user.def < 74) return context.send(`Необходимо повысить защиту до 🛡74`)
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: `Это был самый обычный день, ровно до того момента пока секретарь гильдии искателей приключений - Мария, не обратилась к вам с просьбой...\nМария:\n- Совсем недавно в гильдию вступили двое новичков. Так получилось, что они в одном отряде из-за своих классов. И они совсем не ладят, от того они даже ещё не отправились на первое задание. Пожалуйста помоги им с этим поручением.`,
      keyboard: Keyboard.keyboard([
        [
        Keyboard.textButton({
          label: "Откaзаться",
          color: "secondary",
          payload: "26"
        })
      ],
      [
        Keyboard.textButton({
          label: "Соглaситься",
          color: "secondary",
          payload: "27"
        })
      ],
      [
        Keyboard.textButton({
          label: "Главное меню",
          color: "primary",
          payload: "project RQ"
        })
      ]
      ])
    })
  }
  if(user.quest == 11) {
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: `Направляясь к городским воротом до вас доносится шум. Какая-то парочка о чём-то спорит...\n\n- Да отдай уже!\n- Нет не отдам.\n- Я должен нести его!\n- Ты понесёшь свою зубочистку *указывает на меч*\n- Секретарша дала его нам обоим!\n- А я старше!\n- Какая разница, мы одного ранга!\n\nВы подходите к ним...\n\nВы:\n- Кхм, это вы новички из гильдии? Меня просили присоединиться к вам.\n\nКимми:\n- Да, всё верно. Меня зовут Кимми, а этот — пройдоха Тору.\nТору:\n- Эй почему это ты представляешь нас?\nКимми:\n- Сколько же повторять, я старше тебя.\nТору:\n- Это не имеет никакого значения!\nВы:\n- Если вы так не ладите, почему в одном отряде?\nТору:\n- Из-за моих способностей я должен состоять в отряде, одному мне странствовать нельзя. И теперь приходится терпеть эту выскочку.\nКимми:\n- Эй, как будто я хотела быть в одной команде с тобой. Я вообще не понимаю твоей роли, махать палкой любой дурак может.\nТору:\n- Хах, как будто выучить несколько строчек из книжки и произносить их с пафосным видом так сложно.\nКимми:\n- Ааа, терпеть тебя не могу. Как только в гильдии появятся новички - сразу же сменю напарника.\nТору:\n- Я тоже самое хотел сказать.\n*оба с надутым видом*\nВы:\n- Вам стоило бы попытаться поладить, из-за ссоры вы до сих пор не отправились на задание, поэтому меня прислали к вам. Кстати что вы не могли такое поделить?\nКимми:\n- А, этот камень дала нам секретарша, сказала что с его помощью можно узнать есть ли поблизости монстры или нет. Он чувствует маглименты внутри них, и светится когда они рядом. *сказала с умным видом*\nВы:\n- Понятно, ну раз вы не можете решить кто понесёт его, понесу его я. Да и рангом я выше.\n\nВместе с двоицей вы отправляетесь на совсем новый рудник, вблизи "Шепчущего леса". По словам рабочих, рядом могут водиться монстры, особо активны они ночью, как раз тогда когда рабочие добывают руду в шахтах. Поэтому ночью это место нужно патрулировать. Вы пришли на место ещё до сумерок. Поэтому отправились в лес за провизией...\n\nКимми:\n- ААА! *спряталась за Тору*\nТору:\n- А кто-то говорил что я бесполезен *с ухмылкой*\nКимми:\n- Идиот! Там кто-то есть. *указывает на кусты*\nТору:\n- А? *подошёл к кустам и всматривается*\nИз кустов выпрыгнул кабан и ударил Тору прямо в торс...\nКимми:\n- Хахахаха\nТору:\n*в бешенстве погнался за кабаном*\nЧерез некоторое время Тору вернулся с добычей, и вы разожгли костёр. Уже смеркалось, вы всей компанией ужинали у костра...\n\nКимми:\n- Эх, если бы я не заметила того кабана, мы не ели сейчас так вкусно.\nТору:\n- Что?! Я сделал всю работу один!\nКимми:\n- Да этот кабан чуть не забадал тебя ахахаха.\nТору:\n- Ах так, тогда отдавай его! *дерутся за мясо*\n\nПосидев ещё немного, вы замечаете что уже совсем стемнело. Рабочие просыпались, и отправлялись в шахты.\nРабочий:\n- Расчитываем на вас!\n\nВместе с Кимми и Тору, вы договорились что будете следить за камнем который вам дала Мария - поочереди. Первым были конечно же вы.\nНаблюдая за камнем было сложно не засыпать. Абсолютно никаких признаков на монстров поблизости. Кимми и Тору мило спали, хотя по лицам казалось что они спорят даже во сне...\nНеожиданно краем глаза вы замечаете какую-то фигуру, камень не загорался. Значит это определённо человек. Этот тип ошивался у шахт и что-то делал.`,
      keyboard: Keyboard.keyboard([
        [
        Keyboard.textButton({
          label: "Погнаться за силуэтом",
          color: "secondary",
          payload: "28"
        })
      ],
      [
        Keyboard.textButton({
          label: "Окликнуть силуэт",
          color: "secondary",
          payload: "29"
        })
      ],
      [
        Keyboard.textButton({
          label: "Разбудить Кимми и Тору",
          color: "secondary",
          payload: "30"
        })
      ],
      [
        Keyboard.textButton({
          label: "Главное меню",
          color: "primary",
          payload: "project RQ"
        })
      ]
      ])
    })
  }
  if(user.quest == 12) {
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: `Незаметно подобравшись, вы подходите к незнакомцу с трех сторон...\n\nВы:\n- Ты не похож на рабочего, кто ты?\nНезнакомец:\n*шёпотом* - Чёрт, меня заметили. А впрочем не важно.\nТору:\n- Эй так зачем ты здесь?!\n\nВдруг незнакомец бросил дымовую гранату. Пока дым рассеивался он успел исчезнуть. Вдруг вы замечаете какие-то искры. Это был подожённый фитиль, он вёл прямо в шахту. Вы быстро последовали за ним, оказалось он ведёт к пороховым бочкам что были заготовлены шахтёрами. Похоже тот тип решил устроить взрыв на руднике.`,
      keyboard: Keyboard.keyboard([
        [
        Keyboard.textButton({
          label: "Потушить водой",
          color: "secondary",
          payload: "31"
        })
      ],
      [
        Keyboard.textButton({
          label: "Начать выносить бочки",
          color: "secondary",
          payload: "32"
        })
      ],
      [
        Keyboard.textButton({
          label: "Перерубить фитиль",
          color: "secondary",
          payload: "33"
        })
      ],
      [
        Keyboard.textButton({
          label: "Главное меню",
          color: "primary",
          payload: "project RQ"
        })
      ]
      ])
    })
  }
  if(user.quest == 13) {
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: `После этого вы поспешили найти того человека. Однако долго искать не пришлось...\n\nРазбойник:\n- Агхаа, Гром будет в ярости! Вы пожалеете что оказались здесь!\nВы:\n- Так значит ты человек Грома, зачем тебе понадобилось взрывать рудник?!\nРазбойник:\n- Не твоё дело щенок!\n*бой*\n\nРазбойник сильно недооценил искателей приключений, и теперь терпит поражение. Однако ему хватило ещё сил чтобы сделать рывок с кинжалом в сторону Кимми. "Хотя бы одного я заберу с собой!" с этими словами он уже хотел было нанести удар, но его попытался отразить мечом Тору и разбойник ранил его в плечо. Однако Тору смог нанести ему последний удар...\n\nТору:\n*лёжа на земле с предсмертным видом*\n- Видимо мои приключения закончились не начавшись. Передайте сестре, что я люблю её...\nКимми:\n- Эй. Не разводи трагедию. *исцеляет Тору*\n\nКогда рабочие вышли из шахт вы объяснили им что здесь произошло. А после отправились в город. В гильдии вы доложили о случившемся на руднике. По словам главы, рудник видимо чем-то мешает Грому, и тот решил сразу же избавиться от него. Гильдия предпримет меры по этому поводу.`,
      keyboard: Keyboard.keyboard([
        [
        Keyboard.textButton({
          label: "Завершить 2-1",
          color: "secondary",
          payload: "project RQ"
        })
      ],
      [
        Keyboard.textButton({
          label: "Главное меню",
          color: "primary",
          payload: "project RQ"
        })
      ]
      ])
    })
  }
  if(user.quest == 14) {
    if(user.hp < 1258) return context.send(`Необходимо повысить здоровье до ❤1258`)
    if(user.atk < 298) return context.send(`Необходимо повысить атаку до ⚔298`)
    if(user.def < 107) return context.send(`Необходимо повысить защиту до 🛡107`)
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: `Направляясь к гильдии ИП, до вас доносятся знакомые голоса. Как и ожидалось, у стойки Марии спорили Кимми и Тору...\n\nКимми:\n- Я сделаю всю работу одна и получу награду тоже одна!\nТору:\n- Хаха, посмотрел бы я на это, только вот я управлюсь первее и первым получу награду!\nМария:\n- Награда будет поделена поровну, независимо от того кто справиться лучше...\n\nОднако парочка её совсем не слушала.\nЗавидев вас Мария посмотрела на вас. По взгляду вы поняли чего она хочет...`,
      keyboard: Keyboard.keyboard([
        [
        Keyboard.textButton({
          label: "Мария хочет, чтобы вы купили ей продукты",
          color: "secondary",
          payload: "34"
        })
      ],
      [
        Keyboard.textButton({
          label: "Мария хочет, чтобы вы подменили её",
          color: "secondary",
          payload: "35"
        })
      ],
      [
        Keyboard.textButton({
          label: "Мария хочет, чтобы вы помогли новичкам",
          color: "secondary",
          payload: "36"
        })
      ],
      [
        Keyboard.textButton({
          label: "Главное меню",
          color: "primary",
          payload: "project RQ"
        })
      ]
      ])
    })
  }
  if(user.quest == 15) {
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: `Мария дала вам лист с поручением. Оно заключалась в том чтобы ликвидировать тушу небольшого дракона сгинувшего недалеко от города. Это нужно сделать как можно скорее дабы тело не начало разлагаться и не заразило порчей всю округу. Условия: нельзя сжигать, а так же сбрасывать останки в реку.\n\nПосле долгого спора оба отвернулись друг от друга с надутым видом. Теперь можно отправляться на задание. Взяв Кимми и Тору вы поспешили.\n\nКимми: *ворчит*\n- Совсем скоро в гильдии появятся новички и я сменю напарника.\nТору:\n- Ну вообще-то это я сменю тебя.\nКимми:\n- Нет, я буду первее, а ты останешься один.\nТору:\n- Увы, одна останешься ты. Даже не знаю, что ты будешь делать без меня...\nКимми:\n- Хаха, это что ТЫ, будешь делать без меня. Ведь я тогда спасла тебя.\nТору:\n- Эй! Если бы не я, ты бы откинулась на первом же задании! Выходит спасал тебя я, а не ты меня.\nКимми:\n- Ааа бесишь, бесишь, бесишь!\n\nНаконец-то вы добрались до места назначения и нашли останки дракона. Приблизившись к туше, из неё вдруг начала выбираться живность, от происходящего по шее тёк холодный пот. Не самое приятное зрелище...\nПохоже мелких монстров привлекли маглименты дракона. Даже поверженный дракон представляет опасность...\n\nВместе с Кимми и Тору вы разобрались с монстрами. Однако теперь возник вопрос, как транспортировать тело, и куда?`,
      keyboard: Keyboard.keyboard([
        [
        Keyboard.textButton({
          label: "Выбросить тушу в реку",
          color: "secondary",
          payload: "37"
        })
      ],
      [
        Keyboard.textButton({
          label: "Сбросить тушу в овраг у горы Плауст",
          color: "secondary",
          payload: "38"
        })
      ],
      [
        Keyboard.textButton({
          label: "Закопать тушу",
          color: "secondary",
          payload: "39"
        })
      ],
      [
        Keyboard.textButton({
          label: "Главное меню",
          color: "primary",
          payload: "project RQ"
        })
      ]
      ])
    })
  }
  if(user.quest == 16) {
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: `Гора была не так близко. Теперь, стоит придумать, как транспортировать туда останки дракона. Втроём вы долго думали над этим. Однако у Кимми появилась идея. Можно разделить тело на несколько частей, а потом заморозить. Эта идея не такая плохая.\nВы с Тору отправляетесь за повозкой в ближайшую деревню, пока Кимми будет замораживать останки.\nЗа повозку пришлось заплатить. По вашему приходу Кимми уже закончила. Погрузивши части дракона, вы повезли их к горе. Кимми поддерживала замороженное состояние дракона, а вы с Тору тянули повозку.\n\nНаконец-то добравшись до горы, вы нашли большой овраг. Куда со спокойной душой скинули останки. Теперь можно возвращаться в гильдию.\n\nТору:\n- Эх, было довольно быстро\nКимми:\n- Да\nТору:\n- Да и как-то просто\nКимми:\n- Да\nТору:\n- Тору мой хозяин и повелитель\nКимми:\n- Да...\nТору:\n- Ахаха что с тобой? Эй\nКимми:\n- ...\n\nКажется Кимми выбилась из сил, что чуть ли не засыпала. Видимо всё из-за поддержания замороженного состояния.\n\nКогда вы выходили из под горы. То внезапно на вас напали монстры, которые видимо почуяли маглименты дракона.\nКогда вы выходили из под горы. То внезапно на вас напали монстры, которые видимо почуяли маглименты дракона.\nТеперь вы сражаетесь с чудовищами одни. Было несколько тяжело, и не обошлось без ран. Однако, вы справились.\nПосле пришлось найти Тору с Кимми.\nКимми по немногу приходила в себя. Но Тору пришлось нести её на себе, так как у неё просто не было сил на ходьбу.\n\nПо возвращении в гильдию, Кимми полностью пришла в себя...\nКимми:\n- Эй, я в порядке, могу идти сама.\nТору:\n- Может ещё что-то скажешь?\nКимми:\n- Спасибо. Так, погоди. Ты ведь ничего не делал со мной пока я была без сознания?!\nТору:\n- Конечно нет. Эй скажи ей`,
      keyboard: Keyboard.keyboard([
        [
        Keyboard.textButton({
          label: "Он трогал тебя за грудь",
          color: "secondary",
          payload: "40"
        })
      ],
      [
        Keyboard.textButton({
          label: "Он делал тебе искусственное дыхание",
          color: "secondary",
          payload: "41"
        })
      ],
      [
        Keyboard.textButton({
          label: "Он совсем ничего не делал",
          color: "secondary",
          payload: "42"
        })
      ],
      [
        Keyboard.textButton({
          label: "Завершить 2-2",
          color: "secondary",
          payload: "project RQ"
        })
      ],
      [
        Keyboard.textButton({
          label: "Главное меню",
          color: "primary",
          payload: "project RQ"
        })
      ]
      ])
    })
  }
  if(user.quest == 17) {
    if(user.hp < 1652) return context.send(`Необходимо повысить здоровье до ❤1652`)
    if(user.atk < 423) return context.send(`Необходимо повысить атаку до ⚔423`)
    if(user.def < 140) return context.send(`Необходимо повысить защиту до 🛡140`)
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: `Со вчерашнего задания прошёл ровно день, а вы уже отправляетесь в Гильдию искателей приключений. Не успев подойти к стойке Марии, вы повстречали Кимми и Тору, почему-то это было совершенно неудивительно для вас...\n\nС большой неуверенностью пара подошла к вам, хотя всего минуту назад они как обычно спорили и толкали друг друга.\nКимми:\n- Кхм, господин, ${user.nick}.\nТору:\n- У нас к вам серьёзная просьба.\nКимми:\n- Обещаем, это последняя.\nНемного помешкавшись, оба одновременно сказали:\n- Возьмите нас в свой отряд!\nТору:\n- Мы привыкли к приключениям с вами.\nКимми:\n- Вы нас часто спасали, без вас мы точно погибнем на следующем же задании.\nОба:\n- Пожалуйста не отказывайте нам!`,
      keyboard: Keyboard.keyboard([
        [
        Keyboard.textButton({
          label: "Да, конечно",
          color: "secondary",
          payload: "43"
        })
      ],
      [
        Keyboard.textButton({
          label: "Ну, хорошо",
          color: "secondary",
          payload: "44"
        })
      ],
      [
        Keyboard.textButton({
          label: "Отказываю",
          color: "secondary",
          payload: "45"
        })
      ],
      [
        Keyboard.textButton({
          label: "Главное меню",
          color: "primary",
          payload: "project RQ"
        })
      ]
      ])
    })
  }
  if(user.quest == 18) {
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: `Создать отряд было не так тяжело, а Мария была очень рада. По её словам она боялась за этих двоих, однако теперь с вами у них больше шансов не погибнуть... Как говорится: "Хороший искатель приключений - живой искатель приключений.\n\nКимми и Тору выглядели ещё не восстановившимися после вчерашнего задания, да и вы сами имели пару ран. Поэтому, было принято решение взять задание в стенах города.\nВместе вы отправились на стройку новой винокурни, работа заключалась в разгрузке стройматериалов.\n\nСолнце светило ярко, а из-за отсутствия ветра стоял зной. Тору успев поранить уже несколько пальцев, выбился из сил...\n\nКимми:\n- Эй, ты чего отлыниваешь?!\nТору:\n- Я, в отличие от тебя, носил груза куда больше.\nКимми:\n- Тебя не просили носить кирпичи. Аргонавт ты наш.\nТору:\n- Киммиии, ну используй пожалуйста восстановление на мне.\nКимми:\n- Ещё чего, я не использую заклинания на такую чепуху.\nТору:\n- Эй, тебя не учили, что друзья важнее своих принципов?\nКимми:\n- Ааааа, ладно, иначе ты не отстанешь.\nТору:\n- О богиня, благослови же меня. (С пафосом и на коленях сказал Тору)\n\nПосле восстановления Тору заметно стало лучше. И работа пошла быстрее\n\nСолнце наконец-то стало заходить, а рабочие часы закончились. Все получили плату за работу. Однако на Кимми и Тору будто лица не было...\n\nКимми:\n- Я и до этого в гильдии не много получала, но здесь вообще 1/2 от той суммы...\nГлавный строитель:\n- Здесь не нужно рисковать жизнью, чтобы получить плату. Если хотите больше денег, берите задания ранга S (С недовольством ответил строитель)\nС недовольной парочкой вы уходите со стройки.\nВы думаете над тем, чтобы сходить куда-то после тяжёлого рабочего дня...`,
      keyboard: Keyboard.keyboard([
        [
        Keyboard.textButton({
          label: "Сходить в закусочную",
          color: "secondary",
          payload: "46"
        })
      ],
      [
        Keyboard.textButton({
          label: "Сходить на фонтанную площадь",
          color: "secondary",
          payload: "47"
        })
      ],
      [
        Keyboard.textButton({
          label: "Сходить в бар",
          color: "secondary",
          payload: "48"
        })
      ],
      [
        Keyboard.textButton({
          label: "Главное меню",
          color: "primary",
          payload: "project RQ"
        })
      ]
      ])
    })
  }
  if(user.quest == 19) {
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: `Зайдя в трактир, вы садитесь за первый же столик. У вас принимают заказ...\nВы:\n- Куриный шашлычок с грибами, сливочное рагу, мятный салат, и виноградный эль, пожалуйста.\nОфициантка:\nХорошо, а чего желаете вы?\nТору долго всматривался в меню, и наконец-то ответил:\n- Кхм, лапшу пожалуйста.\nОфициантка:\n- Ещё что-то?\nТору:\n- Стакан воды.\nОфициантка:\n- А чего...\nНе дав ей договорить, Кимми сразу ответила:\n- Мне то же, что и ему.\n\nВсю трапезу вам было неловко есть, ведь ваш ужин казался куда роскошнее чем простая лапша...\n\nВы решили предложить Кимми и Тору разделить ужин, но они вежливо отказали`,
      keyboard: Keyboard.keyboard([
        [
        Keyboard.textButton({
          label: "Повторно предложить и надавить на парочку",
          color: "secondary",
          payload: "49"
        })
      ],
      [
        Keyboard.textButton({
          label: "Как можно скорее закончить есть",
          color: "secondary",
          payload: "50"
        })
      ],
      [
        Keyboard.textButton({
          label: "Главное меню",
          color: "primary",
          payload: "project RQ"
        })
      ]
      ])
    })
  }
  if(user.quest == 20) {
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: `Вас мучил вопрос, почему они выбрали такой скромный ужин.\nВы:\n- Кимми, Тору, почему вы так мало заказали?\nКимми:\n- Кхм, я забыла деньги дома, а плата за работу действительно очень маленькая.\nТору:\n- Может хватит притворяться? Ты не могла забыть то, чего нет.\nКимми:\n- А сам то почему одну лапшу взял?\nТору:\n- Кхм, финансовые трудности.\nКимми:\n- И давно они у тебя?\nТору:\n- Хорошо-хорошо, я тоже на мели. Мои изначальные запасы кончились совсем недавно.\nКимми:\n- Мои тоже...\nВы:\n- А здесь вы очень похожи.\nТору:\n- Я взял деньги у отца, и надеялся что этого хватит на первое время. Оказалось что нет, но я не собираюсь возвращаться к нему!\nКимми:\n- Ого... Действительно похожи. У меня был такой же план, когда уходила из дома. Но кто знал что деньги так быстро кончаются...\nИ да, я не намерена возвращаться.\nВы:\n- А где вы ночуете?\nТору:\n- На сеновале...\nКимми:\n- ...\nВы:\n- Ну что же, раз мы теперь отряд, почему бы нам не спать под одной крышей?`,
      keyboard: Keyboard.keyboard([
        [
        Keyboard.textButton({
          label: "Отправиться втроём на сеновал",
          color: "secondary",
          payload: "51"
        })
      ],
      [
        Keyboard.textButton({
          label: "Пригласить Кимми и Тору к себе домой",
          color: "secondary",
          payload: "52"
        })
      ],
      [
        Keyboard.textButton({
          label: "Главное меню",
          color: "primary",
          payload: "project RQ"
        })
      ]
      ])
    })
  
  }
  if(user.quest == 21) {
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: `Подойдя к дому, вы приглашаете парочку зайти\nТору:\n- Что это за место?\nВы:\n- Мой дом\nКимми:\n- Чтоо?! Вы и так слишком много сделали для нас`,
      keyboard: Keyboard.keyboard([
        [
        Keyboard.textButton({
          label: `На "Вы" слишком официально. Перейдём на "Ты"`,
          color: "secondary",
          payload: "53"
        })
      ],
      [
        Keyboard.textButton({
          label: "Ничего, мы же теперь отряд",
          color: "secondary",
          payload: "54"
        })
      ],
      [
        Keyboard.textButton({
          label: "Это мелочи, вы заслужили",
          color: "secondary",
          payload: "55"
        })
      ],
      [
        Keyboard.textButton({
          label: "Главное меню",
          color: "primary",
          payload: "project RQ"
        })
      ]
      ])
    })
  }
  if(user.quest == 22) {
    await vk.api.messages.send({
      peer_id: context.peerId,
      message: `Так как в доме было лишь 2 комнаты, вы выделили парочке самую большую из них, и сказали обустроиться там. Все дружно, вы заснули крепким сном после тяжёлого дня`,
      keyboard: Keyboard.keyboard([
        [
        Keyboard.textButton({
          label: "Завершить 2-3",
          color: "secondary",
          payload: "project RQ"
        })
      ],
      [
        Keyboard.textButton({
          label: "Главное меню",
          color: "primary",
          payload: "project RQ"
        })
      ]
      ])
    })
  }
  if(user.quest >= 23) {
    if(user.hp < 1855) return context.send(`Необходимо повысить здоровье до ❤1855`)
    if(user.atk < 451) return context.send(`Необходимо повысить атаку до ⚔451`)
    if(user.def < 155) return context.send(`Необходимо повысить защиту до 🛡155`)
    context.send(`Дальнейший сюжет находится в процессе написания. Спасибо, что смогли дойти до этого сообщения`)
  }
})

  console.log("Бот запущен!");
  vk.updates.start().catch(console.error)